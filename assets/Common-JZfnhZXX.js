import{j as e,b9 as s,bq as t,bV as a,df as n,B as i,D as r,dg as o,Q as c,bt as g,r as l,o as d,aw as u,K as m,dh as p,ah as h,di as f}from"./index-C_g2pi0Z.js";import{b}from"./useTitle-a7nPsmVE.js";import{I as y}from"./SettingItem-CR5VVA99.js";import{R as j}from"./ResponsiveGrid-Dzear67t.js";import"./index-DYpWq1ju.js";import"./index-DJbwiRYC.js";import"./index-CRWiqiAK.js";import"./item_type-Bo2djN9R.js";const w=w=>{const _=d(),{pathname:k}=e();b(`manage.sidemenu.${k().split("/").pop()}`);const[$,v]=s(()=>t.get(`/admin/setting/list?group=${w.group}`)),[x,C]=a([]),I=async()=>{const e=await v();g(e,C)};I();const[S,D]=s(()=>t.post("/admin/setting/save",n(x))),[R,q]=s(()=>t.post(`/admin/setting/default?group=${w.group}`)),[B,G]=i(!1);return r(h,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[r(j,{get children(){return r(o,{each:x,children:e=>r(y,c(e,{onChange:s=>{C(s=>e().key===s.key,"value",s)},onDelete:async()=>{G(!0);const s=await t.post(`/admin/setting/delete?key=${e().key}`);G(!1),g(s,()=>{l.success(_("global.delete_success")),I()})}}))})}}),r(u,{spacing:"$2",get children(){return[r(m,{colorScheme:"accent",onClick:I,get loading(){return $()||B()||R()},get children(){return _("global.refresh")}}),r(m,{get loading(){return S()},onClick:async()=>{const e=await D();g(e,async()=>{l.success(_("global.save_success")),p(await t.get("/public/settings"),f)})},get children(){return _("global.save")}}),r(m,{colorScheme:"warning",get loading(){return $()||B()||R()},onClick:async()=>{const e=await q();g(e,e=>{l.info(_("manage.load_default_setting_success")),C(e)})},get children(){return _("manage.load_default_setting")}})]}})]}})};export{w as default};
