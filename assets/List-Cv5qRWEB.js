import{bU as e,P as t,j as r,D as n,aw as i,S as a,dQ as o,a_ as l,aM as s,aQ as c,aE as u,ag as d,q as g,cA as m,cM as h,bT as b,$ as p,ab as f,av as w,B as j,C as x,b0 as k,dR as y,dS as v,dT as $,Q as C,o as A,dU as _,R as M,a4 as S,dV as z,ah as D}from"./index-C_g2pi0Z.js";import{b as K}from"./style-CDMzdolg.js";import{J as P}from"./index-DJbwiRYC.js";import{O,g as T}from"./icon-Bsr_iDeP.js";import{I as E,u as I}from"./helper-sowZH77k.js";const L=[{name:"name",textAlign:"left",w:{"@initial":"76%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"24%","@md":"17%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"33%"}}],Q=j=>{const{isHide:x}=e();if(x(j.obj))return null;const{setPathAs:k}=t(),{show:y}=K({id:1}),{pushHref:v,to:$}=r(),{openWithDoubleClick:C,toggleWithClick:A,restoreSelectionCache:_}=I(),M=()=>g.list_item_filename_overflow;return n(w.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return n(i,{get classList(){return{selected:!!j.obj.selected}},class:"list-item viselect-item",get"data-index"(){return j.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:p()}},as:P,get href(){return j.obj.name},get cursor(){return C()||A()?"default":"pointer"},get bgColor(){return f(()=>!!j.obj.selected)()?p():void 0},"on:dblclick":()=>{C()&&(o(j.index,!0,!0),$(v(j.obj.name)))},"on:click":e=>{if(e.preventDefault(),!C()&&!(e.ctrlKey||e.metaKey||e.shiftKey)&&_())return A()?o(j.index,!j.obj.selected):void $(v(j.obj.name))},onMouseEnter:()=>{k(j.obj.name,j.obj.is_dir,!0)},onContextMenu:e=>{b(()=>{o(j.index,!0,!0)}),y(e,{props:j.obj})},get children(){return[n(i,{class:"name-box",spacing:"$1",get w(){return L[0].w},get children(){return[n(a,{get when(){return l()},get children(){return n(E,{"on:mousedown":e=>{e.stopPropagation()},"on:click":e=>{e.stopPropagation()},get checked(){return j.obj.selected},onChange:e=>{o(j.index,e.target.checked)}})}}),n(s,{class:"icon",boxSize:"$6",get color(){return u()},get as(){return T(j.obj)},mr:"$1",get cursor(){return j.obj.type!==O.IMAGE?"inherit":"pointer"},"on:click":e=>{j.obj.type===O.IMAGE&&(e.ctrlKey||e.metaKey||e.shiftKey||_()&&(c.emit("gallery",j.obj.name),e.preventDefault(),e.stopPropagation()))}}),n(d,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:"multi_line"===M()?"unset":"nowrap","overflow-x":"scrollable"===M()?"auto":"hidden",textOverflow:"ellipsis"===M()?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return j.obj.name},get children(){return j.obj.name}})]}}),n(d,{class:"size",get w(){return L[1].w},get textAlign(){return L[1].textAlign},get children(){return m(j.obj.size)}}),n(d,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return L[2].w},get textAlign(){return L[2].textAlign},get children(){return h(j.obj.modified)}})]}})}})},W=e=>{const t=A(),[r,o]=j(),[s,c]=j(!1);x(()=>{r()&&e.sortCallback(r(),s())});const u=e=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:e.textAlign,cursor:"pointer",onClick:()=>{e.name===r()?c(!s()):b(()=>{o(e.name),c(!1)})}});return n(i,{class:"title",w:"$full",p:"$2",get children(){return[n(i,{get w(){return L[0].w},spacing:"$1",get children(){return[n(a,{get when(){return f(()=>!e.disableCheckbox)()&&l()},get children(){return n(E,{get checked(){return v()},get indeterminate(){return y()},onChange:e=>{k(e.target.checked)}})}}),f(()=>f(()=>!!$())()?n(d,C(()=>u(L[0]),{get children(){return $()}})):n(d,C(()=>u(L[0]),{get children(){return t(`home.obj.${L[0].name}`)}})))]}}),n(d,C({get w(){return L[1].w}},()=>u(L[1]),{get children(){return t(`home.obj.${L[1].name}`)}})),n(d,C({get w(){return L[2].w}},()=>u(L[2]),{display:{"@initial":"none","@md":"inline"},get children(){return t(`home.obj.${L[2].name}`)}}))]}})},B=Object.freeze(Object.defineProperty({__proto__:null,ListTitle:W,default:()=>{const{registerSelectContainer:e,captureContentMenu:t}=I();return e(),n(D,{onDragOver:e=>{var t,r;const n=Array.from(null!=(r=null==(t=e.dataTransfer)?void 0:t.items)?r:[]);for(let i=0;i<n.length;i++)if("file"===n[i].kind){c.emit("tool","upload"),e.preventDefault();break}},"oncapture:contextmenu":t,class:"list viselect-container",w:"$full",spacing:"$1",get children(){return[n(W,{sortCallback:_}),n(M,{get each(){return S.objs},children:(e,t)=>n(Q,{obj:e,get index(){return t()}})}),n(a,{get when(){return"visible"===g.show_count_msg},get children(){return n(d,{size:"sm",color:"$neutral11",get children(){return z()}})}})]}})}},Symbol.toStringTag,{value:"Module"}));export{W as L,B as a,L as c};
