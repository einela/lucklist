function t(){return Kv}function e(t){Kv>=Xv.INFOS&&console.log(`Info: ${t}`)}function i(t){Kv>=Xv.WARNINGS&&console.log(`Warning: ${t}`)}function n(t){throw new Error(t)}function s(t,e){t||n(e)}function r(t,e=null,i=null){if(!t)return null;if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);(null==e?void 0:e.length)>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch{}}const n=e?URL.parse(t,e):URL.parse(t);return function(t){switch(null==t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n)?n:null}function a(t,e,i=!1){const n=URL.parse(t);return n?(n.hash=e,n.href):i&&r(t,"http://example.com")?t.split("#",1)[0]+""+(e?`#${e}`:""):""}function o(t,e,i,n=!1){return Object.defineProperty(t,e,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}function l(t){"object"==typeof t&&void 0!==(null==t?void 0:t.length)||n("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const s=[];for(let n=0;n<e;n+=i){const r=Math.min(n+i,e),a=t.subarray(n,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function h(t){"string"!=typeof t&&n("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let n=0;n<e;++n)i[n]=255&t.charCodeAt(n);return i}function u(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),l(t)}function c(t,e,i){return Math.min(Math.max(t,e),i)}function d(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(l(t))}async function p(t,e="text"){if(v(t,document.baseURI)){const i=await fetch(t);if(!i.ok)throw new Error(i.statusText);switch(e){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,n)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)n(new Error(s.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void i(s.response)}i(s.responseText)}},s.send(null)})}function g(t){const e=t.length;let i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}function f(t){return"string"==typeof t&&/\.pdf$/i.test(t)}function m(t,e="document.pdf"){if("string"!=typeof t)return e;if(g(t))return i('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(t=>{try{return new URL(t)}catch{try{return new URL(decodeURIComponent(t))}catch{try{return new URL(t,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(t),"https://foo.bar")}catch{return null}}}}})(t);if(!n)return e;const s=t=>{try{let e=decodeURIComponent(t);return e.includes("/")?(e=e.split("/").at(-1),e.test(/^\.pdf$/i)?e:t):e}catch{return t}},r=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(r.test(a))return s(a);if(n.searchParams.size>0){const t=Array.from(n.searchParams.values()).reverse();for(const i of t)if(r.test(i))return s(i);const e=Array.from(n.searchParams.keys()).reverse();for(const i of e)if(r.test(i))return s(i)}if(n.hash){const t=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(t)return s(t[0])}return e}function v(t,e){const i=e?URL.parse(t,e):URL.parse(t);return"http:"===(null==i?void 0:i.protocol)||"https:"===(null==i?void 0:i.protocol)}function w(t){t.preventDefault()}function b(t){t.preventDefault(),t.stopPropagation()}function y(t,{scale:e=1,rotation:i=0}){const{width:n,height:s}=t.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new dw({viewBox:r,userUnit:1,scale:e,rotation:i})}function A(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(t=>parseInt(t)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(i(`Not a valid color format: "${t}"`),[0,0,0])}function _(t){const{a:e,b:i,c:n,d:s,e:r,f:a}=t.getTransform();return[e,i,n,s,r,a]}function x(t){const{a:e,b:i,c:n,d:s,e:r,f:a}=t.getTransform().invertSelf();return[e,i,n,s,r,a]}function E(t,e,i=!1,n=!0){if(e instanceof dw){const{pageWidth:n,pageHeight:s}=e.rawDims,{style:r}=t,a=sw.isCSSRoundSupported,o=`var(--total-scale-factor) * ${n}px`,l=`var(--total-scale-factor) * ${s}px`,h=a?`round(down, ${o}, var(--scale-round-x))`:`calc(${o})`,u=a?`round(down, ${l}, var(--scale-round-y))`:`calc(${l})`;i&&e.rotation%180!=0?(r.width=u,r.height=h):(r.width=h,r.height=u)}n&&t.setAttribute("data-main-rotation",e.rotation)}function S(t,e,i){for(const n of i)e.addEventListener(n,t[n].bind(t))}function C(t){if("string"!=typeof t)return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}function k(){}function M(t){if(t instanceof nw||t instanceof tw||t instanceof Zv||t instanceof ew||t instanceof Jv)return t;switch(t instanceof Error||"object"==typeof t&&null!==t||n('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new nw(t.message);case"InvalidPDFException":return new tw(t.message);case"PasswordException":return new Zv(t.message,t.code);case"ResponseException":return new ew(t.message,t.status,t.missing);case"UnknownErrorException":return new Jv(t.message,t.details)}return new Jv(t.message,t.toString())}async function P(t){const e=process.getBuiltinModule("fs"),i=await e.promises.readFile(t);return new Uint8Array(i)}function F(t,e){if(!e)return;const i=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],i,n),t.clip(s)}function D(t,e,i,n,s,r,a,o){const l=e.coords,h=e.colors,u=t.data,c=4*t.width;let d;l[i+1]>l[n+1]&&(d=i,i=n,n=d,d=r,r=a,a=d),l[n+1]>l[s+1]&&(d=n,n=s,s=d,d=a,a=o,o=d),l[i+1]>l[n+1]&&(d=i,i=n,n=d,d=r,r=a,a=d);const p=(l[i]+e.offsetX)*e.scaleX,g=(l[i+1]+e.offsetY)*e.scaleY,f=(l[n]+e.offsetX)*e.scaleX,m=(l[n+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,w=(l[s+1]+e.offsetY)*e.scaleY;if(g>=w)return;const b=h[r],y=h[r+1],A=h[r+2],_=h[a],x=h[a+1],E=h[a+2],S=h[o],C=h[o+1],k=h[o+2],M=Math.round(g),P=Math.round(w);let F,D,T,I,L,R,N,O;for(let W=M;W<=P;W++){if(W<m){const t=W<g?0:(g-W)/(g-m);F=p-(p-f)*t,D=b-(b-_)*t,T=y-(y-x)*t,I=A-(A-E)*t}else{let t;t=W>w?1:m===w?0:(m-W)/(m-w),F=f-(f-v)*t,D=_-(_-S)*t,T=x-(x-C)*t,I=E-(E-k)*t}let t;t=W<g?0:W>w?1:(g-W)/(g-w),L=p-(p-v)*t,R=b-(b-S)*t,N=y-(y-C)*t,O=A-(A-k)*t;const e=Math.round(Math.min(F,L)),i=Math.round(Math.max(F,L));let n=c*W+4*e;for(let s=e;s<=i;s++)t=(F-s)/(F-L),t<0?t=0:t>1&&(t=1),u[n++]=D-(D-R)*t|0,u[n++]=T-(T-N)*t|0,u[n++]=I-(I-O)*t|0,u[n++]=255}}function T(t,e,i){const n=e.coords,s=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,h=o-1;for(r=0;r<l;r++){let e=r*o;for(let r=0;r<h;r++,e++)D(t,i,n[e],n[e+1],n[e+o],s[e],s[e+1],s[e+o]),D(t,i,n[e+o+1],n[e+1],n[e+o],s[e+o+1],s[e+1],s[e+o])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)D(t,i,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}function I({src:t,srcPos:e=0,dest:i,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=sw.isLittleEndian?4278190080:255,[l,h]=a?[r,o]:[o,r],u=n>>3,c=7&n,d=t.length;i=new Uint32Array(i.buffer);let p=0;for(let g=0;g<s;g++){for(const s=e+u;e<s;e++){const n=e<d?t[e]:255;i[p++]=128&n?h:l,i[p++]=64&n?h:l,i[p++]=32&n?h:l,i[p++]=16&n?h:l,i[p++]=8&n?h:l,i[p++]=4&n?h:l,i[p++]=2&n?h:l,i[p++]=1&n?h:l}if(0===c)continue;const n=e<d?t[e++]:255;for(let t=0;t<c;t++)i[p++]=n&1<<7-t?h:l}return{srcPos:e,destPos:p}}function L(t,e,i,n,s,r,a,o,l,h){const[u,c,d,p,g,f]=_(t);if(0===c&&0===d){const m=a*u+g,v=Math.round(m),w=o*p+f,b=Math.round(w),y=(a+l)*u+g,A=Math.abs(Math.round(y)-v)||1,_=(o+h)*p+f,x=Math.abs(Math.round(_)-b)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(p),v,b),t.drawImage(e,i,n,s,r,0,0,A,x),t.setTransform(u,c,d,p,g,f),[A,x]}if(0===u&&0===p){const m=o*d+g,v=Math.round(m),w=a*c+f,b=Math.round(w),y=(o+h)*d+g,A=Math.abs(Math.round(y)-v)||1,_=(a+l)*c+f,x=Math.abs(Math.round(_)-b)||1;return t.setTransform(0,Math.sign(c),Math.sign(d),0,v,b),t.drawImage(e,i,n,s,r,0,0,x,A),t.setTransform(u,c,d,p,g,f),[x,A]}return t.drawImage(e,i,n,s,r,a,o,l,h),[Math.hypot(u,c)*l,Math.hypot(d,p)*h]}function R(t,e){if(e instanceof ImageData)return void t.putImageData(e,0,0);const i=e.height,n=e.width,s=i%bb,r=(i-s)/bb,a=0===s?r:r+1,o=t.createImageData(n,bb);let l,h=0;const u=e.data,c=o.data;let d,p,g,f;if(e.kind===Gv.GRAYSCALE_1BPP){const e=u.byteLength,i=new Uint32Array(c.buffer,0,c.byteLength>>2),f=i.length,m=n+7>>3,v=4294967295,w=sw.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(g=d<r?bb:s,l=0,p=0;p<g;p++){const t=e-h;let s=0;const r=t>m?n:8*t-7,a=-8&r;let o=0,c=0;for(;s<a;s+=8)c=u[h++],i[l++]=128&c?v:w,i[l++]=64&c?v:w,i[l++]=32&c?v:w,i[l++]=16&c?v:w,i[l++]=8&c?v:w,i[l++]=4&c?v:w,i[l++]=2&c?v:w,i[l++]=1&c?v:w;for(;s<r;s++)0===o&&(c=u[h++],o=128),i[l++]=c&o?v:w,o>>=1}for(;l<f;)i[l++]=0;t.putImageData(o,0,d*bb)}}else if(e.kind===Gv.RGBA_32BPP){for(p=0,f=n*bb*4,d=0;d<r;d++)c.set(u.subarray(h,h+f)),h+=f,t.putImageData(o,0,p),p+=bb;d<a&&(f=n*s*4,c.set(u.subarray(h,h+f)),t.putImageData(o,0,p))}else{if(e.kind!==Gv.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(g=bb,f=n*g,d=0;d<a;d++){for(d>=r&&(g=s,f=n*g),l=0,p=f;p--;)c[l++]=u[h++],c[l++]=u[h++],c[l++]=u[h++],c[l++]=255;t.putImageData(o,0,d*bb)}}}function N(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const i=e.height,n=e.width,s=i%bb,r=(i-s)/bb,a=0===s?r:r+1,o=t.createImageData(n,bb);let l=0;const h=e.data,u=o.data;for(let c=0;c<a;c++){const e=c<r?bb:s;({srcPos:l}=I({src:h,srcPos:l,dest:u,width:n,height:e,nonBlackColor:0})),t.putImageData(o,0,c*bb)}}function O(t,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of i)void 0!==t[n]&&(e[n]=t[n]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function W(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}function B(t,e){if(e)return!0;aw.singularValueDecompose2dScale(t,Ab);const i=Math.fround(mw.pixelRatio*cw.PDF_TO_CSS_UNITS);return Ab[0]<=i&&Ab[1]<=i}function j(t,e){const i=new Headers;if(!t||!e||"object"!=typeof e)return i;for(const n in e){const t=e[n];void 0!==t&&i.append(n,t)}return i}function V(t){var e,i;return null!=(i=null==(e=URL.parse(t))?void 0:e.origin)?i:null}function $({responseHeaders:t,isHttp:e,rangeChunkSize:i,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(t.get("Content-Length"),10);return Number.isInteger(r)?(s.suggestedLength=r,r<=2*i||n||!e||"bytes"!==t.get("Accept-Ranges")||"identity"!==(t.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s):s}function H(t){const e=t.get("Content-Disposition");if(e){let t=function(t){function e(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function i(t,e){if(t){if(!/^[\x00-\xFF]+$/.test(e))return e;try{const i=new TextDecoder(t,{fatal:!0}),n=h(e);e=i.decode(n),o=!1}catch{}}return e}function n(t){return o&&/[\x80-\xff]/.test(t)&&(t=i("utf-8",t),o&&(t=i("iso-8859-1",t))),t}function s(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function r(t){const e=t.indexOf("'");return-1===e?t:i(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function a(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,n,s){if("q"===n||"Q"===n)return i(e,s=(s=s.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}));try{s=atob(s)}catch{}return i(e,s)})}let o=!0,l=e("filename\\*","i").exec(t);if(l){l=l[1];let t=s(l);return t=unescape(t),t=r(t),t=a(t),n(t)}if(l=function(t){const i=[];let n;const a=e("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=a.exec(t));){let[,t,e,s]=n;if(t=parseInt(t,10),t in i){if(0===t)break}else i[t]=[e,s]}const o=[];for(let e=0;e<i.length&&e in i;++e){let[t,n]=i[e];n=s(n),t&&(n=unescape(n),0===e&&(n=r(n))),o.push(n)}return o.join("")}(t),l)return n(a(l));if(l=e("filename","i").exec(t),l){l=l[1];let t=s(l);return t=a(t),n(t)}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(f(t))return t}return null}function z(t,e){return new ew(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,404===t||0===t&&e.startsWith("file:"))}function U(t){return 200===t||206===t}function G(t,e,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function q(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(i(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}function X(t={}){var e,i;"string"==typeof t||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const n=new ty,{docId:s}=n,r=t.url?function(t){if(t instanceof URL)return t.href;if("string"==typeof t){if(Bv)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(t.url):null,a=t.data?function(t){if(Bv&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return h(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"==typeof t&&!isNaN(null==t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(t.data):null,o=t.httpHeaders||null,l=!0===t.withCredentials,u=null!=(e=t.password)?e:null,c=t.range instanceof ey?t.range:null,d=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:65536;let p=t.worker instanceof sy?t.worker:null;const f=t.verbosity,m="string"!=typeof t.docBaseUrl||g(t.docBaseUrl)?null:t.docBaseUrl,w=C(t.cMapUrl),b=!1!==t.cMapPacked,y=t.CMapReaderFactory||(Bv?ob:Zw),A=C(t.iccUrl),_=C(t.standardFontDataUrl),x=t.StandardFontDataFactory||(Bv?lb:ib),E=C(t.wasmUrl),S=t.WasmFactory||(Bv?hb:sb),k=!0!==t.stopAtErrors,M=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,P=!1!==t.isEvalSupported,F="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!Bv,D="boolean"==typeof t.isImageDecoderSupported?t.isImageDecoderSupported:!Bv&&(sw.platform.isFirefox||!globalThis.chrome),T=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,I="boolean"==typeof t.disableFontFace?t.disableFontFace:Bv,L=!0===t.fontExtraProperties,R=!0===t.enableXfa,N=t.ownerDocument||globalThis.document,O=!0===t.disableRange,W=!0===t.disableStream,B=!0===t.disableAutoFetch,j=!0===t.pdfBug,V=t.CanvasFactory||(Bv?ab:Kw),$=t.FilterFactory||(Bv?rb:tb),H=!0===t.enableHWA,z=!1!==t.useWasm,U=c?c.length:null!=(i=t.length)?i:NaN,G="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!Bv&&!I,q="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:!!(y===Zw&&x===ib&&S===sb&&w&&_&&E&&v(w,document.baseURI)&&v(_,document.baseURI)&&v(E,document.baseURI));var X;X=f,Number.isInteger(X)&&(Kv=X);const Y={canvasFactory:new V({ownerDocument:N,enableHWA:H}),filterFactory:new $({docId:s,ownerDocument:N}),cMapReaderFactory:q?null:new y({baseUrl:w,isCompressed:b}),standardFontDataFactory:q?null:new x({baseUrl:_}),wasmFactory:q?null:new S({baseUrl:E})};p||(p=sy.create({verbosity:f,port:Fb.workerPort}),n._worker=p);const K={docId:s,apiVersion:"5.4.54",data:a,password:u,disableAutoFetch:B,rangeChunkSize:d,length:U,docBaseUrl:m,enableXfa:R,evaluatorOptions:{maxImageSize:M,disableFontFace:I,ignoreErrors:k,isEvalSupported:P,isOffscreenCanvasSupported:F,isImageDecoderSupported:D,canvasMaxAreaInBytes:T,fontExtraProperties:L,useSystemFonts:G,useWasm:z,useWorkerFetch:q,cMapUrl:w,iccUrl:A,standardFontDataUrl:_,wasmUrl:E}},Q={ownerDocument:N,pdfBug:j,styleElement:null,loadingParams:{disableAutoFetch:B,enableXfa:R}};return p.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const t=p.messageHandler.sendWithPromise("GetDocRequest",K,a?[a.buffer]:null);let e;if(c)e=new Rb(c,{disableRange:O,disableStream:W});else if(!a){if(!r)throw new Error("getDocument - no `url` parameter provided.");const t=v(r)?Wb:Bv?Gb:$b;e=new t({url:r,length:U,httpHeaders:o,withCredentials:l,rangeChunkSize:d,disableRange:O,disableStream:W})}return t.then(t=>{if(n.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const i=new Xw(s,t,p.port),r=new ry(i,n,e,Q,Y,H);n._transport=r,i.send("Ready",null)})}).catch(n._capability.reject),n}function Y(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function K(t){return Math.max(0,Math.min(255,255*t))}function Q(t){var e=xA[t];if(void 0!==e)return e.exports;var i=xA[t]={exports:{}};return _A[t].call(i.exports,i,i.exports,Q),i.exports}function Z(t,e,i=!1){let n=t.offsetParent;if(!n)return void console.error("offsetParent is not set -- cannot scroll");let s=t.offsetTop+t.clientTop,r=t.offsetLeft+t.clientLeft;for(;n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||i&&(n.classList.contains("markedContent")||"hidden"===getComputedStyle(n).overflow);)if(s+=n.offsetTop,r+=n.offsetLeft,n=n.offsetParent,!n)return;e&&(void 0!==e.top&&(s+=e.top),void 0!==e.left&&(r+=e.left,n.scrollLeft=r)),n.scrollTop=s}function J(t){const e=new Map;for(const[i,n]of new URLSearchParams(t))e.set(i.toLowerCase(),n);return e}function tt(t,e=!1){return S_.test(t)?e?t.replaceAll(S_,t=>"\0"===t?"":" "):t.replaceAll("\0",""):t}function et(t,e,i=0){let n=i,s=t.length-1;if(s<0||!e(t[s]))return t.length;if(e(t[n]))return n;for(;n<s;){const i=n+s>>1;e(t[i])?s=i:n=i+1}return n}function it(t){if(Math.floor(t)===t)return[t,1];const e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const i=t>1?e:t;let n,s=0,r=1,a=1,o=1;for(;;){const t=s+a,e=r+o;if(e>8)break;i<=t/e?(a=t,o=e):(s=t,r=e)}return n=i-s/r<a/o-i?i===t?[s,r]:[r,s]:i===t?[a,o]:[o,a],n}function nt(t,e){return t-t%e}function st(t){return Number.isInteger(t)&&t%90==0}function rt(t){return t.width<=t.height}function at(t){return function(t){return t<11904}(t)?function(t){return!(65408&t)}(t)?function(t){return 32===t||9===t||13===t||10===t}(t)?M_:function(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function(t){return t>=48&&t<=57}(t)||95===t?P_:F_:function(t){return 3584==(65408&t)}(t)?R_:160===t?M_:P_:function(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t)?D_:function(t){return t>=12448&&t<=12543}(t)?T_:function(t){return t>=12352&&t<=12447}(t)?I_:function(t){return t>=65376&&t<=65439}(t)?L_:P_}function ot(t,e={}){var i;const n=[];let s;for(;null!==(s=U_.exec(t));){let{index:t}=s;for(const e of s[0]){let i=G_.get(e);i||(i=e.normalize("NFD").length,G_.set(e,i)),n.push([i,t++])}}const r=n.length>0,a=null!=(i=e.ignoreDashEOL)&&i;let o;if(!r&&X_)o=X_;else if(r&&Y_)o=Y_;else{const t=Object.keys(W_).join(""),e=(N_||(N_=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),N_);o=new RegExp([`[${t}]`,`[${e}]`,"(?:゙|゚)\\n","\\p{M}+(?:-\\n)?","\\p{Ll}-\\n(?=\\p{Ll})|\\p{Lu}-\\n(?=\\p{L})","\\S-\\n","(?:\\p{Ideographic}|[぀-ヿ])\\n","\\n",r?"[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]":"\\u0000"].map(t=>`(${t})`).join("|"),"gum"),r?Y_=o:X_=o}const l=[];for(;null!==(s=V_.exec(t));)l.push([s[0].length,s.index]);let h=t.normalize("NFD");const u=[0,0];let c=0,d=0,p=0,g=0,f=0,m=!1;h=h.replace(o,(t,e,i,s,r,o,h,v,w,b,y)=>{var A,_,x;if(y-=g,e){const t=W_[e],i=t.length;for(let e=1;e<i;e++)u.push(y-p+e,p-e);return p-=i-1,t}if(i){let t=q_.get(i);t||(t=i.normalize("NFKC"),q_.set(i,t));const e=t.length;for(let i=1;i<e;i++)u.push(y-p+i,p-i);return p-=e-1,t}if(s)return m=!0,y+f===(null==(A=l[c])?void 0:A[1])?++c:(u.push(y-1-p+1,p-1),p-=1,g+=1),u.push(y-p+1,p),g+=1,f+=1,s.charAt(0);if(r){const t=r.endsWith("\n"),e=t?r.length-2:r.length;m=!0;let i=e;y+f===(null==(_=l[c])?void 0:_[1])&&(i-=l[c][0],++c);for(let n=1;n<=i;n++)u.push(y-1-p+n,p-n);return p-=i,g+=i,t?(y+=e-1,u.push(y-p+1,1+p),p+=1,g+=1,f+=1,r.slice(0,e)):r}if(o){if(a)return g+=1,f+=1,o.slice(0,-1);const t=o.length-2;return u.push(y-p+t,1+p),p+=1,g+=1,f+=1,o.slice(0,-2)}if(h)return g+=1,f+=1,h.slice(0,-1);if(v){const t=v.length-1;return u.push(y-p+t,p),g+=1,f+=1,v.slice(0,-1)}if(w)return u.push(y-p+1,p-1),p-=1,g+=1,f+=1," ";if(y+f===(null==(x=n[d])?void 0:x[1])){const t=n[d][0]-1;++d;for(let e=1;e<=t;e++)u.push(y-(p-e),p-e);p-=t,g+=t}return b}),u.push(h.length,p);const v=new Uint32Array(u.length>>1),w=new Int32Array(u.length>>1);for(let b=0,y=u.length;b<y;b+=2)v[b>>1]=u[b],w[b>>1]=u[b+1];return[h,[v,w],m]}function lt(t,e,i){if(!t)return[e,i];const[n,s]=t,r=e,a=e+i-1;let o=et(n,t=>t>=r);n[o]>r&&--o;let l=et(n,t=>t>=a,o);n[l]>a&&--l;const h=r+s[o];return[h,a+s[l]+1-h]}function ht(t,e){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=t,i.target="_parent","download"in i&&(i.download=e),(document.body||document.documentElement).append(i),i.click(),i.remove()}function ut(t,e,i){return i===e||i instanceof rx&&e instanceof rx&&i.value===e.value||e instanceof rx&&"string"==typeof i&&i===t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value)}function ct(t,e,i){return e[i]?ft(t,e[i].value):(t.reportError(new RangeError("No default")),new sx)}function dt(t,e){const i=[],n=Object.create(null);for(const s of e)"narg"===s.type?n[s.name]=pt(t,s.value):i.push(pt(t,s));return{positional:i,named:n}}function pt(t,e){switch(e.type){case"str":return e.value;case"num":return new rx(e.value,{minimumFractionDigits:e.precision});case"var":return function(t,{name:e}){let i;if(t.params){if(!Object.prototype.hasOwnProperty.call(t.params,e))return new sx(`$${e}`);i=t.params[e]}else{if(!t.args||!Object.prototype.hasOwnProperty.call(t.args,e))return t.reportError(new ReferenceError(`Unknown variable: $${e}`)),new sx(`$${e}`);i=t.args[e]}if(i instanceof nx)return i;switch(typeof i){case"string":return i;case"number":return new rx(i);case"object":if(ax.supportsValue(i))return new ax(i);default:return t.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof i}`)),new sx(`$${e}`)}}(t,e);case"mesg":return function(t,{name:e,attr:i}){const n=t.bundle._messages.get(e);if(!n)return t.reportError(new ReferenceError(`Unknown message: ${e}`)),new sx(e);if(i){const s=n.attributes[i];return s?ft(t,s):(t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new sx(`${e}.${i}`))}return n.value?ft(t,n.value):(t.reportError(new ReferenceError(`No value: ${e}`)),new sx(e))}(t,e);case"term":return function(t,{name:e,attr:i,args:n}){const s=`-${e}`,r=t.bundle._terms.get(s);if(!r)return t.reportError(new ReferenceError(`Unknown term: ${s}`)),new sx(s);if(i){const e=r.attributes[i];if(e){t.params=dt(t,n).named;const i=ft(t,e);return t.params=null,i}return t.reportError(new ReferenceError(`Unknown attribute: ${i}`)),new sx(`${s}.${i}`)}t.params=dt(t,n).named;const a=ft(t,r.value);return t.params=null,a}(t,e);case"func":return function(t,{name:e,args:i}){let n=t.bundle._functions[e];if(!n)return t.reportError(new ReferenceError(`Unknown function: ${e}()`)),new sx(`${e}()`);if("function"!=typeof n)return t.reportError(new TypeError(`Function ${e}() is not callable`)),new sx(`${e}()`);try{let e=dt(t,i);return n(e.positional,e.named)}catch(s){return t.reportError(s),new sx(`${e}()`)}}(t,e);case"select":return function(t,{selector:e,variants:i,star:n}){let s=pt(t,e);if(s instanceof sx)return ct(t,i,n);for(const r of i)if(ut(t,s,pt(t,r.key)))return ft(t,r.value);return ct(t,i,n)}(t,e);default:return new sx}}function gt(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new sx;t.dirty.add(e);const i=[],n=t.bundle._useIsolating&&e.length>1;for(const s of e)if("string"!=typeof s){if(t.placeables++,t.placeables>100)throw t.dirty.delete(e),new RangeError(`Too many placeables expanded: ${t.placeables}, max allowed is 100`);n&&i.push("⁨"),i.push(pt(t,s).toString(t)),n&&i.push("⁩")}else i.push(t.bundle._transform(s));return t.dirty.delete(e),i.join("")}function ft(t,e){return"string"==typeof e?t.bundle._transform(e):gt(t,e)}function mt(t,e){const i=Object.create(null);for(const[n,s]of Object.entries(t))e.includes(n)&&(i[n]=s.valueOf());return i}function vt(t,e){let i=t[0];if(i instanceof sx)return new sx(`NUMBER(${i.valueOf()})`);if(i instanceof rx)return new rx(i.valueOf(),{...i.opts,...mt(e,lx)});if(i instanceof ax)return new rx(i.toNumber(),{...mt(e,lx)});throw new TypeError("Invalid argument to NUMBER")}function wt(t,e){let i=t[0];if(i instanceof sx)return new sx(`DATETIME(${i.valueOf()})`);if(i instanceof ax||i instanceof rx)return new ax(i,mt(e,hx));throw new TypeError("Invalid argument to DATETIME")}function bt(t,e){const{value:i}=e;if("string"==typeof i)if("title"===t.localName&&"http://www.w3.org/1999/xhtml"===t.namespaceURI)t.textContent=i;else if(Wx.test(i)){const e=t.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");e.innerHTML=i,function(t,e){for(const i of t.childNodes)if(i.nodeType!==i.TEXT_NODE){if(i.hasAttribute("data-l10n-name")){const n=_t(e,i);t.replaceChild(n,i);continue}if(St(i)){const e=xt(i);t.replaceChild(e,i);continue}console.warn(`An element of forbidden type "${i.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),t.replaceChild(Et(i),i)}e.textContent="",e.appendChild(t)}(e.content,t)}else t.textContent=i;At(e,t)}function yt(t,e){if(!t)return!1;for(let i of t)if(i.name===e)return!0;return!1}function At(t,e){const i=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(t=>t.trim()):null;for(const n of Array.from(e.attributes))Ct(n.name,e,i)&&!yt(t.attributes,n.name)&&e.removeAttribute(n.name);if(t.attributes)for(const n of Array.from(t.attributes))Ct(n.name,e,i)&&e.getAttribute(n.name)!==n.value&&e.setAttribute(n.name,n.value)}function _t(t,e){const i=e.getAttribute("data-l10n-name"),n=t.querySelector(`[data-l10n-name="${i}"]`);return n?n.localName!==e.localName?(console.warn(`An element named "${i}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${n.localName}).`),Et(e)):(t.removeChild(n),kt(e,n.cloneNode(!1))):(console.warn(`An element named "${i}" wasn't found in the source.`),Et(e))}function xt(t){const e=t.ownerDocument.createElement(t.localName);return kt(t,e)}function Et(t){return t.ownerDocument.createTextNode(t.textContent)}function St(t){const e=Bx[t.namespaceURI];return e&&e.includes(t.localName)}function Ct(t,e,i=null){if(i&&i.includes(t))return!0;const n=jx[e.namespaceURI];if(!n)return!1;const s=t.toLowerCase(),r=e.localName;if(n.global.includes(s))return!0;if(!n[r])return!1;if(n[r].includes(s))return!0;if("http://www.w3.org/1999/xhtml"===e.namespaceURI&&"input"===r&&"value"===s){const t=e.type.toLowerCase();if("submit"===t||"button"===t||"reset"===t)return!0}return!1}function kt(t,e){return e.textContent=t.textContent,At(t,e),e}function Mt(t,e,i,n){return i.value?t.formatPattern(i.value,n,e):null}function Pt(t,e,i,n){const s={value:null,attributes:null};i.value&&(s.value=t.formatPattern(i.value,n,e));let r=Object.keys(i.attributes);if(r.length>0){s.attributes=new Array(r.length);for(let[a,o]of r.entries()){let r=t.formatPattern(i.attributes[o],n,e);s.attributes[a]={name:o,value:r}}}return s}function Ft(t,e,i,n){const s=[],r=new Set;return i.forEach(({id:i,args:a},o)=>{if(void 0!==n[o])return;let l=e.getMessage(i);if(l){if(s.length=0,n[o]=t(e,s,l,a),s.length>0&&"undefined"!=typeof console){const t=e.locales[0],n=s.join(", ");console.warn(`[fluent][resolver] errors in ${t}/${i}: ${n}.`)}}else r.add(i)}),r}function Dt(){const{isAndroid:t,isLinux:e,isMac:i,isWindows:n}=OA.platform;return e?"linux":n?"windows":i?"macos":t?"android":"other"}function Tt(t,e){const i=new Nx(e),n=new cx(t,{functions:{PLATFORM:Dt}}),s=n.addResource(i);return s.length&&console.error("L10n errors",s),n}function It(){return document.location.hash}function Lt({width:t,height:e,left:i,top:n},s){if(0===t||0===e)return null;const r=s.textLayer.div.getBoundingClientRect(),a=s.getPagePoint(i-r.left,n-r.top),o=s.getPagePoint(i-r.left+t,n-r.top+e);return w_.normalizeRect([a[0],a[1],o[0],o[1]])}function Rt(t,e){const i=t.getClientRects();if(1===i.length)return{rect:Lt(i[0],e)};const n=[1/0,1/0,-1/0,-1/0],s=[];let r=0;for(const a of i){const t=Lt(a,e);null!==t&&(s[r]=s[r+4]=t[0],s[r+1]=s[r+3]=t[3],s[r+2]=s[r+6]=t[2],s[r+5]=s[r+7]=t[1],w_.rectBoundingBox(...t,n),r+=8)}return{quadPoints:s,rect:n}}function Nt(t,e){let i=t;do{if(i.nodeType===Node.TEXT_NODE){const t=i.textContent.length;if(e<=t)return[i,e];e-=t}else if(i.firstChild){i=i.firstChild;continue}for(;!i.nextSibling&&i!==t;)i=i.parentNode;i!==t&&(i=i.nextSibling)}while(i!==t);throw new Error("Offset is bigger than container's contents length.")}function Ot(t){return Object.values(kA).includes(t)&&t!==kA.DISABLE}function Wt(t,e,i,n){return new(i||(i=Promise))(function(s,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function o(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,o)}l((n=n.apply(t,e||[])).next())})}function Bt(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)}function jt(t,e,i,n,s){if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s?s.value=i:e.set(t,i),i}function Vt(t){return Number.isInteger(t)&&t%90==0}function $t(t,e,i){return i[`${e?t.width:t.height}x${e?t.height:t.width}`]}function Ht(t){if(!t)return{...iC};const{width:e,height:i}=t.getBoundingClientRect();return{width:e,height:i}}function zt(t){const e="function"==typeof t,[i,n]=function(t){const e={...t},i={...t},n={},s=t=>{let i=n[t];if(!i){if(!Km())return e[t];n[t]=i=Qm(e[t],{internal:!0}),delete e[t]}return i[0]()};for(const a in t)Object.defineProperty(i,a,{get:()=>s(a),enumerable:!0});const r=(t,i)=>{const s=n[t];if(s)return s[1](i);t in e&&(e[t]=Xm(i,e[t]))};return[i,(t,e)=>{if(Gm(t)){const e=qm(()=>Object.entries(Xm(t,i)));Ym(()=>{for(const[t,i]of e)r(t,()=>i)})}else r(t,e);return i}]}(Zm.context||e?iC:Ht(t)),s=new ResizeObserver(([t])=>n(Ht(t.target)));return Jm(()=>s.disconnect()),e?tv(()=>{const e=t();e&&(n(Ht(e)),s.observe(e),Jm(()=>s.unobserve(e)))}):(s.observe(t),Jm(()=>s.unobserve(t))),i}function Ut(t){const[e,i]=Qm(),n=zt(e);return tv(()=>{var e;n.width&&n.height&&(!t.store.pdfSlick||"auto"!==t.store.scaleValue&&"page-fit"!==t.store.scaleValue&&"page-width"!==t.store.scaleValue||(t.store.pdfSlick.viewer.currentScaleValue=t.store.scaleValue),null==(e=t.store.pdfSlick)||e.viewer.update())}),s=nC(),nv(e=>{t.viewerRef(e),i(e)},s),s.style.setProperty("position","absolute"),s.style.setProperty("inset","0"),s.style.setProperty("overflow","auto"),lv(()=>{var e;return hv(s,`pdfSlickContainer ${null!=(e=t.class)?e:""}`)}),s;var s}function Gt(t){const[e,i]=Qm(),n=zt(e);return tv(()=>{var e;n.width&&n.height&&(null==(e=t.store.pdfSlick)||e.forceRendering())}),s=sC(),nv(e=>{t.thumbsRef(e),i(e)},s),s.style.setProperty("position","absolute"),s.style.setProperty("overflow","auto"),s.style.setProperty("inset","0"),sv(s,rv(ov,{get each(){return Array.from(t.store.thumbnailViews)},children:([e,i])=>rv(av,{get mount(){return i.div},get children(){var n;return t.children({pageNumber:e,width:i.canvasWidth,height:i.canvasHeight,scale:i.scale,src:null!=(n=null==i?void 0:i.src)?n:null,rotation:i.rotation,pageLabel:i.pageLabel,loaded:i.loaded})}})})),lv(e=>{var i,n,r=null!=(i=t.class)?i:"",a=null!=(n=t.classList)?n:{};return r!==e.e&&hv(s,e.e=r),e.t=uv(s,a,e.t),e},{e:void 0,t:void 0}),s;var s}function qt(t){return dv({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="m7.976 10.072 4.357-4.357.62.618L8.284 11h-.618L3 6.333l.619-.618 4.357 4.357z" clip-rule="evenodd"/>'},t)}function Xt(t){return dv({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="m8.024 5.928-4.357 4.357-.62-.618L7.716 5h.618L13 9.667l-.619.618-4.357-4.357z" clip-rule="evenodd"/>'},t)}function Yt(t){return dv({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="m8 8.707 3.646 3.647.708-.707L8.707 8l3.647-3.646-.707-.708L8 7.293 4.354 3.646l-.707.708L7.293 8l-3.646 3.646.707.708L8 8.707z" clip-rule="evenodd"/>'},t)}function Kt(t){return dv({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M2 1 1 2v12l1 1h12l1-1V2l-1-1H2Zm0 13V2h4v12H2Zm5 0V2h7v12H7Z"/>'},t)}function Qt(t){return dv({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="M2 1 1 2v12l1 1h12l1-1V2l-1-1H2Zm12 13H7V2h7v12Z" clip-rule="evenodd"/>'},t)}function Zt(t){return dv({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M2 5.56 2.413 5h11.194l.393.54L8.373 11h-.827L2 5.56z"/>'},t)}function Jt(t){return dv({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M5.56 14 5 13.587V2.393L5.54 2 11 7.627v.827L5.56 14z"/>'},t)}function te(t){return dv({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="M12.027 6.149a5.52 5.52 0 0 1-1.27 3.908l4.26 4.26-.7.71-4.26-4.27a5.52 5.52 0 1 1 1.97-4.608zm-5.45 4.888a4.51 4.51 0 0 0 3.18-1.32l-.04.02a4.51 4.51 0 0 0 1.36-3.2 4.5 4.5 0 1 0-4.5 4.5zm2.44-4v-1h-2v-2h-1v2h-2v1h2v2h1v-2h2z" clip-rule="evenodd"/>'},t)}function ee(t){return dv({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="M12.027 6.149a5.52 5.52 0 0 1-1.27 3.908l4.26 4.26-.7.71-4.26-4.27a5.52 5.52 0 1 1 1.97-4.608zm-5.45 4.888a4.51 4.51 0 0 0 3.18-1.32l-.04.02a4.51 4.51 0 0 0 1.36-3.2 4.5 4.5 0 1 0-4.5 4.5zm-2.54-4.98h5v1h-5v-1z" clip-rule="evenodd"/>'},t)}var ie,ne,se,re,ae,oe,le,he,ue,ce,de,pe,ge,fe,me,ve,we,be,ye,Ae,_e,xe,Ee,Se,Ce,ke,Me,Pe,Fe,De,Te,Ie,Le,Re,Ne,Oe,We,Be,je,Ve,$e,He,ze,Ue,Ge,qe,Xe,Ye,Ke,Qe,Ze,Je,ti,ei,ii,ni,si,ri,ai,oi,li,hi,ui,ci,di,pi,gi,fi,mi,vi,wi,bi,yi,Ai,_i,xi,Ei,Si,Ci,ki,Mi,Pi,Fi,Di,Ti,Ii,Li,Ri,Ni,Oi,Wi,Bi,ji,Vi,$i,Hi,zi,Ui,Gi,qi,Xi,Yi,Ki,Qi,Zi,Ji,tn,en,nn,sn,rn,an,on,ln,hn,un,cn,dn,pn,gn,fn,mn,vn,wn,bn,yn,An,_n,xn,En,Sn,Cn,kn,Mn,Pn,Fn,Dn,Tn,In,Ln,Rn,Nn,On,Wn,Bn,jn,Vn,$n,Hn,zn,Un,Gn,qn,Xn,Yn,Kn,Qn,Zn,Jn,ts,es,is,ns,ss,rs,as,os,ls,hs,us,cs,ds,ps,gs,fs,ms,vs,ws,bs,ys,As,_s,xs,Es,Ss,Cs,ks,Ms,Ps,Fs,Ds,Ts,Is,Ls,Rs,Ns,Os,Ws,Bs,js,Vs,$s,Hs,zs,Us,Gs,qs,Xs,Ys,Ks,Qs,Zs,Js,tr,er,ir,nr,sr,rr,ar,or,lr,hr,ur,cr,dr,pr,gr,fr,mr,vr,wr,br,yr,Ar,_r,xr,Er,Sr,Cr,kr,Mr,Pr,Fr,Dr,Tr,Ir,Lr,Rr,Nr,Or,Wr,Br,jr,Vr,$r,Hr,zr,Ur,Gr,qr,Xr,Yr,Kr,Qr,Zr,Jr,ta,ea,ia,na,sa,ra,aa,oa,la,ha,ua,ca,da,pa,ga,fa,ma,va,wa,ba,ya,Aa,_a,xa,Ea,Sa,Ca,ka,Ma,Pa,Fa,Da,Ta,Ia,La,Ra,Na,Oa,Wa,Ba,ja,Va,$a,Ha,za,Ua,Ga,qa,Xa,Ya,Ka,Qa,Za,Ja,to,eo,io,no,so,ro,ao,oo,lo,ho,uo,co,po,go,fo,mo,vo,wo,bo,yo,Ao,_o,xo,Eo,So,Co,ko,Mo,Po,Fo,Do,To,Io,Lo,Ro,No,Oo,Wo,Bo,jo,Vo,$o,Ho,zo,Uo,Go,qo,Xo,Yo,Ko,Qo,Zo,Jo,tl,el,il,nl,sl,rl,al,ol,ll,hl,ul,cl,dl,pl,gl,fl,ml,vl,wl,bl,yl,Al,_l,xl,El,Sl,Cl,kl,Ml,Pl,Fl,Dl,Tl,Il,Ll,Rl,Nl,Ol,Wl,Bl,jl,Vl,$l,Hl,zl,Ul,Gl,ql,Xl,Yl,Kl,Ql,Zl,Jl,th,eh,ih,nh,sh,rh,ah,oh,lh,hh,uh,ch,dh,ph,gh,fh,mh,vh,wh,bh,yh,Ah,_h,xh,Eh,Sh,Ch,kh,Mh,Ph,Fh,Dh,Th,Ih,Lh,Rh,Nh,Oh,Wh,Bh,jh,Vh,$h,Hh,zh,Uh,Gh,qh,Xh,Yh,Kh,Qh,Zh,Jh,tu,eu,iu,nu,su,ru,au,ou,lu,hu,uu,cu,du,pu,gu,fu,mu,vu,wu,bu,yu,Au,_u,xu,Eu,Su,Cu,ku,Mu,Pu,Fu,Du,Tu,Iu,Lu,Ru,Nu,Ou,Wu,Bu,ju,Vu,$u,Hu,zu,Uu,Gu,qu,Xu,Yu,Ku,Qu,Zu,Ju,tc,ec,ic,nc,sc,rc,ac,oc,lc,hc,uc,cc,dc,pc,gc,fc,mc,vc,wc,bc,yc,Ac,_c,xc,Ec,Sc,Cc,kc,Mc,Pc,Fc,Dc,Tc,Ic,Lc,Rc,Nc,Oc,Wc,Bc,jc,Vc,$c,Hc,zc,Uc,Gc,qc,Xc,Yc,Kc,Qc,Zc,Jc,td,ed,id,nd,sd,rd,ad,od,ld,hd,ud,cd,dd,pd,gd,fd,md,vd,wd,bd,yd,Ad,_d,xd,Ed,Sd,Cd,kd,Md,Pd,Fd,Dd,Td,Id,Ld,Rd,Nd,Od,Wd,Bd,jd,Vd,$d,Hd,zd,Ud,Gd,qd,Xd,Yd,Kd,Qd,Zd,Jd,tp,ep,ip,np,sp,rp,ap,op,lp,hp,up,cp,dp,pp,gp,fp,mp,vp,wp,bp,yp,Ap,_p,xp,Ep,Sp,Cp,kp,Mp,Pp,Fp,Dp,Tp,Ip,Lp,Rp,Np,Op,Wp,Bp,jp,Vp,$p,Hp,zp,Up,Gp,qp,Xp,Yp,Kp,Qp,Zp,Jp,tg,eg,ig,ng,sg,rg,ag,og,lg,hg,ug,cg,dg,pg,gg,fg,mg,vg,wg,bg,yg,Ag,_g,xg,Eg,Sg,Cg,kg,Mg,Pg,Fg,Dg,Tg,Ig,Lg,Rg,Ng,Og,Wg,Bg,jg,Vg,$g,Hg,zg,Ug,Gg,qg,Xg,Yg,Kg,Qg,Zg,Jg,tf,ef,nf,sf,rf,af,of,lf,hf,uf,cf,df,pf,gf,ff,mf,vf,wf,bf,yf,Af,_f,xf,Ef,Sf,Cf,kf,Mf,Pf,Ff,Df,Tf,If,Lf,Rf,Nf,Of,Wf,Bf,jf,Vf,$f,Hf,zf,Uf,Gf,qf,Xf,Yf,Kf,Qf,Zf,Jf,tm,em,im,nm,sm,rm,am,om,lm,hm,um,cm,dm,pm,gm,fm,mm,vm,wm,bm,ym,Am,_m,xm,Em,Sm,Cm,km,Mm,Pm,Fm,Dm,Tm,Im,Lm,Rm,Nm,Om=Object.defineProperty,Wm=t=>{throw TypeError(t)},Bm=(t,e,i)=>((t,e,i)=>e in t?Om(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i),jm=(t,e,i)=>e.has(t)||Wm("Cannot "+i),Vm=(t,e,i)=>(jm(t,e,"read from private field"),i?i.call(t):e.get(t)),$m=(t,e,i)=>e.has(t)?Wm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Hm=(t,e,i,n)=>(jm(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),zm=(t,e,i)=>(jm(t,e,"access private method"),i),Um=(t,e,i,n)=>({set _(n){Hm(t,e,n,i)},get _(){return Vm(t,e,n)}});import{eb as Gm,dN as qm,ec as Xm,bT as Ym,ed as Km,B as Qm,ee as Zm,N as Jm,C as tv,bV as ev,ax as iv,ea as nv,aZ as sv,D as rv,bZ as av,R as ov,co as lv,dK as hv,ef as uv,eg as cv,aS as dv,a4 as pv,aY as gv,cU as fv,an as mv,aw as vv,ag as wv,o as bv,aV as yv,aA as Av,ah as _v,S as xv,O as Ev,ab as Sv,eh as Cv,ei as kv,dm as Mv,ej as Pv,aJ as Fv,az as Dv,K as Tv,aF as Iv,ek as Lv,el as Rv,aG as Nv,em as Ov,I as Wv}from"./index-C_g2pi0Z.js";const Bv=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),jv=[.001,0,0,.001,0,0],Vv=1.35,$v={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Hv="pdfjs_internal_editor_",zv={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Uv={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Gv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},qv={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Xv={ERRORS:0,WARNINGS:1,INFOS:5},Yv={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94};let Kv=Xv.WARNINGS;const Qv=function(){function t(t,e){this.message=t,this.name=e}return t.prototype=new Error,t.constructor=t,t}();class Zv extends Qv{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Jv extends Qv{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}let tw=class extends Qv{constructor(t){super(t,"InvalidPDFException")}},ew=class extends Qv{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}};class iw extends Qv{constructor(t){super(t,"FormatError")}}let nw=class extends Qv{constructor(t){super(t,"AbortException")}};class sw{static get isLittleEndian(){return o(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return o(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return o(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return o(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){const{platform:t,userAgent:e}=navigator;return o(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return o(this,"isCSSRoundSupported",null==(e=null==(t=globalThis.CSS)?void 0:t.supports)?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const rw=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));let aw=(ne=class{static makeHexColor(t,e,i){return`#${rw[t]}${rw[e]}${rw[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,i=0){const n=t[i],s=t[i+1];t[i]=n*e[0]+s*e[2]+e[4],t[i+1]=n*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],l=e[5];for(let h=0;h<6;h+=2){const e=t[i+h],u=t[i+h+1];t[i+h]=e*n+u*r+o,t[i+h+1]=e*s+u*a+l}}static applyInverseTransform(t,e){const i=t[0],n=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-n*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-i*e[1]+n*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,i){const n=e[0],s=e[1],r=e[2],a=e[3],o=e[4],l=e[5],h=t[0],u=t[1],c=t[2],d=t[3];let p=n*h+o,g=p,f=n*c+o,m=f,v=a*u+l,w=v,b=a*d+l,y=b;if(0!==s||0!==r){const t=s*h,e=s*c,i=r*u,n=r*d;p+=i,m+=i,f+=n,g+=n,v+=t,y+=t,b+=e,w+=e}i[0]=Math.min(i[0],p,f,g,m),i[1]=Math.min(i[1],v,b,w,y),i[2]=Math.max(i[2],p,f,g,m),i[3]=Math.max(i[3],v,b,w,y)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],n=t[1],s=t[2],r=t[3],a=i**2+n**2,o=i*s+n*r,l=s**2+r**2,h=(a+l)/2,u=Math.sqrt(h**2-(a*l-o**2));e[0]=Math.sqrt(h+u||1),e[1]=Math.sqrt(h-u||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>r?null:[i,s,n,r]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,n,s){s[0]=Math.min(s[0],t,i),s[1]=Math.min(s[1],e,n),s[2]=Math.max(s[2],t,i),s[3]=Math.max(s[3],e,n)}static bezierBoundingBox(t,e,i,n,s,r,a,o,l){l[0]=Math.min(l[0],t,a),l[1]=Math.min(l[1],e,o),l[2]=Math.max(l[2],t,a),l[3]=Math.max(l[3],e,o),zm(this,ie,re).call(this,t,i,s,a,e,n,r,o,3*(3*(i-s)-t+a),6*(t-2*i+s),3*(i-t),l),zm(this,ie,re).call(this,t,i,s,a,e,n,r,o,3*(3*(n-r)-e+o),6*(e-2*n+r),3*(n-e),l)}},ie=new WeakSet,se=function(t,e,i,n,s,r,a,o,l,h){if(l<=0||l>=1)return;const u=1-l,c=l*l,d=c*l,p=u*(u*(u*t+3*l*e)+3*c*i)+d*n,g=u*(u*(u*s+3*l*r)+3*c*a)+d*o;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],g)},re=function(t,e,i,n,s,r,a,o,l,h,u,c){if(Math.abs(l)<1e-12)return void(Math.abs(h)>=1e-12&&zm(this,ie,se).call(this,t,e,i,n,s,r,a,o,-u/h,c));const d=h**2-4*u*l;if(d<0)return;const p=Math.sqrt(d),g=2*l;zm(this,ie,se).call(this,t,e,i,n,s,r,a,o,(-h+p)/g,c),zm(this,ie,se).call(this,t,e,i,n,s,r,a,o,(-h-p)/g,c)},$m(ne,ie),ne),ow=null,lw=null;const hw="pdfjs_internal_id_";"function"!=typeof Promise.try&&(Promise.try=function(t,...e){return new Promise(i=>{i(t(...e))})}),"function"!=typeof Math.sumPrecise&&(Math.sumPrecise=function(t){return t.reduce((t,e)=>t+e,0)});const uw="http://www.w3.org/2000/svg";let cw=(Bm(ae=class{},"CSS",96),Bm(ae,"PDF",72),Bm(ae,"PDF_TO_CSS_UNITS",ae.CSS/ae.PDF),ae);class dw{constructor({viewBox:t,userUnit:e,scale:i,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=n,this.offsetX=s,this.offsetY=r,i*=e;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let h,u,c,d,p,g,f,m;switch((n%=360)<0&&(n+=360),n){case 180:h=-1,u=0,c=0,d=1;break;case 90:h=0,u=1,c=1,d=0;break;case 270:h=0,u=-1,c=-1,d=0;break;case 0:h=1,u=0,c=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(c=-c,d=-d),0===h?(p=Math.abs(l-t[1])*i+s,g=Math.abs(o-t[0])*i+r,f=(t[3]-t[1])*i,m=(t[2]-t[0])*i):(p=Math.abs(o-t[0])*i+s,g=Math.abs(l-t[1])*i+r,f=(t[2]-t[0])*i,m=(t[3]-t[1])*i),this.transform=[h*i,u*i,c*i,d*i,p-h*i*o-c*i*l,g-u*i*o-d*i*l],this.width=f,this.height=m}get rawDims(){const t=this.viewBox;return o(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=!1}={}){return new dw({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}convertToViewportPoint(t,e){const i=[t,e];return aw.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];aw.applyTransform(e,this.transform);const i=[t[2],t[3]];return aw.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return aw.applyInverseTransform(i,this.transform),i}}let pw=class extends Qv{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};class gw{constructor(){Bm(this,"started",Object.create(null)),Bm(this,"times",[])}time(t){t in this.started&&i(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||i(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:n,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-n}ms\n`);return t.join("")}}let fw=(oe=class{static toDateObject(t){if(t instanceof Date)return t;if(!t||"string"!=typeof t)return null;Vm(this,le)||Hm(this,le,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=Vm(this,le).exec(t);if(!e)return null;const i=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(r+=h,a+=u):"+"===l&&(r-=h,a-=u),new Date(Date.UTC(i,n,s,r,a,o))}},le=new WeakMap,$m(oe,le),oe),mw=class t{constructor(){const{pixelRatio:e}=t;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,i,n,s,r=-1){let a=1/0,o=1/0,l=1/0;(n=t.capPixels(n,r))>0&&(a=Math.sqrt(n/(e*i))),-1!==s&&(o=s/e,l=s/i);const h=Math.min(a,o,l);return(this.sx>h||this.sy>h)&&(this.sx=h,this.sy=h,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}};const vw=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],ww=class t{constructor(e){$m(this,be),$m(this,he,null),$m(this,ue,null),$m(this,ce),$m(this,de,null),$m(this,pe,null),$m(this,ge,null),$m(this,fe,null),Hm(this,ce,e),Vm(t,me)||Hm(t,me,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=Hm(this,he,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const i=Vm(this,ce)._uiManager._signal;e.addEventListener("contextmenu",w,{signal:i}),e.addEventListener("pointerdown",zm(t,ve,we),{signal:i});const n=Hm(this,de,document.createElement("div"));n.className="buttons",e.append(n);const s=Vm(this,ce).toolbarPosition;if(s){const{style:t}=e,i="ltr"===Vm(this,ce)._uiManager.direction?1-s[0]:s[0];t.insetInlineEnd=100*i+"%",t.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return Vm(this,he)}hide(){var t;Vm(this,he).classList.add("hidden"),null==(t=Vm(this,ue))||t.hideDropdown()}show(){var t,e;Vm(this,he).classList.remove("hidden"),null==(t=Vm(this,pe))||t.shown(),null==(e=Vm(this,ge))||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:i}=Vm(this,ce),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",Vm(t,me)[e]),zm(this,be,_e).call(this,n),n.addEventListener("click",t=>{i.delete()},{signal:i._signal}),Vm(this,de).append(n)}async addAltText(t){const e=await t.render();zm(this,be,_e).call(this,e),Vm(this,de).append(e,Vm(this,be,xe)),Hm(this,pe,t)}addComment(t){if(Vm(this,ge))return;const e=t.render();e&&(zm(this,be,_e).call(this,e),Vm(this,de).prepend(e,Vm(this,be,xe)),Hm(this,ge,t),t.toolbar=this)}addColorPicker(t){if(Vm(this,ue))return;Hm(this,ue,t);const e=t.renderButton();zm(this,be,_e).call(this,e),Vm(this,de).append(e,Vm(this,be,xe))}async addEditSignatureButton(t){const e=Hm(this,fe,await t.renderEditButton(Vm(this,ce)));zm(this,be,_e).call(this,e),Vm(this,de).append(e,Vm(this,be,xe))}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e)}}updateEditSignatureButton(t){Vm(this,fe)&&(Vm(this,fe).title=t)}remove(){var t;Vm(this,he).remove(),null==(t=Vm(this,ue))||t.destroy(),Hm(this,ue,null)}};he=new WeakMap,ue=new WeakMap,ce=new WeakMap,de=new WeakMap,pe=new WeakMap,ge=new WeakMap,fe=new WeakMap,me=new WeakMap,ve=new WeakSet,we=function(t){t.stopPropagation()},be=new WeakSet,ye=function(t){Vm(this,ce)._focusEventsAllowed=!1,b(t)},Ae=function(t){Vm(this,ce)._focusEventsAllowed=!0,b(t)},_e=function(t){const e=Vm(this,ce)._uiManager._signal;t.addEventListener("focusin",zm(this,be,ye).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",zm(this,be,Ae).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",w,{signal:e})},xe=function(){const t=document.createElement("div");return t.className="divider",t},$m(ww,ve),$m(ww,me,null);let bw=ww;class yw{constructor(t){$m(this,ke),$m(this,Ee,null),$m(this,Se,null),$m(this,Ce),Hm(this,Ce,t)}show(t,e,i){const[n,s]=zm(this,ke,Pe).call(this,e,i),{style:r}=Vm(this,Se)||Hm(this,Se,zm(this,ke,Me).call(this));t.append(Vm(this,Se)),r.insetInlineEnd=100*n+"%",r.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){Vm(this,Se).remove()}}Ee=new WeakMap,Se=new WeakMap,Ce=new WeakMap,ke=new WeakSet,Me=function(){const t=Hm(this,Se,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",w,{signal:Vm(this,Ce)._signal});const e=Hm(this,Ee,document.createElement("div"));return e.className="buttons",t.append(e),zm(this,ke,Fe).call(this),t},Pe=function(t,e){let i=0,n=0;for(const s of t){const t=s.y+s.height;if(t<i)continue;const r=s.x+(e?s.width:0);t>i?(n=r,i=t):e?r>n&&(n=r):r<n&&(n=r)}return[e?1-n:n,i]},Fe=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=Vm(this,Ce)._signal;t.addEventListener("contextmenu",w,{signal:i}),t.addEventListener("click",()=>{Vm(this,Ce).highlightSelection("floating_button")},{signal:i}),Vm(this,Ee).append(t)};class Aw{constructor(){$m(this,De,0)}get id(){return`${Hv}${Um(this,De)._++}`}}De=new WeakMap;const _w=class{constructor(){$m(this,Re),$m(this,Te,u()),$m(this,Ie,0),$m(this,Le,null)}static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',o(this,"_isSVGFittingCanvas",e.decode().then(()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(t){const{lastModified:e,name:i,size:n,type:s}=t;return zm(this,Re,Ne).call(this,`${e}_${i}_${n}_${s}`,t)}async getFromUrl(t){return zm(this,Re,Ne).call(this,t,t)}async getFromBlob(t,e){const i=await e;return zm(this,Re,Ne).call(this,t,i)}async getFromId(t){Vm(this,Le)||Hm(this,Le,new Map);const e=Vm(this,Le).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:t}=e;return delete e.blobPromise,this.getFromBlob(e.id,t)}return this.getFromUrl(e.url)}getFromCanvas(t,e){Vm(this,Le)||Hm(this,Le,new Map);let i=Vm(this,Le).get(t);if(null==i?void 0:i.bitmap)return i.refCounter+=1,i;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${Vm(this,Te)}_${Um(this,Ie)._++}`,refCounter:1,isSvg:!1},Vm(this,Le).set(t,i),Vm(this,Le).set(i.id,i),i}getSvgUrl(t){const e=Vm(this,Le).get(t);return(null==e?void 0:e.isSvg)?e.svgUrl:null}deleteId(t){var e;Vm(this,Le)||Hm(this,Le,new Map);const i=Vm(this,Le).get(t);if(!i)return;if(i.refCounter-=1,0!==i.refCounter)return;const{bitmap:n}=i;if(!i.url&&!i.file){const t=new OffscreenCanvas(n.width,n.height);t.getContext("bitmaprenderer").transferFromImageBitmap(n),i.blobPromise=t.convertToBlob()}null==(e=n.close)||e.call(n),i.bitmap=null}isValidId(t){return t.startsWith(`image_${Vm(this,Te)}_`)}};Te=new WeakMap,Ie=new WeakMap,Le=new WeakMap,Re=new WeakSet,Ne=async function(t,e){Vm(this,Le)||Hm(this,Le,new Map);let n=Vm(this,Le).get(t);if(null===n)return null;if(null==n?void 0:n.bitmap)return n.refCounter+=1,n;try{let t;if(n||(n={bitmap:null,id:`image_${Vm(this,Te)}_${Um(this,Ie)._++}`,refCounter:0,isSvg:!1}),"string"==typeof e?(n.url=e,t=await p(e,"blob")):e instanceof File?t=n.file=e:e instanceof Blob&&(t=e),"image/svg+xml"===t.type){const e=_w._isSVGFittingCanvas,i=new FileReader,s=new Image,r=new Promise((t,r)=>{s.onload=()=>{n.bitmap=s,n.isSvg=!0,t()},i.onload=async()=>{const t=n.svgUrl=i.result;s.src=await e?`${t}#svgView(preserveAspectRatio(none))`:t},s.onerror=i.onerror=r});i.readAsDataURL(t),await r}else n.bitmap=await createImageBitmap(t);n.refCounter=1}catch(s){i(s),n=null}return Vm(this,Le).set(t,n),n&&Vm(this,Le).set(n.id,n),n};let xw=_w;class Ew{constructor(t=128){$m(this,Oe,[]),$m(this,We,!1),$m(this,Be),$m(this,je,-1),Hm(this,Be,t)}add({cmd:t,undo:e,post:i,mustExec:n,type:s=NaN,overwriteIfSameType:r=!1,keepUndo:a=!1}){if(n&&t(),Vm(this,We))return;const o={cmd:t,undo:e,post:i,type:s};if(-1===Vm(this,je))return Vm(this,Oe).length>0&&(Vm(this,Oe).length=0),Hm(this,je,0),void Vm(this,Oe).push(o);if(r&&Vm(this,Oe)[Vm(this,je)].type===s)return a&&(o.undo=Vm(this,Oe)[Vm(this,je)].undo),void(Vm(this,Oe)[Vm(this,je)]=o);const l=Vm(this,je)+1;l===Vm(this,Be)?Vm(this,Oe).splice(0,1):(Hm(this,je,l),l<Vm(this,Oe).length&&Vm(this,Oe).splice(l)),Vm(this,Oe).push(o)}undo(){if(-1===Vm(this,je))return;Hm(this,We,!0);const{undo:t,post:e}=Vm(this,Oe)[Vm(this,je)];t(),null==e||e(),Hm(this,We,!1),Hm(this,je,Vm(this,je)-1)}redo(){if(Vm(this,je)<Vm(this,Oe).length-1){Hm(this,je,Vm(this,je)+1),Hm(this,We,!0);const{cmd:t,post:e}=Vm(this,Oe)[Vm(this,je)];t(),null==e||e(),Hm(this,We,!1)}}hasSomethingToUndo(){return-1!==Vm(this,je)}hasSomethingToRedo(){return Vm(this,je)<Vm(this,Oe).length-1}cleanType(t){if(-1!==Vm(this,je)){for(let e=Vm(this,je);e>=0;e--)if(Vm(this,Oe)[e].type!==t)return Vm(this,Oe).splice(e+1,Vm(this,je)-e),void Hm(this,je,e);Vm(this,Oe).length=0,Hm(this,je,-1)}}destroy(){Hm(this,Oe,null)}}Oe=new WeakMap,We=new WeakMap,Be=new WeakMap,je=new WeakMap;class Sw{constructor(t){$m(this,Ve),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=sw.platform;for(const[i,n,s={}]of t)for(const t of i){const i=t.startsWith("mac+");e&&i?(this.callbacks.set(t.slice(4),{callback:n,options:s}),this.allKeys.add(t.split("+").at(-1))):e||i||(this.callbacks.set(t,{callback:n,options:s}),this.allKeys.add(t.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(zm(this,Ve,$e).call(this,e));if(!i)return;const{callback:n,options:{bubbles:s=!1,args:r=[],checker:a=null}}=i;a&&!a(t,e)||(n.bind(t,...r,e)(),s||b(e))}}Ve=new WeakSet,$e=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Cw=class t{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const i of t.keys()){e.style.color=i;const n=window.getComputedStyle(e).color;t.set(i,A(n))}e.remove()}(t),o(this,"_colors",t)}convert(e){const i=A(e);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[n,s]of this._colors)if(s.every((t,e)=>t===i[e]))return t._colorsMapping.get(n);return i}getHexCode(t){const e=this._colors.get(t);return e?aw.makeHexColor(...e):t}};Bm(Cw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let kw=Cw,Mw=(Ri=class{constructor(t,e,i,n,s,r,a,o,l,h,u,c,d,p,g,f){$m(this,Ni),$m(this,He,new AbortController),$m(this,ze,null),$m(this,Ue,new Map),$m(this,Ge,new Map),$m(this,qe,null),$m(this,Xe,null),$m(this,Ye,null),$m(this,Ke,new Ew),$m(this,Qe,null),$m(this,Ze,null),$m(this,Je,null),$m(this,ti,0),$m(this,ei,new Set),$m(this,ii,null),$m(this,ni,null),$m(this,si,new Set),Bm(this,"_editorUndoBar",null),$m(this,ri,!1),$m(this,ai,!1),$m(this,oi,!1),$m(this,li,null),$m(this,hi,null),$m(this,ui,null),$m(this,ci,null),$m(this,di,!1),$m(this,pi,null),$m(this,gi,new Aw),$m(this,fi,!1),$m(this,mi,!1),$m(this,vi,null),$m(this,wi,null),$m(this,bi,null),$m(this,yi,null),$m(this,Ai,null),$m(this,_i,zv.NONE),$m(this,xi,new Set),$m(this,Ei,null),$m(this,Si,null),$m(this,Ci,null),$m(this,ki,null),$m(this,Mi,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),$m(this,Pi,[0,0]),$m(this,Fi,null),$m(this,Di,null),$m(this,Ti,null),$m(this,Ii,null),$m(this,Li,null);const m=this._signal=Vm(this,He).signal;Hm(this,Di,t),Hm(this,Ti,e),Hm(this,Ii,i),Hm(this,qe,n),Hm(this,Qe,s),Hm(this,Si,r),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:m}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),a._on("setpreference",this.onSetPreference.bind(this),{signal:m}),a._on("switchannotationeditorparams",t=>this.updateParams(t.type,t.value),{signal:m}),zm(this,Ni,$i).call(this),zm(this,Ni,Yi).call(this),zm(this,Ni,Ui).call(this),Hm(this,Xe,o.annotationStorage),Hm(this,li,o.filterFactory),Hm(this,Ci,l),Hm(this,ci,h||null),Hm(this,ri,u),Hm(this,ai,c),Hm(this,oi,d),Hm(this,Ai,p||null),this.viewParameters={realScale:cw.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=!1!==f}static get _keyboardManager(){const t=Ri.prototype,e=t=>Vm(t,Di).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),i=(t,{target:e})=>{if(e instanceof HTMLInputElement){const{type:t}=e;return"text"!==t&&"number"!==t}return!0},n=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return o(this,"_keyboardManager",new Sw([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&Vm(t,Di).contains(e)&&!t.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&Vm(t,Di).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}destroy(){var t,e,i,n,s,r,a,o,l;null==(t=Vm(this,Li))||t.resolve(),Hm(this,Li,null),null==(e=Vm(this,He))||e.abort(),Hm(this,He,null),this._signal=null;for(const h of Vm(this,Ge).values())h.destroy();Vm(this,Ge).clear(),Vm(this,Ue).clear(),Vm(this,si).clear(),null==(i=Vm(this,yi))||i.clear(),Hm(this,ze,null),Vm(this,xi).clear(),Vm(this,Ke).destroy(),null==(n=Vm(this,qe))||n.destroy(),null==(s=Vm(this,Qe))||s.destroy(),null==(r=Vm(this,Si))||r.destroy(),null==(a=Vm(this,pi))||a.hide(),Hm(this,pi,null),null==(o=Vm(this,bi))||o.destroy(),Hm(this,bi,null),Vm(this,hi)&&(clearTimeout(Vm(this,hi)),Hm(this,hi,null)),Vm(this,Fi)&&(clearTimeout(Vm(this,Fi)),Hm(this,Fi,null)),null==(l=this._editorUndoBar)||l.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return Vm(this,Ai)}get useNewAltTextFlow(){return Vm(this,ai)}get useNewAltTextWhenAddingImage(){return Vm(this,oi)}get hcmFilter(){return o(this,"hcmFilter",Vm(this,Ci)?Vm(this,li).addHCMFilter(Vm(this,Ci).foreground,Vm(this,Ci).background):"none")}get direction(){return o(this,"direction",getComputedStyle(Vm(this,Di)).direction)}get _highlightColors(){return o(this,"_highlightColors",Vm(this,ci)?new Map(Vm(this,ci).split(",").map(t=>((t=t.split("=").map(t=>t.trim()))[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return o(this,"highlightColors",null);const e=new Map,i=!!Vm(this,Ci);for(const[n,s]of t){const t=n.endsWith("_HCM");i&&t?e.set(n.replace("_HCM",""),s):i||t||e.set(n,s)}return o(this,"highlightColors",e)}get highlightColorNames(){return o(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),Hm(this,Je,t)}setMainHighlightColorPicker(t){Hm(this,bi,t)}editAltText(t,e=!1){var i;null==(i=Vm(this,qe))||i.editAltText(this,t,e)}hasCommentManager(){return!!Vm(this,Qe)}editComment(t,e){var i;null==(i=Vm(this,Qe))||i.open(this,t,e)}getSignature(t){var e;null==(e=Vm(this,Si))||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return Vm(this,Si)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){"enableNewAltTextWhenAddingImage"===t&&Hm(this,oi,e)}onPageChanging({pageNumber:t}){Hm(this,ti,t-1)}focusMainContainer(){Vm(this,Di).focus()}findParent(t,e){for(const i of Vm(this,Ge).values()){const{x:n,y:s,width:r,height:a}=i.div.getBoundingClientRect();if(t>=n&&t<=n+r&&e>=s&&e<=s+a)return i}return null}disableUserSelect(t=!1){Vm(this,Ti).classList.toggle("noUserSelect",t)}addShouldRescale(t){Vm(this,si).add(t)}removeShouldRescale(t){Vm(this,si).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*cw.PDF_TO_CSS_UNITS;for(const i of Vm(this,si))i.onScaleChanging();null==(e=Vm(this,Je))||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r}=e,a=e.toString(),o=zm(this,Ni,Oi).call(this,e).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;e.empty();const h=zm(this,Ni,Wi).call(this,o),u=Vm(this,_i)===zv.NONE,c=()=>{null==h||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:l,anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r,text:a}),u&&this.showAllEditors("highlight",!0,!0)};u?this.switchToMode(zv.HIGHLIGHT,c):c()}addToAnnotationStorage(t){t.isEmpty()||!Vm(this,Xe)||Vm(this,Xe).has(t.id)||Vm(this,Xe).setValue(t.id,t)}a11yAlert(t,e=null){const i=Vm(this,Ii);i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Vm(this,di)&&(Hm(this,di,!1),zm(this,Ni,Vi).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of Vm(this,xi))if(e.div.contains(t)){Hm(this,wi,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!Vm(this,wi))return;const[t,e]=Vm(this,wi);Hm(this,wi,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){zm(this,Ni,Ui).call(this),zm(this,Ni,qi).call(this)}removeEditListeners(){zm(this,Ni,Gi).call(this),zm(this,Ni,Xi).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of Vm(this,ni))if(i.isHandlingMimeForPasting(e))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const e of t.dataTransfer.items)for(const i of Vm(this,ni))if(i.isHandlingMimeForPasting(e.type))return i.paste(e,this.currentLayer),void t.preventDefault()}copy(t){var e;if(t.preventDefault(),null==(e=Vm(this,ze))||e.commitOrRemove(),!this.hasSelection)return;const i=[];for(const n of Vm(this,xi)){const t=n.serialize(!0);t&&i.push(t)}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const i of e.items)for(const t of Vm(this,ni))if(t.isHandlingMimeForPasting(i.type))return void t.paste(i,this.currentLayer);let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void i(`paste: "${r.message}".`)}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const t=[];for(const r of n){const e=await s.deserialize(r);if(!e)return;t.push(e)}const e=()=>{for(const e of t)zm(this,Ni,tn).call(this,e);zm(this,Ni,sn).call(this,t)},i=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:i,mustExec:!0})}catch(r){i(`paste: "${r.message}".`)}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),Vm(this,_i)===zv.NONE||this.isEditorHandlingKeyboard||Ri._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,Vm(this,di)&&(Hm(this,di,!1),zm(this,Ni,Vi).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(t){t?(zm(this,Ni,Hi).call(this),zm(this,Ni,qi).call(this),zm(this,Ni,Ki).call(this,{isEditing:Vm(this,_i)!==zv.NONE,isEmpty:zm(this,Ni,nn).call(this),hasSomethingToUndo:Vm(this,Ke).hasSomethingToUndo(),hasSomethingToRedo:Vm(this,Ke).hasSomethingToRedo(),hasSelectedEditor:!1})):(zm(this,Ni,zi).call(this),zm(this,Ni,Xi).call(this),zm(this,Ni,Ki).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!Vm(this,ni)){Hm(this,ni,t);for(const t of Vm(this,ni))zm(this,Ni,Qi).call(this,t.defaultPropertiesToUpdate)}}getId(){return Vm(this,gi).id}get currentLayer(){return Vm(this,Ge).get(Vm(this,ti))}getLayer(t){return Vm(this,Ge).get(t)}get currentPageIndex(){return Vm(this,ti)}addLayer(t){Vm(this,Ge).set(t.pageIndex,t),Vm(this,fi)?t.enable():t.disable()}removeLayer(t){Vm(this,Ge).delete(t.pageIndex)}async updateMode(t,e=null,i=!1,n=!1,s=!1){var r,a,o;if(Vm(this,_i)!==t&&(!Vm(this,Li)||(await Vm(this,Li).promise,Vm(this,Li)))){if(Hm(this,Li,Promise.withResolvers()),null==(r=Vm(this,Je))||r.commitOrRemove(),Hm(this,_i,t),t===zv.NONE)return this.setEditingState(!1),zm(this,Ni,Ji).call(this),null==(a=this._editorUndoBar)||a.hide(),void Vm(this,Li).resolve();t===zv.SIGNATURE&&await(null==(o=Vm(this,Si))?void 0:o.loadSignatures()),this.setEditingState(!0),await zm(this,Ni,Zi).call(this),this.unselectAll();for(const e of Vm(this,Ge).values())e.updateMode(t);if(!e)return i&&this.addNewEditorFromKeyboard(),void Vm(this,Li).resolve();for(const t of Vm(this,Ue).values())t.annotationElementId===e||t.id===e?(this.setSelected(t),s?t.editComment():n&&t.enterInEditMode()):t.unselect();Vm(this,Li).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==Vm(this,_i)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(Vm(this,ni)){switch(t){case Uv.CREATE:return void this.currentLayer.addNewEditor(e);case Uv.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Vm(this,ki)||Hm(this,ki,new Map)).set(t,e),this.showAllEditors("highlight",e)}if(this.hasSelection)for(const i of Vm(this,xi))i.updateParams(t,e);else for(const i of Vm(this,ni))i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var n,s;for(const r of Vm(this,Ue).values())r.editorType===t&&r.show(e);(null==(s=null==(n=Vm(this,ki))?void 0:n.get(Uv.HIGHLIGHT_SHOW_ALL))||s)!==e&&zm(this,Ni,Qi).call(this,[[Uv.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(Vm(this,mi)!==t){Hm(this,mi,t);for(const e of Vm(this,Ge).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of Vm(this,Ue).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return Vm(this,Ue).get(t)}addEditor(t){Vm(this,Ue).set(t.id,t)}removeEditor(t){var e,i;t.div.contains(document.activeElement)&&(Vm(this,hi)&&clearTimeout(Vm(this,hi)),Hm(this,hi,setTimeout(()=>{this.focusMainContainer(),Hm(this,hi,null)},0))),Vm(this,Ue).delete(t.id),t.annotationElementId&&(null==(e=Vm(this,yi))||e.delete(t.annotationElementId)),this.unselect(t),t.annotationElementId&&Vm(this,ei).has(t.annotationElementId)||null==(i=Vm(this,Xe))||i.remove(t.id)}addDeletedAnnotationElement(t){Vm(this,ei).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return Vm(this,ei).has(t)}removeDeletedAnnotationElement(t){Vm(this,ei).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){Vm(this,ze)!==t&&(Hm(this,ze,t),t&&zm(this,Ni,Qi).call(this,t.propertiesToUpdate))}updateUI(t){Vm(this,Ni,en)===t&&zm(this,Ni,Qi).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){zm(this,Ni,Qi).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(Vm(this,xi).has(t))return Vm(this,xi).delete(t),t.unselect(),void zm(this,Ni,Ki).call(this,{hasSelectedEditor:this.hasSelection});Vm(this,xi).add(t),t.select(),zm(this,Ni,Qi).call(this,t.propertiesToUpdate),zm(this,Ni,Ki).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),null==(e=Vm(this,Je))||e.commitOrRemove();for(const i of Vm(this,xi))i!==t&&i.unselect();Vm(this,xi).clear(),Vm(this,xi).add(t),t.select(),zm(this,Ni,Qi).call(this,t.propertiesToUpdate),zm(this,Ni,Ki).call(this,{hasSelectedEditor:!0})}isSelected(t){return Vm(this,xi).has(t)}get firstSelectedEditor(){return Vm(this,xi).values().next().value}unselect(t){t.unselect(),Vm(this,xi).delete(t),zm(this,Ni,Ki).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==Vm(this,xi).size}get isEnterHandled(){return 1===Vm(this,xi).size&&this.firstSelectedEditor.isEnterHandled}undo(){var t;Vm(this,Ke).undo(),zm(this,Ni,Ki).call(this,{hasSomethingToUndo:Vm(this,Ke).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:zm(this,Ni,nn).call(this)}),null==(t=this._editorUndoBar)||t.hide()}redo(){Vm(this,Ke).redo(),zm(this,Ni,Ki).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Vm(this,Ke).hasSomethingToRedo(),isEmpty:zm(this,Ni,nn).call(this)})}addCommands(t){Vm(this,Ke).add(t),zm(this,Ni,Ki).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:zm(this,Ni,nn).call(this)})}cleanUndoStack(t){Vm(this,Ke).cleanType(t)}delete(){var t;this.commitOrRemove();const e=null==(t=this.currentLayer)?void 0:t.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const i=e?[e]:[...Vm(this,xi)],n=()=>{for(const t of i)zm(this,Ni,tn).call(this,t)};this.addCommands({cmd:()=>{var t;null==(t=this._editorUndoBar)||t.show(n,1===i.length?i[0].editorType:i.length);for(const e of i)e.remove()},undo:n,mustExec:!0})}commitOrRemove(){var t;null==(t=Vm(this,ze))||t.commitOrRemove()}hasSomethingToControl(){return Vm(this,ze)||this.hasSelection}selectAll(){for(const t of Vm(this,xi))t.commit();zm(this,Ni,sn).call(this,Vm(this,Ue).values())}unselectAll(){var t;if((!Vm(this,ze)||(Vm(this,ze).commitOrRemove(),Vm(this,_i)===zv.NONE))&&!(null==(t=Vm(this,Je))?void 0:t.commitOrRemove())&&this.hasSelection){for(const t of Vm(this,xi))t.unselect();Vm(this,xi).clear(),zm(this,Ni,Ki).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;Vm(this,Pi)[0]+=t,Vm(this,Pi)[1]+=e;const[n,s]=Vm(this,Pi),r=[...Vm(this,xi)];Vm(this,Fi)&&clearTimeout(Vm(this,Fi)),Hm(this,Fi,setTimeout(()=>{Hm(this,Fi,null),Vm(this,Pi)[0]=Vm(this,Pi)[1]=0,this.addCommands({cmd:()=>{for(const t of r)Vm(this,Ue).has(t.id)&&(t.translateInPage(n,s),t.translationDone())},undo:()=>{for(const t of r)Vm(this,Ue).has(t.id)&&(t.translateInPage(-n,-s),t.translationDone())},mustExec:!1})},1e3));for(const a of r)a.translateInPage(t,e),a.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Hm(this,ii,new Map);for(const t of Vm(this,xi))Vm(this,ii).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Vm(this,ii))return!1;this.disableUserSelect(!1);const t=Vm(this,ii);Hm(this,ii,null);let e=!1;for(const[{x:n,y:s,pageIndex:r},a]of t)a.newX=n,a.newY=s,a.newPageIndex=r,e||(e=n!==a.savedX||s!==a.savedY||r!==a.savedPageIndex);if(!e)return!1;const i=(t,e,i,n)=>{if(Vm(this,Ue).has(t.id)){const s=Vm(this,Ge).get(n);s?t._setParentAndPosition(s,e,i):(t.pageIndex=n,t.x=e,t.y=i)}};return this.addCommands({cmd:()=>{for(const[e,{newX:n,newY:s,newPageIndex:r}]of t)i(e,n,s,r)},undo:()=>{for(const[e,{savedX:n,savedY:s,savedPageIndex:r}]of t)i(e,n,s,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(Vm(this,ii))for(const i of Vm(this,ii).keys())i.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return(null==(t=this.getActive())?void 0:t.shouldGetKeyboardEvents())||1===Vm(this,xi).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return Vm(this,ze)===t}getActive(){return Vm(this,ze)}getMode(){return Vm(this,_i)}get imageManager(){return o(this,"imageManager",new xw)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,h=e.rangeCount;l<h;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:i,y:n,width:s,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-n)/r,y:1-(t+a-i)/s,width:o/r,height:a/s});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-i)/s,y:1-(e+o-n)/r,width:a/s,height:o/r});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-n)/r,y:(t-i)/s,width:o/r,height:a/s});break;default:a=(t,e,a,o)=>({x:(t-i)/s,y:(e-n)/r,width:a/s,height:o/r})}const o=[];for(let l=0,h=e.rangeCount;l<h;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:i,width:n,height:s}of t.getClientRects())0!==n&&0!==s&&o.push(a(e,i,n,s))}return 0===o.length?null:o}addChangedExistingAnnotation({annotationElementId:t,id:e}){(Vm(this,Ye)||Hm(this,Ye,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;null==(e=Vm(this,Ye))||e.delete(t)}renderAnnotationElement(t){var e;const i=null==(e=Vm(this,Ye))?void 0:e.get(t.data.id);if(!i)return;const n=Vm(this,Xe).getRawValue(i);n&&(Vm(this,_i)!==zv.NONE||n.hasBeenModified)&&n.renderAnnotationElement(t)}setMissingCanvas(t,e,i){var n;const s=null==(n=Vm(this,yi))?void 0:n.get(t);s&&(s.setCanvas(e,i),Vm(this,yi).delete(t))}addMissingCanvas(t,e){(Vm(this,yi)||Hm(this,yi,new Map)).set(t,e)}},He=new WeakMap,ze=new WeakMap,Ue=new WeakMap,Ge=new WeakMap,qe=new WeakMap,Xe=new WeakMap,Ye=new WeakMap,Ke=new WeakMap,Qe=new WeakMap,Ze=new WeakMap,Je=new WeakMap,ti=new WeakMap,ei=new WeakMap,ii=new WeakMap,ni=new WeakMap,si=new WeakMap,ri=new WeakMap,ai=new WeakMap,oi=new WeakMap,li=new WeakMap,hi=new WeakMap,ui=new WeakMap,ci=new WeakMap,di=new WeakMap,pi=new WeakMap,gi=new WeakMap,fi=new WeakMap,mi=new WeakMap,vi=new WeakMap,wi=new WeakMap,bi=new WeakMap,yi=new WeakMap,Ai=new WeakMap,_i=new WeakMap,xi=new WeakMap,Ei=new WeakMap,Si=new WeakMap,Ci=new WeakMap,ki=new WeakMap,Mi=new WeakMap,Pi=new WeakMap,Fi=new WeakMap,Di=new WeakMap,Ti=new WeakMap,Ii=new WeakMap,Li=new WeakMap,Ni=new WeakSet,Oi=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Wi=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of Vm(this,Ge).values())if(i.hasTextLayer(t))return i;return null},Bi=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=zm(this,Ni,Oi).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(e);i&&(Vm(this,pi)||Hm(this,pi,new yw(this)),Vm(this,pi).show(e,i,"ltr"===this.direction))},ji=function(){var t,e,i;const n=document.getSelection();if(!n||n.isCollapsed)return void(Vm(this,Ei)&&(null==(t=Vm(this,pi))||t.hide(),Hm(this,Ei,null),zm(this,Ni,Ki).call(this,{hasSelectedText:!1})));const{anchorNode:s}=n;if(s===Vm(this,Ei))return;const r=zm(this,Ni,Oi).call(this,n).closest(".textLayer");if(r){if(null==(i=Vm(this,pi))||i.hide(),Hm(this,Ei,s),zm(this,Ni,Ki).call(this,{hasSelectedText:!0}),(Vm(this,_i)===zv.HIGHLIGHT||Vm(this,_i)===zv.NONE)&&(Vm(this,_i)===zv.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Hm(this,di,this.isShiftKeyDown),!this.isShiftKeyDown)){const t=Vm(this,_i)===zv.HIGHLIGHT?zm(this,Ni,Wi).call(this,r):null;null==t||t.toggleDrawing();const e=new AbortController,i=this.combinedSignal(e),n=i=>{"pointerup"===i.type&&0!==i.button||(e.abort(),null==t||t.toggleDrawing(!0),"pointerup"===i.type&&zm(this,Ni,Vi).call(this,"main_toolbar"))};window.addEventListener("pointerup",n,{signal:i}),window.addEventListener("blur",n,{signal:i})}}else Vm(this,Ei)&&(null==(e=Vm(this,pi))||e.hide(),Hm(this,Ei,null),zm(this,Ni,Ki).call(this,{hasSelectedText:!1}))},Vi=function(t=""){Vm(this,_i)===zv.HIGHLIGHT?this.highlightSelection(t):Vm(this,ri)&&zm(this,Ni,Bi).call(this)},$i=function(){document.addEventListener("selectionchange",zm(this,Ni,ji).bind(this),{signal:this._signal})},Hi=function(){if(Vm(this,ui))return;Hm(this,ui,new AbortController);const t=this.combinedSignal(Vm(this,ui));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},zi=function(){var t;null==(t=Vm(this,ui))||t.abort(),Hm(this,ui,null)},Ui=function(){if(Vm(this,vi))return;Hm(this,vi,new AbortController);const t=this.combinedSignal(Vm(this,vi));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},Gi=function(){var t;null==(t=Vm(this,vi))||t.abort(),Hm(this,vi,null)},qi=function(){if(Vm(this,Ze))return;Hm(this,Ze,new AbortController);const t=this.combinedSignal(Vm(this,Ze));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Xi=function(){var t;null==(t=Vm(this,Ze))||t.abort(),Hm(this,Ze,null)},Yi=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Ki=function(t){Object.entries(t).some(([t,e])=>Vm(this,Mi)[t]!==e)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Vm(this,Mi),t)}),Vm(this,_i)===zv.HIGHLIGHT&&!1===t.hasSelectedEditor&&zm(this,Ni,Qi).call(this,[[Uv.HIGHLIGHT_FREE,!0]]))},Qi=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Zi=async function(){if(!Vm(this,fi)){Hm(this,fi,!0);const t=[];for(const e of Vm(this,Ge).values())t.push(e.enable());await Promise.all(t);for(const e of Vm(this,Ue).values())e.enable()}},Ji=function(){if(this.unselectAll(),Vm(this,fi)){Hm(this,fi,!1);for(const t of Vm(this,Ge).values())t.disable();for(const t of Vm(this,Ue).values())t.disable()}},tn=function(t){const e=Vm(this,Ge).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},en=function(){let t=null;for(t of Vm(this,xi));return t},nn=function(){if(0===Vm(this,Ue).size)return!0;if(1===Vm(this,Ue).size)for(const t of Vm(this,Ue).values())return t.isEmpty();return!1},sn=function(t){for(const e of Vm(this,xi))e.unselect();Vm(this,xi).clear();for(const e of t)e.isEmpty()||(Vm(this,xi).add(e),e.select());zm(this,Ni,Ki).call(this,{hasSelectedEditor:this.hasSelection})},Bm(Ri,"TRANSLATE_SMALL",1),Bm(Ri,"TRANSLATE_BIG",10),Ri);const Pw=class t{constructor(e){$m(this,wn),$m(this,rn,null),$m(this,an,!1),$m(this,on,null),$m(this,ln,null),$m(this,hn,null),$m(this,un,null),$m(this,cn,!1),$m(this,dn,null),$m(this,pn,null),$m(this,gn,null),$m(this,fn,null),$m(this,mn,!1),Hm(this,pn,e),Hm(this,mn,e._uiManager.useNewAltTextFlow),Vm(t,vn)||Hm(t,vn,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){null!=t._l10n||(t._l10n=e)}async render(){const e=Hm(this,on,document.createElement("button"));e.className="altText",e.tabIndex="0";const i=Hm(this,ln,document.createElement("span"));e.append(i),Vm(this,mn)?(e.classList.add("new"),e.setAttribute("data-l10n-id",Vm(t,vn).missing),i.setAttribute("data-l10n-id",Vm(t,vn)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=Vm(this,pn)._uiManager._signal;e.addEventListener("contextmenu",w,{signal:n}),e.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:n});const s=t=>{t.preventDefault(),Vm(this,pn)._uiManager.editAltText(Vm(this,pn)),Vm(this,mn)&&Vm(this,pn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Vm(this,wn,bn)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(Hm(this,cn,!0),s(t))},{signal:n}),await zm(this,wn,yn).call(this),e}finish(){Vm(this,on)&&(Vm(this,on).focus({focusVisible:Vm(this,cn)}),Hm(this,cn,!1))}isEmpty(){return Vm(this,mn)?null===Vm(this,rn):!Vm(this,rn)&&!Vm(this,an)}hasData(){return Vm(this,mn)?null!==Vm(this,rn)||!!Vm(this,gn):this.isEmpty()}get guessedText(){return Vm(this,gn)}async setGuessedText(e){null===Vm(this,rn)&&(Hm(this,gn,e),Hm(this,fn,await t._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),zm(this,wn,yn).call(this))}toggleAltTextBadge(t=!1){var e;if(!Vm(this,mn)||Vm(this,rn))return null==(e=Vm(this,dn))||e.remove(),void Hm(this,dn,null);if(!Vm(this,dn)){const t=Hm(this,dn,document.createElement("div"));t.className="noAltTextBadge",Vm(this,pn).div.append(t)}Vm(this,dn).classList.toggle("hidden",!t)}serialize(t){let e=Vm(this,rn);return t||Vm(this,gn)!==e||(e=Vm(this,fn)),{altText:e,decorative:Vm(this,an),guessedText:Vm(this,gn),textWithDisclaimer:Vm(this,fn)}}get data(){return{altText:Vm(this,rn),decorative:Vm(this,an)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:n,cancel:s=!1}){i&&(Hm(this,gn,i),Hm(this,fn,n)),Vm(this,rn)===t&&Vm(this,an)===e||(s||(Hm(this,rn,t),Hm(this,an,e)),zm(this,wn,yn).call(this))}toggle(t=!1){Vm(this,on)&&(!t&&Vm(this,un)&&(clearTimeout(Vm(this,un)),Hm(this,un,null)),Vm(this,on).disabled=!t)}shown(){Vm(this,pn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Vm(this,wn,bn)}})}destroy(){var t,e;null==(t=Vm(this,on))||t.remove(),Hm(this,on,null),Hm(this,ln,null),Hm(this,hn,null),null==(e=Vm(this,dn))||e.remove(),Hm(this,dn,null)}};rn=new WeakMap,an=new WeakMap,on=new WeakMap,ln=new WeakMap,hn=new WeakMap,un=new WeakMap,cn=new WeakMap,dn=new WeakMap,pn=new WeakMap,gn=new WeakMap,fn=new WeakMap,mn=new WeakMap,vn=new WeakMap,wn=new WeakSet,bn=function(){return(Vm(this,rn)?"added":null===Vm(this,rn)&&this.guessedText&&"review")||"missing"},yn=async function(){var t,e,i;const n=Vm(this,on);if(!n)return;if(Vm(this,mn)){if(n.classList.toggle("done",!!Vm(this,rn)),n.setAttribute("data-l10n-id",Vm(Pw,vn)[Vm(this,wn,bn)]),null==(t=Vm(this,ln))||t.setAttribute("data-l10n-id",Vm(Pw,vn)[`${Vm(this,wn,bn)}-label`]),!Vm(this,rn))return void(null==(e=Vm(this,hn))||e.remove())}else{if(!Vm(this,rn)&&!Vm(this,an))return n.classList.remove("done"),void(null==(i=Vm(this,hn))||i.remove());n.classList.add("done"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=Vm(this,hn);if(!s){Hm(this,hn,s=document.createElement("span")),s.className="tooltip",s.setAttribute("role","tooltip"),s.id=`alt-text-tooltip-${Vm(this,pn).id}`;const t=100,e=Vm(this,pn)._uiManager._signal;e.addEventListener("abort",()=>{clearTimeout(Vm(this,un)),Hm(this,un,null)},{once:!0}),n.addEventListener("mouseenter",()=>{Hm(this,un,setTimeout(()=>{Hm(this,un,null),Vm(this,hn).classList.add("show"),Vm(this,pn)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:e}),n.addEventListener("mouseleave",()=>{var t;Vm(this,un)&&(clearTimeout(Vm(this,un)),Hm(this,un,null)),null==(t=Vm(this,hn))||t.classList.remove("show")},{signal:e})}Vm(this,an)?s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.removeAttribute("data-l10n-id"),s.textContent=Vm(this,rn)),s.parentNode||n.append(s);const r=Vm(this,pn).getElementForAltText();null==r||r.setAttribute("aria-describedby",s.id)},$m(Pw,vn,null),Bm(Pw,"_l10n",null);let Fw=Pw;class Dw{constructor(t){$m(this,An,null),$m(this,_n,!1),$m(this,xn,null),$m(this,En,null),$m(this,Sn,null),$m(this,Cn,null),$m(this,kn,!1),Hm(this,xn,t),this.toolbar=null}render(){if(!Vm(this,xn)._uiManager.hasCommentManager())return null;const t=Hm(this,An,document.createElement("button"));t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=Vm(this,xn)._uiManager._signal;t.addEventListener("contextmenu",w,{signal:e}),t.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:e});const i=t=>{t.preventDefault(),this.edit()};return t.addEventListener("click",i,{capture:!0,signal:e}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(Hm(this,_n,!0),i(e))},{signal:e}),t}edit(){const{bottom:t,left:e,right:i}=Vm(this,xn).getClientDimensions(),n={top:t};"ltr"===Vm(this,xn)._uiManager.direction?n.right=i:n.left=e,Vm(this,xn)._uiManager.editComment(Vm(this,xn),n)}finish(){Vm(this,An)&&(Vm(this,An).focus({focusVisible:Vm(this,_n)}),Hm(this,_n,!1))}isDeleted(){return Vm(this,kn)||""===Vm(this,Sn)}hasBeenEdited(){return this.isDeleted()||Vm(this,Sn)!==Vm(this,En)}serialize(){return this.data}get data(){return{text:Vm(this,Sn),date:Vm(this,Cn),deleted:Vm(this,kn)}}set data(t){if(null===t)return Hm(this,Sn,""),void Hm(this,kn,!0);Hm(this,Sn,t),Hm(this,Cn,new Date),Hm(this,kn,!1)}setInitialText(t){Hm(this,En,t),this.data=t}toggle(t=!1){Vm(this,An)&&(Vm(this,An).disabled=!t)}shown(){}destroy(){var t;null==(t=Vm(this,An))||t.remove(),Hm(this,An,null),Hm(this,Sn,""),Hm(this,Cn,null),Hm(this,xn,null),Hm(this,_n,!1),Hm(this,kn,!1)}}An=new WeakMap,_n=new WeakMap,xn=new WeakMap,En=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,kn=new WeakMap;let Tw=(zn=class{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:n=null,onPinching:s=null,onPinchEnd:r=null,signal:a}){$m(this,jn),$m(this,Mn),$m(this,Pn,!1),$m(this,Fn,null),$m(this,Dn),$m(this,Tn),$m(this,In),$m(this,Ln),$m(this,Rn,null),$m(this,Nn),$m(this,On,null),$m(this,Wn),$m(this,Bn,null),Hm(this,Mn,t),Hm(this,Fn,i),Hm(this,Dn,e),Hm(this,Tn,n),Hm(this,In,s),Hm(this,Ln,r),Hm(this,Wn,new AbortController),Hm(this,Nn,AbortSignal.any([a,Vm(this,Wn).signal])),t.addEventListener("touchstart",zm(this,jn,Vn).bind(this),{passive:!1,signal:Vm(this,Nn)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/mw.pixelRatio}destroy(){var t,e;null==(t=Vm(this,Wn))||t.abort(),Hm(this,Wn,null),null==(e=Vm(this,Rn))||e.abort(),Hm(this,Rn,null)}},Mn=new WeakMap,Pn=new WeakMap,Fn=new WeakMap,Dn=new WeakMap,Tn=new WeakMap,In=new WeakMap,Ln=new WeakMap,Rn=new WeakMap,Nn=new WeakMap,On=new WeakMap,Wn=new WeakMap,Bn=new WeakMap,jn=new WeakSet,Vn=function(t){var e,i,n;if(null==(e=Vm(this,Dn))?void 0:e.call(this))return;if(1===t.touches.length){if(Vm(this,Rn))return;const t=Hm(this,Rn,new AbortController),e=AbortSignal.any([Vm(this,Nn),t.signal]),i=Vm(this,Mn),n={capture:!0,signal:e,passive:!1},s=t=>{var e;"touch"===t.pointerType&&(null==(e=Vm(this,Rn))||e.abort(),Hm(this,Rn,null))};return i.addEventListener("pointerdown",t=>{"touch"===t.pointerType&&(b(t),s(t))},n),i.addEventListener("pointerup",s,n),void i.addEventListener("pointercancel",s,n)}if(!Vm(this,Bn)){Hm(this,Bn,new AbortController);const t=AbortSignal.any([Vm(this,Nn),Vm(this,Bn).signal]),e=Vm(this,Mn),n={signal:t,capture:!1,passive:!1};e.addEventListener("touchmove",zm(this,jn,$n).bind(this),n);const s=zm(this,jn,Hn).bind(this);e.addEventListener("touchend",s,n),e.addEventListener("touchcancel",s,n),n.capture=!0,e.addEventListener("pointerdown",b,n),e.addEventListener("pointermove",b,n),e.addEventListener("pointercancel",b,n),e.addEventListener("pointerup",b,n),null==(i=Vm(this,Tn))||i.call(this)}if(b(t),2!==t.touches.length||(null==(n=Vm(this,Fn))?void 0:n.call(this)))return void Hm(this,On,null);let[s,r]=t.touches;s.identifier>r.identifier&&([s,r]=[r,s]),Hm(this,On,{touch0X:s.screenX,touch0Y:s.screenY,touch1X:r.screenX,touch1Y:r.screenY})},$n=function(t){var e;if(!Vm(this,On)||2!==t.touches.length)return;b(t);let[i,n]=t.touches;i.identifier>n.identifier&&([i,n]=[n,i]);const{screenX:s,screenY:r}=i,{screenX:a,screenY:o}=n,l=Vm(this,On),{touch0X:h,touch0Y:u,touch1X:c,touch1Y:d}=l,p=c-h,g=d-u,f=a-s,m=o-r,v=Math.hypot(f,m)||1,w=Math.hypot(p,g)||1;if(!Vm(this,Pn)&&Math.abs(w-v)<=zn.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=r,l.touch1X=a,l.touch1Y=o,!Vm(this,Pn))return void Hm(this,Pn,!0);const y=[(s+a)/2,(r+o)/2];null==(e=Vm(this,In))||e.call(this,y,w,v)},Hn=function(t){var e;t.touches.length>=2||(Vm(this,Bn)&&(Vm(this,Bn).abort(),Hm(this,Bn,null),null==(e=Vm(this,Ln))||e.call(this)),Vm(this,On)&&(b(t),Hm(this,On,null),Hm(this,Pn,!1)))},zn);const Iw=class t{constructor(e){$m(this,ms),$m(this,Un,null),$m(this,Gn,null),$m(this,qn,null),$m(this,Xn,null),$m(this,Yn,!1),$m(this,Kn,null),$m(this,Qn,""),$m(this,Zn,!1),$m(this,Jn,null),$m(this,ts,null),$m(this,es,null),$m(this,is,null),$m(this,ns,""),$m(this,ss,!1),$m(this,rs,null),$m(this,as,!1),$m(this,os,!1),$m(this,ls,!1),$m(this,hs,null),$m(this,us,0),$m(this,cs,0),$m(this,ds,null),$m(this,ps,null),Bm(this,"isSelected",!1),Bm(this,"_isCopy",!1),Bm(this,"_editToolbar",null),Bm(this,"_initialOptions",Object.create(null)),Bm(this,"_initialData",null),Bm(this,"_isVisible",!0),Bm(this,"_uiManager",null),Bm(this,"_focusEventsAllowed",!0),$m(this,gs,!1),$m(this,fs,t._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:i,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=t.prototype._resizeWithKeyboard,i=Mw.TRANSLATE_SMALL,n=Mw.TRANSLATE_BIG;return o(this,"_resizerKeyboardManager",new Sw([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],t.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return o(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Rw({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(e,i){if(null!=t._l10n||(t._l10n=e),t._l10nResizer||(t._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==t._borderLineWidth)return;const n=getComputedStyle(document.documentElement);t._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){n("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Vm(this,gs)}set _isDraggable(t){var e;Hm(this,gs,t),null==(e=this.div)||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Vm(this,fs)}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):zm(this,ms,Ns).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(Vm(this,ss)?Hm(this,ss,!1):this.parent.setSelected(this))}focusout(t){var e;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const i=t.relatedTarget;(null==i?void 0:i.closest(`#${this.id}`))||(t.preventDefault(),(null==(e=this.parent)?void 0:e.isMultipleSelection)||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){const[s,r]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/s,this.y=(e+n)/r,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,n]=this.parentDimensions;this.setAt(t*i,e*n,this.width*i,this.height*n),this._onTranslated()}translate(t,e){zm(this,ms,vs).call(this,this.parentDimensions,t,e)}translateInPage(t,e){Vm(this,rs)||Hm(this,rs,[this.x,this.y,this.width,this.height]),zm(this,ms,vs).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){Vm(this,rs)||Hm(this,rs,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[n,s]}=this;if(this.x+=t/n,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l;const{style:h}=i;h.left=`${(100*r).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(r,a),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!Vm(this,rs)&&(Vm(this,rs)[0]!==this.x||Vm(this,rs)[1]!==this.y)}get _hasBeenResized(){return!!Vm(this,rs)&&(Vm(this,rs)[2]!==this.width||Vm(this,rs)[3]!==this.height)}getBaseTranslation(){const[e,i]=this.parentDimensions,{_borderLineWidth:n}=t,s=n/e,r=n/i;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,n]}=this;let{x:s,y:r,width:a,height:o}=this;if(a*=i,o*=n,s*=i,r*=n,this._mustFixPosition)switch(t){case 0:s=c(s,0,i-a),r=c(r,0,n-o);break;case 90:s=c(s,0,i-o),r=c(r,a,n);break;case 180:s=c(s,a,i),r=c(r,o,n);break;case 270:s=c(s,o,i),r=c(r,0,n-a)}this.x=s/=i,this.y=r/=n;const[l,h]=this.getBaseTranslation();s+=l,r+=h,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,i){var n;return zm(n=t,ws,bs).call(n,e,i,this.parentRotation)}pageTranslationToScreen(e,i){var n;return zm(n=t,ws,bs).call(n,e,i,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,n]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*t/i).toFixed(2)}%`,Vm(this,Zn)||(s.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,n=i.endsWith("%"),s=!Vm(this,Zn)&&e.endsWith("%");if(n&&s)return;const[r,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),Vm(this,Zn)||s||(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(1e4*t)/1e4}_onResizing(){}altTextFinish(){var t;null==(t=Vm(this,qn))||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Vm(this,os))return this._editToolbar;this._editToolbar=new bw(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null==(t=Vm(this,qn))||t.destroy())}addContainer(t){var e;const i=null==(e=this._editToolbar)?void 0:e.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Vm(this,qn)||(Fw.initialize(t._l10n),Hm(this,qn,new Fw(this)),Vm(this,Un)&&(Vm(this,qn).data=Vm(this,Un),Hm(this,Un,null))),Vm(this,qn)}get altTextData(){var t;return null==(t=Vm(this,qn))?void 0:t.data}set altTextData(t){Vm(this,qn)&&(Vm(this,qn).data=t)}get guessedAltText(){var t;return null==(t=Vm(this,qn))?void 0:t.guessedText}async setGuessedAltText(t){var e;await(null==(e=Vm(this,qn))?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return null==(e=Vm(this,qn))?void 0:e.serialize(t)}hasAltText(){return!!Vm(this,qn)&&!Vm(this,qn).isEmpty()}hasAltTextData(){var t,e;return null!=(e=null==(t=Vm(this,qn))?void 0:t.hasData())&&e}addCommentButton(){return Vm(this,Xn)?Vm(this,Xn):Hm(this,Xn,new Dw(this))}get commentColor(){return null}get comment(){const t=Vm(this,Xn);return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){Vm(this,Xn)||Hm(this,Xn,new Dw(this)),Vm(this,Xn).data=t}setCommentData(t){Vm(this,Xn)||Hm(this,Xn,new Dw(this)),Vm(this,Xn).setInitialText(t)}get hasEditedComment(){var t;return null==(t=Vm(this,Xn))?void 0:t.hasBeenEdited()}async editComment(){Vm(this,Xn)||Hm(this,Xn,new Dw(this)),Vm(this,Xn).edit()}addComment(t){this.hasEditedComment&&(t.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var t;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=Vm(this,Yn)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),zm(this,ms,Ds).call(this);const[i,n]=this.parentDimensions;this.parentRotation%180!=0&&(e.style.maxWidth=`${(100*n/i).toFixed(2)}%`,e.style.maxHeight=`${(100*i/n).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),S(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Vm(this,ps)||Hm(this,ps,new Tw({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:zm(this,ms,Cs).bind(this),onPinching:zm(this,ms,ks).bind(this),onPinchEnd:zm(this,ms,Ms).bind(this),signal:this._uiManager._signal}))),null==(t=this._uiManager._editorUndoBar)||t.hide(),e}pointerdown(t){const{isMac:e}=sw.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(Hm(this,ss,!0),this._isDraggable?zm(this,ms,Fs).call(this,t):zm(this,ms,Ps).call(this,t))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Vm(this,hs)&&clearTimeout(Vm(this,hs)),Hm(this,hs,setTimeout(()=>{var t;Hm(this,hs,null),null==(t=this.parent)||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const n=this.parentScale,[s,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/n,h=e/n,u=this.x*s,c=this.y*r,d=this.width*s,p=this.height*r;switch(i){case 0:return[u+l+a,r-c-h-p+o,u+l+d+a,r-c-h+o];case 90:return[u+h+a,r-c+l+o,u+h+p+a,r-c+l+d+o];case 180:return[u-l-d+a,r-c+h+o,u-l+a,r-c+h+p+o];case 270:return[u-h-p+a,r-c-l-d+o,u-h+a,r-c-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,n,s,r]=t,a=s-i,o=r-n;switch(this.rotation){case 0:return[i,e-r,a,o];case 90:return[i,e-n,o,a];case 180:return[s,e-n,a,o];case 270:return[s,e-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),Hm(this,os,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),Hm(this,os,!1),!0)}isInEditMode(){return Vm(this,os)}shouldGetKeyboardEvents(){return Vm(this,ls)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:s,innerWidth:r}=window;return e<r&&n>0&&t<s&&i>0}rebuild(){zm(this,ms,Ds).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null==(t=this._initialData)?void 0:t.popupRef)||""}}serialize(t=!1,e=null){n("An editor must be serializable")}static async deserialize(t,e,i){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId});n.rotation=t.rotation,Hm(n,Un,t.accessibilityData),n._isCopy=t.isCopy||!1;const[s,r]=n.pageDimensions,[a,o,l,h]=n.getRectInCurrentCoords(t.rect,r);return n.x=a/s,n.y=o/r,n.width=l/s,n.height=h/r,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var t,e;if(null==(t=Vm(this,is))||t.abort(),Hm(this,is,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Vm(this,hs)&&(clearTimeout(Vm(this,hs)),Hm(this,hs,null)),zm(this,ms,Ns).call(this),this.removeEditToolbar(),Vm(this,ds)){for(const t of Vm(this,ds).values())clearTimeout(t);Hm(this,ds,null)}this.parent=null,null==(e=Vm(this,ps))||e.destroy(),Hm(this,ps,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(zm(this,ms,As).call(this),Vm(this,Jn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),Hm(this,es,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const i=Vm(this,Jn).children;if(!Vm(this,Gn)){Hm(this,Gn,Array.from(i));const e=zm(this,ms,Ts).bind(this),n=zm(this,ms,Is).bind(this),s=this._uiManager._signal;for(const i of Vm(this,Gn)){const r=i.getAttribute("data-resizer-name");i.setAttribute("role","spinbutton"),i.addEventListener("keydown",e,{signal:s}),i.addEventListener("blur",n,{signal:s}),i.addEventListener("focus",zm(this,ms,Ls).bind(this,r),{signal:s}),i.setAttribute("data-l10n-id",t._l10nResizer[r])}}const n=Vm(this,Gn)[0];let s=0;for(const t of i){if(t===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(Vm(this,Gn).length/4);if(r!==s){if(r<s)for(let t=0;t<s-r;t++)Vm(this,Jn).append(Vm(this,Jn).firstChild);else if(r>s)for(let t=0;t<r-s;t++)Vm(this,Jn).firstChild.before(Vm(this,Jn).lastChild);let e=0;for(const n of i){const i=Vm(this,Gn)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",t._l10nResizer[i])}}zm(this,ms,Rs).call(this,0),Hm(this,ls,!0),Vm(this,Jn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(t,e){Vm(this,ls)&&zm(this,ms,Ss).call(this,Vm(this,ns),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){zm(this,ms,Ns).call(this),this.div.focus()}select(){var t,e,i;this.isSelected&&this._editToolbar||(this.isSelected=!0,this.makeResizable(),null==(t=this.div)||t.classList.add("selectedEditor"),this._editToolbar?(null==(e=this._editToolbar)||e.show(),null==(i=Vm(this,qn))||i.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var t,e;(null==(t=this.div)?void 0:t.classList.contains("selectedEditor"))&&(null==(e=this._editToolbar)||e.show())}))}unselect(){var t,e,i,n,s;this.isSelected&&(this.isSelected=!1,null==(t=Vm(this,Jn))||t.classList.add("hidden"),null==(e=this.div)||e.classList.remove("selectedEditor"),(null==(i=this.div)?void 0:i.contains(document.activeElement))&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null==(n=this._editToolbar)||n.hide(),null==(s=Vm(this,qn))||s.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Vm(this,as)}set isEditing(t){Hm(this,as,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){Hm(this,Zn,!0);const i=t/e,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,i=!1){if(i){Vm(this,ds)||Hm(this,ds,new Map);const{action:i}=e;let n=Vm(this,ds).get(i);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),Vm(this,ds).delete(i),0===Vm(this,ds).size&&Hm(this,ds,null)},t._telemetryTimeout),void Vm(this,ds).set(i,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),Hm(this,Yn,!1)}disable(){this.div&&(this.div.tabIndex=-1),Hm(this,Yn,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===(null==e?void 0:e.nodeName)&&e.classList.contains("annotationContent")&&e.remove()}};Un=new WeakMap,Gn=new WeakMap,qn=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,Kn=new WeakMap,Qn=new WeakMap,Zn=new WeakMap,Jn=new WeakMap,ts=new WeakMap,es=new WeakMap,is=new WeakMap,ns=new WeakMap,ss=new WeakMap,rs=new WeakMap,as=new WeakMap,os=new WeakMap,ls=new WeakMap,hs=new WeakMap,us=new WeakMap,cs=new WeakMap,ds=new WeakMap,ps=new WeakMap,gs=new WeakMap,fs=new WeakMap,ms=new WeakSet,vs=function([t,e],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ws=new WeakSet,bs=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},ys=function(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}},As=function(){if(Vm(this,Jn))return;Hm(this,Jn,document.createElement("div")),Vm(this,Jn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const t=document.createElement("div");Vm(this,Jn).append(t),t.classList.add("resizer",i),t.setAttribute("data-resizer-name",i),t.addEventListener("pointerdown",zm(this,ms,_s).bind(this,i),{signal:e}),t.addEventListener("contextmenu",w,{signal:e}),t.tabIndex=-1}this.div.prepend(Vm(this,Jn))},_s=function(t,e){var i;e.preventDefault();const{isMac:n}=sw.platform;if(0!==e.button||e.ctrlKey&&n)return;null==(i=Vm(this,qn))||i.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,Hm(this,ts,[e.screenX,e.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",zm(this,ms,Ss).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",b,{passive:!1,signal:a}),window.addEventListener("contextmenu",w,{signal:a}),Hm(this,es,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var t;r.abort(),this.parent.togglePointerEvents(!0),null==(t=Vm(this,qn))||t.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,zm(this,ms,Es).call(this)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})},xs=function(t,e,i,n){this.width=i,this.height=n,this.x=t,this.y=e;const[s,r]=this.parentDimensions;this.setDims(s*i,r*n),this.fixAndSetPosition(),this._onResized()},Es=function(){if(!Vm(this,es))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=Vm(this,es);Hm(this,es,null);const s=this.x,r=this.y,a=this.width,o=this.height;s===t&&r===e&&a===i&&o===n||this.addCommands({cmd:zm(this,ms,xs).bind(this,s,r,a,o),undo:zm(this,ms,xs).bind(this,t,e,i,n),mustExec:!0})},Ss=function(t,e){const[i,n]=this.parentDimensions,s=this.x,r=this.y,a=this.width,o=this.height,l=Iw.MIN_SIZE/i,h=Iw.MIN_SIZE/n,u=zm(this,ms,ys).call(this,this.rotation),d=(t,e)=>[u[0]*t+u[2]*e,u[1]*t+u[3]*e],p=zm(this,ms,ys).call(this,360-this.rotation);let g,f,m=!1,v=!1;switch(t){case"topLeft":m=!0,g=(t,e)=>[0,0],f=(t,e)=>[t,e];break;case"topMiddle":g=(t,e)=>[t/2,0],f=(t,e)=>[t/2,e];break;case"topRight":m=!0,g=(t,e)=>[t,0],f=(t,e)=>[0,e];break;case"middleRight":v=!0,g=(t,e)=>[t,e/2],f=(t,e)=>[0,e/2];break;case"bottomRight":m=!0,g=(t,e)=>[t,e],f=(t,e)=>[0,0];break;case"bottomMiddle":g=(t,e)=>[t/2,e],f=(t,e)=>[t/2,0];break;case"bottomLeft":m=!0,g=(t,e)=>[0,e],f=(t,e)=>[t,0];break;case"middleLeft":v=!0,g=(t,e)=>[0,e/2],f=(t,e)=>[t,e/2]}const w=g(a,o),b=f(a,o);let y=d(...b);const A=Iw._round(s+y[0]),_=Iw._round(r+y[1]);let x,E,S=1,C=1;if(e.fromKeyboard)({deltaX:x,deltaY:E}=e);else{const{screenX:t,screenY:i}=e,[n,s]=Vm(this,ts);[x,E]=this.screenToPageTranslation(t-n,i-s),Vm(this,ts)[0]=t,Vm(this,ts)[1]=i}var k,M;if([x,E]=(k=x/i,M=E/n,[p[0]*k+p[2]*M,p[1]*k+p[3]*M]),m){const t=Math.hypot(a,o);S=C=Math.max(Math.min(Math.hypot(b[0]-w[0]-x,b[1]-w[1]-E)/t,1/a,1/o),l/a,h/o)}else v?S=c(Math.abs(b[0]-w[0]-x),l,1)/a:C=c(Math.abs(b[1]-w[1]-E),h,1)/o;const P=Iw._round(a*S),F=Iw._round(o*C);y=d(...f(P,F));const D=A-y[0],T=_-y[1];Vm(this,rs)||Hm(this,rs,[this.x,this.y,this.width,this.height]),this.width=P,this.height=F,this.x=D,this.y=T,this.setDims(i*P,n*F),this.fixAndSetPosition(),this._onResizing()},Cs=function(){var t;Hm(this,es,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null==(t=Vm(this,qn))||t.toggle(!1),this.parent.togglePointerEvents(!1)},ks=function(t,e,i){let n=i/e*.7+1-.7;if(1===n)return;const s=zm(this,ms,ys).call(this,this.rotation),r=(t,e)=>[s[0]*t+s[2]*e,s[1]*t+s[3]*e],[a,o]=this.parentDimensions,l=this.x,h=this.y,u=this.width,c=this.height,d=Iw.MIN_SIZE/a,p=Iw.MIN_SIZE/o;n=Math.max(Math.min(n,1/u,1/c),d/u,p/c);const g=Iw._round(u*n),f=Iw._round(c*n);if(g===u&&f===c)return;Vm(this,rs)||Hm(this,rs,[l,h,u,c]);const m=r(u/2,c/2),v=Iw._round(l+m[0]),w=Iw._round(h+m[1]),b=r(g/2,f/2);this.x=v-b[0],this.y=w-b[1],this.width=g,this.height=f,this.setDims(a*g,o*f),this.fixAndSetPosition(),this._onResizing()},Ms=function(){var t;null==(t=Vm(this,qn))||t.toggle(!0),this.parent.togglePointerEvents(!0),zm(this,ms,Es).call(this)},Ps=function(t){const{isMac:e}=sw.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Fs=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const n=new AbortController,s=this._uiManager.combinedSignal(n),r={capture:!0,passive:!1,signal:s},a=t=>{n.abort(),Hm(this,Kn,null),Hm(this,ss,!1),this._uiManager.endDragSession()||zm(this,ms,Ps).call(this,t),i&&this._onStopDragging()};e&&(Hm(this,us,t.clientX),Hm(this,cs,t.clientY),Hm(this,Kn,t.pointerId),Hm(this,Qn,t.pointerType),window.addEventListener("pointermove",t=>{i||(i=!0,this._onStartDragging());const{clientX:e,clientY:n,pointerId:s}=t;if(s!==Vm(this,Kn))return void b(t);const[r,a]=this.screenToPageTranslation(e-Vm(this,us),n-Vm(this,cs));Hm(this,us,e),Hm(this,cs,n),this._uiManager.dragSelectedEditors(r,a)},r),window.addEventListener("touchmove",b,r),window.addEventListener("pointerdown",t=>{t.pointerType===Vm(this,Qn)&&(Vm(this,ps)||t.isPrimary)&&a(t),b(t)},r));const o=t=>{Vm(this,Kn)&&Vm(this,Kn)!==t.pointerId?b(t):a(t)};window.addEventListener("pointerup",o,{signal:s}),window.addEventListener("blur",o,{signal:s})},Ds=function(){if(Vm(this,is)||!this.div)return;Hm(this,is,new AbortController);const t=this._uiManager.combinedSignal(Vm(this,is));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Ts=function(t){Iw._resizerKeyboardManager.exec(this,t)},Is=function(t){var e;Vm(this,ls)&&(null==(e=t.relatedTarget)?void 0:e.parentNode)!==Vm(this,Jn)&&zm(this,ms,Ns).call(this)},Ls=function(t){Hm(this,ns,Vm(this,ls)?t:"")},Rs=function(t){if(Vm(this,Gn))for(const e of Vm(this,Gn))e.tabIndex=t},Ns=function(){Hm(this,ls,!1),zm(this,ms,Rs).call(this,-1),zm(this,ms,Es).call(this)},$m(Iw,ws),Bm(Iw,"_l10n",null),Bm(Iw,"_l10nResizer",null),Bm(Iw,"_borderLineWidth",-1),Bm(Iw,"_colorManager",new kw),Bm(Iw,"_zIndex",1),Bm(Iw,"_telemetryTimeout",1e3);let Lw=Iw;class Rw extends Lw{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Nw=3285377520,Ow=4294901760,Ww=65535;class Bw{constructor(t){this.h1=t?4294967295&t:Nw,this.h2=t?4294967295&t:Nw}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length),i=0;for(let n=0,s=t.length;n<s;n++){const s=t.charCodeAt(n);s<=255?e[i++]=s:(e[i++]=s>>>8,e[i++]=255&s)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),i=e.byteLength}const n=i>>2,s=i-4*n,r=new Uint32Array(e.buffer,0,n);let a=0,o=0,l=this.h1,h=this.h2;const u=3432918353,c=461845907,d=11601,p=13715;for(let g=0;g<n;g++)1&g?(a=r[g],a=a*u&Ow|a*d&Ww,a=a<<15|a>>>17,a=a*c&Ow|a*p&Ww,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[g],o=o*u&Ow|o*d&Ww,o=o<<15|o>>>17,o=o*c&Ow|o*p&Ww,h^=o,h=h<<13|h>>>19,h=5*h+3864292196);switch(a=0,s){case 3:a^=e[4*n+2]<<16;case 2:a^=e[4*n+1]<<8;case 1:a^=e[4*n],a=a*u&Ow|a*d&Ww,a=a<<15|a>>>17,a=a*c&Ow|a*p&Ww,1&n?l^=a:h^=a}this.h1=l,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&Ow|36045*t&Ww,e=4283543511*e&Ow|(2950163797*(e<<16|t>>>16)&Ow)>>>16,t^=e>>>1,t=444984403*t&Ow|60499*t&Ww,e=3301882366*e&Ow|(3120437893*(e<<16|t>>>16)&Ow)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const jw=Object.freeze({map:null,hash:"",transfer:void 0});class Vw{constructor(){$m(this,js),$m(this,Os,!1),$m(this,Ws,null),$m(this,Bs,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=Vm(this,Bs).get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return Vm(this,Bs).get(t)}remove(t){if(Vm(this,Bs).delete(t),0===Vm(this,Bs).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of Vm(this,Bs).values())if(t instanceof Lw)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=Vm(this,Bs).get(t);let n=!1;if(void 0!==i)for(const[s,r]of Object.entries(e))i[s]!==r&&(n=!0,i[s]=r);else n=!0,Vm(this,Bs).set(t,e);n&&zm(this,js,Vs).call(this),e instanceof Lw&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return Vm(this,Bs).has(t)}get size(){return Vm(this,Bs).size}resetModified(){Vm(this,Os)&&(Hm(this,Os,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new $w(this)}get serializable(){if(0===Vm(this,Bs).size)return jw;const t=new Map,e=new Bw,i=[],n=Object.create(null);let s=!1;for(const[r,a]of Vm(this,Bs)){const i=a instanceof Lw?a.serialize(!1,n):a;i&&(t.set(r,i),e.update(`${r}:${JSON.stringify(i)}`),s||(s=!!i.bitmap))}if(s)for(const r of t.values())r.bitmap&&i.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:jw}get editorStats(){var t;let e=null;const i=new Map;for(const n of Vm(this,Bs).values()){if(!(n instanceof Lw))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;i.has(r)||i.set(r,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[e,i]of Object.entries(s)){if("type"===e)continue;let n=a.get(e);n||(n=new Map,a.set(e,n));const s=null!=(t=n.get(i))?t:0;n.set(i,s+1)}}for(const[n,s]of i)e[n]=s.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){Hm(this,Ws,null)}get modifiedIds(){if(Vm(this,Ws))return Vm(this,Ws);const t=[];for(const e of Vm(this,Bs).values())e instanceof Lw&&e.annotationElementId&&e.serialize()&&t.push(e.annotationElementId);return Hm(this,Ws,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return Vm(this,Bs).entries()}}Os=new WeakMap,Ws=new WeakMap,Bs=new WeakMap,js=new WeakSet,Vs=function(){Vm(this,Os)||(Hm(this,Os,!0),"function"==typeof this.onSetModified&&this.onSetModified())};class $w extends Vw{constructor(t){super(),$m(this,$s);const{map:e,hash:i,transfer:n}=t.serializable,s=structuredClone(e,n?{transfer:n}:null);Hm(this,$s,{map:s,hash:i,transfer:n})}get print(){n("Should not call PrintAnnotationStorage.print")}get serializable(){return Vm(this,$s)}get modifiedIds(){return o(this,"modifiedIds",{ids:new Set,hash:""})}}$s=new WeakMap;class Hw{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){$m(this,Hs,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),Vm(this,Hs).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:r}){if(t&&!Vm(this,Hs).has(t.loadedName)){if(s(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:s}=t,a=new FontFace(e,n,s);this.addNativeFontFace(a);try{await a.load(),Vm(this,Hs).add(e),null==r||r(t)}catch{i(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}n("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void(await this.loadSystemFont(t));if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(n){throw i(`Failed to load font '${e.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(e=>{const i=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var t;return o(this,"isFontLoadingAPISupported",!!(null==(t=this._document)?void 0:t.fonts))}get isSyncFontLoadingSupported(){return o(this,"isSyncFontLoadingSupported",Bv||sw.platform.isFirefox)}_queueLoadingCallback(t){const{loadingRequests:e}=this,i={done:!1,complete:function(){for(s(!i.done,"completeRequest() cannot be called twice."),i.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(i),i}get _loadTestFont(){return o(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function s(t,e,i,n){return t.substring(0,e)+n+t.substring(e+i)}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let h=0;const u=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=s(c,976,u.length,u);const d=1482184792;let p=n(c,16);for(r=0,a=u.length-3;r<a;r+=4)p=p-d+n(u,r)|0;var g;r<u.length&&(p=p-d+n(u+"XXX",r)|0),c=s(c,16,4,(g=p,String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,255&g)));const f=`@font-face {font-family:"${u}";src:url(data:font/opentype;base64,${btoa(c)});}`;this.insertRule(f);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const i of[t.loadedName,u]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=i,m.append(t)}this._document.body.append(m),function t(e,n){if(++h>30)return i("Load test font never loaded."),void n();l.font="30px "+e,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(u,()=>{m.remove(),e.complete()})}}Hs=new WeakMap;class zw{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return null==(t=this._inspectFont)||t.call(this,this),e}createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${d(this.data)});`;let i;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return null==(t=this._inspectFont)||t.call(this,this,e),i}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(a){i(`getPathGenerator - ignoring character: "${a}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}}const Uw=t=>"object"==typeof t&&Number.isInteger(null==t?void 0:t.num)&&t.num>=0&&Number.isInteger(null==t?void 0:t.gen)&&t.gen>=0,Gw=function(t,e,i){if(!Array.isArray(i)||i.length<2)return!1;const[n,s,...r]=i;if(!t(n)&&!Number.isInteger(n))return!1;if(!e(s))return!1;const a=r.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of r)if(!("number"==typeof l||o&&null===l))return!1;return!0}.bind(null,Uw,t=>"object"==typeof t&&"string"==typeof(null==t?void 0:t.name));class qw{constructor(){$m(this,zs,new Map),$m(this,Us,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};Vm(this,Us).then(()=>{for(const[t]of Vm(this,zs))t.call(this,i)})}addEventListener(t,e,n=null){let s=null;if((null==n?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted)return void i("LoopbackPort - cannot use an `aborted` signal.");const a=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}Vm(this,zs).set(e,s)}removeEventListener(t,e){const i=Vm(this,zs).get(e);null==i||i(),Vm(this,zs).delete(e)}terminate(){for(const[,t]of Vm(this,zs))null==t||t();Vm(this,zs).clear()}}zs=new WeakMap,Us=new WeakMap;class Xw{constructor(t,e,i){$m(this,qs),$m(this,Gs,new AbortController),this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",zm(this,qs,Xs).bind(this),{signal:Vm(this,Gs).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(r){s.reject(r)}return s.promise}sendWithStream(t,e,i,n){const r=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:i=>{const s=Promise.withResolvers();return this.streamControllers[r]={controller:i,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:t,streamId:r,data:e,desiredSize:i.desiredSize},n),s.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[r].pullCall=e,l.postMessage({sourceName:a,targetName:o,stream:6,streamId:r,desiredSize:t.desiredSize}),e.promise},cancel:t=>{s(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[r].cancelCall=e,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:1,streamId:r,reason:M(t)}),e.promise}},i)}destroy(){var t;null==(t=Vm(this,Gs))||t.abort(),Hm(this,Gs,null)}}Gs=new WeakMap,qs=new WeakSet,Xs=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream)return void zm(this,qs,Ks).call(this,t);if(t.callback){const e=t.callbackId,i=this.callbackCapabilities[e];if(!i)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],1===t.callback)i.resolve(t.data);else{if(2!==t.callback)throw new Error("Unexpected callback case");i.reject(M(t.reason))}return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,n=t.sourceName,s=this.comObj;return void Promise.try(e,t.data).then(function(e){s.postMessage({sourceName:i,targetName:n,callback:1,callbackId:t.callbackId,data:e})},function(e){s.postMessage({sourceName:i,targetName:n,callback:2,callbackId:t.callbackId,reason:M(e)})})}t.streamId?zm(this,qs,Ys).call(this,t):e(t.data)},Ys=function(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,r=this.comObj,a=this,o=this.actionHandler[t.action],l={enqueue(t,s=1,a){if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=s,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:n,stream:4,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:3,streamId:e}),delete a.streamSinks[e])},error(t){s(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:n,stream:5,streamId:e,reason:M(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(o,t.data,l).then(function(){r.postMessage({sourceName:i,targetName:n,stream:8,streamId:e,success:!0})},function(t){r.postMessage({sourceName:i,targetName:n,stream:8,streamId:e,reason:M(t)})})},Ks=function(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,r=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case 8:t.success?a.startCall.resolve():a.startCall.reject(M(t.reason));break;case 7:t.success?a.pullCall.resolve():a.pullCall.reject(M(t.reason));break;case 6:if(!o){r.postMessage({sourceName:i,targetName:n,stream:7,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||k).then(function(){r.postMessage({sourceName:i,targetName:n,stream:7,streamId:e,success:!0})},function(t){r.postMessage({sourceName:i,targetName:n,stream:7,streamId:e,reason:M(t)})});break;case 4:if(s(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case 3:if(s(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),zm(this,qs,Qs).call(this,a,e);break;case 5:s(a,"error should have stream controller"),a.controller.error(M(t.reason)),zm(this,qs,Qs).call(this,a,e);break;case 2:t.success?a.cancelCall.resolve():a.cancelCall.reject(M(t.reason)),zm(this,qs,Qs).call(this,a,e);break;case 1:if(!o)break;const l=M(t.reason);Promise.try(o.onCancel||k,l).then(function(){r.postMessage({sourceName:i,targetName:n,stream:2,streamId:e,success:!0})},function(t){r.postMessage({sourceName:i,targetName:n,stream:2,streamId:e,reason:M(t)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Qs=async function(t,e){var i,n,s;await Promise.allSettled([null==(i=t.startCall)?void 0:i.promise,null==(n=t.pullCall)?void 0:n.promise,null==(s=t.cancelCall)?void 0:s.promise]),delete this.streamControllers[e]};class Yw{constructor({enableHWA:t=!1}){$m(this,Zs,!1),Hm(this,Zs,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!Vm(this,Zs)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){n("Abstract method `_createCanvas` called.")}}Zs=new WeakMap;class Kw extends Yw{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class Qw{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(t=>({cMapData:t,isCompressed:this.isCompressed})).catch(t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){n("Abstract method `_fetch` called.")}}class Zw extends Qw{async _fetch(t){const e=await p(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):h(e)}}class Jw{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,s){return"none"}destroy(t=!1){}}class tb extends Jw{constructor({docId:t,ownerDocument:e=globalThis.document}){super(),$m(this,ar),$m(this,Js),$m(this,tr),$m(this,er),$m(this,ir),$m(this,nr),$m(this,sr),$m(this,rr,0),Hm(this,ir,t),Hm(this,nr,e)}addFilter(t){if(!t)return"none";let e=Vm(this,ar,or).get(t);if(e)return e;const[i,n,s]=zm(this,ar,ur).call(this,t),r=1===t.length?i:`${i}${n}${s}`;if(e=Vm(this,ar,or).get(r),e)return Vm(this,ar,or).set(t,e),e;const a=`g_${Vm(this,ir)}_transfer_map_${Um(this,rr)._++}`,o=zm(this,ar,cr).call(this,a);Vm(this,ar,or).set(t,o),Vm(this,ar,or).set(r,o);const l=zm(this,ar,gr).call(this,a);return zm(this,ar,mr).call(this,i,n,s,l),o}addHCMFilter(t,e){var i;const n=`${t}-${e}`,s="base";let r=Vm(this,ar,lr).get(s);if((null==r?void 0:r.key)===n)return r.url;if(r?(null==(i=r.filter)||i.remove(),r.key=n,r.url="none",r.filter=null):(r={key:n,url:"none",filter:null},Vm(this,ar,lr).set(s,r)),!t||!e)return r.url;const a=zm(this,ar,wr).call(this,t);t=aw.makeHexColor(...a);const o=zm(this,ar,wr).call(this,e);if(e=aw.makeHexColor(...o),Vm(this,ar,hr).style.color="","#000000"===t&&"#ffffff"===e||t===e)return r.url;const l=new Array(256);for(let p=0;p<=255;p++){const t=p/255;l[p]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const h=l.join(","),u=`g_${Vm(this,ir)}_hcm_filter`,c=r.filter=zm(this,ar,gr).call(this,u);zm(this,ar,mr).call(this,h,h,h,c),zm(this,ar,pr).call(this,c);const d=(t,e)=>{const i=a[t]/255,n=o[t]/255,s=new Array(e+1);for(let r=0;r<=e;r++)s[r]=i+r/e*(n-i);return s.join(",")};return zm(this,ar,mr).call(this,d(0,5),d(1,5),d(2,5),c),r.url=zm(this,ar,cr).call(this,u),r.url}addAlphaFilter(t){let e=Vm(this,ar,or).get(t);if(e)return e;const[i]=zm(this,ar,ur).call(this,[t]),n=`alpha_${i}`;if(e=Vm(this,ar,or).get(n),e)return Vm(this,ar,or).set(t,e),e;const s=`g_${Vm(this,ir)}_alpha_map_${Um(this,rr)._++}`,r=zm(this,ar,cr).call(this,s);Vm(this,ar,or).set(t,r),Vm(this,ar,or).set(n,r);const a=zm(this,ar,gr).call(this,s);return zm(this,ar,vr).call(this,i,a),r}addLuminosityFilter(t){let e,i,n=Vm(this,ar,or).get(t||"luminosity");if(n)return n;if(t?([e]=zm(this,ar,ur).call(this,[t]),i=`luminosity_${e}`):i="luminosity",n=Vm(this,ar,or).get(i),n)return Vm(this,ar,or).set(t,n),n;const s=`g_${Vm(this,ir)}_luminosity_map_${Um(this,rr)._++}`,r=zm(this,ar,cr).call(this,s);Vm(this,ar,or).set(t,r),Vm(this,ar,or).set(i,r);const a=zm(this,ar,gr).call(this,s);return zm(this,ar,dr).call(this,a),t&&zm(this,ar,vr).call(this,e,a),r}addHighlightHCMFilter(t,e,i,n,s){var r;const a=`${e}-${i}-${n}-${s}`;let o=Vm(this,ar,lr).get(t);if((null==o?void 0:o.key)===a)return o.url;if(o?(null==(r=o.filter)||r.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},Vm(this,ar,lr).set(t,o)),!e||!i)return o.url;const[l,h]=[e,i].map(zm(this,ar,wr).bind(this));let u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),c=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[d,p]=[n,s].map(zm(this,ar,wr).bind(this));c<u&&([u,c,d,p]=[c,u,p,d]),Vm(this,ar,hr).style.color="";const g=(t,e,i)=>{const n=new Array(256),s=(c-u)/i,r=t/255,a=(e-t)/(255*i);let o=0;for(let l=0;l<=i;l++){const t=Math.round(u+l*s),e=r+l*a;for(let i=o;i<=t;i++)n[i]=e;o=t+1}for(let l=o;l<256;l++)n[l]=n[o-1];return n.join(",")},f=`g_${Vm(this,ir)}_hcm_${t}_filter`,m=o.filter=zm(this,ar,gr).call(this,f);return zm(this,ar,pr).call(this,m),zm(this,ar,mr).call(this,g(d[0],p[0],5),g(d[1],p[1],5),g(d[2],p[2],5),m),o.url=zm(this,ar,cr).call(this,f),o.url}destroy(t=!1){var e,i,n,s;t&&(null==(e=Vm(this,sr))?void 0:e.size)||(null==(i=Vm(this,er))||i.parentNode.parentNode.remove(),Hm(this,er,null),null==(n=Vm(this,tr))||n.clear(),Hm(this,tr,null),null==(s=Vm(this,sr))||s.clear(),Hm(this,sr,null),Hm(this,rr,0))}}Js=new WeakMap,tr=new WeakMap,er=new WeakMap,ir=new WeakMap,nr=new WeakMap,sr=new WeakMap,rr=new WeakMap,ar=new WeakSet,or=function(){return Vm(this,tr)||Hm(this,tr,new Map)},lr=function(){return Vm(this,sr)||Hm(this,sr,new Map)},hr=function(){if(!Vm(this,er)){const t=Vm(this,nr).createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=Vm(this,nr).createElementNS(uw,"svg");i.setAttribute("width",0),i.setAttribute("height",0),Hm(this,er,Vm(this,nr).createElementNS(uw,"defs")),t.append(i),i.append(Vm(this,er)),Vm(this,nr).body.append(t)}return Vm(this,er)},ur=function(t){if(1===t.length){const e=t[0],i=new Array(256);for(let t=0;t<256;t++)i[t]=e[t]/255;const n=i.join(",");return[n,n,n]}const[e,i,n]=t,s=new Array(256),r=new Array(256),a=new Array(256);for(let o=0;o<256;o++)s[o]=e[o]/255,r[o]=i[o]/255,a[o]=n[o]/255;return[s.join(","),r.join(","),a.join(",")]},cr=function(t){if(void 0===Vm(this,Js)){Hm(this,Js,"");const t=Vm(this,nr).URL;t!==Vm(this,nr).baseURI&&(g(t)?i('#createUrl: ignore "data:"-URL for performance reasons.'):Hm(this,Js,a(t,"")))}return`url(${Vm(this,Js)}#${t})`},dr=function(t){const e=Vm(this,nr).createElementNS(uw,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)},pr=function(t){const e=Vm(this,nr).createElementNS(uw,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)},gr=function(t){const e=Vm(this,nr).createElementNS(uw,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),Vm(this,ar,hr).append(e),e},fr=function(t,e,i){const n=Vm(this,nr).createElementNS(uw,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),t.append(n)},mr=function(t,e,i,n){const s=Vm(this,nr).createElementNS(uw,"feComponentTransfer");n.append(s),zm(this,ar,fr).call(this,s,"feFuncR",t),zm(this,ar,fr).call(this,s,"feFuncG",e),zm(this,ar,fr).call(this,s,"feFuncB",i)},vr=function(t,e){const i=Vm(this,nr).createElementNS(uw,"feComponentTransfer");e.append(i),zm(this,ar,fr).call(this,i,"feFuncA",t)},wr=function(t){return Vm(this,ar,hr).style.color=t,A(getComputedStyle(Vm(this,ar,hr)).getPropertyValue("color"))};class eb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(t=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){n("Abstract method `_fetch` called.")}}class ib extends eb{async _fetch(t){const e=await p(t,"arraybuffer");return new Uint8Array(e)}}class nb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(t=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){n("Abstract method `_fetch` called.")}}class sb extends nb{async _fetch(t){const e=await p(t,"arraybuffer");return new Uint8Array(e)}}Bv&&i("Please use the `legacy` build in Node.js environments.");class rb extends Jw{}class ab extends Yw{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class ob extends Qw{async _fetch(t){return P(t)}}class lb extends eb{async _fetch(t){return P(t)}}class hb extends nb{async _fetch(t){return P(t)}}const ub="Fill",cb="Stroke",db="Shading";class pb{isModifyingCurrentTransform(){return!1}getPattern(){n("Abstract method `getPattern` called.")}}class gb extends pb{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,n){let s;if(n===cb||n===ub){const r=e.current.getClippedPathBoundingBox(n,_(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o),h=l.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-r[0],-r[1]),i=aw.transform(i,[1,0,0,1,r[0],r[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),F(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=t.createPattern(l.canvas,"no-repeat");const u=new DOMMatrix(i);s.setTransform(u)}else F(t,this._bbox),s=this._createGradient(t);return s}}class fb extends pb{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const n=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-n,a=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),h=r/o,u=a/l,c={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-s,scaleX:1/h,scaleY:1/u},d=o+4,p=l+4,g=i.getCanvas("mesh",d,p),f=g.context,m=f.createImageData(o,l);if(e){const t=m.data;for(let i=0,n=t.length;i<n;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(const v of this._figures)T(m,v,c);return f.putImageData(m,2,2),{canvas:g.canvas,offsetX:n-2*h,offsetY:s-2*u,scaleX:h,scaleY:u}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,n){F(t,this._bbox);const s=new Float32Array(2);if(n===db)aw.singularValueDecompose2dScale(_(t),s);else if(this.matrix){aw.singularValueDecompose2dScale(this.matrix,s);const[t,i]=s;aw.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=t,s[1]*=i}else aw.singularValueDecompose2dScale(e.baseTransform,s);const r=this._createMeshCanvas(s,n===db?null:this._background,e.cachedCanvases);return n!==db&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class mb extends pb{getPattern(){return"hotpink"}}const vb=class t{constructor(t,e,i,n){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=n}createPatternCanvas(t){const{bbox:i,operatorList:n,paintType:s,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:h}=this;l=Math.abs(l),h=Math.abs(h),e("TilingType: "+r);const u=i[0],c=i[1],d=i[2],p=i[3],g=d-u,f=p-c,m=new Float32Array(2);aw.singularValueDecompose2dScale(this.matrix,m);const[v,w]=m;aw.singularValueDecompose2dScale(this.baseTransform,m);const b=v*m[0],y=w*m[1];let A=g,x=f,E=!1,S=!1;const C=Math.ceil(l*b),k=Math.ceil(h*y);C>=Math.ceil(g*b)?A=l:E=!0,k>=Math.ceil(f*y)?x=h:S=!0;const M=this.getSizeAndScale(A,this.ctx.canvas.width,b),P=this.getSizeAndScale(x,this.ctx.canvas.height,y),F=t.cachedCanvases.getCanvas("pattern",M.size,P.size),D=F.context,T=o.createCanvasGraphics(D);if(T.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(T,s,a),D.translate(-M.scale*u,-P.scale*c),T.transform(M.scale,0,0,P.scale,0,0),D.save(),this.clipBbox(T,u,c,d,p),T.baseTransform=_(T.ctx),T.executeOperatorList(n),T.endDrawing(),D.restore(),E||S){const e=F.canvas;E&&(A=l),S&&(x=h);const i=this.getSizeAndScale(A,this.ctx.canvas.width,b),n=this.getSizeAndScale(x,this.ctx.canvas.height,y),s=i.size,r=n.size,a=t.cachedCanvases.getCanvas("pattern-workaround",s,r),o=a.context,d=E?Math.floor(g/l):0,p=S?Math.floor(f/h):0;for(let t=0;t<=d;t++)for(let i=0;i<=p;i++)o.drawImage(e,s*t,r*i,s,r,0,0,s,r);return{canvas:a.canvas,scaleX:i.scale,scaleY:n.scale,offsetX:u,offsetY:c}}return{canvas:F.canvas,scaleX:M.scale,scaleY:P.scale,offsetX:u,offsetY:c}}getSizeAndScale(e,i,n){const s=Math.max(t.MAX_PATTERN_SIZE,i);let r=Math.ceil(e*n);return r>=s?r=s:n=r/e,{scale:n,size:r}}clipBbox(t,e,i,n,s){const r=n-e,a=s-i;t.ctx.rect(e,i,r,a),aw.axialAlignedBoundingBox([e,i,n,s],_(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const n=t.ctx,s=t.current;switch(e){case 1:const{fillStyle:t,strokeStyle:r}=this.ctx;n.fillStyle=s.fillColor=t,n.strokeStyle=s.strokeColor=r;break;case 2:n.fillStyle=n.strokeStyle=i,s.fillColor=s.strokeColor=i;break;default:throw new iw(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,n){let s=i;n!==db&&(s=aw.transform(s,e.baseTransform),this.matrix&&(s=aw.transform(s,this.matrix)));const r=this.createPatternCanvas(e);let a=new DOMMatrix(s);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=t.createPattern(r.canvas,"repeat");return o.setTransform(a),o}};Bm(vb,"MAX_PATTERN_SIZE",3e3);let wb=vb;const bb=16,yb=new DOMMatrix,Ab=new Float32Array(2),_b=new Float32Array([1/0,1/0,-1/0,-1/0]);class xb{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return void 0!==this.cache[t]?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}class Eb{constructor(t,e){Bm(this,"alphaIsShape",!1),Bm(this,"fontSize",0),Bm(this,"fontSizeScale",1),Bm(this,"textMatrix",null),Bm(this,"textMatrixScale",1),Bm(this,"fontMatrix",jv),Bm(this,"leading",0),Bm(this,"x",0),Bm(this,"y",0),Bm(this,"lineX",0),Bm(this,"lineY",0),Bm(this,"charSpacing",0),Bm(this,"wordSpacing",0),Bm(this,"textHScale",1),Bm(this,"textRenderingMode",0),Bm(this,"textRise",0),Bm(this,"fillColor","#000000"),Bm(this,"strokeColor","#000000"),Bm(this,"patternFill",!1),Bm(this,"patternStroke",!1),Bm(this,"fillAlpha",1),Bm(this,"strokeAlpha",1),Bm(this,"lineWidth",1),Bm(this,"activeSMask",null),Bm(this,"transferMaps","none"),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=_b.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=ub,e=null){const i=this.minMax.slice();if(t===cb){e||n("Stroke bounding box must include transform."),aw.singularValueDecompose2dScale(e,Ab);const t=Ab[0]*this.lineWidth/2,s=Ab[1]*this.lineWidth/2;i[0]-=t,i[1]-=s,i[2]+=t,i[3]+=s}return i}updateClipFromPath(){const t=aw.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(_b,0)}getClippedPathBoundingBox(t=ub,e=null){return aw.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}const Sb=["butt","round","square"],Cb=["miter","round","bevel"],kb={},Mb={};br=new WeakSet,yr=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ar=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},_r=function(t,e,i){const n=new Path2D;return n.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),n};let Pb=class t{constructor(t,e,i,n,s,{optionalContentConfig:r,markedContentStack:a=null},o,l){$m(this,br),this.ctx=t,this.current=new Eb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=r,this.cachedCanvases=new xb(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){const s=this.ctx.canvas.width,r=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,s,r),this.ctx.fillStyle=a,i){const t=this.cachedCanvases.getCanvas("transparent",s,r);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(..._(this.compositeCtx))}this.ctx.save(),W(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=_(this.ctx)}executeOperatorList(t,e,i,n){const s=t.argsArray,r=t.fnArray;let a=e||0;const o=s.length;if(o===a)return a;const l=o-a>10&&"function"==typeof i,h=l?Date.now()+15:0;let u=0;const c=this.commonObjs,d=this.objs;let p;for(;;){if(void 0!==n&&a===n.nextBreakPoint)return n.breakIt(a,i),a;if(p=r[a],p!==Yv.dependency)this[p].apply(this,s[a]);else for(const t of s[a]){const e=t.startsWith("g_")?c:d;if(!e.has(t))return e.get(t,i),a}if(a++,a===o)return a;if(l&&++u>10){if(Date.now()>h)return i(),a;u=0}}}endDrawing(){zm(this,br,yr).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),zm(this,br,Ar).call(this)}_scaleImage(t,e){var i,n;const s=null!=(i=t.width)?i:t.displayWidth,r=null!=(n=t.height)?n:t.displayHeight;let a,o,l=Math.max(Math.hypot(e[0],e[1]),1),h=Math.max(Math.hypot(e[2],e[3]),1),u=s,c=r,d="prescale1";for(;l>2&&u>1||h>2&&c>1;){let e=u,i=c;l>2&&u>1&&(e=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/e),h>2&&c>1&&(i=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,h/=c/i),a=this.cachedCanvases.getCanvas(d,e,i),o=a.context,o.clearRect(0,0,e,i),o.drawImage(t,0,0,u,c,0,0,e,i),t=a.canvas,u=e,c=i,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:n}=t,s=this.current.fillColor,r=this.current.patternFill,a=_(e);let o,l,h,u;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;l=JSON.stringify(r?a:[a.slice(0,4),s]),o=this._cachedBitmapsMap.get(e),o||(o=new Map,this._cachedBitmapsMap.set(e,o));const i=o.get(l);if(i&&!r)return{canvas:i,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])};h=i}h||(u=this.cachedCanvases.getCanvas("maskCanvas",i,n),N(u.context,t));let c=aw.transform(a,[1/i,0,0,-1/n,0,0]);c=aw.transform(c,[1,0,0,1,0,-n]);const d=_b.slice();aw.axialAlignedBoundingBox([0,0,i,n],c,d);const[p,g,f,m]=d,v=Math.round(f-p)||1,w=Math.round(m-g)||1,b=this.cachedCanvases.getCanvas("fillCanvas",v,w),y=b.context,A=p,E=g;y.translate(-A,-E),y.transform(...c),h||(h=this._scaleImage(u.canvas,x(y)),h=h.img,o&&r&&o.set(l,h)),y.imageSmoothingEnabled=B(_(y),t.interpolate),L(y,h,0,0,h.width,h.height,0,0,i,n),y.globalCompositeOperation="source-in";const S=aw.transform(x(y),[1,0,0,1,-A,-E]);return y.fillStyle=r?s.getPattern(e,this,S,ub):s,y.fillRect(0,0,i,n),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,b.canvas)),{canvas:b.canvas,offsetX:Math.round(A),offsetY:Math.round(E)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Sb[t]}setLineJoin(t){this.ctx.lineJoin=Cb[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx;const s=this.ctx=n.context;s.setTransform(this.suspendedCtx.getTransform()),O(this.suspendedCtx,s),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,n,s,r,a){e.transform(t,i,n,s,r,a),this.__originalTransform(t,i,n,s,r,a)},t.setTransform=function(t,i,n,s,r,a){e.setTransform(t,i,n,s,r,a),this.__originalSetTransform(t,i,n,s,r,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,n,s,r,a){e.bezierCurveTo(t,i,n,s,r,a),this.__originalBezierCurveTo(t,i,n,s,r,a)},t.rect=function(t,i,n,s){e.rect(t,i,n,s),this.__originalRect(t,i,n,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),O(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){const s=n[0],r=n[1],a=n[2]-s,o=n[3]-r;0!==a&&0!==o&&(this.genericComposeSMask(e.context,i,a,o,e.subtype,e.backdrop,e.transferMap,s,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,s,r,a,o,l,h,u){let c=t.canvas,d=o-h,p=l-u;if(r)if(d<0||p<0||d+i>c.width||p+n>c.height){const t=this.cachedCanvases.getCanvas("maskExtension",i,n),e=t.context;e.drawImage(c,-d,-p),e.globalCompositeOperation="destination-atop",e.fillStyle=r,e.fillRect(0,0,i,n),e.globalCompositeOperation="source-over",c=t.canvas,d=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(d,p,i,n),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=r,t.fillRect(d,p,i,n),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(e.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(o,l,i,n),e.clip(g),e.globalCompositeOperation="destination-in",e.drawImage(c,d,p,i,n,o,l,i,n),e.restore()}save(){this.inSMaskMode&&O(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&O(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(t,e,i,n,s,r){this.ctx.transform(t,e,i,n,s,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[s]=e;if(!n)return s||(s=e[0]=new Path2D),void this[t](s);if(!(s instanceof Path2D)){const t=e[0]=new Path2D;for(let e=0,n=s.length;e<n;)switch(s[e++]){case 0:t.moveTo(s[e++],s[e++]);break;case 1:t.lineTo(s[e++],s[e++]);break;case 2:t.bezierCurveTo(s[e++],s[e++],s[e++],s[e++],s[e++],s[e++]);break;case 3:t.closePath();break;default:i(`Unrecognized drawing path operator: ${s[e-1]}`)}s=t}aw.axialAlignedBoundingBox(n,_(this.ctx),this.current.minMax),this[t](s)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const i=this.ctx,n=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"==typeof n&&(null==n?void 0:n.getPattern)){const e=n.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=n.getPattern(i,this,x(i),cb),e){const n=new Path2D;n.addPath(t,i.getTransform().invertSelf().multiplySelf(e)),t=n}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(cb,_(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const i=this.ctx,n=this.current.fillColor;let s=!1;if(this.current.patternFill){const e=n.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=n.getPattern(i,this,x(i),ub),e){const n=new Path2D;n.addPath(t,i.getTransform().invertSelf().multiplySelf(e)),t=n}s=!0}const r=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==r&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),s&&i.restore(),e&&this.consumePath(t,r)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=kb}eoClip(){this.pendingClip=Mb}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0===t)return;const i=new Path2D,n=e.getTransform().invertSelf();for(const{transform:s,x:r,y:a,fontSize:o,path:l}of t)l&&i.addPath(l,new DOMMatrix(s).preMultiplySelf(n).translate(r,a).scale(o,-o));e.clip(i),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var n;const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||jv,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||i("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const a=s.loadedName||"sans-serif",o=(null==(n=s.systemFontInfo)?void 0:n.css)||`"${a}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const h=s.italic?"italic":"normal";let u=e;e<16?u=16:e>100&&(u=100),this.current.fontSizeScale=e/u,this.ctx.font=`${h} ${l} ${u}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,n,s){const r=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,u=3&l,c=!!(4&l),d=a.patternFill&&!o.missingFile,p=a.patternStroke&&!o.missingFile;let g;if((o.disableFontFace||c||d||p)&&!o.missingFile&&(g=o.getPathGenerator(this.commonObjs,t)),g&&(o.disableFontFace||d||p)){let t;if(r.save(),r.translate(e,i),r.scale(h,-h),0!==u&&2!==u||(n?(t=r.getTransform(),r.setTransform(...n),r.fill(zm(this,br,_r).call(this,g,t,n))):r.fill(g)),1===u||2===u)if(s){t||(t=r.getTransform()),r.setTransform(...s);const{a:e,b:i,c:n,d:a}=t,o=aw.inverseTransform(s),l=aw.transform([e,i,n,a,0,0],o);aw.singularValueDecompose2dScale(l,Ab),r.lineWidth*=Math.max(Ab[0],Ab[1])/h,r.stroke(zm(this,br,_r).call(this,g,t,s))}else r.lineWidth/=h,r.stroke(g);r.restore()}else 0!==u&&2!==u||r.fillText(t,e,i),1!==u&&2!==u||r.strokeText(t,e,i);c&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:_(r),x:e,y:i,fontSize:h,path:g})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){i=!0;break}return o(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(0===n)return;const s=this.ctx,r=e.fontSizeScale,a=e.charSpacing,o=e.wordSpacing,l=e.fontDirection,h=e.textHScale*l,u=t.length,c=i.vertical,d=c?1:-1,p=i.defaultVMetrics,g=n*e.fontMatrix[0],f=0===e.textRenderingMode&&!i.disableFontFace&&!e.patternFill;let m,v;if(s.save(),e.textMatrix&&s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),l>0?s.scale(h,-1):s.scale(h,1),e.patternFill){s.save();const t=e.fillColor.getPattern(s,this,x(s),ub);m=_(s),s.restore(),s.fillStyle=t}if(e.patternStroke){s.save();const t=e.strokeColor.getPattern(s,this,x(s),cb);v=_(s),s.restore(),s.strokeStyle=t}let w=e.lineWidth;const b=e.textMatrixScale;if(0===b||0===w){const t=3&e.textRenderingMode;1!==t&&2!==t||(w=this.getSinglePixelWidth())}else w/=b;if(1!==r&&(s.scale(r,r),w/=r),s.lineWidth=w,i.isInvalidPDFjsFont){const i=[];let n=0;for(const e of t)i.push(e.unicode),n+=e.width;return s.fillText(i.join(""),0,0),e.x+=n*g*h,s.restore(),void this.compose()}let y,A=0;for(y=0;y<u;++y){const e=t[y];if("number"==typeof e){A+=d*e*n/1e3;continue}let h=!1;const u=(e.isSpace?o:0)+a,w=e.fontChar,b=e.accent;let _,x,E=e.width;if(c){const t=e.vmetric||p,i=-(e.vmetric?t[1]:.5*E)*g,n=t[2]*g;E=t?-t[0]:E,_=i/r,x=(A+n)/r}else _=A/r,x=0;if(i.remeasure&&E>0){const t=1e3*s.measureText(w).width/n*r;if(E<t&&this.isFontSubpixelAAEnabled){const e=E/t;h=!0,s.save(),s.scale(e,1),_/=e}else E!==t&&(_+=(E-t)/2e3*n/r)}if(this.contentVisible&&(e.isInFont||i.missingFile))if(f&&!b)s.fillText(w,_,x);else if(this.paintChar(w,_,x,m,v),b){const t=_+n*b.offset.x/r,e=x-n*b.offset.y/r;this.paintChar(b.fontChar,t,e,m,v)}A+=c?E*g-u*l:E*g+u*l,h&&s.restore()}c?e.y-=A:e.x+=A*h,s.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,r=n.fontSize,a=n.fontDirection,o=s.vertical?1:-1,l=n.charSpacing,h=n.wordSpacing,u=n.textHScale*a,c=n.fontMatrix||jv,d=t.length;let p,g,f,m;if(3!==n.textRenderingMode&&0!==r){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(u,a),p=0;p<d;++p){if(g=t[p],"number"==typeof g){m=o*g*r/1e3,this.ctx.translate(m,0),n.x+=m*u;continue}const a=(g.isSpace?h:0)+l,d=s.charProcOperatorList[g.operatorListId];d?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...c),this.executeOperatorList(d),this.restore()):i(`Type3 character "${g.operatorListId}" is not available.`);const v=[g.width,0];aw.applyTransform(v,c),f=v[0]*r+a,e.translate(f,0),n.x+=f*u}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,n,s,r){const a=new Path2D;a.rect(i,n,s-i,r-n),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let i;if("TilingPattern"===e[0]){const n=this.baseTransform||_(this.ctx),s={createCanvasGraphics:e=>new t(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new wb(e,this.ctx,s,n)}else i=this._getPattern(e[1],e[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=function(t){switch(t[0]){case"RadialAxial":return new gb(t);case"Mesh":return new fb(t);case"Dummy":return new mb}throw new Error(`Unknown IR type: ${t[0]}`)}(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,x(e),db);const n=x(e);if(n){const{width:t,height:i}=e.canvas,s=_b.slice();aw.axialAlignedBoundingBox([0,0,t,i],n,s);const[r,a,o,l]=s;this.ctx.fillRect(r,a,o-r,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){n("Should not call beginInlineImage")}beginImageData(){n("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=_(this.ctx),e)){aw.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[t,i,n,s]=e,r=new Path2D;r.rect(t,i,n-t,s-i),this.ctx.clip(r),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||e("TODO: Support non-isolated groups."),t.knockout&&i("Knockout groups not supported.");const s=_(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=_b.slice();aw.axialAlignedBoundingBox(t.bbox,_(n),r);const a=[0,0,n.canvas.width,n.canvas.height];r=aw.intersect(r,a)||[0,0,0,0];const o=Math.floor(r[0]),l=Math.floor(r[1]),h=Math.max(Math.ceil(r[2])-o,1),u=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,h,u]);let c="groupAt"+this.groupLevel;t.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,h,u),p=d.context;p.translate(-o,-l),p.transform(...s);let g=new Path2D;const[f,m,v,w]=t.bbox;if(g.rect(f,m,v-f,w-m),t.matrix){const e=new Path2D;e.addPath(g,new DOMMatrix(t.matrix)),g=e}p.clip(g),t.smask?this.smaskStack.push({canvas:d.canvas,context:p,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(o,l),n.save()),O(n,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=_(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const i=_b.slice();aw.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t,i),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(t,e,i,n,s){if(zm(this,br,yr).call(this),W(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const n=e[2]-e[0],r=e[3]-e[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=n,e[3]=r,aw.singularValueDecompose2dScale(_(this.ctx),Ab);const{viewportScale:s}=this,a=Math.ceil(n*this.outputScaleX*s),o=Math.ceil(r*this.outputScaleY*s);this.annotationCanvas=this.canvasFactory.create(a,o);const{canvas:l,context:h}=this.annotationCanvas;this.annotationCanvasMap.set(t,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=h,this.ctx.save(),this.ctx.setTransform(Ab[0],0,0,-Ab[1],0,r*Ab[1]),W(this.ctx)}else{W(this.ctx),this.endPath();const t=new Path2D;t.rect(e[0],e[1],n,r),this.ctx.clip(t)}}this.current=new Eb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),zm(this,br,Ar).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const i=this.ctx,n=this._createMaskCanvas(t),s=n.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,n.offsetX,n.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,n=0,s,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const o=_(a);a.transform(e,i,n,s,0,0);const l=this._createMaskCanvas(t);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let h=0,u=r.length;h<u;h+=2){const t=aw.transform(o,[e,i,n,s,r[h],r[h+1]]);a.drawImage(l.canvas,t[4],t[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const s of t){const{data:t,width:r,height:a,transform:o}=s,l=this.cachedCanvases.getCanvas("maskCanvas",r,a),h=l.context;h.save(),N(h,this.getObject(t,s)),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,x(e),ub):i,h.fillRect(0,0,r,a),h.restore(),e.save(),e.transform(...o),e.scale(1,-1),L(e,l.canvas,0,0,r,a,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):i("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r)return void i("Dependent image isn't ready yet");const a=r.width,o=r.height,l=[];for(let i=0,h=s.length;i<h;i+=2)l.push({transform:[e,0,0,n,s[i],s[i+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:i,height:n}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,n),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,n=this.ctx;this.save();const{filter:s}=n;let r;if("none"!==s&&""!==s&&(n.filter="none"),n.scale(1/e,-1/i),t.bitmap)r=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)r=t;else{const n=this.cachedCanvases.getCanvas("inlineImage",e,i).context;R(n,t),r=this.applyTransferMapsToCanvas(n)}const a=this._scaleImage(r,x(n));n.imageSmoothingEnabled=B(_(n),t.interpolate),L(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const e=t.width,i=t.height,s=this.cachedCanvases.getCanvas("inlineImage",e,i).context;R(s,t),n=this.applyTransferMapsToCanvas(s)}for(const s of e)i.save(),i.transform(...s.transform),i.scale(1,-1),L(i,n,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(i||(this.pendingClip===Mb?n.clip(t,"evenodd"):n.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=_(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:i,c:n,d:s}=this.ctx.getTransform();let r,a;if(0===i&&0===n){const i=Math.abs(e),n=Math.abs(s);if(i===n)if(0===t)r=a=1/i;else{const e=i*t;r=a=e<1?1/e:1}else if(0===t)r=1/i,a=1/n;else{const e=i*t,s=n*t;r=e<1?1/e:1,a=s<1?1/s:1}}else{const o=Math.abs(e*s-i*n),l=Math.hypot(e,i),h=Math.hypot(n,s);if(0===t)r=h/o,a=l/o;else{const e=t*o;r=h>e?h/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:n}}=this,[s,r]=this.getScaleForStroking();if(s===r)return i.lineWidth=(n||1)*s,void i.stroke(t);const a=i.getLineDash();e&&i.save(),i.scale(s,r),yb.a=1/s,yb.d=1/r;const o=new Path2D;if(o.addPath(t,yb),a.length>0){const t=Math.max(s,r);i.setLineDash(a.map(e=>e/t)),i.lineDashOffset/=t}i.lineWidth=n||1,i.stroke(o),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(const cC in Yv)void 0!==Pb.prototype[cC]&&(Pb.prototype[Yv[cC]]=Pb.prototype[cC]);let Fb=(xr=class{static get workerPort(){return Vm(this,Er)}static set workerPort(t){if(!("undefined"!=typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");Hm(this,Er,t)}static get workerSrc(){return Vm(this,Sr)}static set workerSrc(t){if("string"!=typeof t)throw new Error("Invalid `workerSrc` type.");Hm(this,Sr,t)}},Er=new WeakMap,Sr=new WeakMap,$m(xr,Er,null),$m(xr,Sr,""),xr);class Db{constructor({parsedData:t,rawData:e}){$m(this,Cr),$m(this,kr),Hm(this,Cr,t),Hm(this,kr,e)}getRaw(){return Vm(this,kr)}get(t){var e;return null!=(e=Vm(this,Cr).get(t))?e:null}[Symbol.iterator](){return Vm(this,Cr).entries()}}Cr=new WeakMap,kr=new WeakMap;const Tb=Symbol("INTERNAL");class Ib{constructor(t,{name:e,intent:i,usage:n,rbGroups:s}){$m(this,Mr,!1),$m(this,Pr,!1),$m(this,Fr,!1),$m(this,Dr,!0),Hm(this,Mr,!!(2&t)),Hm(this,Pr,!!(4&t)),this.name=e,this.intent=i,this.usage=n,this.rbGroups=s}get visible(){if(Vm(this,Fr))return Vm(this,Dr);if(!Vm(this,Dr))return!1;const{print:t,view:e}=this.usage;return Vm(this,Mr)?"OFF"!==(null==e?void 0:e.viewState):!Vm(this,Pr)||"OFF"!==(null==t?void 0:t.printState)}_setVisible(t,e,i=!1){t!==Tb&&n("Internal method `_setVisible` called."),Hm(this,Fr,i),Hm(this,Dr,e)}}Mr=new WeakMap,Pr=new WeakMap,Fr=new WeakMap,Dr=new WeakMap;class Lb{constructor(t,e=2){if($m(this,Nr),$m(this,Tr,null),$m(this,Ir,new Map),$m(this,Lr,null),$m(this,Rr,null),this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,Hm(this,Rr,t.order);for(const i of t.groups)Vm(this,Ir).set(i.id,new Ib(e,i));if("OFF"===t.baseState)for(const t of Vm(this,Ir).values())t._setVisible(Tb,!1);for(const e of t.on)Vm(this,Ir).get(e)._setVisible(Tb,!0);for(const e of t.off)Vm(this,Ir).get(e)._setVisible(Tb,!1);Hm(this,Lr,this.getHash())}}isVisible(t){if(0===Vm(this,Ir).size)return!0;if(!t)return e("Optional content group not defined."),!0;if("OCG"===t.type)return Vm(this,Ir).has(t.id)?Vm(this,Ir).get(t.id).visible:(i(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return zm(this,Nr,Or).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!Vm(this,Ir).has(e))return i(`Optional content group not found: ${e}`),!0;if(Vm(this,Ir).get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!Vm(this,Ir).has(e))return i(`Optional content group not found: ${e}`),!0;if(!Vm(this,Ir).get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!Vm(this,Ir).has(e))return i(`Optional content group not found: ${e}`),!0;if(!Vm(this,Ir).get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!Vm(this,Ir).has(e))return i(`Optional content group not found: ${e}`),!0;if(Vm(this,Ir).get(e).visible)return!1}return!0}return i(`Unknown optional content policy ${t.policy}.`),!0}return i(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var s;const r=Vm(this,Ir).get(t);if(r){if(n&&e&&r.rbGroups.length)for(const e of r.rbGroups)for(const i of e)i!==t&&(null==(s=Vm(this,Ir).get(i))||s._setVisible(Tb,!1,!0));r._setVisible(Tb,!!e,!0),Hm(this,Tr,null)}else i(`Optional content group not found: ${t}`)}setOCGState({state:t,preserveRB:e}){let i;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}const t=Vm(this,Ir).get(n);if(t)switch(i){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!t.visible,e)}}Hm(this,Tr,null)}get hasInitialVisibility(){return null===Vm(this,Lr)||this.getHash()===Vm(this,Lr)}getOrder(){return Vm(this,Ir).size?Vm(this,Rr)?Vm(this,Rr).slice():[...Vm(this,Ir).keys()]:null}getGroup(t){return Vm(this,Ir).get(t)||null}getHash(){if(null!==Vm(this,Tr))return Vm(this,Tr);const t=new Bw;for(const[e,i]of Vm(this,Ir))t.update(`${e}:${i.visible}`);return Hm(this,Tr,t.hexdigest())}[Symbol.iterator](){return Vm(this,Ir).entries()}}Tr=new WeakMap,Ir=new WeakMap,Lr=new WeakMap,Rr=new WeakMap,Nr=new WeakSet,Or=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const e=t[s];let r;if(Array.isArray(e))r=zm(this,Nr,Or).call(this,e);else{if(!Vm(this,Ir).has(e))return i(`Optional content group not found: ${e}`),!0;r=Vm(this,Ir).get(e).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n};class Rb{constructor(t,{disableRange:e=!1,disableStream:i=!1}){s(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null==r?void 0:r.length)>0){const t=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((t,e)=>{this._onReceiveData({begin:t,chunk:e})}),t.addProgressListener((t,e)=>{this._onProgress({loaded:t,total:e})}),t.addProgressiveReadListener(t=>{this._onReceiveData({chunk:t})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):s(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){var t,e;return null!=(e=null==(t=this._fullRequestReader)?void 0:t._loaded)?e:0}_onProgress(t){var e,i,n,s;void 0===t.total?null==(i=null==(e=this._rangeReaders[0])?void 0:e.onProgress)||i.call(e,{loaded:t.loaded}):null==(s=null==(n=this._fullRequestReader)?void 0:n.onProgress)||s.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;null==(t=this._fullRequestReader)||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){s(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Nb(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Ob(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;null==(e=this._fullRequestReader)||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Nb{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=f(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ob{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}class Wb{constructor(t){Bm(this,"_responseOrigin",null),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=j(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!=(e=null==(t=this._fullRequestReader)?void 0:t._loaded)?e:0}getFullReader(){return s(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Bb(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new jb(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;null==(e=this._fullRequestReader)||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Bb{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),n=e.url;fetch(n,G(i,this._withCredentials,this._abortController)).then(e=>{if(t._responseOrigin=V(e.url),!U(e.status))throw z(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const i=e.headers,{allowRangeRequests:s,suggestedLength:r}=$({responseHeaders:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=r||this._contentLength,this._filename=H(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new nw("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:q(e),done:!1})}cancel(t){var e;null==(e=this._reader)||e.cancel(t),this._abortController.abort()}}class jb{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range",`bytes=${e}-${i-1}`);const r=n.url;fetch(r,G(s,this._withCredentials,this._abortController)).then(e=>{const i=V(e.url);if(i!==t._responseOrigin)throw new Error(`Expected range response-origin "${i}" to match "${t._responseOrigin}".`);if(!U(e.status))throw z(e.status,r);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded}),{value:q(e),done:!1})}cancel(t){var e;null==(e=this._reader)||e.cancel(t),this._abortController.abort()}}class Vb{constructor({url:t,httpHeaders:e,withCredentials:i}){Bm(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=j(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,r]of this.headers)e.setRequestHeader(s,r);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=206):n.expectedStatus=200,e.responseType="arraybuffer",s(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&(null==(i=n.onProgress)||i.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==s.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===s.status&&this.isHttp)return void n.onError(s.status);const r=s.status||200;if((200!==r||206!==n.expectedStatus)&&r!==n.expectedStatus)return void n.onError(s.status);const a=function(t){const e=t.response;return"string"!=typeof e?e:h(e).buffer}(s);if(206===r){const t=s.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);e?n.onDone({begin:parseInt(e[1],10),chunk:a}):(i('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class $b{constructor(t){this._source=t,this._manager=new Vb(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return s(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Hb(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new zb(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;null==(e=this._fullRequestReader)||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Hb{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=V(e.responseURL);const i=e.getAllResponseHeaders(),n=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(t=>{const[e,...i]=t.split(": ");return[e,i.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:r}=$({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=H(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=z(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;null==(e=this.onProgress)||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class zb{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=V(null==(t=this._manager.getRequestXhr(this._requestId))?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;null==(t=this.onClosed)||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){null!=this._storedError||(this._storedError=z(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||null==(e=this.onProgress)||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Ub=/^[a-z][a-z0-9\-+.]+:/i;class Gb{constructor(t){this.source=t,this.url=function(t){if(Ub.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}(t.url),s("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!=(e=null==(t=this._fullRequestReader)?void 0:t._loaded)?e:0}getFullReader(){return s(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new qb(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Xb(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;null==(e=this._fullRequestReader)||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class qb{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(t=>{this._contentLength=t.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},t=>{"ENOENT"===t.code&&(t=z(0,this._url.href)),this._storedError=t,this._headersCapability.reject(t)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new nw("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Xb{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Yb=Symbol("INITIAL_DATA");class Kb{constructor(){$m(this,Br),$m(this,Wr,Object.create(null))}get(t,e=null){if(e){const i=zm(this,Br,jr).call(this,t);return i.promise.then(()=>e(i.data)),null}const i=Vm(this,Wr)[t];if(!i||i.data===Yb)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=Vm(this,Wr)[t];return!!e&&e.data!==Yb}delete(t){const e=Vm(this,Wr)[t];return!(!e||e.data===Yb||(delete Vm(this,Wr)[t],0))}resolve(t,e=null){const i=zm(this,Br,jr).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in Vm(this,Wr)){const{data:i}=Vm(this,Wr)[e];null==(t=null==i?void 0:i.bitmap)||t.close()}Hm(this,Wr,Object.create(null))}*[Symbol.iterator](){for(const t in Vm(this,Wr)){const{data:e}=Vm(this,Wr)[t];e!==Yb&&(yield[t,e])}}}Wr=new WeakMap,Br=new WeakSet,jr=function(t){var e;return(e=Vm(this,Wr))[t]||(e[t]={...Promise.withResolvers(),data:Yb})};let Qb=(aa=class{constructor({textContentSource:t,container:e,viewport:i}){var n;if($m(this,da),$m(this,$r,Promise.withResolvers()),$m(this,Hr,null),$m(this,zr,!1),$m(this,Ur,!!(null==(Vr=globalThis.FontInspector)?void 0:Vr.enabled)),$m(this,Gr,null),$m(this,qr,null),$m(this,Xr,0),$m(this,Yr,0),$m(this,Kr,null),$m(this,Qr,null),$m(this,Zr,0),$m(this,Jr,0),$m(this,ta,Object.create(null)),$m(this,ea,[]),$m(this,ia,null),$m(this,na,[]),$m(this,sa,new WeakMap),$m(this,ra,null),t instanceof ReadableStream)Hm(this,ia,t);else{if("object"!=typeof t)throw new Error('No "textContentSource" parameter specified.');Hm(this,ia,new ReadableStream({start(e){e.enqueue(t),e.close()}}))}Hm(this,Hr,Hm(this,Qr,e)),Hm(this,Jr,i.scale*mw.pixelRatio),Hm(this,Zr,i.rotation),Hm(this,qr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:o}=i.rawDims;Hm(this,ra,[1,0,0,-1,-a,o+r]),Hm(this,Yr,s),Hm(this,Xr,r),zm(n=aa,ma,ba).call(n),E(e,i),Vm(this,$r).promise.finally(()=>{Vm(aa,ca).delete(this),Hm(this,qr,null),Hm(this,ta,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=sw.platform;return o(this,"fontFamilyMap",new Map([["sans-serif",(t&&e?"Calibri, ":"")+"sans-serif"],["monospace",(t&&e?"Lucida Console, ":"")+"monospace"]]))}render(){const t=()=>{Vm(this,Kr).read().then(({value:e,done:i})=>{i?Vm(this,$r).resolve():(null!=Vm(this,Gr)||Hm(this,Gr,e.lang),Object.assign(Vm(this,ta),e.styles),zm(this,da,pa).call(this,e.items),t())},Vm(this,$r).reject)};return Hm(this,Kr,Vm(this,ia).getReader()),Vm(aa,ca).add(this),t(),Vm(this,$r).promise}update({viewport:t,onBefore:e=null}){var i;const n=t.scale*mw.pixelRatio,s=t.rotation;if(s!==Vm(this,Zr)&&(null==e||e(),Hm(this,Zr,s),E(Vm(this,Qr),{rotation:s})),n!==Vm(this,Jr)){null==e||e(),Hm(this,Jr,n);const t={div:null,properties:null,ctx:zm(i=aa,ma,va).call(i,Vm(this,Gr))};for(const e of Vm(this,na))t.properties=Vm(this,sa).get(e),t.div=e,zm(this,da,fa).call(this,t)}}cancel(){var t;const e=new nw("TextLayer task cancelled.");null==(t=Vm(this,Kr))||t.cancel(e).catch(()=>{}),Hm(this,Kr,null),Vm(this,$r).reject(e)}get textDivs(){return Vm(this,na)}get textContentItemsStr(){return Vm(this,ea)}static cleanup(){if(!(Vm(this,ca).size>0)){Vm(this,oa).clear();for(const{canvas:t}of Vm(this,la).values())t.remove();Vm(this,la).clear()}}},$r=new WeakMap,Hr=new WeakMap,zr=new WeakMap,Ur=new WeakMap,Gr=new WeakMap,qr=new WeakMap,Xr=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,Qr=new WeakMap,Zr=new WeakMap,Jr=new WeakMap,ta=new WeakMap,ea=new WeakMap,ia=new WeakMap,na=new WeakMap,sa=new WeakMap,ra=new WeakMap,oa=new WeakMap,la=new WeakMap,ha=new WeakMap,ua=new WeakMap,ca=new WeakMap,da=new WeakSet,pa=function(t){var e,n;if(Vm(this,zr))return;null!=(n=Vm(this,qr)).ctx||(n.ctx=zm(e=aa,ma,va).call(e,Vm(this,Gr)));const s=Vm(this,na),r=Vm(this,ea);for(const a of t){if(s.length>1e5)return i("Ignoring additional textDivs for performance reasons."),void Hm(this,zr,!0);if(void 0!==a.str)r.push(a.str),zm(this,da,ga).call(this,a);else if("beginMarkedContentProps"===a.type||"beginMarkedContent"===a.type){const t=Vm(this,Hr);Hm(this,Hr,document.createElement("span")),Vm(this,Hr).classList.add("markedContent"),a.id&&Vm(this,Hr).setAttribute("id",`${a.id}`),t.append(Vm(this,Hr))}else"endMarkedContent"===a.type&&Hm(this,Hr,Vm(this,Hr).parentNode)}},ga=function(t){var e;const i=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};Vm(this,na).push(i);const s=aw.transform(Vm(this,ra),t.transform);let r=Math.atan2(s[1],s[0]);const a=Vm(this,ta)[t.fontName];a.vertical&&(r+=Math.PI/2);let o=Vm(this,Ur)&&a.fontSubstitution||a.fontFamily;o=aa.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),h=l*zm(e=aa,ma,ya).call(e,o,a,Vm(this,Gr));let u,c;0===r?(u=s[4],c=s[5]-h):(u=s[4]+h*Math.sin(r),c=s[5]-h*Math.cos(r));const d="calc(var(--total-scale-factor) *",p=i.style;Vm(this,Hr)===Vm(this,Qr)?(p.left=`${(100*u/Vm(this,Yr)).toFixed(2)}%`,p.top=`${(100*c/Vm(this,Xr)).toFixed(2)}%`):(p.left=`${d}${u.toFixed(2)}px)`,p.top=`${d}${c.toFixed(2)}px)`),p.fontSize=`${d}${(Vm(aa,ua)*l).toFixed(2)}px)`,p.fontFamily=o,n.fontSize=l,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,Vm(this,Ur)&&(i.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),0!==r&&(n.angle=r*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(g=!0)}if(g&&(n.canvasWidth=a.vertical?t.height:t.width),Vm(this,sa).set(i,n),Vm(this,qr).div=i,Vm(this,qr).properties=n,zm(this,da,fa).call(this,Vm(this,qr)),n.hasText&&Vm(this,Hr).append(i),n.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),Vm(this,Hr).append(t)}},fa=function(t){var e;const{div:i,properties:n,ctx:s}=t,{style:r}=i;let a="";if(Vm(aa,ua)>1&&(a=`scale(${1/Vm(aa,ua)})`),0!==n.canvasWidth&&n.hasText){const{fontFamily:t}=r,{canvasWidth:o,fontSize:l}=n;zm(e=aa,ma,wa).call(e,s,l*Vm(this,Jr),t);const{width:h}=s.measureText(i.textContent);h>0&&(a=`scaleX(${o*Vm(this,Jr)/h}) ${a}`)}0!==n.angle&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(r.transform=a)},ma=new WeakSet,va=function(t=null){let e=Vm(this,la).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),Vm(this,la).set(t,e),Vm(this,ha).set(e,{size:0,family:""})}return e},wa=function(t,e,i){const n=Vm(this,ha).get(t);e===n.size&&i===n.family||(t.font=`${e}px ${i}`,n.size=e,n.family=i)},ba=function(){if(null!==Vm(this,ua))return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),Hm(this,ua,t.getBoundingClientRect().height),t.remove()},ya=function(t,e,n){const s=Vm(this,oa).get(t);if(s)return s;const r=zm(this,ma,va).call(this,n);r.canvas.width=r.canvas.height=30,zm(this,ma,wa).call(this,r,30,t);const a=r.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return o?h=o/(o+l):(sw.platform.isFirefox&&i("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),Vm(this,oa).set(t,h),h},$m(aa,ma),$m(aa,oa,new Map),$m(aa,la,new Map),$m(aa,ha,new WeakMap),$m(aa,ua,null),$m(aa,ca,new Set),aa);class Zb{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};return function t(i){var n;if(!i)return;let s=null;const r=i.name;if("#text"===r)s=i.value;else{if(!Zb.shouldBuildText(r))return;(null==(n=null==i?void 0:i.attributes)?void 0:n.textContent)?s=i.attributes.textContent:i.value&&(s=i.value)}if(null!==s&&e.push({str:s}),i.children)for(const e of i.children)t(e)}(t),i}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}const Jb=class t{constructor(){Bm(this,"_capability",Promise.withResolvers()),Bm(this,"_transport",null),Bm(this,"_worker",null),Bm(this,"docId","d"+Um(t,Aa)._++),Bm(this,"destroyed",!1),Bm(this,"onPassword",null),Bm(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,i,n;this.destroyed=!0;try{(null==(t=this._worker)?void 0:t.port)&&(this._worker._pendingDestroy=!0),await(null==(e=this._transport)?void 0:e.destroy())}catch(s){throw(null==(i=this._worker)?void 0:i.port)&&delete this._worker._pendingDestroy,s}this._transport=null,null==(n=this._worker)||n.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Aa=new WeakMap,$m(Jb,Aa,0);let ty=Jb,ey=(ka=class{constructor(t,e,i=!1,n=null){$m(this,_a,Promise.withResolvers()),$m(this,xa,[]),$m(this,Ea,[]),$m(this,Sa,[]),$m(this,Ca,[]),this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n}addRangeListener(t){Vm(this,Ca).push(t)}addProgressListener(t){Vm(this,Sa).push(t)}addProgressiveReadListener(t){Vm(this,Ea).push(t)}addProgressiveDoneListener(t){Vm(this,xa).push(t)}onDataRange(t,e){for(const i of Vm(this,Ca))i(t,e)}onDataProgress(t,e){Vm(this,_a).promise.then(()=>{for(const i of Vm(this,Sa))i(t,e)})}onDataProgressiveRead(t){Vm(this,_a).promise.then(()=>{for(const e of Vm(this,Ea))e(t)})}onDataProgressiveDone(){Vm(this,_a).promise.then(()=>{for(const t of Vm(this,xa))t()})}transportReady(){Vm(this,_a).resolve()}requestDataRange(t,e){n("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},_a=new WeakMap,xa=new WeakMap,Ea=new WeakMap,Sa=new WeakMap,Ca=new WeakMap,ka);class iy{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return o(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ny{constructor(t,e,i,n=!1){$m(this,Pa),$m(this,Ma,!1),this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new gw:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new Kb,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:s=!1}={}){return new dw({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return o(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return(null==(t=this._transport._htmlForXfa)?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:n="display",annotationMode:s=$v.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:c=!1}){var d,p;null==(d=this._stats)||d.time("Overall");const g=this._transport.getRenderingIntent(n,s,u,c),{renderingIntent:f,cacheKey:m}=g;Hm(this,Ma,!1),o||(o=this._transport.getOptionalContentConfig(f));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const w=!!(4&f);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(p=this._stats)||p.time("Page Request"),this._pumpOperatorList(g));const b=t=>{var e;v.renderTasks.delete(y),w&&Hm(this,Ma,!0),zm(this,Pa,Fa).call(this),t?(y.capability.reject(t),this._abortOperatorList({intentState:v,reason:t instanceof Error?t:new Error(t)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(null==(e=globalThis.Stats)?void 0:e.enabled)&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new ly({callback:b,params:{canvas:e,canvasContext:t,viewport:i,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA});(v.renderTasks||(v.renderTasks=new Set)).add(y);const A=y.task;return Promise.all([v.displayReadyCapability.promise,o]).then(([t,e])=>{var i;if(this.destroyed)b();else{if(null==(i=this._stats)||i.time("Rendering"),!(e.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:t,optionalContentConfig:e}),y.operatorListChanged()}}).catch(b),A}getOperatorList({intent:t="display",annotationMode:e=$v.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){var s;const r=this._transport.getRenderingIntent(t,e,i,n,!0);let a,o=this._intentStates.get(r.cacheKey);return o||(o=Object.create(null),this._intentStates.set(r.cacheKey,o)),o.opListReadCapability||(a=Object.create(null),a.operatorListChanged=function(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(a))},o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(a),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(s=this._stats)||s.time("Page Request"),this._pumpOperatorList(r)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(t=>Zb.textContent(t));const e=this.streamTextContent(t);return new Promise(function(t,i){const n=e.getReader(),s={items:[],styles:Object.create(null),lang:null};!function e(){n.read().then(function({value:i,done:n}){n?t(s):(null!=s.lang||(s.lang=i.lang),Object.assign(s.styles,i.styles),s.items.push(...i.items),e())},i)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),Hm(this,Ma,!1),Promise.all(t)}cleanup(t=!1){Hm(this,Ma,!0);const e=zm(this,Pa,Fa).call(this);return t&&e&&this._stats&&(this._stats=new gw),e}_startRenderPage(t,e){var i,n;const s=this._intentStates.get(e);s&&(null==(i=this._stats)||i.timeEnd("Page Request"),null==(n=s.displayReadyCapability)||n.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&zm(this,Pa,Fa).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:n}){const{map:s,transfer:r}=i,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:n},r).getReader(),o=this._intentStates.get(e);o.streamReader=a;const l=()=>{a.read().then(({value:t,done:e})=>{e?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,o),l())},t=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const t of o.renderTasks)t.operatorListChanged();zm(this,Pa,Fa).call(this)}if(o.displayReadyCapability)o.displayReadyCapability.reject(t);else{if(!o.opListReadCapability)throw t;o.opListReadCapability.reject(t)}}})};l()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof pw){let i=100;return e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i))}}if(t.streamReader.cancel(new nw(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}Ma=new WeakMap,Pa=new WeakSet,Fa=function(){if(!Vm(this,Ma)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Hm(this,Ma,!1),!0};let sy=(Ra=class{constructor({name:e=null,port:i=null,verbosity:n=t()}={}){if($m(this,Ba),$m(this,Da,Promise.withResolvers()),$m(this,Ta,null),$m(this,Ia,null),$m(this,La,null),this.name=e,this.destroyed=!1,this.verbosity=n,i){if(Vm(Ra,Wa).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Vm(Ra,Wa).set(i,this),zm(this,Ba,Va).call(this,i)}else zm(this,Ba,$a).call(this)}get promise(){return Vm(this,Da).promise}get port(){return Vm(this,Ia)}get messageHandler(){return Vm(this,Ta)}destroy(){var t,e;this.destroyed=!0,null==(t=Vm(this,La))||t.terminate(),Hm(this,La,null),Vm(Ra,Wa).delete(Vm(this,Ia)),Hm(this,Ia,null),null==(e=Vm(this,Ta))||e.destroy(),Hm(this,Ta,null)}static create(t){const e=Vm(this,Wa).get(null==t?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ra(t)}static get workerSrc(){if(Fb.workerSrc)return Fb.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return o(this,"_setupFakeWorkerGlobal",(async()=>Vm(this,za,Ua)?Vm(this,za,Ua):(await import(this.workerSrc)).WorkerMessageHandler)())}},Da=new WeakMap,Ta=new WeakMap,Ia=new WeakMap,La=new WeakMap,Na=new WeakMap,Oa=new WeakMap,Wa=new WeakMap,Ba=new WeakSet,ja=function(){Vm(this,Da).resolve(),Vm(this,Ta).send("configure",{verbosity:this.verbosity})},Va=function(t){Hm(this,Ia,t),Hm(this,Ta,new Xw("main","worker",t)),Vm(this,Ta).on("ready",()=>{}),zm(this,Ba,ja).call(this)},$a=function(){if(Vm(Ra,Oa)||Vm(Ra,za,Ua))return void zm(this,Ba,Ha).call(this);let{workerSrc:t}=Ra;try{Ra._isSameOrigin(window.location,t)||(t=Ra._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Xw("main","worker",e),n=()=>{s.abort(),i.destroy(),e.terminate(),this.destroyed?Vm(this,Da).reject(new Error("Worker was destroyed")):zm(this,Ba,Ha).call(this)},s=new AbortController;e.addEventListener("error",()=>{Vm(this,La)||n()},{signal:s.signal}),i.on("test",t=>{s.abort(),!this.destroyed&&t?(Hm(this,Ta,i),Hm(this,Ia,e),Hm(this,La,e),zm(this,Ba,ja).call(this)):n()}),i.on("ready",t=>{if(s.abort(),this.destroyed)n();else try{r()}catch{zm(this,Ba,Ha).call(this)}});const r=()=>{const t=new Uint8Array;i.send("test",t,[t.buffer])};return void r()}catch{e("The worker has been disabled.")}zm(this,Ba,Ha).call(this)},Ha=function(){Vm(Ra,Oa)||(i("Setting up fake worker."),Hm(Ra,Oa,!0)),Ra._setupFakeWorkerGlobal.then(t=>{if(this.destroyed)return void Vm(this,Da).reject(new Error("Worker was destroyed"));const e=new qw;Hm(this,Ia,e);const i="fake"+Um(Ra,Na)._++,n=new Xw(i+"_worker",i,e);t.setup(n,e),Hm(this,Ta,new Xw(i,i+"_worker",e)),zm(this,Ba,ja).call(this)}).catch(t=>{Vm(this,Da).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},za=new WeakSet,Ua=function(){var t;try{return(null==(t=globalThis.pdfjsWorker)?void 0:t.WorkerMessageHandler)||null}catch{return null}},$m(Ra,za),$m(Ra,Na,0),$m(Ra,Oa,!1),$m(Ra,Wa,new WeakMap),Bv&&(Hm(Ra,Oa,!0),Fb.workerSrc||(Fb.workerSrc="./pdf.worker.js")),Ra._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!(null==i?void 0:i.origin)||"null"===i.origin)return!1;const n=new URL(e,i);return i.origin===n.origin},Ra._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ra.fromPort=t=>{if(console.log("Deprecated API usage: `PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(null==t?void 0:t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ra.create(t)},Ra);class ry{constructor(t,e,i,n,s,r){$m(this,Qa),$m(this,Ga,new Map),$m(this,qa,new Map),$m(this,Xa,new Map),$m(this,Ya,new Map),$m(this,Ka,null),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Kb,this.fontLoader=new Hw({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=r,this.setupMessageHandler()}get annotationStorage(){return o(this,"annotationStorage",new Vw)}getRenderingIntent(t,e=$v.ENABLE,n=null,s=!1,r=!1){let a=2,o=jw;switch(t){case"any":a=1;break;case"display":break;case"print":a=4;break;default:i(`getRenderingIntent - invalid intent: ${t}`)}const l=4&a&&n instanceof $w?n:this.annotationStorage;switch(e){case $v.DISABLE:a+=64;break;case $v.ENABLE:break;case $v.ENABLE_FORMS:a+=16;break;case $v.ENABLE_STORAGE:a+=32,o=l.serializable;break;default:i(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(a+=128),r&&(a+=256);const{ids:h,hash:u}=l.modifiedIds;return{renderingIntent:a,cacheKey:[a,o.hash,u].join("_"),annotationStorageSerializable:o,modifiedIds:h}}destroy(){var t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null==(t=Vm(this,Ka))||t.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of Vm(this,qa).values())e.push(n._destroy());Vm(this,qa).clear(),Vm(this,Xa).clear(),Vm(this,Ya).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return e.push(i),Promise.all(e).then(()=>{var t,e;this.commonObjs.clear(),this.fontLoader.clear(),Vm(this,Ga).clear(),this.filterFactory.destroy(),Qb.cleanup(),null==(t=this._networkStream)||t.cancelAllRequests(new nw("Worker was terminated.")),null==(e=this.messageHandler)||e.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(t,e)=>{s(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then(function({value:t,done:i}){i?e.close():(s(t instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}}),t.on("ReaderHeadersReady",async t=>{var i;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:s,contentLength:r}=this._fullReader;return n&&s||(this._lastProgress&&(null==(i=e.onProgress)||i.call(e,this._lastProgress)),this._fullReader.onProgress=t=>{var i;null==(i=e.onProgress)||i.call(e,{loaded:t.loaded,total:t.total})}),{isStreamingSupported:n,isRangeSupported:s,contentLength:r}}),t.on("GetRangeReader",(t,e)=>{s(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then(function({value:t,done:i}){i?e.close():(s(t instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{i.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}):e.close()}),t.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new iy(t,this))}),t.on("DocException",t=>{e._capability.reject(M(t))}),t.on("PasswordRequest",t=>{Hm(this,Ka,Promise.withResolvers());try{if(!e.onPassword)throw M(t);const i=t=>{t instanceof Error?Vm(this,Ka).reject(t):Vm(this,Ka).resolve({password:t})};e.onPassword(i,t.code)}catch(i){Vm(this,Ka).reject(i)}return Vm(this,Ka).promise}),t.on("DataLoaded",t=>{var i;null==(i=e.onProgress)||i.call(e,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),t.on("StartRenderPage",t=>{this.destroyed||Vm(this,qa).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),t.on("commonobj",([e,n,r])=>{var a;if(this.destroyed)return null;if(this.commonObjs.has(e))return null;switch(n){case"Font":if("error"in r){const t=r.error;i(`Error during font loading: ${t}`),this.commonObjs.resolve(e,t);break}const o=this._params.pdfBug&&(null==(a=globalThis.FontInspector)?void 0:a.enabled)?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,l=new zw(r,o);this.fontLoader.bind(l).catch(()=>t.sendWithPromise("FontFallback",{id:e})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(e,l)});break;case"CopyLocalImage":const{imageRef:h}=r;s(h,"The imageRef must be defined.");for(const t of Vm(this,qa).values())for(const[,i]of t.objs)if((null==i?void 0:i.ref)===h)return i.dataLen?(this.commonObjs.resolve(e,structuredClone(i)),i.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(e,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([t,e,i,n])=>{var s;if(this.destroyed)return;const r=Vm(this,qa).get(e);if(!r.objs.has(t))if(0!==r._intentStates.size)switch(i){case"Image":case"Pattern":r.objs.resolve(t,n);break;default:throw new Error(`Got unknown object type ${i}`)}else null==(s=null==n?void 0:n.bitmap)||s.close()}),t.on("DocProgress",t=>{var i;this.destroyed||null==(i=e.onProgress)||i.call(e,{loaded:t.loaded,total:t.total})}),t.on("FetchBinaryData",async t=>{if(this.destroyed)throw new Error("Worker was destroyed.");const e=this[t.type];if(!e)throw new Error(`${t.type} not initialized, see the \`useWorkerFetch\` parameter.`);return e.fetch(t)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t,e;this.annotationStorage.size<=0&&i("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!=(e=null==(t=this._fullReader)?void 0:t.filename)?e:null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=Vm(this,Xa).get(e);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&Vm(this,Ya).set(i.refStr,t);const n=new ny(e,i,this,this._params.pdfBug);return Vm(this,qa).set(e,n),n});return Vm(this,Xa).set(e,n),n}getPageIndex(t){return Uw(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return zm(this,Qa,Za).call(this,"GetFieldObjects")}hasJSActions(){return zm(this,Qa,Za).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return zm(this,Qa,Za).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return zm(this,Qa,Za).call(this,"GetOptionalContentConfig").then(e=>new Lb(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=Vm(this,Ga).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(t=>{var e,i,n,s;return{info:t[0],metadata:t[1]?new Db(t[1]):null,contentDispositionFilename:null!=(i=null==(e=this._fullReader)?void 0:e.filename)?i:null,contentLength:null!=(s=null==(n=this._fullReader)?void 0:n.contentLength)?s:null}});return Vm(this,Ga).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of Vm(this,qa).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),Vm(this,Ga).clear(),this.filterFactory.destroy(!0),Qb.cleanup()}}cachedPageNumber(t){var e;if(!Uw(t))return null;const i=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return null!=(e=Vm(this,Ya).get(i))?e:null}}Ga=new WeakMap,qa=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,Ka=new WeakMap,Qa=new WeakSet,Za=function(t,e=null){const i=Vm(this,Ga).get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,e);return Vm(this,Ga).set(t,n),n};class ay{constructor(t){$m(this,Ja,null),Bm(this,"onContinue",null),Bm(this,"onError",null),Hm(this,Ja,t)}get promise(){return Vm(this,Ja).capability.promise}cancel(t=0){Vm(this,Ja).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=Vm(this,Ja).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=Vm(this,Ja);return t.form||t.canvas&&(null==e?void 0:e.size)>0}}Ja=new WeakMap;const oy=class t{constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:s,operatorList:r,pageIndex:a,canvasFactory:o,filterFactory:l,useRequestAnimationFrame:h=!1,pdfBug:u=!1,pageColors:c=null,enableHWA:d=!1}){$m(this,to,null),this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=a,this.canvasFactory=o,this.filterFactory=l,this._pdfBug=u,this.pageColors=c,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new ay(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=d}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:i}){var n,s;if(this.cancelled)return;if(this._canvas){if(Vm(t,eo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Vm(t,eo).add(this._canvas)}this._pdfBug&&(null==(n=globalThis.StepperManager)?void 0:n.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:a,background:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Pb(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null==(s=this.graphicsReadyCallback)||s.call(this)}cancel(e=null,i=0){var n,s,r;this.running=!1,this.cancelled=!0,null==(n=this.gfx)||n.endDrawing(),Vm(this,to)&&(window.cancelAnimationFrame(Vm(this,to)),Hm(this,to,null)),Vm(t,eo).delete(this._canvas),e||(e=new pw(`Rendering cancelled, page ${this._pageIndex+1}`,i)),this.callback(e),null==(r=(s=this.task).onError)||r.call(s,e)}operatorListChanged(){var t;this.graphicsReady?(null==(t=this.stepper)||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Hm(this,to,window.requestAnimationFrame(()=>{Hm(this,to,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Vm(t,eo).delete(this._canvas),this.callback())))}};to=new WeakMap,eo=new WeakMap,$m(oy,eo,new WeakSet);let ly=oy,hy=(po=class{constructor({editor:t=null,uiManager:e=null}){var i,n;$m(this,fo),$m(this,io,null),$m(this,no,null),$m(this,so),$m(this,ro,null),$m(this,ao,!1),$m(this,oo,!1),$m(this,lo,null),$m(this,ho),$m(this,uo,null),$m(this,co,null),t?(Hm(this,oo,!1),Hm(this,lo,t)):Hm(this,oo,!0),Hm(this,co,(null==t?void 0:t._uiManager)||e),Hm(this,ho,Vm(this,co)._eventBus),Hm(this,so,(null==(i=null==t?void 0:t.color)?void 0:i.toUpperCase())||(null==(n=Vm(this,co))?void 0:n.highlightColors.values().next().value)||"#FFFF98"),Vm(po,go)||Hm(po,go,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return o(this,"_keyboardManager",new Sw([[["Escape","mac+Escape"],po.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],po.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],po.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],po.prototype._moveToPrevious],[["Home","mac+Home"],po.prototype._moveToBeginning],[["End","mac+End"],po.prototype._moveToEnd]]))}renderButton(){const t=Hm(this,io,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",Vm(this,lo)&&(t.ariaControls=`${Vm(this,lo).id}_colorpicker_dropdown`);const e=Vm(this,co)._signal;t.addEventListener("click",zm(this,fo,bo).bind(this),{signal:e}),t.addEventListener("keydown",zm(this,fo,wo).bind(this),{signal:e});const i=Hm(this,no,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=Vm(this,so),t.append(i),t}renderMainDropdown(){const t=Hm(this,ro,zm(this,fo,mo).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===Vm(this,io))return void zm(this,fo,bo).call(this,t);const e=t.target.getAttribute("data-color");e&&zm(this,fo,vo).call(this,e,t)}_moveToNext(t){var e,i;Vm(this,fo,Ao)?t.target!==Vm(this,io)?null==(i=t.target.nextSibling)||i.focus():null==(e=Vm(this,ro).firstChild)||e.focus():zm(this,fo,bo).call(this,t)}_moveToPrevious(t){var e,i;t.target!==(null==(e=Vm(this,ro))?void 0:e.firstChild)&&t.target!==Vm(this,io)?(Vm(this,fo,Ao)||zm(this,fo,bo).call(this,t),null==(i=t.target.previousSibling)||i.focus()):Vm(this,fo,Ao)&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){var e;Vm(this,fo,Ao)?null==(e=Vm(this,ro).firstChild)||e.focus():zm(this,fo,bo).call(this,t)}_moveToEnd(t){var e;Vm(this,fo,Ao)?null==(e=Vm(this,ro).lastChild)||e.focus():zm(this,fo,bo).call(this,t)}hideDropdown(){var t,e;null==(t=Vm(this,ro))||t.classList.add("hidden"),Vm(this,io).ariaExpanded="false",null==(e=Vm(this,uo))||e.abort(),Hm(this,uo,null)}_hideDropdownFromKeyboard(){var t;Vm(this,oo)||(Vm(this,fo,Ao)?(this.hideDropdown(),Vm(this,io).focus({preventScroll:!0,focusVisible:Vm(this,ao)})):null==(t=Vm(this,lo))||t.unselect())}updateColor(t){if(Vm(this,no)&&(Vm(this,no).style.backgroundColor=t),!Vm(this,ro))return;const e=Vm(this,co).highlightColors.values();for(const i of Vm(this,ro).children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;null==(t=Vm(this,io))||t.remove(),Hm(this,io,null),Hm(this,no,null),null==(e=Vm(this,ro))||e.remove(),Hm(this,ro,null)}},io=new WeakMap,no=new WeakMap,so=new WeakMap,ro=new WeakMap,ao=new WeakMap,oo=new WeakMap,lo=new WeakMap,ho=new WeakMap,uo=new WeakMap,co=new WeakMap,go=new WeakMap,fo=new WeakSet,mo=function(){const t=document.createElement("div"),e=Vm(this,co)._signal;t.addEventListener("contextmenu",w,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Vm(this,lo)&&(t.id=`${Vm(this,lo).id}_colorpicker_dropdown`);for(const[i,n]of Vm(this,co).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=i,s.setAttribute("data-l10n-id",Vm(po,go)[i]);const r=document.createElement("span");s.append(r),r.className="swatch",r.style.backgroundColor=n,s.ariaSelected=n===Vm(this,so),s.addEventListener("click",zm(this,fo,vo).bind(this,n),{signal:e}),t.append(s)}return t.addEventListener("keydown",zm(this,fo,wo).bind(this),{signal:e}),t},vo=function(t,e){e.stopPropagation(),Vm(this,ho).dispatch("switchannotationeditorparams",{source:this,type:Uv.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},wo=function(t){po._keyboardManager.exec(this,t)},bo=function(t){if(Vm(this,fo,Ao))return void this.hideDropdown();if(Hm(this,ao,0===t.detail),Vm(this,uo)||(Hm(this,uo,new AbortController),window.addEventListener("pointerdown",zm(this,fo,yo).bind(this),{signal:Vm(this,co).combinedSignal(Vm(this,uo))})),Vm(this,io).ariaExpanded="true",Vm(this,ro))return void Vm(this,ro).classList.remove("hidden");const e=Hm(this,ro,zm(this,fo,mo).call(this));Vm(this,io).append(e)},yo=function(t){var e;(null==(e=Vm(this,ro))?void 0:e.contains(t.target))||this.hideDropdown()},Ao=function(){return Vm(this,ro)&&!Vm(this,ro).classList.contains("hidden")},$m(po,go,null),po);const uy=class t{constructor(e){$m(this,_o,null),$m(this,xo,null),$m(this,Eo,null),Hm(this,xo,e),Hm(this,Eo,e._uiManager),Vm(t,So)||Hm(t,So,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Vm(this,_o))return Vm(this,_o);const{editorType:e,colorType:i,colorValue:n}=Vm(this,xo),s=Hm(this,_o,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",Vm(t,So)[e]),s.addEventListener("input",()=>{Vm(this,Eo).updateParams(i,s.value)},{signal:Vm(this,Eo)._signal}),s}update(t){Vm(this,_o)&&(Vm(this,_o).value=t)}destroy(){var t;null==(t=Vm(this,_o))||t.remove(),Hm(this,_o,null)}hideDropdown(){}};_o=new WeakMap,xo=new WeakMap,Eo=new WeakMap,So=new WeakMap,$m(uy,So,null);let cy=uy;class dy{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return[t=K(t),t,t]}static G_HTML([t]){const e=Y(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(K)}static RGB_HTML(t){return`#${t.map(Y).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,i,n]){return[K(1-Math.min(1,t+n)),K(1-Math.min(1,i+n)),K(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const n=1-t,s=1-e,r=1-i;return["CMYK",n,s,r,Math.min(n,s,r)]}}class py{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){n("Abstract method `_createSVG` called.")}}let gy=class extends py{_createSVG(t){return document.createElementNS(uw,t)}},fy=class{static setupStorage(t,e,i,n,s){const r=n.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===s)break;t.addEventListener("input",t=>{n.setValue(e,{value:t.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===s)break;t.addEventListener("change",t=>{n.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===s)break;t.addEventListener("input",t=>{n.setValue(e,{value:t.target.value})})}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);for(const t of i.children)t.attributes.value===r.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",t=>{const i=t.target.options,s=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(e,{value:s})})}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:s}){const{attributes:r}=e,a=t instanceof HTMLAnchorElement;"radio"===r.type&&(r.name=`${r.name}-${n}`);for(const[o,l]of Object.entries(r))if(null!=l)switch(o){case"class":l.length&&t.setAttribute(o,l.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",l);break;case"style":Object.assign(t.style,l);break;case"textContent":t.textContent=l;break;default:(!a||"href"!==o&&"newWindow"!==o)&&t.setAttribute(o,l)}a&&s.addLinkAttributes(t,r.href,r.newWindow),i&&r.dataId&&this.setupStorage(t,r.dataId,e,i)}static render(t){var e,i;const n=t.annotationStorage,s=t.linkService,r=t.xfaHtml,a=t.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:a,linkService:s});const l="richText"!==a,h=t.div;if(h.append(o),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=e}l&&h.setAttribute("class","xfaLayer xfaFont");const u=[];if(0===r.children.length){if(r.value){const t=document.createTextNode(r.value);o.append(t),l&&Zb.shouldBuildText(r.name)&&u.push(t)}return{textDivs:u}}const c=[[r,-1,o]];for(;c.length>0;){const[t,r,o]=c.at(-1);if(r+1===t.children.length){c.pop();continue}const h=t.children[++c.at(-1)[1]];if(null===h)continue;const{name:d}=h;if("#text"===d){const t=document.createTextNode(h.value);u.push(t),o.append(t);continue}const p=(null==(e=null==h?void 0:h.attributes)?void 0:e.xmlns)?document.createElementNS(h.attributes.xmlns,d):document.createElement(d);if(o.append(p),h.attributes&&this.setAttributes({html:p,element:h,storage:n,intent:a,linkService:s}),(null==(i=h.children)?void 0:i.length)>0)c.push([h,-1,p]);else if(h.value){const t=document.createTextNode(h.value);l&&Zb.shouldBuildText(d)&&u.push(t),p.append(t)}}for(const d of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}};const my=new WeakSet,vy=60*(new Date).getTimezoneOffset()*1e3;class wy{static create(t){switch(t.data.annotationType){case qv.LINK:return new yy(t);case qv.TEXT:return new Ay(t);case qv.WIDGET:switch(t.data.fieldType){case"Tx":return new xy(t);case"Btn":return t.data.radioButton?new Cy(t):t.data.checkBox?new Sy(t):new ky(t);case"Ch":return new My(t);case"Sig":return new Ey(t)}return new _y(t);case qv.POPUP:return new Py(t);case qv.FREETEXT:return new Dy(t);case qv.LINE:return new Ty(t);case qv.SQUARE:return new Iy(t);case qv.CIRCLE:return new Ly(t);case qv.POLYLINE:return new Ry(t);case qv.CARET:return new Oy(t);case qv.INK:return new Wy(t);case qv.POLYGON:return new Ny(t);case qv.HIGHLIGHT:return new By(t);case qv.UNDERLINE:return new jy(t);case qv.SQUIGGLY:return new Vy(t);case qv.STRIKEOUT:return new $y(t);case qv.STAMP:return new Hy(t);case qv.FILEATTACHMENT:return new zy(t);default:return new by(t)}}}Co=new WeakMap,ko=new WeakMap,Mo=new WeakMap,Po=new WeakSet,Fo=function(t){const{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:o}}}}=this;null==i||i.splice(0,4,...t),e.left=100*(t[0]-a)/s+"%",e.top=100*(r-t[3]+o)/r+"%",0===n?(e.width=100*(t[2]-t[0])/s+"%",e.height=100*(t[3]-t[1])/r+"%"):this.setRotation(n)};let by=class t{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){$m(this,Po),$m(this,Co,null),$m(this,ko,!1),$m(this,Mo,null),this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!(!(null==t?void 0:t.str)&&!(null==e?void 0:e.str))}get _isEditable(){return this.data.isEditable}get hasPopupData(){return t._hasPopupData(this.data)}updateEdited(t){var e;if(!this.container)return;t.rect&&(Vm(this,Co)||Hm(this,Co,{rect:this.data.rect.slice(0)}));const{rect:i,popup:n}=t;i&&zm(this,Po,Fo).call(this,i);let s=(null==(e=Vm(this,Mo))?void 0:e.popup)||this.popup;!s&&(null==n?void 0:n.text)&&(this._createPopup(n),s=Vm(this,Mo).popup),s&&(s.updateEdited(t),(null==n?void 0:n.deleted)&&(s.remove(),Hm(this,Mo,null),this.popup=null))}resetEdited(){var t;Vm(this,Co)&&(zm(this,Po,Fo).call(this,Vm(this,Co).rect),null==(t=Vm(this,Mo))||t.popup.resetEdited(),Hm(this,Co,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof _y||this instanceof yy||(r.tabIndex=0);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Py){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,r),r}const{width:o,height:l}=this;if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,n=e.borderStyle.verticalCornerRadius;if(t>0||n>0){const e=`calc(${t}px * var(--total-scale-factor)) / calc(${n}px * var(--total-scale-factor))`;a.borderRadius=e}else if(this instanceof Cy){const t=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=t}switch(e.borderStyle.style){case 1:a.borderStyle="solid";break;case 2:a.borderStyle="dashed";break;case 3:i("Unimplemented border style: beveled");break;case 4:i("Unimplemented border style: inset");break;case 5:a.borderBottomStyle="solid"}const s=e.borderColor||null;s?(Hm(this,ko,!0),a.borderColor=aw.makeHexColor(0|s[0],0|s[1],0|s[2])):a.borderWidth=0}const h=aw.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:c,pageX:d,pageY:p}=s.rawDims;a.left=100*(h[0]-d)/u+"%",a.top=100*(h[1]-p)/c+"%";const{rotation:g}=e;return e.hasOwnCanvas||0===g?(a.width=100*o/u+"%",a.height=100*l/c+"%"):this.setRotation(g,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims;let{width:s,height:r}=this;t%180!=0&&([s,r]=[r,s]),e.style.width=100*s/i+"%",e.style.height=100*r/n+"%",e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,i)=>{const n=i.detail[t],s=n[0],r=n.slice(1);i.target.style[e]=dy[`${s}_HTML`](r),this.annotationStorage.setValue(this.data.id,{[e]:dy[`${s}_rgb`](r)})};return o(this,"_commonActions",{display:t=>{const{display:e}=t.detail,i=e%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const n of Object.keys(e.detail)){const s=t[n]||i[n];null==s||s(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[n,s]of Object.entries(e)){const r=i[n];r&&(r({detail:{[n]:s},target:t}),delete e[n])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,n,s]=this.data.rect.map(t=>Math.fround(t));if(8===t.length){const[r,a,o,l]=t.subarray(2,6);if(n===r&&s===a&&e===o&&i===l)return}const{style:r}=this.container;let a;if(Vm(this,ko)){const{borderColor:t,borderWidth:e}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${e}">`],this.container.classList.add("hasBorder")}const o=n-e,l=s-i,{svgFactory:h}=this,u=h.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0),u.role="none";const c=h.createElement("defs");u.append(c);const d=h.createElement("clipPath"),p=`clippath_${this.data.id}`;d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),c.append(d);for(let g=2,f=t.length;g<f;g+=8){const i=t[g],n=t[g+1],r=t[g+2],u=t[g+3],c=h.createElement("rect"),p=(r-e)/o,f=(s-n)/l,m=(i-r)/o,v=(n-u)/l;c.setAttribute("x",p),c.setAttribute("y",f),c.setAttribute("width",m),c.setAttribute("height",v),d.append(c),null==a||a.push(`<rect vector-effect="non-scaling-stroke" x="${p}" y="${f}" width="${m}" height="${v}"/>`)}Vm(this,ko)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(u),this.container.style.clipPath=`url(#${p})`}_createPopup(t=null){const{data:e}=this;let i,n;t?(i={str:t.text},n=t.date):(i=e.contentsObj,n=e.modificationDate);const s=Hm(this,Mo,new Py({data:{color:e.color,titleObj:e.titleObj,modificationDate:n,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}get hasPopupElement(){return!!(Vm(this,Mo)||this.popup||this.data.popupRef)}render(){n("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:t,id:r,exportValues:a}of s){if(-1===t)continue;if(r===e)continue;const s="string"==typeof a?a:null,o=document.querySelector(`[data-element-id="${r}"]`);!o||my.has(o)?n.push({id:r,exportValue:s,domElement:o}):i(`_getElementsByName - element not allowed: ${r}`)}return n}for(const i of document.getElementsByName(t)){const{exportValue:t}=i,s=i.getAttribute("data-element-id");s!==e&&my.has(i)&&n.push({id:s,exportValue:t,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),null==(t=this.popup)||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),null==(t=this.popup)||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;null==(i=this.linkService.eventBus)||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};class yy extends by{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!(null==e?void 0:e.ignoreBorder),createQuadrilaterals:!0}),$m(this,Do),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),n=!0):t.attachment?(zm(this,Do,Io).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),n=!0):t.setOCGState?(zm(this,Do,Lo).call(this,i,t.setOCGState,t.overlaidText),n=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),n=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&zm(this,Do,To).call(this),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),zm(this,Do,To).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const s=i.get(n);s&&(t[s]=()=>{var t;return null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1})}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),zm(this,Do,To).call(this)}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),zm(this,Do,To).call(this),!this._fieldObjects)return i('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(t.onclick=()=>!1));t.onclick=()=>{var t;null==n||n();const{fields:s,refs:r,include:a}=e,o=[];if(0!==s.length||0!==r.length){const t=new Set(r);for(const e of s){const i=this._fieldObjects[e]||[];for(const{id:e}of i)t.add(e)}for(const e of Object.values(this._fieldObjects))for(const i of e)t.has(i.id)===a&&o.push(i)}else for(const e of Object.values(this._fieldObjects))o.push(...e);const l=this.annotationStorage,h=[];for(const e of o){const{id:t}=e;switch(h.push(t),e.type){case"text":{const i=e.defaultValue||"";l.setValue(t,{value:i});break}case"checkbox":case"radiobutton":{const i=e.defaultValue===e.exportValues;l.setValue(t,{value:i});break}case"combobox":case"listbox":{const i=e.defaultValue||"";l.setValue(t,{value:i});break}default:continue}const n=document.querySelector(`[data-element-id="${t}"]`);n&&(my.has(n)?n.dispatchEvent(new Event("resetform")):i(`_bindResetFormAction - element not allowed: ${t}`))}return this.enableScripting&&(null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Do=new WeakSet,To=function(){this.container.setAttribute("data-internal-link","")},Io=function(t,e,i="",n=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>{var t;return null==(t=this.downloadManager)||t.openOrDownloadData(e.content,e.filename,n),!1},zm(this,Do,To).call(this)},Lo=function(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),zm(this,Do,To).call(this)};class Ay extends by{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class _y extends by{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null==(e=t.previousSibling)?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return sw.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,s){i.includes("mouse")?t.addEventListener(i,t=>{var e;null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})}):t.addEventListener(i,t=>{var r;if("blur"===i){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===i){if(e.focused)return;e.focused=!0}s&&(null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(t)}}))})}_setEventListeners(t,e,i,n){var s,r,a;for(const[o,l]of i)("Action"===l||(null==(s=this.data.actions)?void 0:s[l]))&&("Focus"!==l&&"Blur"!==l||e||(e={focused:!1}),this._setEventListener(t,e,o,l,n),"Focus"!==l||(null==(r=this.data.actions)?void 0:r.Blur)?"Blur"!==l||(null==(a=this.data.actions)?void 0:a.Focus)||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":aw.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const{fontColor:e}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,n=t.style;let s;const r=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(Vv*i))||1);s=Math.min(i,r(e/Vv))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,r(t/Vv))}n.fontSize=`calc(${s}px * var(--total-scale-factor))`,n.color=aw.makeHexColor(e[0],e[1],e[2]),null!==this.data.textAlignment&&(n.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class xy extends _y{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,n){const s=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=i),s.setValue(r.id,{[n]:i})}render(){var t,e;const i=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=i.getValue(n,{value:this.data.fieldValue});let a=r.value||"";const o=i.getValue(n,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=r.formattedValue||(null==(t=this.data.textContent)?void 0:t.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=null!=l?l:a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",null!=l?l:a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),my.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:u,datetimeType:c,timeStep:d}=this.data,p=!!c&&this.enableScripting;u&&(s.title=u),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",t=>{i.setValue(n,{value:t.target.value}),this.setPropertyOnSiblings(s,"value",t.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",t=>{var e;const i=null!=(e=this.data.defaultFieldValue)?e:"";s.value=h.userValue=i,h.formattedValue=null});let g=t=>{const{formattedValue:e}=h;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",t=>{var e;if(h.focused)return;const{target:i}=t;if(p&&(i.type=c,d&&(i.step=d)),h.userValue){const t=h.userValue;if(p)if("time"===c){const e=new Date(t),n=[e.getHours(),e.getMinutes(),e.getSeconds()];i.value=n.map(t=>t.toString().padStart(2,"0")).join(":")}else i.value=new Date(t-vy).toISOString().split("date"===c?"T":".",1)[0];else i.value=t}h.lastCommittedValue=i.value,h.commitKey=1,(null==(e=this.data.actions)?void 0:e.Focus)||(h.focused=!0)}),s.addEventListener("updatefromsandbox",t=>{this.showElementAndHideCanvas(t.target);const e={value(t){var e;h.userValue=null!=(e=t.detail.value)?e:"",p||i.setValue(n,{value:h.userValue.toString()}),t.target.value=h.userValue},formattedValue(t){const{formattedValue:e}=t.detail;h.formattedValue=e,null!=e&&t.target!==document.activeElement&&(t.target.value=e);const s={formattedValue:e};p&&(s.value=e),i.setValue(n,s)},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:t=>{var e;const{charLimit:s}=t.detail,{target:r}=t;if(0===s)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",s);let a=h.userValue;!a||a.length<=s||(a=a.slice(0,s),r.value=h.userValue=a,i.setValue(n,{value:a}),null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(e,t)}),s.addEventListener("keydown",t=>{var e;h.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(h.commitKey=3):i=2,-1===i)return;const{value:s}=t.target;h.lastCommittedValue!==s&&(h.lastCommittedValue=s,h.userValue=s,null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:s,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))});const t=g;g=null,s.addEventListener("blur",e=>{var i,s;if(!h.focused||!e.relatedTarget)return;(null==(i=this.data.actions)?void 0:i.Blur)||(h.focused=!1);const{target:r}=e;let{value:a}=r;if(p){if(a&&"time"===c){const t=a.split(":").map(t=>parseInt(t,10));a=new Date(2e3,0,1,t[0],t[1],t[2]||0).valueOf(),r.step=""}else a=new Date(a).valueOf();r.type="text"}h.userValue=a,h.lastCommittedValue!==a&&(null==(s=this.linkService.eventBus)||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:a,willCommit:!0,commitKey:h.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),t(e)}),(null==(e=this.data.actions)?void 0:e.Keystroke)&&s.addEventListener("beforeinput",t=>{var e;h.lastCommittedValue=null;const{data:i,target:s}=t,{value:r,selectionStart:a,selectionEnd:o}=s;let l=a,u=o;switch(t.inputType){case"deleteWordBackward":{const t=r.substring(0,a).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=r.substring(a).match(/^[^\w]*\w*/);t&&(u+=t[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(u+=1)}t.preventDefault(),null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:u}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${t}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Ey extends _y{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Sy extends _y{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"==typeof n&&(n="Off"!==n,t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return my.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",n=>{const{name:s,checked:r}=n.target;for(const a of this._getElementsByName(s,i)){const i=r&&a.exportValue===e.exportValue;a.domElement&&(a.domElement.checked=i),t.setValue(a.id,{value:i})}t.setValue(i,{value:r})}),s.addEventListener("resetform",t=>{const i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",e=>{const n={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(n,e)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Cy extends _y{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof n&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(const r of this._getElementsByName(e.fieldName,i))t.setValue(r.id,{value:!1});const s=document.createElement("input");if(my.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",e=>{const{name:n,checked:s}=e.target;for(const r of this._getElementsByName(n,i))t.setValue(r.id,{value:!1});t.setValue(i,{value:s})}),s.addEventListener("resetform",t=>{const i=e.defaultFieldValue;t.target.checked=null!=i&&i===e.buttonValue}),this.enableScripting&&this.hasJSActions){const n=e.buttonValue;s.addEventListener("updatefromsandbox",e=>{const s={value:e=>{const s=n===e.detail.value;for(const n of this._getElementsByName(e.target.name)){const e=s&&n.id===i;n.domElement&&(n.domElement.checked=e),t.setValue(n.id,{value:e})}}};this._dispatchEventFromSandbox(s,e)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class ky extends yy{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({},t)})),t}}class My extends _y{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");my.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",t=>{const e=this.data.defaultFieldValue;for(const i of n.options)i.selected=i.value===e});for(const h of this.data.options){const t=document.createElement("option");t.textContent=h.displayValue,t.value=h.exportValue,i.value.includes(h.exportValue)&&(t.setAttribute("selected",!0),s=!1),n.append(t)}let r=null;if(s){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),n.prepend(t),r=()=>{t.remove(),n.removeEventListener("input",r),r=null},n.addEventListener("input",r)}const a=t=>{const e=t?"value":"textContent",{options:i,multiple:s}=n;return s?Array.prototype.filter.call(i,t=>t.selected).map(t=>t[e]):-1===i.selectedIndex?null:i[i.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,t=>({displayValue:t.textContent,exportValue:t.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",i=>{const s={value(i){null==r||r();const s=i.detail.value,l=new Set(Array.isArray(s)?s:[s]);for(const t of n.options)t.selected=l.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){n.multiple=!0},remove(i){const s=n.options,r=i.detail.remove;s[r].selected=!1,n.remove(r),s.length>0&&-1===Array.prototype.findIndex.call(s,t=>t.selected)&&(s[0].selected=!0),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},clear(i){for(;0!==n.length;)n.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(i){const{index:s,displayValue:r,exportValue:h}=i.detail.insert,u=n.children[s],c=document.createElement("option");c.textContent=r,c.value=h,u?u.before(c):n.append(c),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},items(i){const{items:s}=i.detail;for(;0!==n.length;)n.remove(0);for(const t of s){const{displayValue:e,exportValue:i}=t,s=document.createElement("option");s.textContent=e,s.value=i,n.append(s)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},indices(i){const n=new Set(i.detail.indices);for(const t of i.target.options)t.selected=n.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(s,i)}),n.addEventListener("input",i=>{var n;const s=a(!0),r=a(!1);t.setValue(e,{value:s}),i.preventDefault(),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:r,changeEx:s,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],t=>t.target.value)):n.addEventListener("input",function(i){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Py extends by{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:by._hasPopupData(e)}),this.elements=i,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new Fy({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",i.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(t=>`${hw}${t}`).join(",")),this.container}}class Fy{constructor({container:t,color:e,elements:i,titleObj:n,modificationDate:s,contentsObj:r,richText:a,parent:o,rect:l,parentRect:h,open:u}){$m(this,el),$m(this,Ro,zm(this,el,ol).bind(this)),$m(this,No,zm(this,el,cl).bind(this)),$m(this,Oo,zm(this,el,ul).bind(this)),$m(this,Wo,zm(this,el,hl).bind(this)),$m(this,Bo,null),$m(this,jo,null),$m(this,Vo,null),$m(this,$o,null),$m(this,Ho,null),$m(this,zo,null),$m(this,Uo,null),$m(this,Go,!1),$m(this,qo,null),$m(this,Xo,null),$m(this,Yo,null),$m(this,Ko,null),$m(this,Qo,null),$m(this,Zo,null),$m(this,Jo,null),$m(this,tl,!1),Hm(this,jo,t),Hm(this,Zo,n),Hm(this,Vo,r),Hm(this,Qo,a),Hm(this,zo,o),Hm(this,Bo,e),Hm(this,Ko,l),Hm(this,Uo,h),Hm(this,Ho,i),Hm(this,$o,fw.toDateObject(s)),this.trigger=i.flatMap(t=>t.getElementsToTriggerPopup()),zm(this,el,il).call(this),Vm(this,jo).hidden=!0,u&&zm(this,el,hl).call(this)}render(){var t;if(Vm(this,qo))return;const e=Hm(this,qo,document.createElement("div"));if(e.className="popup",Vm(this,Bo)){const t=e.style.outlineColor=aw.makeHexColor(...Vm(this,Bo));e.style.backgroundColor=`color-mix(in srgb, ${t} 30%, white)`}const i=document.createElement("span");if(i.className="header",null==(t=Vm(this,Zo))?void 0:t.str){const t=document.createElement("span");t.className="title",i.append(t),({dir:t.dir,str:t.textContent}=Vm(this,Zo))}if(e.append(i),Vm(this,$o)){const t=document.createElement("time");t.className="popupDate",t.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),t.setAttribute("data-l10n-args",JSON.stringify({dateObj:Vm(this,$o).valueOf()})),t.dateTime=Vm(this,$o).toISOString(),i.append(t)}const n=Vm(this,el,nl);if(n)fy.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(Vm(this,Vo));e.append(t)}Vm(this,jo).append(e)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let s=0,r=n.length;s<r;++s){const t=n[s];i.append(document.createTextNode(t)),s<r-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popup:e,deleted:i}){var n;i||(null==e?void 0:e.deleted)?this.remove():(zm(this,el,il).call(this),Vm(this,Jo)||Hm(this,Jo,{contentsObj:Vm(this,Vo),richText:Vm(this,Qo)}),t&&Hm(this,Yo,null),e&&(Hm(this,Qo,zm(this,el,al).call(this,e.text)),Hm(this,$o,fw.toDateObject(e.date)),Hm(this,Vo,null)),null==(n=Vm(this,qo))||n.remove(),Hm(this,qo,null))}resetEdited(){var t;Vm(this,Jo)&&(({contentsObj:Um(this,Vo)._,richText:Um(this,Qo)._}=Vm(this,Jo)),Hm(this,Jo,null),null==(t=Vm(this,qo))||t.remove(),Hm(this,qo,null),Hm(this,Yo,null))}remove(){var t,e;null==(t=Vm(this,Xo))||t.abort(),Hm(this,Xo,null),null==(e=Vm(this,qo))||e.remove(),Hm(this,qo,null),Hm(this,tl,!1),Hm(this,Go,!1);for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){Hm(this,tl,this.isVisible),Vm(this,tl)&&(Vm(this,jo).hidden=!0)}maybeShow(){zm(this,el,il).call(this),Vm(this,tl)&&(Vm(this,qo)||zm(this,el,ul).call(this),Hm(this,tl,!1),Vm(this,jo).hidden=!1)}get isVisible(){return!1===Vm(this,jo).hidden}}Ro=new WeakMap,No=new WeakMap,Oo=new WeakMap,Wo=new WeakMap,Bo=new WeakMap,jo=new WeakMap,Vo=new WeakMap,$o=new WeakMap,Ho=new WeakMap,zo=new WeakMap,Uo=new WeakMap,Go=new WeakMap,qo=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,Jo=new WeakMap,tl=new WeakMap,el=new WeakSet,il=function(){var t;if(Vm(this,Xo))return;Hm(this,Xo,new AbortController);const{signal:e}=Vm(this,Xo);for(const i of this.trigger)i.addEventListener("click",Vm(this,Wo),{signal:e}),i.addEventListener("mouseenter",Vm(this,Oo),{signal:e}),i.addEventListener("mouseleave",Vm(this,No),{signal:e}),i.classList.add("popupTriggerArea");for(const i of Vm(this,Ho))null==(t=i.container)||t.addEventListener("keydown",Vm(this,Ro),{signal:e})},nl=function(){const t=Vm(this,Qo),e=Vm(this,Vo);return!(null==t?void 0:t.str)||(null==e?void 0:e.str)&&e.str!==t.str?null:Vm(this,Qo).html||null},sl=function(){var t,e,i;return(null==(i=null==(e=null==(t=Vm(this,el,nl))?void 0:t.attributes)?void 0:e.style)?void 0:i.fontSize)||0},rl=function(){var t,e,i;return(null==(i=null==(e=null==(t=Vm(this,el,nl))?void 0:t.attributes)?void 0:e.style)?void 0:i.color)||null},al=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:Vm(this,el,rl),fontSize:Vm(this,el,sl)?`calc(${Vm(this,el,sl)}px * var(--total-scale-factor))`:""}};for(const s of t.split("\n"))e.push({name:"span",value:s,attributes:n});return i},ol=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&Vm(this,Go))&&zm(this,el,hl).call(this)},ll=function(){if(null!==Vm(this,Yo))return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:s}}}=Vm(this,zo);let r=!!Vm(this,Uo),a=Vm(this,r?Uo:Ko);for(const d of Vm(this,Ho))if(!a||null!==aw.intersect(d.data.rect,a)){a=d.data.rect,r=!0;break}const o=aw.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),l=r?a[2]-a[0]+5:0,h=o[0]+l,u=o[1];Hm(this,Yo,[100*(h-n)/e,100*(u-s)/i]);const{style:c}=Vm(this,jo);c.left=`${Vm(this,Yo)[0]}%`,c.top=`${Vm(this,Yo)[1]}%`},hl=function(){Hm(this,Go,!Vm(this,Go)),Vm(this,Go)?(zm(this,el,ul).call(this),Vm(this,jo).addEventListener("click",Vm(this,Wo)),Vm(this,jo).addEventListener("keydown",Vm(this,Ro))):(zm(this,el,cl).call(this),Vm(this,jo).removeEventListener("click",Vm(this,Wo)),Vm(this,jo).removeEventListener("keydown",Vm(this,Ro)))},ul=function(){Vm(this,qo)||this.render(),this.isVisible?Vm(this,Go)&&Vm(this,jo).classList.add("focused"):(zm(this,el,ll).call(this),Vm(this,jo).hidden=!1,Vm(this,jo).style.zIndex=parseInt(Vm(this,jo).style.zIndex)+1e3)},cl=function(){Vm(this,jo).classList.remove("focused"),!Vm(this,Go)&&this.isVisible&&(Vm(this,jo).hidden=!0,Vm(this,jo).style.zIndex=parseInt(Vm(this,jo).style.zIndex)-1e3)};class Dy extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=zv.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Ty extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),$m(this,dl,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,n=this.svgFactory.create(e,i,!0),s=Hm(this,dl,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.append(s),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vm(this,dl)}addHighlightArea(){this.container.classList.add("highlightArea")}}dl=new WeakMap;class Iy extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),$m(this,pl,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,r=Hm(this,pl,this.svgFactory.createElement("svg:rect"));return r.setAttribute("x",s/2),r.setAttribute("y",s/2),r.setAttribute("width",e-s),r.setAttribute("height",i-s),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vm(this,pl)}addHighlightArea(){this.container.classList.add("highlightArea")}}pl=new WeakMap;class Ly extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),$m(this,gl,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,r=Hm(this,gl,this.svgFactory.createElement("svg:ellipse"));return r.setAttribute("cx",e/2),r.setAttribute("cy",i/2),r.setAttribute("rx",e/2-s/2),r.setAttribute("ry",i/2-s/2),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vm(this,gl)}addHighlightArea(){this.container.classList.add("highlightArea")}}gl=new WeakMap;class Ry extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),$m(this,fl,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:n},width:s,height:r}=this;if(!e)return this.container;const a=this.svgFactory.create(s,r,!0);let o=[];for(let h=0,u=e.length;h<u;h+=2){const i=e[h]-t[0],n=t[3]-e[h+1];o.push(`${i},${n}`)}o=o.join(" ");const l=Hm(this,fl,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",i.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Vm(this,fl)}addHighlightArea(){this.container.classList.add("highlightArea")}}fl=new WeakMap;class Ny extends Ry{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Oy extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Wy extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),$m(this,wl),$m(this,ml,null),$m(this,vl,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?zv.HIGHLIGHT:zv.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:n,popupRef:s}}=this,{transform:r,width:a,height:o}=zm(this,wl,bl).call(this,e,t),l=this.svgFactory.create(a,o,!0),h=Hm(this,ml,this.svgFactory.createElement("svg:g"));l.append(h),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",r);for(let u=0,c=i.length;u<c;u++){const t=this.svgFactory.createElement(this.svgElementName);Vm(this,vl).push(t),t.setAttribute("points",i[u].join(",")),h.append(t)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:n}=t,s=Vm(this,ml);if(e>=0&&s.setAttribute("stroke-width",e||1),i)for(let r=0,a=Vm(this,vl).length;r<a;r++)Vm(this,vl)[r].setAttribute("points",i[r].join(","));if(n){const{transform:t,width:e,height:i}=zm(this,wl,bl).call(this,this.data.rotation,n);s.parentElement.setAttribute("viewBox",`0 0 ${e} ${i}`),s.setAttribute("transform",t)}}getElementsToTriggerPopup(){return Vm(this,vl)}addHighlightArea(){this.container.classList.add("highlightArea")}}ml=new WeakMap,vl=new WeakMap,wl=new WeakSet,bl=function(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}};class By extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=zv.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const e=document.createElement("mark");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class jy extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class Vy extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class $y extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const e=document.createElement("s");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class Hy extends by{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=zv.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class zy extends by{constructor(t){var e;super(t,{isRenderable:!0}),$m(this,Al),$m(this,yl,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,null==(e=this.linkService.eventBus)||e.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||0===e.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),i.addEventListener("dblclick",zm(this,Al,_l).bind(this)),Hm(this,yl,i);const{isMac:n}=sw.platform;return t.addEventListener("keydown",t=>{"Enter"===t.key&&(n?t.metaKey:t.ctrlKey)&&zm(this,Al,_l).call(this)}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return Vm(this,yl)}addHighlightArea(){this.container.classList.add("highlightArea")}}yl=new WeakMap,Al=new WeakSet,_l=function(){var t;null==(t=this.downloadManager)||t.openOrDownloadData(this.content,this.filename)};let Uy=(Fl=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:n,page:s,viewport:r,structTreeLayer:a}){$m(this,kl),$m(this,xl,null),$m(this,El,null),$m(this,Sl,new Map),$m(this,Cl,null),this.div=t,Hm(this,xl,e),Hm(this,El,i),Hm(this,Cl,a||null),this.page=s,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return Vm(this,Sl).size>0}async render(t){var e;const{annotations:i}=t,n=this.div;E(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new gy,annotationStorage:t.annotationStorage||new Vw,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of i){if(a.noHTML)continue;const t=a.annotationType===qv.POPUP;if(t){const t=s.get(a.id);if(!t)continue;r.elements=t}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const i=wy.create(r);if(!i.isRenderable)continue;if(!t&&a.popupRef){const t=s.get(a.popupRef);t?t.push(i):s.set(a.popupRef,[i])}const n=i.render();a.hidden&&(n.style.visibility="hidden"),await zm(this,kl,Ml).call(this,n,a.id,r.elements),i._isEditable&&(Vm(this,Sl).set(i.data.id,i),null==(e=this._annotationEditorUIManager)||e.renderAnnotationElement(i))}zm(this,kl,Pl).call(this)}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new gy,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=Fl._defaultBorderStyle),i.data=n;const t=wy.create(i);if(!t.isRenderable)continue;const e=t.render();await zm(this,kl,Ml).call(this,e,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,E(e,{rotation:t.rotation}),zm(this,kl,Pl).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(Vm(this,Sl).values())}getEditableAnnotation(t){return Vm(this,Sl).get(t)}static get _defaultBorderStyle(){return o(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:1,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},xl=new WeakMap,El=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,kl=new WeakSet,Ml=async function(t,e,i){var n,s;const r=t.firstChild||t,a=r.id=`${hw}${e}`,o=await(null==(n=Vm(this,Cl))?void 0:n.getAriaAttributes(a));if(o)for(const[l,h]of o)r.setAttribute(l,h);i?i.at(-1).container.after(t):(this.div.append(t),null==(s=Vm(this,xl))||s.moveElementInDOM(this.div,t,r,!1))},Pl=function(){var t;if(!Vm(this,El))return;const e=this.div;for(const[i,n]of Vm(this,El)){const s=e.querySelector(`[data-annotation-id="${i}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:r}=s;r?"CANVAS"===r.nodeName?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):s.append(n);const a=Vm(this,Sl).get(i);a&&(a._hasNoCanvas?(null==(t=this._annotationEditorUIManager)||t.setMissingCanvas(i,s.id,n),a._hasNoCanvas=!1):a.canvas=n)}Vm(this,El).clear()},Fl);const Gy=/\r\n?|\n/g,qy=class t extends Lw{constructor(e){super({...e,name:"freeTextEditor"}),$m(this,Nl),$m(this,Dl),$m(this,Tl,""),$m(this,Il,`${this.id}-editor`),$m(this,Ll,null),$m(this,Rl),Bm(this,"_colorPicker",null),Hm(this,Dl,e.color||t._defaultColor||Lw._defaultLineColor),Hm(this,Rl,e.fontSize||t._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=t.prototype,i=t=>t.isEmpty(),n=Mw.TRANSLATE_SMALL,s=Mw.TRANSLATE_BIG;return o(this,"_keyboardManager",new Sw([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(t,e){Lw.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case Uv.FREETEXT_SIZE:t._defaultFontSize=i;break;case Uv.FREETEXT_COLOR:t._defaultColor=i}}updateParams(t,e){switch(t){case Uv.FREETEXT_SIZE:zm(this,Nl,Ol).call(this,e);break;case Uv.FREETEXT_COLOR:zm(this,Nl,Wl).call(this,e)}}static get defaultPropertiesToUpdate(){return[[Uv.FREETEXT_SIZE,t._defaultFontSize],[Uv.FREETEXT_COLOR,t._defaultColor||Lw._defaultLineColor]]}get propertiesToUpdate(){return[[Uv.FREETEXT_SIZE,Vm(this,Rl)],[Uv.FREETEXT_COLOR,Vm(this,Dl)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new cy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Uv.FREETEXT_COLOR}get colorValue(){return Vm(this,Dl)}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const e=this.parentScale;return[-t._internalPadding*e,-(t._internalPadding+Vm(this,Rl))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Hm(this,Ll,new AbortController);const t=this._uiManager.combinedSignal(Vm(this,Ll));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Vm(this,Il)),this._isDraggable=!0,null==(t=Vm(this,Ll))||t.abort(),Hm(this,Ll,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var e;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(null==(e=this._initialOptions)?void 0:e.isCentered)&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=Vm(this,Tl),e=Hm(this,Tl,zm(this,Nl,Bl).call(this).trimEnd());if(t===e)return;const i=t=>{Hm(this,Tl,t),t?(zm(this,Nl,Hl).call(this),this._uiManager.rebuild(this),zm(this,Nl,jl).call(this)):this.remove()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),zm(this,Nl,jl).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(e){t._keyboardManager.exec(this,e)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Vm(this,Il)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${Vm(this,Rl)}px * var(--total-scale-factor))`,i.color=Vm(this,Dl),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,n]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,l]=this.pageDimensions,[h,u]=this.pageTranslation;let c,d;switch(this.rotation){case 0:c=t+(s[0]-h)/o,d=e+this.height-(s[1]-u)/l;break;case 90:c=t+(s[0]-h)/o,d=e-(s[1]-u)/l,[r,a]=[a,-r];break;case 180:c=t-this.width+(s[0]-h)/o,d=e-(s[1]-u)/l,[r,a]=[-r,-a];break;case 270:c=t+(s[0]-h-this.height*l)/o,d=e+(s[1]-u-this.width*o)/l,[r,a]=[-a,r]}this.setAt(c*i,d*n,r,a)}else this._moveAfterPaste(t,e);zm(this,Nl,Hl).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var i,n,s;const r=e.clipboardData||window.clipboardData,{types:a}=r;if(1===a.length&&"text/plain"===a[0])return;e.preventDefault();const o=zm(i=t,Vl,Ul).call(i,r.getData("text")||"").replaceAll(Gy,"\n");if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const h=l.getRangeAt(0);if(!o.includes("\n"))return h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),void l.collapseToStart();const{startContainer:u,startOffset:c}=h,d=[],p=[];if(u.nodeType===Node.TEXT_NODE){const e=u.parentElement;if(p.push(u.nodeValue.slice(c).replaceAll(Gy,"")),e!==this.editorDiv){let i=d;for(const s of this.editorDiv.childNodes)s!==e?i.push(zm(n=t,Vl,$l).call(n,s)):i=p}d.push(u.nodeValue.slice(0,c).replaceAll(Gy,""))}else if(u===this.editorDiv){let e=d,i=0;for(const n of this.editorDiv.childNodes)i++===c&&(e=p),e.push(zm(s=t,Vl,$l).call(s,n))}Hm(this,Tl,`${d.join("\n")}${o}${p.join("\n")}`),zm(this,Nl,Hl).call(this);const g=new Range;let f=Math.sumPrecise(d.map(t=>t.length));for(const{firstChild:t}of this.editorDiv.childNodes)if(t.nodeType===Node.TEXT_NODE){const e=t.nodeValue.length;if(f<=e){g.setStart(t,f),g.setEnd(t,f);break}f-=e}l.removeAllRanges(),l.addRange(g)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,n){var s;let r=null;if(e instanceof Dy){const{data:{defaultAppearanceData:{fontSize:t,fontColor:i},rect:n,rotation:s,id:a,popupRef:o,contentsObj:l},textContent:h,textPosition:u,parent:{page:{pageNumber:c}}}=e;if(!h||0===h.length)return null;r=e={annotationType:zv.FREETEXT,color:Array.from(i),fontSize:t,value:h.join("\n"),position:u,pageIndex:c-1,rect:n.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:o,comment:(null==l?void 0:l.str)||null}}const a=await super.deserialize(e,i,n);return Hm(a,Rl,e.fontSize),Hm(a,Dl,aw.makeHexColor(...e.color)),Hm(a,Tl,zm(s=t,Vl,Ul).call(s,e.value)),a._initialData=r,e.comment&&a.setCommentData(e.comment),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=t._internalPadding*this.parentScale,n=this.getRect(i,i),s=Lw._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Vm(this,Dl)),r={annotationType:zv.FREETEXT,color:s,fontSize:Vm(this,Rl),value:zm(this,Nl,zl).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!zm(this,Nl,Gl).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e),{style:n}=i;n.fontSize=`calc(${Vm(this,Rl)}px * var(--total-scale-factor))`,n.color=Vm(this,Dl),i.replaceChildren();for(const t of Vm(this,Tl).split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),i.append(e)}const s=t._internalPadding*this.parentScale,r={rect:this.getRect(s,s)};return r.popup=this.hasEditedComment?this.comment:{text:Vm(this,Tl)},e.updateEdited(r),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Dl=new WeakMap,Tl=new WeakMap,Il=new WeakMap,Ll=new WeakMap,Rl=new WeakMap,Nl=new WeakSet,Ol=function(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--total-scale-factor))`,this.translate(0,-(t-Vm(this,Rl))*this.parentScale),Hm(this,Rl,t),zm(this,Nl,jl).call(this)},i=Vm(this,Rl);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Uv.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Wl=function(t){const e=t=>{var e;Hm(this,Dl,this.editorDiv.style.color=t),null==(e=this._colorPicker)||e.update(t)},i=Vm(this,Dl);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Uv.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Bl=function(){var t;const e=[];this.editorDiv.normalize();let i=null;for(const n of this.editorDiv.childNodes)(null==i?void 0:i.nodeType)===Node.TEXT_NODE&&"BR"===n.nodeName||(e.push(zm(t=qy,Vl,$l).call(t,n)),i=n);return e.join("\n")},jl=function(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,n=e.style.display,s=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),i=e.getBoundingClientRect(),e.remove(),e.style.display=n,e.classList.toggle("hidden",s)}this.rotation%180==this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()},Vl=new WeakSet,$l=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Gy,"")},Hl=function(){if(this.editorDiv.replaceChildren(),Vm(this,Tl))for(const t of Vm(this,Tl).split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}},zl=function(){return Vm(this,Tl).replaceAll(" "," ")},Ul=function(t){return t.replaceAll(" "," ")},Gl=function(t){const{value:e,fontSize:i,color:n,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((t,e)=>t!==n[e])||t.pageIndex!==s},$m(qy,Vl),Bm(qy,"_freeTextDefaultContent",""),Bm(qy,"_internalPadding",0),Bm(qy,"_defaultColor",null),Bm(qy,"_defaultFontSize",10),Bm(qy,"_type","freetext"),Bm(qy,"_editorType",zv.FREETEXT);let Xy=qy;class Yy{toSVGPath(){n("Abstract method `toSVGPath` must be implemented.")}get box(){n("Abstract getter `box` must be implemented.")}serialize(t,e){n("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,n,s,r){r||(r=new Float32Array(t.length));for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a]*n,r[a+1]=i+t[a+1]*s;return r}static _rescaleAndSwap(t,e,i,n,s,r){r||(r=new Float32Array(t.length));for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a+1]*n,r[a+1]=i+t[a]*s;return r}static _translate(t,e,i,n){n||(n=new Float32Array(t.length));for(let s=0,r=t.length;s<r;s+=2)n[s]=e+t[s],n[s+1]=i+t[s+1];return n}static svgRound(t){return Math.round(1e4*t)}static _normalizePoint(t,e,i,n,s){switch(s){case 90:return[1-e/i,t/n];case 180:return[1-t/i,1-e/n];case 270:return[e/i,1-t/n];default:return[t/i,e/n]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,n,s,r){return[(t+5*i)/6,(e+5*n)/6,(5*i+s)/6,(5*n+r)/6,(i+s)/2,(n+r)/2]}}Bm(Yy,"PRECISION",1e-4);const Ky=class t{constructor({x:e,y:i},n,s,r,a,o=0){$m(this,hh),$m(this,ql),$m(this,Xl,[]),$m(this,Yl),$m(this,Kl),$m(this,Ql,[]),$m(this,Zl,new Float32Array(18)),$m(this,Jl),$m(this,th),$m(this,eh),$m(this,ih),$m(this,nh),$m(this,sh),$m(this,rh,[]),Hm(this,ql,n),Hm(this,sh,r*s),Hm(this,Kl,a),Vm(this,Zl).set([NaN,NaN,NaN,NaN,e,i],6),Hm(this,Yl,o),Hm(this,ih,Vm(t,ah)*s),Hm(this,eh,Vm(t,lh)*s),Hm(this,nh,s),Vm(this,rh).push(e,i)}isEmpty(){return isNaN(Vm(this,Zl)[8])}add({x:t,y:e}){var i;Hm(this,Jl,t),Hm(this,th,e);const[n,s,r,a]=Vm(this,ql);let[o,l,h,u]=Vm(this,Zl).subarray(8,12);const c=t-h,d=e-u,p=Math.hypot(c,d);if(p<Vm(this,eh))return!1;const g=p-Vm(this,ih),f=g/p,m=f*c,v=f*d;let w=o,b=l;o=h,l=u,h+=m,u+=v,null==(i=Vm(this,rh))||i.push(t,e);const y=m/g,A=-v/g*Vm(this,sh),_=y*Vm(this,sh);return Vm(this,Zl).set(Vm(this,Zl).subarray(2,8),0),Vm(this,Zl).set([h+A,u+_],4),Vm(this,Zl).set(Vm(this,Zl).subarray(14,18),12),Vm(this,Zl).set([h-A,u-_],16),isNaN(Vm(this,Zl)[6])?(0===Vm(this,Ql).length&&(Vm(this,Zl).set([o+A,l+_],2),Vm(this,Ql).push(NaN,NaN,NaN,NaN,(o+A-n)/r,(l+_-s)/a),Vm(this,Zl).set([o-A,l-_],14),Vm(this,Xl).push(NaN,NaN,NaN,NaN,(o-A-n)/r,(l-_-s)/a)),Vm(this,Zl).set([w,b,o,l,h,u],6),!this.isEmpty()):(Vm(this,Zl).set([w,b,o,l,h,u],6),Math.abs(Math.atan2(b-l,w-o)-Math.atan2(v,m))<Math.PI/2?([o,l,h,u]=Vm(this,Zl).subarray(2,6),Vm(this,Ql).push(NaN,NaN,NaN,NaN,((o+h)/2-n)/r,((l+u)/2-s)/a),[o,l,w,b]=Vm(this,Zl).subarray(14,18),Vm(this,Xl).push(NaN,NaN,NaN,NaN,((w+o)/2-n)/r,((b+l)/2-s)/a),!0):([w,b,o,l,h,u]=Vm(this,Zl).subarray(0,6),Vm(this,Ql).push(((w+5*o)/6-n)/r,((b+5*l)/6-s)/a,((5*o+h)/6-n)/r,((5*l+u)/6-s)/a,((o+h)/2-n)/r,((l+u)/2-s)/a),[h,u,o,l,w,b]=Vm(this,Zl).subarray(12,18),Vm(this,Xl).push(((w+5*o)/6-n)/r,((b+5*l)/6-s)/a,((5*o+h)/6-n)/r,((5*l+u)/6-s)/a,((o+h)/2-n)/r,((l+u)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=Vm(this,Ql),e=Vm(this,Xl);if(isNaN(Vm(this,Zl)[6])&&!this.isEmpty())return zm(this,hh,ch).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?i.push(`L${t[n+4]} ${t[n+5]}`):i.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);zm(this,hh,ph).call(this,i);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?i.push(`L${e[n+4]} ${e[n+5]}`):i.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return zm(this,hh,dh).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,n,s,r){return new Zy(t,e,i,n,s,r)}getOutlines(){var t,e;const i=Vm(this,Ql),n=Vm(this,Xl),s=Vm(this,Zl),[r,a,o,l]=Vm(this,ql),h=new Float32Array((null!=(e=null==(t=Vm(this,rh))?void 0:t.length)?e:0)+2);for(let d=0,p=h.length-2;d<p;d+=2)h[d]=(Vm(this,rh)[d]-r)/o,h[d+1]=(Vm(this,rh)[d+1]-a)/l;if(h[h.length-2]=(Vm(this,Jl)-r)/o,h[h.length-1]=(Vm(this,th)-a)/l,isNaN(s[6])&&!this.isEmpty())return zm(this,hh,gh).call(this,h);const u=new Float32Array(Vm(this,Ql).length+24+Vm(this,Xl).length);let c=i.length;for(let d=0;d<c;d+=2)isNaN(i[d])?u[d]=u[d+1]=NaN:(u[d]=i[d],u[d+1]=i[d+1]);c=zm(this,hh,mh).call(this,u,c);for(let d=n.length-6;d>=6;d-=6)for(let t=0;t<6;t+=2)isNaN(n[d+t])?(u[c]=u[c+1]=NaN,c+=2):(u[c]=n[d+t],u[c+1]=n[d+t+1],c+=2);return zm(this,hh,fh).call(this,u,c),this.newFreeDrawOutline(u,h,Vm(this,ql),Vm(this,nh),Vm(this,Yl),Vm(this,Kl))}};ql=new WeakMap,Xl=new WeakMap,Yl=new WeakMap,Kl=new WeakMap,Ql=new WeakMap,Zl=new WeakMap,Jl=new WeakMap,th=new WeakMap,eh=new WeakMap,ih=new WeakMap,nh=new WeakMap,sh=new WeakMap,rh=new WeakMap,ah=new WeakMap,oh=new WeakMap,lh=new WeakMap,hh=new WeakSet,uh=function(){const t=Vm(this,Zl).subarray(4,6),e=Vm(this,Zl).subarray(16,18),[i,n,s,r]=Vm(this,ql);return[(Vm(this,Jl)+(t[0]-e[0])/2-i)/s,(Vm(this,th)+(t[1]-e[1])/2-n)/r,(Vm(this,Jl)+(e[0]-t[0])/2-i)/s,(Vm(this,th)+(e[1]-t[1])/2-n)/r]},ch=function(){const[t,e,i,n]=Vm(this,ql),[s,r,a,o]=zm(this,hh,uh).call(this);return`M${(Vm(this,Zl)[2]-t)/i} ${(Vm(this,Zl)[3]-e)/n} L${(Vm(this,Zl)[4]-t)/i} ${(Vm(this,Zl)[5]-e)/n} L${s} ${r} L${a} ${o} L${(Vm(this,Zl)[16]-t)/i} ${(Vm(this,Zl)[17]-e)/n} L${(Vm(this,Zl)[14]-t)/i} ${(Vm(this,Zl)[15]-e)/n} Z`},dh=function(t){const e=Vm(this,Xl);t.push(`L${e[4]} ${e[5]} Z`)},ph=function(t){const[e,i,n,s]=Vm(this,ql),r=Vm(this,Zl).subarray(4,6),a=Vm(this,Zl).subarray(16,18),[o,l,h,u]=zm(this,hh,uh).call(this);t.push(`L${(r[0]-e)/n} ${(r[1]-i)/s} L${o} ${l} L${h} ${u} L${(a[0]-e)/n} ${(a[1]-i)/s}`)},gh=function(t){const e=Vm(this,Zl),[i,n,s,r]=Vm(this,ql),[a,o,l,h]=zm(this,hh,uh).call(this),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(e[2]-i)/s,(e[3]-n)/r,NaN,NaN,NaN,NaN,(e[4]-i)/s,(e[5]-n)/r,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,(e[16]-i)/s,(e[17]-n)/r,NaN,NaN,NaN,NaN,(e[14]-i)/s,(e[15]-n)/r],0),this.newFreeDrawOutline(u,t,Vm(this,ql),Vm(this,nh),Vm(this,Yl),Vm(this,Kl))},fh=function(t,e){const i=Vm(this,Xl);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+6},mh=function(t,e){const i=Vm(this,Zl).subarray(4,6),n=Vm(this,Zl).subarray(16,18),[s,r,a,o]=Vm(this,ql),[l,h,u,c]=zm(this,hh,uh).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-r)/o,NaN,NaN,NaN,NaN,l,h,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(n[0]-s)/a,(n[1]-r)/o],e),e+24},$m(Ky,ah,8),$m(Ky,oh,2),$m(Ky,lh,Vm(Ky,ah)+Vm(Ky,oh));let Qy=Ky;class Zy extends Yy{constructor(t,e,i,n,s,r){super(),$m(this,Eh),$m(this,vh),$m(this,wh,new Float32Array(4)),$m(this,bh),$m(this,yh),$m(this,Ah),$m(this,_h),$m(this,xh),Hm(this,xh,t),Hm(this,Ah,e),Hm(this,vh,i),Hm(this,_h,n),Hm(this,bh,s),Hm(this,yh,r),this.lastPoint=[NaN,NaN],zm(this,Eh,Sh).call(this,r);const[a,o,l,h]=Vm(this,wh);for(let u=0,c=t.length;u<c;u+=2)t[u]=(t[u]-a)/l,t[u+1]=(t[u+1]-o)/h;for(let u=0,c=e.length;u<c;u+=2)e[u]=(e[u]-a)/l,e[u+1]=(e[u+1]-o)/h}toSVGPath(){const t=[`M${Vm(this,xh)[4]} ${Vm(this,xh)[5]}`];for(let e=6,i=Vm(this,xh).length;e<i;e+=6)isNaN(Vm(this,xh)[e])?t.push(`L${Vm(this,xh)[e+4]} ${Vm(this,xh)[e+5]}`):t.push(`C${Vm(this,xh)[e]} ${Vm(this,xh)[e+1]} ${Vm(this,xh)[e+2]} ${Vm(this,xh)[e+3]} ${Vm(this,xh)[e+4]} ${Vm(this,xh)[e+5]}`);return t.push("Z"),t.join(" ")}serialize([t,e,i,n],s){const r=i-t,a=n-e;let o,l;switch(s){case 0:o=Yy._rescale(Vm(this,xh),t,n,r,-a),l=Yy._rescale(Vm(this,Ah),t,n,r,-a);break;case 90:o=Yy._rescaleAndSwap(Vm(this,xh),t,e,r,a),l=Yy._rescaleAndSwap(Vm(this,Ah),t,e,r,a);break;case 180:o=Yy._rescale(Vm(this,xh),i,e,-r,a),l=Yy._rescale(Vm(this,Ah),i,e,-r,a);break;case 270:o=Yy._rescaleAndSwap(Vm(this,xh),i,n,-r,-a),l=Yy._rescaleAndSwap(Vm(this,Ah),i,n,-r,-a)}return{outline:Array.from(o),points:[Array.from(l)]}}get box(){return Vm(this,wh)}newOutliner(t,e,i,n,s,r=0){return new Qy(t,e,i,n,s,r)}getNewOutline(t,e){const[i,n,s,r]=Vm(this,wh),[a,o,l,h]=Vm(this,vh),u=s*l,c=r*h,d=i*l+a,p=n*h+o,g=this.newOutliner({x:Vm(this,Ah)[0]*u+d,y:Vm(this,Ah)[1]*c+p},Vm(this,vh),Vm(this,_h),t,Vm(this,yh),null!=e?e:Vm(this,bh));for(let f=2;f<Vm(this,Ah).length;f+=2)g.add({x:Vm(this,Ah)[f]*u+d,y:Vm(this,Ah)[f+1]*c+p});return g.getOutlines()}}vh=new WeakMap,wh=new WeakMap,bh=new WeakMap,yh=new WeakMap,Ah=new WeakMap,_h=new WeakMap,xh=new WeakMap,Eh=new WeakSet,Sh=function(t){const e=Vm(this,xh);let i=e[4],n=e[5];const s=[i,n,i,n];let r=i,a=n;const o=t?Math.max:Math.min;for(let h=6,u=e.length;h<u;h+=6){const t=e[h+4],l=e[h+5];if(isNaN(e[h]))aw.pointBoundingBox(t,l,s),a<l?(r=t,a=l):a===l&&(r=o(r,t));else{const t=[1/0,1/0,-1/0,-1/0];aw.bezierBoundingBox(i,n,...e.slice(h,h+6),t),aw.rectBoundingBox(...t,s),a<t[3]?(r=t[2],a=t[3]):a===t[3]&&(r=o(r,t[2]))}i=t,n=l}const l=Vm(this,wh);l[0]=s[0]-Vm(this,bh),l[1]=s[1]-Vm(this,bh),l[2]=s[2]-s[0]+2*Vm(this,bh),l[3]=s[3]-s[1]+2*Vm(this,bh),this.lastPoint=[r,a]};class Jy{constructor(t,e=0,i=0,n=!0){$m(this,Fh),$m(this,Ch),$m(this,kh),$m(this,Mh,[]),$m(this,Ph,[]);const s=[1/0,1/0,-1/0,-1/0],r=10**-4;for(const{x:d,y:p,width:g,height:f}of t){const t=Math.floor((d-e)/r)*r,i=Math.ceil((d+g+e)/r)*r,n=Math.floor((p-e)/r)*r,a=Math.ceil((p+f+e)/r)*r,o=[t,n,a,!0],l=[i,n,a,!1];Vm(this,Mh).push(o,l),aw.rectBoundingBox(t,n,i,a,s)}const a=s[2]-s[0]+2*i,o=s[3]-s[1]+2*i,l=s[0]-i,h=s[1]-i,u=Vm(this,Mh).at(n?-1:-2),c=[u[0],u[2]];for(const d of Vm(this,Mh)){const[t,e,i]=d;d[0]=(t-l)/a,d[1]=(e-h)/o,d[2]=(i-h)/o}Hm(this,Ch,new Float32Array([l,h,a,o])),Hm(this,kh,c)}getOutlines(){Vm(this,Mh).sort((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]);const t=[];for(const e of Vm(this,Mh))e[3]?(t.push(...zm(this,Fh,Rh).call(this,e)),zm(this,Fh,Ih).call(this,e)):(zm(this,Fh,Lh).call(this,e),t.push(...zm(this,Fh,Rh).call(this,e)));return zm(this,Fh,Dh).call(this,t)}}Ch=new WeakMap,kh=new WeakMap,Mh=new WeakMap,Ph=new WeakMap,Fh=new WeakSet,Dh=function(t){const e=[],i=new Set;for(const r of t){const[t,i,n]=r;e.push([t,i,r],[t,n,r])}e.sort((t,e)=>t[1]-e[1]||t[0]-e[0]);for(let r=0,a=e.length;r<a;r+=2){const t=e[r][2],n=e[r+1][2];t.push(n),n.push(t),i.add(t),i.add(n)}const n=[];let s;for(;i.size>0;){const t=i.values().next().value;let[e,r,a,o,l]=t;i.delete(t);let h=e,u=r;for(s=[e,a],n.push(s);;){let t;if(i.has(o))t=o;else{if(!i.has(l))break;t=l}i.delete(t),[e,r,a,o,l]=t,h!==e&&(s.push(h,u,e,u===r?r:a),h=e),u=u===r?a:r}s.push(h,u)}return new tA(n,Vm(this,Ch),Vm(this,kh))},Th=function(t){const e=Vm(this,Ph);let i=0,n=e.length-1;for(;i<=n;){const s=i+n>>1,r=e[s][0];if(r===t)return s;r<t?i=s+1:n=s-1}return n+1},Ih=function([,t,e]){const i=zm(this,Fh,Th).call(this,t);Vm(this,Ph).splice(i,0,[t,e])},Lh=function([,t,e]){const i=zm(this,Fh,Th).call(this,t);for(let n=i;n<Vm(this,Ph).length;n++){const[i,s]=Vm(this,Ph)[n];if(i!==t)break;if(i===t&&s===e)return void Vm(this,Ph).splice(n,1)}for(let n=i-1;n>=0;n--){const[i,s]=Vm(this,Ph)[n];if(i!==t)break;if(i===t&&s===e)return void Vm(this,Ph).splice(n,1)}},Rh=function(t){const[e,i,n]=t,s=[[e,i,n]],r=zm(this,Fh,Th).call(this,n);for(let a=0;a<r;a++){const[t,i]=Vm(this,Ph)[a];for(let n=0,r=s.length;n<r;n++){const[,a,o]=s[n];if(!(i<=a||o<=t))if(a>=t)if(o>i)s[n][1]=i;else{if(1===r)return[];s.splice(n,1),n--,r--}else s[n][2]=t,o>i&&s.push([e,i,o])}}return s};class tA extends Yy{constructor(t,e,i){super(),$m(this,Nh),$m(this,Oh),Hm(this,Oh,t),Hm(this,Nh,e),this.lastPoint=i}toSVGPath(){const t=[];for(const e of Vm(this,Oh)){let[i,n]=e;t.push(`M${i} ${n}`);for(let s=2;s<e.length;s+=2){const r=e[s],a=e[s+1];r===i?(t.push(`V${a}`),n=a):a===n&&(t.push(`H${r}`),i=r)}t.push("Z")}return t.join(" ")}serialize([t,e,i,n],s){const r=[],a=i-t,o=n-e;for(const l of Vm(this,Oh)){const e=new Array(l.length);for(let i=0;i<l.length;i+=2)e[i]=t+l[i]*a,e[i+1]=n-l[i+1]*o;r.push(e)}return r}get box(){return Vm(this,Nh)}get classNamesForOutlining(){return["highlightOutline"]}}Nh=new WeakMap,Oh=new WeakMap;class eA extends Qy{newFreeDrawOutline(t,e,i,n,s,r){return new iA(t,e,i,n,s,r)}}class iA extends Zy{newOutliner(t,e,i,n,s,r=0){return new eA(t,e,i,n,s,r)}}const nA=class t extends Lw{constructor(e){super({...e,name:"highlightEditor"}),$m(this,iu),$m(this,Wh,null),$m(this,Bh,0),$m(this,jh),$m(this,Vh,null),$m(this,$h,null),$m(this,Hh,null),$m(this,zh,null),$m(this,Uh,0),$m(this,Gh,null),$m(this,qh,null),$m(this,Xh,null),$m(this,Yh,!1),$m(this,Kh,null),$m(this,Qh),$m(this,Zh,null),$m(this,Jh,""),$m(this,tu),$m(this,eu,""),this.color=e.color||t._defaultColor,Hm(this,tu,e.thickness||t._defaultThickness),Hm(this,Qh,e.opacity||t._defaultOpacity),Hm(this,jh,e.boxes||null),Hm(this,eu,e.methodOfCreation||""),Hm(this,Jh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(Hm(this,Yh,!0),zm(this,iu,su).call(this,e),zm(this,iu,hu).call(this)):Vm(this,jh)&&(Hm(this,Wh,e.anchorNode),Hm(this,Bh,e.anchorOffset),Hm(this,zh,e.focusNode),Hm(this,Uh,e.focusOffset),zm(this,iu,nu).call(this),zm(this,iu,hu).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=t.prototype;return o(this,"_keyboardManager",new Sw([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:Vm(this,Yh)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Vm(this,tu),methodOfCreation:Vm(this,eu)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(e,i){var n;Lw.initialize(e,i),t._defaultColor||(t._defaultColor=(null==(n=i.highlightColors)?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case Uv.HIGHLIGHT_COLOR:t._defaultColor=i;break;case Uv.HIGHLIGHT_THICKNESS:t._defaultThickness=i}}translateInPage(t,e){}get toolbarPosition(){return Vm(this,Kh)}updateParams(t,e){switch(t){case Uv.HIGHLIGHT_COLOR:zm(this,iu,ru).call(this,e);break;case Uv.HIGHLIGHT_THICKNESS:zm(this,iu,au).call(this,e)}}static get defaultPropertiesToUpdate(){return[[Uv.HIGHLIGHT_COLOR,t._defaultColor],[Uv.HIGHLIGHT_THICKNESS,t._defaultThickness]]}get propertiesToUpdate(){return[[Uv.HIGHLIGHT_COLOR,this.color||t._defaultColor],[Uv.HIGHLIGHT_THICKNESS,Vm(this,tu)||t._defaultThickness],[Uv.HIGHLIGHT_FREE,Vm(this,Yh)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",Hm(this,$h,new hy({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(zm(this,iu,gu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,zm(this,iu,gu).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){zm(this,iu,lu).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(zm(this,iu,hu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var e;let i=!1;this.parent&&!t?zm(this,iu,lu).call(this):t&&(zm(this,iu,hu).call(this,t),i=!this.parent&&(null==(e=this.div)?void 0:e.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(e){var i,n,s;const{drawLayer:r}=this.parent;let a;Vm(this,Yh)?(e=(e-this.rotation+360)%360,a=zm(i=t,uu,cu).call(i,Vm(this,qh).box,e)):a=zm(n=t,uu,cu).call(n,[this.x,this.y,this.width,this.height],e),r.updateProperties(Vm(this,Xh),{bbox:a,root:{"data-main-rotation":e}}),r.updateProperties(Vm(this,Zh),{bbox:zm(s=t,uu,cu).call(s,Vm(this,Hh).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const t=super.render();Vm(this,Jh)&&(t.setAttribute("aria-label",Vm(this,Jh)),t.setAttribute("role","mark")),Vm(this,Yh)?t.classList.add("free"):this.div.addEventListener("keydown",zm(this,iu,du).bind(this),{signal:this._uiManager._signal});const e=Hm(this,Gh,document.createElement("div"));t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=Vm(this,Vh);const[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),S(this,Vm(this,Gh),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||null==(t=this.parent)||t.drawLayer.updateProperties(Vm(this,Zh),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||null==(t=this.parent)||t.drawLayer.updateProperties(Vm(this,Zh),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:zm(this,iu,pu).call(this,!0);break;case 1:case 3:zm(this,iu,pu).call(this,!1)}}select(){var t;super.select(),Vm(this,Zh)&&(null==(t=this.parent)||t.drawLayer.updateProperties(Vm(this,Zh),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),Vm(this,Zh)&&(null==(t=this.parent)||t.drawLayer.updateProperties(Vm(this,Zh),{rootClass:{selected:!1}}),Vm(this,Yh)||zm(this,iu,pu).call(this,!1))}get _mustFixPosition(){return!Vm(this,Yh)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(Vm(this,Xh),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(Vm(this,Zh),{rootClass:{hidden:!t}}))}static startHighlighting(t,e,{target:i,x:n,y:s}){const{x:r,y:a,width:o,height:l}=i.getBoundingClientRect(),h=new AbortController,u=t.combinedSignal(h),c=e=>{h.abort(),zm(this,uu,wu).call(this,t,e)};window.addEventListener("blur",c,{signal:u}),window.addEventListener("pointerup",c,{signal:u}),window.addEventListener("pointerdown",b,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",w,{signal:u}),i.addEventListener("pointermove",zm(this,uu,vu).bind(this,t),{signal:u}),this._freeHighlight=new eA({x:n,y:s},[r,a,o,l],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(t,e,i){var n,s,r,a;let o=null;if(t instanceof By){const{data:{quadPoints:e,rect:i,rotation:n,id:s,color:r,opacity:a,popupRef:l,contentsObj:h},parent:{page:{pageNumber:u}}}=t;o=t={annotationType:zv.HIGHLIGHT,color:Array.from(r),opacity:a,quadPoints:e,boxes:null,pageIndex:u-1,rect:i.slice(0),rotation:n,annotationElementId:s,id:s,deleted:!1,popupRef:l,comment:(null==h?void 0:h.str)||null}}else if(t instanceof Wy){const{data:{inkLists:e,rect:i,rotation:n,id:s,color:r,borderStyle:{rawWidth:a},popupRef:l,contentsObj:h},parent:{page:{pageNumber:u}}}=t;o=t={annotationType:zv.HIGHLIGHT,color:Array.from(r),thickness:a,inkLists:e,boxes:null,pageIndex:u-1,rect:i.slice(0),rotation:n,annotationElementId:s,id:s,deleted:!1,popupRef:l,comment:(null==h?void 0:h.str)||null}}const{color:l,quadPoints:h,inkLists:u,opacity:c}=t,d=await super.deserialize(t,e,i);d.color=aw.makeHexColor(...l),Hm(d,Qh,c||1),u&&Hm(d,tu,t.thickness),d._initialData=o,t.comment&&d.setCommentData(t.comment);const[p,g]=d.pageDimensions,[f,m]=d.pageTranslation;if(h){const t=Hm(d,jh,[]);for(let e=0;e<h.length;e+=8)t.push({x:(h[e]-f)/p,y:1-(h[e+1]-m)/g,width:(h[e+2]-h[e])/p,height:(h[e+1]-h[e+5])/g});zm(n=d,iu,nu).call(n),zm(s=d,iu,hu).call(s),d.rotate(d.rotation)}else if(u){Hm(d,Yh,!0);const t=u[0],i={x:t[0]-f,y:g-(t[1]-m)},n=new eA(i,[0,0,p,g],1,Vm(d,tu)/2,!0,.001);for(let e=0,r=t.length;e<r;e+=2)i.x=t[e]-f,i.y=g-(t[e+1]-m),n.add(i);const{id:s,clipPathId:o}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:n.toSVGPath()}},!0,!0);zm(r=d,iu,su).call(r,{highlightOutlines:n.getOutlines(),highlightId:s,clipPathId:o}),zm(a=d,iu,hu).call(a),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),i=Lw._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n={annotationType:zv.HIGHLIGHT,color:i,opacity:Vm(this,Qh),thickness:Vm(this,tu),quadPoints:zm(this,iu,fu).call(this),outlines:zm(this,iu,mu).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:zm(this,iu,gu).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(n),this.annotationElementId&&!zm(this,iu,bu).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}};Wh=new WeakMap,Bh=new WeakMap,jh=new WeakMap,Vh=new WeakMap,$h=new WeakMap,Hh=new WeakMap,zh=new WeakMap,Uh=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Xh=new WeakMap,Yh=new WeakMap,Kh=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,Jh=new WeakMap,tu=new WeakMap,eu=new WeakMap,iu=new WeakSet,nu=function(){const t=new Jy(Vm(this,jh),.001);Hm(this,qh,t.getOutlines()),[this.x,this.y,this.width,this.height]=Vm(this,qh).box;const e=new Jy(Vm(this,jh),.0025,.001,"ltr"===this._uiManager.direction);Hm(this,Hh,e.getOutlines());const{lastPoint:i}=Vm(this,Hh);Hm(this,Kh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},su=function({highlightOutlines:t,highlightId:e,clipPathId:i}){var n,s;if(Hm(this,qh,t),Hm(this,Hh,t.getNewOutline(Vm(this,tu)/2+1.5,.0025)),e>=0)Hm(this,Xh,e),Hm(this,Vh,i),this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),Hm(this,Zh,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Vm(this,Hh).box,path:{d:Vm(this,Hh).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Vm(this,Xh),{bbox:zm(n=nA,uu,cu).call(n,Vm(this,qh).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(Vm(this,Zh),{bbox:zm(s=nA,uu,cu).call(s,Vm(this,Hh).box,e),path:{d:Vm(this,Hh).toSVGPath()}})}const[r,a,o,l]=t.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=o,this.height=l;break;case 90:{const[t,e]=this.parentDimensions;this.x=a,this.y=1-r,this.width=o*e/t,this.height=l*t/e;break}case 180:this.x=1-r,this.y=1-a,this.width=o,this.height=l;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-a,this.y=r,this.width=o*e/t,this.height=l*t/e;break}}const{lastPoint:h}=Vm(this,Hh);Hm(this,Kh,[(h[0]-r)/o,(h[1]-a)/l])},ru=function(t){const e=(t,e)=>{var i,n;this.color=t,Hm(this,Qh,e),null==(i=this.parent)||i.drawLayer.updateProperties(Vm(this,Xh),{root:{fill:t,"fill-opacity":e}}),null==(n=Vm(this,$h))||n.updateColor(t)},i=this.color,n=Vm(this,Qh);this.addCommands({cmd:e.bind(this,t,nA._defaultOpacity),undo:e.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Uv.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},au=function(t){const e=Vm(this,tu),i=t=>{Hm(this,tu,t),zm(this,iu,ou).call(this,t)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Uv.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},ou=function(t){if(!Vm(this,Yh))return;zm(this,iu,su).call(this,{highlightOutlines:Vm(this,qh).getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)},lu=function(){null!==Vm(this,Xh)&&this.parent&&(this.parent.drawLayer.remove(Vm(this,Xh)),Hm(this,Xh,null),this.parent.drawLayer.remove(Vm(this,Zh)),Hm(this,Zh,null))},hu=function(t=this.parent){null===Vm(this,Xh)&&(({id:Um(this,Xh)._,clipPathId:Um(this,Vh)._}=t.drawLayer.draw({bbox:Vm(this,qh).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":Vm(this,Qh)},rootClass:{highlight:!0,free:Vm(this,Yh)},path:{d:Vm(this,qh).toSVGPath()}},!1,!0)),Hm(this,Zh,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Vm(this,Yh)},bbox:Vm(this,Hh).box,path:{d:Vm(this,Hh).toSVGPath()}},Vm(this,Yh))),Vm(this,Gh)&&(Vm(this,Gh).style.clipPath=Vm(this,Vh)))},uu=new WeakSet,cu=function([t,e,i,n],s){switch(s){case 90:return[1-e-n,t,n,i];case 180:return[1-t-i,1-e-n,i,n];case 270:return[e,1-t-i,n,i]}return[t,e,i,n]},du=function(t){nA._keyboardManager.exec(this,t)},pu=function(t){if(!Vm(this,Wh))return;const e=window.getSelection();t?e.setPosition(Vm(this,Wh),Vm(this,Bh)):e.setPosition(Vm(this,zh),Vm(this,Uh))},gu=function(){return Vm(this,Yh)?this.rotation:0},fu=function(){if(Vm(this,Yh))return null;const[t,e]=this.pageDimensions,[i,n]=this.pageTranslation,s=Vm(this,jh),r=new Float32Array(8*s.length);let a=0;for(const{x:o,y:l,width:h,height:u}of s){const s=o*t+i,c=(1-l)*e+n;r[a]=r[a+4]=s,r[a+1]=r[a+3]=c,r[a+2]=r[a+6]=s+h*t,r[a+5]=r[a+7]=c-u*e,a+=8}return r},mu=function(t){return Vm(this,qh).serialize(t,zm(this,iu,gu).call(this))},vu=function(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},wu=function(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},bu=function(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((t,i)=>t!==e[i])},$m(nA,uu),Bm(nA,"_defaultColor",null),Bm(nA,"_defaultOpacity",1),Bm(nA,"_defaultThickness",12),Bm(nA,"_type","highlight"),Bm(nA,"_editorType",zv.HIGHLIGHT),Bm(nA,"_freeHighlightId",-1),Bm(nA,"_freeHighlight",null),Bm(nA,"_freeHighlightClipId","");let sA=nA;class rA{constructor(){$m(this,yu,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){Vm(this,yu)[t]=e}toSVGProperties(){const t=Vm(this,yu);return Hm(this,yu,Object.create(null)),{root:t}}reset(){Hm(this,yu,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){n("Not implemented")}}yu=new WeakMap;const aA=class t extends Lw{constructor(t){super(t),$m(this,Fu),$m(this,Au,null),$m(this,_u),Bm(this,"_colorPicker",null),Bm(this,"_drawId",null),Hm(this,_u,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(zm(this,Fu,Du).call(this,t),zm(this,Fu,Lu).call(this))}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[n,s]of Object.entries(e))i.has(n)?Object.assign(t[n],s):t[n]=s;return t}static getDefaultDrawingOptions(t){n("Not implemented")}static get typesMap(){n("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,i),this._currentParent&&(Vm(t,xu).updateProperty(n,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,n]of this.typesMap)t.push([i,e[n]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,n]of this.constructor.typesMap)t.push([i,e[n]]);return t}_updateProperty(t,e,i){const n=this._drawingOptions,s=n[e],r=i=>{var s,r;n.updateProperty(e,i);const a=Vm(this,Au).updateProperty(e,i);a&&zm(this,Fu,Ou).call(this,a),null==(s=this.parent)||s.drawLayer.updateProperties(this._drawId,n.toSVGProperties()),t===this.colorType&&(null==(r=this._colorPicker)||r.update(i))};this.addCommands({cmd:r.bind(this,i),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,t._mergeSVGProperties(Vm(this,Au).getPathResizingSVGProperties(zm(this,Fu,Nu).call(this)),{bbox:zm(this,Fu,Wu).call(this)}))}_onResized(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,t._mergeSVGProperties(Vm(this,Au).getPathResizedSVGProperties(zm(this,Fu,Nu).call(this)),{bbox:zm(this,Fu,Wu).call(this)}))}_onTranslating(t,e){var i;null==(i=this.parent)||i.drawLayer.updateProperties(this._drawId,{bbox:zm(this,Fu,Wu).call(this)})}_onTranslated(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,t._mergeSVGProperties(Vm(this,Au).getPathTranslatedSVGProperties(zm(this,Fu,Nu).call(this),this.parentDimensions),{bbox:zm(this,Fu,Wu).call(this)}))}_onStartDragging(){var t;null==(t=this.parent)||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;null==(t=this.parent)||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Vm(this,_u)&&(Hm(this,_u,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){zm(this,Fu,Iu).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(zm(this,Fu,Lu).call(this),zm(this,Fu,Ou).call(this,Vm(this,Au).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var e;let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),zm(this,Fu,Iu).call(this)):t&&(this._uiManager.addShouldRescale(this),zm(this,Fu,Lu).call(this,t),i=!this.parent&&(null==(e=this.div)?void 0:e.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,t._mergeSVGProperties({bbox:zm(this,Fu,Wu).call(this)},Vm(this,Au).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&zm(this,Fu,Ou).call(this,Vm(this,Au).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const n=document.createElement("div");i.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,s,r){n("Not implemented")}static startDrawing(e,i,n,s){var r;const{target:a,offsetX:o,offsetY:l,pointerId:h,pointerType:u}=s;if(Vm(t,ku)&&Vm(t,ku)!==u)return;const{viewport:{rotation:c}}=e,{width:d,height:p}=a.getBoundingClientRect(),g=Hm(t,Eu,new AbortController),f=e.combinedSignal(g);Vm(t,Cu)||Hm(t,Cu,h),null!=Vm(t,ku)||Hm(t,ku,u),window.addEventListener("pointerup",e=>{var i;Vm(t,Cu)===e.pointerId?this._endDraw(e):null==(i=Vm(t,Mu))||i.delete(e.pointerId)},{signal:f}),window.addEventListener("pointercancel",e=>{var i;Vm(t,Cu)===e.pointerId?this._currentParent.endDrawingSession():null==(i=Vm(t,Mu))||i.delete(e.pointerId)},{signal:f}),window.addEventListener("pointerdown",e=>{Vm(t,ku)===e.pointerType&&((Vm(t,Mu)||Hm(t,Mu,new Set)).add(e.pointerId),Vm(t,xu).isCancellable()&&(Vm(t,xu).removeLastElement(),Vm(t,xu).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",w,{signal:f}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:f}),a.addEventListener("touchmove",e=>{e.timeStamp===Vm(t,Pu)&&b(e)},{signal:f}),e.toggleDrawing(),null==(r=i._editorUndoBar)||r.hide(),Vm(t,xu)?e.drawLayer.updateProperties(this._currentDrawId,Vm(t,xu).startNew(o,l,d,p,c)):(i.updateUIForDefaultProperties(this),Hm(t,xu,this.createDrawerInstance(o,l,d,p,c)),Hm(t,Su,this.getDefaultDrawingOptions()),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Vm(t,Su).toSVGProperties(),Vm(t,xu).defaultSVGProperties),!0,!1)))}static _drawMove(e){var i;if(Hm(t,Pu,-1),!Vm(t,xu))return;const{offsetX:n,offsetY:s,pointerId:r}=e;Vm(t,Cu)===r&&((null==(i=Vm(t,Mu))?void 0:i.size)>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,Vm(t,xu).add(n,s)),Hm(t,Pu,e.timeStamp),b(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Hm(t,xu,null),Hm(t,Su,null),Hm(t,ku,null),Hm(t,Pu,NaN)),Vm(t,Eu)&&(Vm(t,Eu).abort(),Hm(t,Eu,null),Hm(t,Cu,NaN),Hm(t,Mu,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(null==e?void 0:e.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,Vm(t,xu).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=Vm(t,xu),n=this._currentDrawId,s=e.getLastElement();return void i.addCommands({cmd:()=>{i.drawLayer.updateProperties(n,e.setLastElement(s))},undo:()=>{i.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:Uv.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Uv.DRAW_STEP),!Vm(t,xu).isEmpty()){const{pageDimensions:[n,s],scale:r}=i,a=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Vm(t,xu).getOutlines(n*r,s*r,r,this._INNER_MARGIN),drawingOptions:Vm(t,Su),mustBeCommitted:!e});return this._cleanup(!0),a}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,s,r,a){n("Not implemented")}static async deserialize(t,e,i){var n,s;const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}=e.viewport,h=this.deserializeDraw(o,l,r,a,this._INNER_MARGIN,t),u=await super.deserialize(t,e,i);return u.createDrawingOptions(t),zm(n=u,Fu,Du).call(n,{drawOutlines:h}),zm(s=u,Fu,Lu).call(s),u.onScaleChanging(),u.rotate(),u}serializeDraw(t){const[e,i]=this.pageTranslation,[n,s]=this.pageDimensions;return Vm(this,Au).serialize([e,i,n,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Au=new WeakMap,_u=new WeakMap,xu=new WeakMap,Eu=new WeakMap,Su=new WeakMap,Cu=new WeakMap,ku=new WeakMap,Mu=new WeakMap,Pu=new WeakMap,Fu=new WeakSet,Du=function({drawOutlines:t,drawId:e,drawingOptions:i}){Hm(this,Au,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=zm(this,Fu,Tu).call(this,t,this.parent),zm(this,Fu,Ou).call(this,t.box)},Tu=function(t,e){const{id:i}=e.drawLayer.draw(aA._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},Iu=function(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Lu=function(t=this.parent){null!==this._drawId&&this.parent===t||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=zm(this,Fu,Tu).call(this,Vm(this,Au),t)):this.parent.drawLayer.updateParent(this._drawId,t.drawLayer))},Ru=function([t,e,i,n]){const{parentDimensions:[s,r],rotation:a}=this;switch(a){case 90:return[e,1-t,i*(r/s),n*(s/r)];case 180:return[1-t,1-e,i,n];case 270:return[1-e,t,i*(r/s),n*(s/r)];default:return[t,e,i,n]}},Nu=function(){const{x:t,y:e,width:i,height:n,parentDimensions:[s,r],rotation:a}=this;switch(a){case 90:return[1-e,t,i*(s/r),n*(r/s)];case 180:return[1-t,1-e,i,n];case 270:return[e,1-t,i*(s/r),n*(r/s)];default:return[t,e,i,n]}},Ou=function(t){if([this.x,this.y,this.width,this.height]=zm(this,Fu,Ru).call(this,t),this.div){this.fixAndSetPosition();const[t,e]=this.parentDimensions;this.setDims(this.width*t,this.height*e)}this._onResized()},Wu=function(){const{x:t,y:e,width:i,height:n,rotation:s,parentRotation:r,parentDimensions:[a,o]}=this;switch((4*s+r)/90){case 1:return[1-e-n,t,n,i];case 2:return[1-t-i,1-e-n,i,n];case 3:return[e,1-t-i,n,i];case 4:return[t,e-i*(a/o),n*(o/a),i*(a/o)];case 5:return[1-e,t,i*(a/o),n*(o/a)];case 6:return[1-t-n*(o/a),1-e,n*(o/a),i*(a/o)];case 7:return[e-i*(a/o),1-t-n*(o/a),i*(a/o),n*(o/a)];case 8:return[t-i,e-n,i,n];case 9:return[1-e,t-i,n,i];case 10:return[1-t,1-e,i,n];case 11:return[e-n,1-t,n,i];case 12:return[t-n*(o/a),e,n*(o/a),i*(a/o)];case 13:return[1-e-i*(a/o),t-n*(o/a),i*(a/o),n*(o/a)];case 14:return[1-t,1-e-i*(a/o),n*(o/a),i*(a/o)];case 15:return[e,1-t,i*(a/o),n*(o/a)];default:return[t,e,i,n]}},Bm(aA,"_currentDrawId",-1),Bm(aA,"_currentParent",null),$m(aA,xu,null),$m(aA,Eu,null),$m(aA,Su,null),$m(aA,Cu,NaN),$m(aA,ku,null),$m(aA,Mu,null),$m(aA,Pu,NaN),Bm(aA,"_INNER_MARGIN",3);let oA=aA;class lA{constructor(t,e,i,n,s,r){$m(this,Ku),$m(this,Bu,new Float64Array(6)),$m(this,ju),$m(this,Vu),$m(this,$u),$m(this,Hu),$m(this,zu),$m(this,Uu,""),$m(this,Gu,0),$m(this,qu,new hA),$m(this,Xu),$m(this,Yu),Hm(this,Xu,i),Hm(this,Yu,n),Hm(this,$u,s),Hm(this,Hu,r),[t,e]=zm(this,Ku,Qu).call(this,t,e);const a=Hm(this,ju,[NaN,NaN,NaN,NaN,t,e]);Hm(this,zu,[t,e]),Hm(this,Vu,[{line:a,points:Vm(this,zu)}]),Vm(this,Bu).set(a,0)}updateProperty(t,e){"stroke-width"===t&&Hm(this,Hu,e)}isEmpty(){return!Vm(this,Vu)||0===Vm(this,Vu).length}isCancellable(){return Vm(this,zu).length<=10}add(t,e){[t,e]=zm(this,Ku,Qu).call(this,t,e);const[i,n,s,r]=Vm(this,Bu).subarray(2,6),a=t-s,o=e-r;return Math.hypot(Vm(this,Xu)*a,Vm(this,Yu)*o)<=2?null:(Vm(this,zu).push(t,e),isNaN(i)?(Vm(this,Bu).set([s,r,t,e],2),Vm(this,ju).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(Vm(this,Bu)[0])&&Vm(this,ju).splice(6,6),Vm(this,Bu).set([i,n,s,r,t,e],0),Vm(this,ju).push(...Yy.createBezierPoints(i,n,s,r,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){return this.add(t,e)||(2===Vm(this,zu).length?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,n,s){Hm(this,Xu,i),Hm(this,Yu,n),Hm(this,$u,s),[t,e]=zm(this,Ku,Qu).call(this,t,e);const r=Hm(this,ju,[NaN,NaN,NaN,NaN,t,e]);Hm(this,zu,[t,e]);const a=Vm(this,Vu).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),Vm(this,Vu).push({line:r,points:Vm(this,zu)}),Vm(this,Bu).set(r,0),Hm(this,Gu,0),this.toSVGPath(),null}getLastElement(){return Vm(this,Vu).at(-1)}setLastElement(t){return Vm(this,Vu)?(Vm(this,Vu).push(t),Hm(this,ju,t.line),Hm(this,zu,t.points),Hm(this,Gu,0),{path:{d:this.toSVGPath()}}):Vm(this,qu).setLastElement(t)}removeLastElement(){if(!Vm(this,Vu))return Vm(this,qu).removeLastElement();Vm(this,Vu).pop(),Hm(this,Uu,"");for(let t=0,e=Vm(this,Vu).length;t<e;t++){const{line:e,points:i}=Vm(this,Vu)[t];Hm(this,ju,e),Hm(this,zu,i),Hm(this,Gu,0),this.toSVGPath()}return{path:{d:Vm(this,Uu)}}}toSVGPath(){const t=Yy.svgRound(Vm(this,ju)[4]),e=Yy.svgRound(Vm(this,ju)[5]);if(2===Vm(this,zu).length)return Hm(this,Uu,`${Vm(this,Uu)} M ${t} ${e} Z`),Vm(this,Uu);if(Vm(this,zu).length<=6){const i=Vm(this,Uu).lastIndexOf("M");Hm(this,Uu,`${Vm(this,Uu).slice(0,i)} M ${t} ${e}`),Hm(this,Gu,6)}if(4===Vm(this,zu).length){const t=Yy.svgRound(Vm(this,ju)[10]),e=Yy.svgRound(Vm(this,ju)[11]);return Hm(this,Uu,`${Vm(this,Uu)} L ${t} ${e}`),Hm(this,Gu,12),Vm(this,Uu)}const i=[];0===Vm(this,Gu)&&(i.push(`M ${t} ${e}`),Hm(this,Gu,6));for(let n=Vm(this,Gu),s=Vm(this,ju).length;n<s;n+=6){const[t,e,s,r,a,o]=Vm(this,ju).slice(n,n+6).map(Yy.svgRound);i.push(`C${t} ${e} ${s} ${r} ${a} ${o}`)}return Hm(this,Uu,Vm(this,Uu)+i.join(" ")),Hm(this,Gu,Vm(this,ju).length),Vm(this,Uu)}getOutlines(t,e,i,n){const s=Vm(this,Vu).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),Vm(this,qu).build(Vm(this,Vu),t,e,i,Vm(this,$u),Vm(this,Hu),n),Hm(this,Bu,null),Hm(this,ju,null),Hm(this,Vu,null),Hm(this,Uu,null),Vm(this,qu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Bu=new WeakMap,ju=new WeakMap,Vu=new WeakMap,$u=new WeakMap,Hu=new WeakMap,zu=new WeakMap,Uu=new WeakMap,Gu=new WeakMap,qu=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,Ku=new WeakSet,Qu=function(t,e){return Yy._normalizePoint(t,e,Vm(this,Xu),Vm(this,Yu),Vm(this,$u))};class hA extends Yy{constructor(){super(...arguments),$m(this,oc),$m(this,Zu),$m(this,Ju,0),$m(this,tc),$m(this,ec),$m(this,ic),$m(this,nc),$m(this,sc),$m(this,rc),$m(this,ac)}build(t,e,i,n,s,r,a){Hm(this,ic,e),Hm(this,nc,i),Hm(this,sc,n),Hm(this,rc,s),Hm(this,ac,r),Hm(this,tc,null!=a?a:0),Hm(this,ec,t),zm(this,oc,uc).call(this)}get thickness(){return Vm(this,ac)}setLastElement(t){return Vm(this,ec).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return Vm(this,ec).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of Vm(this,ec))if(t.push(`M${Yy.svgRound(e[4])} ${Yy.svgRound(e[5])}`),6!==e.length)if(12===e.length&&isNaN(e[6]))t.push(`L${Yy.svgRound(e[10])} ${Yy.svgRound(e[11])}`);else for(let i=6,n=e.length;i<n;i+=6){const[n,s,r,a,o,l]=e.subarray(i,i+6).map(Yy.svgRound);t.push(`C${n} ${s} ${r} ${a} ${o} ${l}`)}else t.push("Z");return t.join("")}serialize([t,e,i,n],s){const r=[],a=[],[o,l,h,u]=zm(this,oc,hc).call(this);let c,d,p,g,f,m,v,w,b;switch(Vm(this,rc)){case 0:b=Yy._rescale,c=t,d=e+n,p=i,g=-n,f=t+o*i,m=e+(1-l-u)*n,v=t+(o+h)*i,w=e+(1-l)*n;break;case 90:b=Yy._rescaleAndSwap,c=t,d=e,p=i,g=n,f=t+l*i,m=e+o*n,v=t+(l+u)*i,w=e+(o+h)*n;break;case 180:b=Yy._rescale,c=t+i,d=e,p=-i,g=n,f=t+(1-o-h)*i,m=e+l*n,v=t+(1-o)*i,w=e+(l+u)*n;break;case 270:b=Yy._rescaleAndSwap,c=t+i,d=e+n,p=-i,g=-n,f=t+(1-l-u)*i,m=e+(1-o-h)*n,v=t+(1-l)*i,w=e+(1-o)*n}for(const{line:y,points:A}of Vm(this,ec))r.push(b(y,c,d,p,g,s?new Array(y.length):null)),a.push(b(A,c,d,p,g,s?new Array(A.length):null));return{lines:r,points:a,rect:[f,m,v,w]}}static deserialize(t,e,i,n,s,{paths:{lines:r,points:a},rotation:o,thickness:l}){const h=[];let u,c,d,p,g;switch(o){case 0:g=Yy._rescale,u=-t/i,c=e/n+1,d=1/i,p=-1/n;break;case 90:g=Yy._rescaleAndSwap,u=-e/n,c=-t/i,d=1/n,p=1/i;break;case 180:g=Yy._rescale,u=t/i+1,c=-e/n,d=-1/i,p=1/n;break;case 270:g=Yy._rescaleAndSwap,u=e/n+1,c=t/i+1,d=-1/n,p=-1/i}if(!r){r=[];for(const t of a){const e=t.length;if(2===e){r.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1]]));continue}if(4===e){r.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1],NaN,NaN,NaN,NaN,t[2],t[3]]));continue}const i=new Float32Array(3*(e-2));r.push(i);let[n,s,a,o]=t.subarray(0,4);i.set([NaN,NaN,NaN,NaN,n,s],0);for(let r=4;r<e;r+=2){const e=t[r],l=t[r+1];i.set(Yy.createBezierPoints(n,s,a,o,e,l),3*(r-2)),[n,s,a,o]=[a,o,e,l]}}}for(let m=0,v=r.length;m<v;m++)h.push({line:g(r[m].map(t=>null!=t?t:NaN),u,c,d,p),points:g(a[m].map(t=>null!=t?t:NaN),u,c,d,p)});const f=new this.prototype.constructor;return f.build(h,i,n,1,o,l,s),f}get box(){return Vm(this,Zu)}updateProperty(t,e){return"stroke-width"===t?zm(this,oc,cc).call(this,e):null}updateParentDimensions([t,e],i){const[n,s]=zm(this,oc,lc).call(this);Hm(this,ic,t),Hm(this,nc,e),Hm(this,sc,i);const[r,a]=zm(this,oc,lc).call(this),o=r-n,l=a-s,h=Vm(this,Zu);return h[0]-=o,h[1]-=l,h[2]+=2*o,h[3]+=2*l,h}updateRotation(t){return Hm(this,Ju,t),{path:{transform:this.rotationTransform}}}get viewBox(){return Vm(this,Zu).map(Yy.svgRound).join(" ")}get defaultProperties(){const[t,e]=Vm(this,Zu);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Yy.svgRound(t)} ${Yy.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=Vm(this,Zu);let i=0,n=0,s=0,r=0,a=0,o=0;switch(Vm(this,Ju)){case 90:n=e/t,s=-t/e,a=t;break;case 180:i=-1,r=-1,a=t,o=e;break;case 270:n=-e/t,s=t/e,o=e;break;default:return""}return`matrix(${i} ${n} ${s} ${r} ${Yy.svgRound(a)} ${Yy.svgRound(o)})`}getPathResizingSVGProperties([t,e,i,n]){const[s,r]=zm(this,oc,lc).call(this),[a,o,l,h]=Vm(this,Zu);if(Math.abs(l-s)<=Yy.PRECISION||Math.abs(h-r)<=Yy.PRECISION){const s=t+i/2-(a+l/2),r=e+n/2-(o+h/2);return{path:{"transform-origin":`${Yy.svgRound(t)} ${Yy.svgRound(e)}`,transform:`${this.rotationTransform} translate(${s} ${r})`}}}const u=(i-2*s)/(l-2*s),c=(n-2*r)/(h-2*r),d=l/i,p=h/n;return{path:{"transform-origin":`${Yy.svgRound(a)} ${Yy.svgRound(o)}`,transform:`${this.rotationTransform} scale(${d} ${p}) translate(${Yy.svgRound(s)} ${Yy.svgRound(r)}) scale(${u} ${c}) translate(${Yy.svgRound(-s)} ${Yy.svgRound(-r)})`}}}getPathResizedSVGProperties([t,e,i,n]){const[s,r]=zm(this,oc,lc).call(this),a=Vm(this,Zu),[o,l,h,u]=a;if(a[0]=t,a[1]=e,a[2]=i,a[3]=n,Math.abs(h-s)<=Yy.PRECISION||Math.abs(u-r)<=Yy.PRECISION){const s=t+i/2-(o+h/2),r=e+n/2-(l+u/2);for(const{line:t,points:e}of Vm(this,ec))Yy._translate(t,s,r,t),Yy._translate(e,s,r,e);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Yy.svgRound(t)} ${Yy.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const c=(i-2*s)/(h-2*s),d=(n-2*r)/(u-2*r),p=-c*(o+s)+t+s,g=-d*(l+r)+e+r;if(1!==c||1!==d||0!==p||0!==g)for(const{line:f,points:m}of Vm(this,ec))Yy._rescale(f,p,g,c,d,f),Yy._rescale(m,p,g,c,d,m);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Yy.svgRound(t)} ${Yy.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[n,s]=i,r=Vm(this,Zu),a=t-r[0],o=e-r[1];if(Vm(this,ic)===n&&Vm(this,nc)===s)for(const{line:l,points:h}of Vm(this,ec))Yy._translate(l,a,o,l),Yy._translate(h,a,o,h);else{const t=Vm(this,ic)/n,e=Vm(this,nc)/s;Hm(this,ic,n),Hm(this,nc,s);for(const{line:i,points:n}of Vm(this,ec))Yy._rescale(i,a,o,t,e,i),Yy._rescale(n,a,o,t,e,n);r[2]*=t,r[3]*=e}return r[0]=t,r[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Yy.svgRound(t)} ${Yy.svgRound(e)}`}}}get defaultSVGProperties(){const t=Vm(this,Zu);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Yy.svgRound(t[0])} ${Yy.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Zu=new WeakMap,Ju=new WeakMap,tc=new WeakMap,ec=new WeakMap,ic=new WeakMap,nc=new WeakMap,sc=new WeakMap,rc=new WeakMap,ac=new WeakMap,oc=new WeakSet,lc=function(t=Vm(this,ac)){const e=Vm(this,tc)+t/2*Vm(this,sc);return Vm(this,rc)%180==0?[e/Vm(this,ic),e/Vm(this,nc)]:[e/Vm(this,nc),e/Vm(this,ic)]},hc=function(){const[t,e,i,n]=Vm(this,Zu),[s,r]=zm(this,oc,lc).call(this,0);return[t+s,e+r,i-2*s,n-2*r]},uc=function(){const t=Hm(this,Zu,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:n}of Vm(this,ec)){if(n.length<=12){for(let e=4,i=n.length;e<i;e+=6)aw.pointBoundingBox(n[e],n[e+1],t);continue}let e=n[4],i=n[5];for(let s=6,r=n.length;s<r;s+=6){const[r,a,o,l,h,u]=n.subarray(s,s+6);aw.bezierBoundingBox(e,i,r,a,o,l,h,u,t),e=h,i=u}}const[e,i]=zm(this,oc,lc).call(this);t[0]=c(t[0]-e,0,1),t[1]=c(t[1]-i,0,1),t[2]=c(t[2]+e,0,1),t[3]=c(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},cc=function(t){const[e,i]=zm(this,oc,lc).call(this);Hm(this,ac,t);const[n,s]=zm(this,oc,lc).call(this),[r,a]=[n-e,s-i],o=Vm(this,Zu);return o[0]-=r,o[1]-=a,o[2]+=2*r,o[3]+=2*a,o};class uA extends rA{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Lw._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){"stroke-width"===t&&(null!=e||(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new uA(this._viewParameters);return t.updateAll(this),t}}const cA=class t extends oA{constructor(t){super({...t,name:"inkEditor"}),$m(this,dc),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Lw.initialize(t,e),this._defaultDrawingOptions=new uA(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return o(this,"typesMap",new Map([[Uv.INK_THICKNESS,"stroke-width"],[Uv.INK_COLOR,"stroke"],[Uv.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,n,s){return new lA(t,e,i,n,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,n,s,r){return hA.deserialize(t,e,i,n,s,r)}static async deserialize(t,e,i){let n=null;if(t instanceof Wy){const{data:{inkLists:e,rect:i,rotation:s,id:r,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:h,contentsObj:u},parent:{page:{pageNumber:c}}}=t;n=t={annotationType:zv.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:e},boxes:null,pageIndex:c-1,rect:i.slice(0),rotation:s,annotationElementId:r,id:r,deleted:!1,popupRef:h,comment:(null==u?void 0:u.str)||null}}const s=await super.deserialize(t,e,i);return s._initialData=n,t.comment&&s.setCommentData(t.comment),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new cy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Uv.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:n}){this._drawingOptions=t.getDefaultDrawingOptions({stroke:aw.makeHexColor(...e),"stroke-width":i,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i,rect:n}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":r,"stroke-width":a}}=this,o={annotationType:zv.INK,color:Lw._colorManager.convert(s),opacity:r,thickness:a,paths:{lines:e,points:i},pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!zm(this,dc,pc).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const{points:e,rect:i}=this.serializeDraw(!1),n={rect:i,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}};dc=new WeakSet,pc=function(t){const{color:e,thickness:i,opacity:n,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((t,i)=>t!==e[i])||t.thickness!==i||t.opacity!==n||t.pageIndex!==s},Bm(cA,"_type","ink"),Bm(cA,"_editorType",zv.INK),Bm(cA,"_defaultDrawingOptions",null);let dA=cA;class pA extends hA{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}let gA=(gc=class{static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:n},s,r,a,o){let l=new OffscreenCanvas(1,1),h=l.getContext("2d",{alpha:!1});const u=h.font=`${i} ${n} 200px ${e}`,{actualBoundingBoxLeft:c,actualBoundingBoxRight:d,actualBoundingBoxAscent:p,actualBoundingBoxDescent:g,fontBoundingBoxAscent:f,fontBoundingBoxDescent:m,width:v}=h.measureText(t),w=Math.ceil(1.5*Math.max(Math.abs(c)+Math.abs(d)||0,v)),b=Math.ceil(1.5*Math.max(Math.abs(p)+Math.abs(g)||200,Math.abs(f)+Math.abs(m)||200));l=new OffscreenCanvas(w,b),h=l.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=u,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,w,b),h.fillStyle="black",h.fillText(t,.5*w/2,1.5*b/2);const y=zm(this,mc,Cc).call(this,h.getImageData(0,0,w,b).data),A=zm(this,mc,Sc).call(this,y),_=zm(this,mc,kc).call(this,A),x=zm(this,mc,Ac).call(this,y,w,b,_);return this.processDrawnLines({lines:{curves:x,width:w,height:b},pageWidth:s,pageHeight:r,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static process(t,e,i,n,s){const[r,a,o]=zm(this,mc,Mc).call(this,t),[l,h]=zm(this,mc,Ec).call(this,r,a,o,Math.hypot(a,o)*Vm(this,fc).sigmaSFactor,Vm(this,fc).sigmaR,Vm(this,fc).kernelSize),u=zm(this,mc,kc).call(this,h),c=zm(this,mc,Ac).call(this,l,a,o,u);return this.processDrawnLines({lines:{curves:c,width:a,height:o},pageWidth:e,pageHeight:i,rotation:n,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:n,innerMargin:s,mustSmooth:r,areContours:a}){var o;n%180!=0&&([e,i]=[i,e]);const{curves:l,width:h,height:u}=t,c=null!=(o=t.thickness)?o:0,d=[],p=Math.min(e/h,i/u),g=p/e,f=p/i,m=[];for(const{points:w}of l){const t=r?zm(this,mc,xc).call(this,w):w;if(!t)continue;m.push(t);const e=t.length,i=new Float32Array(e),n=new Float32Array(3*(2===e?2:e-2));if(d.push({line:n,points:i}),2===e){i[0]=t[0]*g,i[1]=t[1]*f,n.set([NaN,NaN,NaN,NaN,i[0],i[1]],0);continue}let[s,a,o,l]=t;s*=g,a*=f,o*=g,l*=f,i.set([s,a,o,l],0),n.set([NaN,NaN,NaN,NaN,s,a],0);for(let r=4;r<e;r+=2){const e=i[r]=t[r]*g,h=i[r+1]=t[r+1]*f;n.set(Yy.createBezierPoints(s,a,o,l,e,h),3*(r-2)),[s,a,o,l]=[o,l,e,h]}}if(0===d.length)return null;const v=a?new pA:new hA;return v.build(d,e,i,1,n,a?0:c,s),{outline:v,newCurves:m,areContours:a,thickness:c,width:h,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:n,height:s}){let r,a=1/0,o=-1/0,l=0;for(const d of t){l+=d.length;for(let t=2,e=d.length;t<e;t++){const e=d[t]-d[t-2];a=Math.min(a,e),o=Math.max(o,e)}}r=a>=-128&&o<=127?Int8Array:a>=-32768&&o<=32767?Int16Array:Int32Array;const h=t.length,u=8+3*h,c=new Uint32Array(u);let p=0;c[p++]=u*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*r.BYTES_PER_ELEMENT,c[p++]=0,c[p++]=n,c[p++]=s,c[p++]=e?0:1,c[p++]=Math.max(0,Math.floor(null!=i?i:0)),c[p++]=h,c[p++]=r.BYTES_PER_ELEMENT;for(const d of t)c[p++]=d.length-2,c[p++]=d[0],c[p++]=d[1];const g=new CompressionStream("deflate-raw"),f=g.writable.getWriter();await f.ready,f.write(c);const m=r.prototype.constructor;for(const d of t){const t=new m(d.length-2);for(let e=2,i=d.length;e<i;e++)t[e-2]=d[e]-d[e-2];f.write(t)}f.close();const v=await new Response(g.readable).arrayBuffer();return d(new Uint8Array(v))}static async decompressSignature(t){try{const i=(e=t,Uint8Array.fromBase64?Uint8Array.fromBase64(e):h(atob(e))),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(i).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let a=null,o=0;for await(const t of n)a||(a=new Uint8Array(new Uint32Array(t.buffer,0,4)[0])),a.set(t,o),o+=t.length;const l=new Uint32Array(a.buffer,0,a.length>>2),u=l[1];if(0!==u)throw new Error(`Invalid version: ${u}`);const c=l[2],d=l[3],p=0===l[4],g=l[5],f=l[6],m=l[7],v=[],w=(8+3*f)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(m){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(a.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(a.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(a.buffer,w)}o=0;for(let t=0;t<f;t++){const e=l[3*t+8],i=new Float32Array(e+2);v.push(i);for(let n=0;n<2;n++)i[n]=l[3*t+8+n+1];for(let t=0;t<e;t++)i[t+2]=i[t]+b[o++]}return{areContours:p,thickness:g,outlines:v,width:c,height:d}}catch(n){return i(`decompressSignature: ${n}`),null}var e}},fc=new WeakMap,mc=new WeakSet,vc=function(t,e,i,n){return n-=e,0===(i-=t)?n>0?0:4:1===i?n+6:2-n},wc=new WeakMap,bc=function(t,e,i,n,s,r,a){const o=zm(this,mc,vc).call(this,i,n,s,r);for(let l=0;l<8;l++){const s=(-l+o-a+16)%8;if(0!==t[(i+Vm(this,wc)[2*s])*e+(n+Vm(this,wc)[2*s+1])])return s}return-1},yc=function(t,e,i,n,s,r,a){const o=zm(this,mc,vc).call(this,i,n,s,r);for(let l=0;l<8;l++){const s=(l+o+a+16)%8;if(0!==t[(i+Vm(this,wc)[2*s])*e+(n+Vm(this,wc)[2*s+1])])return s}return-1},Ac=function(t,e,i,n){const s=t.length,r=new Int32Array(s);for(let h=0;h<s;h++)r[h]=t[h]<=n?1:0;for(let h=1;h<i-1;h++)r[h*e]=r[h*e+e-1]=0;for(let h=0;h<e;h++)r[h]=r[e*i-1-h]=0;let a,o=1;const l=[];for(let h=1;h<i-1;h++){a=1;for(let t=1;t<e-1;t++){const i=h*e+t,n=r[i];if(0===n)continue;let s=h,u=t;if(1===n&&0===r[i-1])o+=1,u-=1;else{if(!(n>=1&&0===r[i+1])){1!==n&&(a=Math.abs(n));continue}o+=1,u+=1,n>1&&(a=n)}const c=[t,h],d=u===t+1,p={isHole:d,points:c,id:o,parent:0};let g;l.push(p);for(const t of l)if(t.id===a){g=t;break}g?g.isHole?p.parent=d?g.parent:a:p.parent=d?a:g.parent:p.parent=d?a:0;const f=zm(this,mc,bc).call(this,r,e,h,t,s,u,0);if(-1===f){r[i]=-o,1!==r[i]&&(a=Math.abs(r[i]));continue}let m=Vm(this,wc)[2*f],v=Vm(this,wc)[2*f+1];const w=h+m,b=t+v;s=w,u=b;let y=h,A=t;for(;;){const n=zm(this,mc,yc).call(this,r,e,y,A,s,u,1);m=Vm(this,wc)[2*n],v=Vm(this,wc)[2*n+1];const l=y+m,d=A+v;c.push(d,l);const p=y*e+A;if(0===r[p+1]?r[p]=-o:1===r[p]&&(r[p]=o),l===h&&d===t&&y===w&&A===b){1!==r[i]&&(a=Math.abs(r[i]));break}s=y,u=A,y=l,A=d}}}return l},_c=function(t,e,i,n){if(i-e<=4){for(let s=e;s<i-2;s+=2)n.push(t[s],t[s+1]);return}const s=t[e],r=t[e+1],a=t[i-4]-s,o=t[i-3]-r,l=Math.hypot(a,o),h=a/l,u=o/l,c=h*r-u*s,d=o/a,p=1/l,g=Math.atan(d),f=Math.cos(g),m=Math.sin(g),v=p*(Math.abs(f)+Math.abs(m)),w=p*(1-v+v**2),b=Math.max(Math.atan(Math.abs(m+f)*w),Math.atan(Math.abs(m-f)*w));let y=0,A=e;for(let _=e+2;_<i-2;_+=2){const e=Math.abs(c-h*t[_+1]+u*t[_]);e>y&&(A=_,y=e)}y>(l*b)**2?(zm(this,mc,_c).call(this,t,e,A+2,n),zm(this,mc,_c).call(this,t,A,i,n)):n.push(s,r)},xc=function(t){const e=[],i=t.length;return zm(this,mc,_c).call(this,t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e},Ec=function(t,e,i,n,s,r){const a=new Float32Array(r**2),o=-2*n**2,l=r>>1;for(let g=0;g<r;g++){const t=(g-l)**2;for(let e=0;e<r;e++)a[g*r+e]=Math.exp((t+(e-l)**2)/o)}const h=new Float32Array(256),u=-2*s**2;for(let g=0;g<256;g++)h[g]=Math.exp(g**2/u);const c=t.length,d=new Uint8Array(c),p=new Uint32Array(256);for(let g=0;g<i;g++)for(let n=0;n<e;n++){const s=g*e+n,o=t[s];let u=0,c=0;for(let d=0;d<r;d++){const s=g+d-l;if(!(s<0||s>=i))for(let i=0;i<r;i++){const p=n+i-l;if(p<0||p>=e)continue;const g=t[s*e+p],f=a[d*r+i]*h[Math.abs(g-o)];u+=g*f,c+=f}}p[d[s]=Math.round(u/c)]++}return[d,p]},Sc=function(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e},Cc=function(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let n=-1/0,s=1/0;for(let a=0,o=i.length;a<o;a++){const e=i[a]=t[a<<2];n=Math.max(n,e),s=Math.min(s,e)}const r=255/(n-s);for(let a=0,o=i.length;a<o;a++)i[a]=(i[a]-s)*r;return i},kc=function(t){let e,i=-1/0,n=-1/0;const s=t.findIndex(t=>0!==t);let r=s,a=s;for(e=s;e<256;e++){const s=t[e];s>i&&(e-r>n&&(n=e-r,a=e-1),i=s,r=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e},Mc=function(t){const e=t,{width:i,height:n}=t,{maxDim:s}=Vm(this,fc);let r=i,a=n;if(i>s||n>s){let o=i,l=n,h=Math.log2(Math.max(i,n)/s);const u=Math.floor(h);h=h===u?u-1:u;for(let i=0;i<h;i++){r=Math.ceil(o/2),a=Math.ceil(l/2);const i=new OffscreenCanvas(r,a);i.getContext("2d").drawImage(t,0,0,o,l,0,0,r,a),o=r,l=a,t!==e&&t.close(),t=i.transferToImageBitmap()}const c=Math.min(s/r,s/a);r=Math.round(r*c),a=Math.round(a*c)}const o=new OffscreenCanvas(r,a).getContext("2d",{willReadFrequently:!0});o.fillStyle="white",o.fillRect(0,0,r,a),o.filter="grayscale(1)",o.drawImage(t,0,0,t.width,t.height,0,0,r,a);const l=o.getImageData(0,0,r,a).data;return[zm(this,mc,Cc).call(this,l),r,a]},$m(gc,mc),$m(gc,fc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),$m(gc,wc,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])),gc);class fA extends rA{constructor(){super(),super.updateProperties({fill:Lw._defaultLineColor,"stroke-width":0})}clone(){const t=new fA;return t.updateAll(this),t}}class mA extends uA{constructor(t){super(t),super.updateProperties({stroke:Lw._defaultLineColor,"stroke-width":1})}clone(){const t=new mA(this._viewParameters);return t.updateAll(this),t}}const vA=class t extends oA{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),$m(this,Pc,!1),$m(this,Fc,null),$m(this,Dc,null),$m(this,Tc,null),this._willKeepAspectRatio=!0,Hm(this,Dc,t.signatureData||null),Hm(this,Fc,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Lw.initialize(t,e),this._defaultDrawingOptions=new fA,this._defaultDrawnSignatureOptions=new mA(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return o(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Vm(this,Fc)}}static computeTelemetryFinalData(t){var e,i;const n=t.get("hasDescription");return{hasAltText:null!=(e=n.get(!0))?e:0,hasNoAltText:null!=(i=n.get(!1))?i:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,i;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,i=this.y),super.render(),null===this._drawId)if(Vm(this,Dc)){const{lines:e,mustSmooth:i,areContours:n,description:s,uuid:r,heightInPage:a}=Vm(this,Dc),{rawDims:{pageWidth:o,pageHeight:l},rotation:h}=this.parent.viewport,u=gA.processDrawnLines({lines:e,pageWidth:o,pageHeight:l,rotation:h,innerMargin:t._INNER_MARGIN,mustSmooth:i,areContours:n});this.addSignature(u,a,s,r)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Vm(this,Fc)||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,i)),this.div}setUuid(t){Hm(this,Tc,t),this.addEditToolbar()}getUuid(){return Vm(this,Tc)}get description(){return Vm(this,Fc)}set description(t){Hm(this,Fc,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{null==e||e.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:n,height:s}=Vm(this,Dc),r=Math.max(n,s);return{areContours:e,outline:gA.processDrawnLines({lines:{curves:t.map(t=>({points:t})),thickness:i,width:n,height:s},pageWidth:r,pageHeight:r,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,i,n,s){const{x:r,y:a}=this,{outline:o}=Hm(this,Dc,e);let l;Hm(this,Pc,o instanceof pA),this.description=n,Vm(this,Pc)?l=t.getDefaultDrawingOptions():(l=t._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:l});const[h,u]=this.parentDimensions,[,c]=this.pageDimensions;let d=i/c;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(h*this.width,u*this.height),this.x=r,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:i,pageHeight:n},rotation:s}=this.parent.viewport;return gA.process(e,i,n,s,t._INNER_MARGIN)}getFromText(e,i){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return gA.extractContoursFromText(e,i,n,s,r,t._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:i,pageHeight:n},rotation:s}=this.parent.viewport;return gA.processDrawnLines({lines:e,pageWidth:i,pageHeight:n,rotation:s,innerMargin:t._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:i}){e?this._drawingOptions=t.getDefaultDrawingOptions():(this._drawingOptions=t._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i,rect:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,r={annotationType:zv.SIGNATURE,isSignature:!0,areContours:Vm(this,Pc),color:[0,0,0],thickness:Vm(this,Pc)?0:s,pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(r),t?(r.paths={lines:e,points:i},r.uuid=Vm(this,Tc),r.isCopy=!0):r.lines=e,Vm(this,Fc)&&(r.accessibilityData={type:"Figure",alt:Vm(this,Fc)}),r}static deserializeDraw(t,e,i,n,s,r){return r.areContours?pA.deserialize(t,e,i,n,s,r):hA.deserialize(t,e,i,n,s,r)}static async deserialize(t,e,i){var n;const s=await super.deserialize(t,e,i);return Hm(s,Pc,t.areContours),s.description=(null==(n=t.accessibilityData)?void 0:n.alt)||"",Hm(s,Tc,t.uuid),s}};Pc=new WeakMap,Fc=new WeakMap,Dc=new WeakMap,Tc=new WeakMap,Bm(vA,"_type","signature"),Bm(vA,"_editorType",zv.SIGNATURE),Bm(vA,"_defaultDrawingOptions",null);let wA=vA;class bA extends Lw{constructor(t){super({...t,name:"stampEditor"}),$m(this,zc),$m(this,Ic,null),$m(this,Lc,null),$m(this,Rc,null),$m(this,Nc,null),$m(this,Oc,null),$m(this,Wc,""),$m(this,Bc,null),$m(this,jc,!1),$m(this,Vc,null),$m(this,$c,!1),$m(this,Hc,!1),Hm(this,Nc,t.bitmapUrl),Hm(this,Oc,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Lw.initialize(t,e)}static isHandlingMimeForPasting(t){return vw.includes(t)}static paste(t,e){e.pasteEditor({mode:zv.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!(null==(t=this.altTextData)?void 0:t.altText)}}static computeTelemetryFinalData(t){var e,i;const n=t.get("hasAltText");return{hasAltText:null!=(e=n.get(!0))?e:0,hasNoAltText:null!=(i=n.get(!1))?i:0}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!(await i.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:n,width:s,height:r}=t||this.copyCanvas(null,null,!0).imageData,a=await i.guess({name:"altText",request:{data:n,width:s,height:r,channels:n.length/(s*r)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),e&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var t;Vm(this,Lc)&&(Hm(this,Ic,null),this._uiManager.imageManager.deleteId(Vm(this,Lc)),null==(t=Vm(this,Bc))||t.remove(),Hm(this,Bc,null),Vm(this,Vc)&&(clearTimeout(Vm(this,Vc)),Hm(this,Vc,null))),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(Vm(this,Lc)&&null===Vm(this,Bc)&&zm(this,zc,qc).call(this),this.isAttachedToDOM||this.parent.add(this))):Vm(this,Lc)&&zm(this,zc,qc).call(this)}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(Vm(this,Rc)||Vm(this,Ic)||Vm(this,Nc)||Vm(this,Oc)||Vm(this,Lc)||Vm(this,jc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Vm(this,jc)||(Vm(this,Ic)?zm(this,zc,Xc).call(this):zm(this,zc,qc).call(this)),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:n}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(Hm(this,Lc,i),n&&Hm(this,Ic,n),Hm(this,jc,!1),zm(this,zc,Xc).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){this.parent&&(null!==Vm(this,Vc)&&clearTimeout(Vm(this,Vc)),Hm(this,Vc,setTimeout(()=>{Hm(this,Vc,null),zm(this,zc,Kc).call(this)},200)))}copyCanvas(t,e,i=!1){var n;t||(t=224);const{width:s,height:r}=Vm(this,Ic),a=new mw;let o=Vm(this,Ic),l=s,h=r,u=null;if(e){if(s>e||r>e){const t=Math.min(e/s,e/r);l=Math.floor(s*t),h=Math.floor(r*t)}u=document.createElement("canvas");const t=u.width=Math.ceil(l*a.sx),i=u.height=Math.ceil(h*a.sy);Vm(this,$c)||(o=zm(this,zc,Yc).call(this,t,i));const c=u.getContext("2d");c.filter=this._uiManager.hcmFilter;let d="white",p="#cfcfd8";"none"!==this._uiManager.hcmFilter?p="black":(null==(n=window.matchMedia)?void 0:n.call(window,"(prefers-color-scheme: dark)").matches)&&(d="#8f8f9d",p="#42414d");const g=15,f=g*a.sx,m=g*a.sy,v=new OffscreenCanvas(2*f,2*m),w=v.getContext("2d");w.fillStyle=d,w.fillRect(0,0,2*f,2*m),w.fillStyle=p,w.fillRect(0,0,f,m),w.fillRect(f,m,f,m),c.fillStyle=c.createPattern(v,"repeat"),c.fillRect(0,0,t,i),c.drawImage(o,0,0,o.width,o.height,0,0,t,i)}let c=null;if(i){let e,i;if(a.symmetric&&o.width<t&&o.height<t)e=o.width,i=o.height;else if(o=Vm(this,Ic),s>t||r>t){const n=Math.min(t/s,t/r);e=Math.floor(s*n),i=Math.floor(r*n),Vm(this,$c)||(o=zm(this,zc,Yc).call(this,e,i))}const n=new OffscreenCanvas(e,i).getContext("2d",{willReadFrequently:!0});n.drawImage(o,0,0,o.width,o.height,0,0,e,i),c={width:e,height:i,data:n.getImageData(0,0,e,i).data}}return{canvas:u,width:l,height:h,imageData:c}}static async deserialize(t,e,i){var n;let s=null,r=!1;if(t instanceof Hy){const{data:{rect:a,rotation:o,id:l,structParent:h,popupRef:u,contentsObj:c},container:d,parent:{page:{pageNumber:p}},canvas:g}=t;let f,m;g?(delete t.canvas,({id:f,bitmap:m}=i.imageManager.getFromCanvas(d.id,g)),g.remove()):(r=!0,t._hasNoCanvas=!0);const v=(null==(n=await e._structTree.getAriaAttributes(`${hw}${l}`))?void 0:n.get("aria-label"))||"";s=t={annotationType:zv.STAMP,bitmapId:f,bitmap:m,pageIndex:p-1,rect:a.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:v},isSvg:!1,structParent:h,popupRef:u,comment:(null==c?void 0:c.str)||null}}const a=await super.deserialize(t,e,i),{rect:o,bitmap:l,bitmapUrl:h,bitmapId:u,isSvg:c,accessibilityData:d}=t;r?(i.addMissingCanvas(t.id,a),Hm(a,jc,!0)):u&&i.imageManager.isValidId(u)?(Hm(a,Lc,u),l&&Hm(a,Ic,l)):Hm(a,Nc,h),Hm(a,$c,c);const[p,g]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/g,d&&(a.altTextData=d),a._initialData=s,t.comment&&a.setCommentData(t.comment),Hm(a,Hc,!!s),a}serialize(t=!1,e=null){var i;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:zv.STAMP,bitmapId:Vm(this,Lc),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Vm(this,$c),structTreeParentId:this._structTreeParentId};if(this.addComment(n),t)return n.bitmapUrl=zm(this,zc,Qc).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:r}=this.serializeAltText(!1);if(!s&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const t=zm(this,zc,Zc).call(this,n);if(t.isSame)return null;t.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=null!=(i=this._initialData.structParent)?i:-1}if(n.id=this.annotationElementId,null===e)return n;e.stamps||(e.stamps=new Map);const a=Vm(this,$c)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(Vm(this,Lc))){if(Vm(this,$c)){const t=e.stamps.get(Vm(this,Lc));a>t.area&&(t.area=a,t.serialized.bitmap.close(),t.serialized.bitmap=zm(this,zc,Qc).call(this,!1))}}else e.stamps.set(Vm(this,Lc),{area:a,serialized:n}),n.bitmap=zm(this,zc,Qc).call(this,!1);return n}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}Ic=new WeakMap,Lc=new WeakMap,Rc=new WeakMap,Nc=new WeakMap,Oc=new WeakMap,Wc=new WeakMap,Bc=new WeakMap,jc=new WeakMap,Vc=new WeakMap,$c=new WeakMap,Hc=new WeakMap,zc=new WeakSet,Uc=function(t,e=!1){t?(Hm(this,Ic,t.bitmap),e||(Hm(this,Lc,t.id),Hm(this,$c,t.isSvg)),t.file&&Hm(this,Wc,t.file.name),zm(this,zc,Xc).call(this)):this.remove()},Gc=function(){if(Hm(this,Rc,null),this._uiManager.enableWaiting(!1),Vm(this,Bc))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Vm(this,Ic))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Vm(this,Ic)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},qc=function(){if(Vm(this,Lc))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(Vm(this,Lc)).then(t=>zm(this,zc,Uc).call(this,t,!0)).finally(()=>zm(this,zc,Gc).call(this));if(Vm(this,Nc)){const t=Vm(this,Nc);return Hm(this,Nc,null),this._uiManager.enableWaiting(!0),void Hm(this,Rc,this._uiManager.imageManager.getFromUrl(t).then(t=>zm(this,zc,Uc).call(this,t)).finally(()=>zm(this,zc,Gc).call(this)))}if(Vm(this,Oc)){const t=Vm(this,Oc);return Hm(this,Oc,null),this._uiManager.enableWaiting(!0),void Hm(this,Rc,this._uiManager.imageManager.getFromFile(t).then(t=>zm(this,zc,Uc).call(this,t)).finally(()=>zm(this,zc,Gc).call(this)))}const t=document.createElement("input");t.type="file",t.accept=vw.join(",");const e=this._uiManager._signal;Hm(this,Rc,new Promise(i=>{t.addEventListener("change",async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),zm(this,zc,Uc).call(this,e)}else this.remove();i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>zm(this,zc,Gc).call(this))),t.click()},Xc=function(){var t;const{div:e}=this;let{width:i,height:n}=Vm(this,Ic);const[s,r]=this.pageDimensions,a=.75;if(this.width)i=this.width*s,n=this.height*r;else if(i>a*s||n>a*r){const t=Math.min(a*s/i,a*r/n);i*=t,n*=t}const[o,l]=this.parentDimensions;this.setDims(i*o/s,n*l/r),this._uiManager.enableWaiting(!1);const h=Hm(this,Bc,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=i/s,this.height=n/r,(null==(t=this._initialOptions)?void 0:t.isCentered)?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(e.hidden=!1),zm(this,zc,Kc).call(this),Vm(this,Hc)||(this.parent.addUndoableEditor(this),Hm(this,Hc,!0)),this._reportTelemetry({action:"inserted_image"}),Vm(this,Wc)&&this.div.setAttribute("aria-description",Vm(this,Wc)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Yc=function(t,e){const{width:i,height:n}=Vm(this,Ic);let s=i,r=n,a=Vm(this,Ic);for(;s>2*t||r>2*e;){const i=s,n=r;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(s,r);o.getContext("2d").drawImage(a,0,0,i,n,0,0,s,r),a=o.transferToImageBitmap()}return a},Kc=function(){const[t,e]=this.parentDimensions,{width:i,height:n}=this,s=new mw,r=Math.ceil(i*t*s.sx),a=Math.ceil(n*e*s.sy),o=Vm(this,Bc);if(!o||o.width===r&&o.height===a)return;o.width=r,o.height=a;const l=Vm(this,$c)?Vm(this,Ic):zm(this,zc,Yc).call(this,r,a),h=o.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(l,0,0,l.width,l.height,0,0,r,a)},Qc=function(t){if(t){if(Vm(this,$c)){const t=this._uiManager.imageManager.getSvgUrl(Vm(this,Lc));if(t)return t}const t=document.createElement("canvas");return({width:t.width,height:t.height}=Vm(this,Ic)),t.getContext("2d").drawImage(Vm(this,Ic),0,0),t.toDataURL()}if(Vm(this,$c)){const[t,e]=this.pageDimensions,i=Math.round(this.width*t*cw.PDF_TO_CSS_UNITS),n=Math.round(this.height*e*cw.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(i,n);return s.getContext("2d").drawImage(Vm(this,Ic),0,0,Vm(this,Ic).width,Vm(this,Ic).height,0,0,i,n),s.transferToImageBitmap()}return structuredClone(Vm(this,Ic))},Zc=function(t){var e;const{pageIndex:i,accessibilityData:{altText:n}}=this._initialData,s=t.pageIndex===i,r=((null==(e=t.accessibilityData)?void 0:e.alt)||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&r,isSameAltText:r}},Bm(bA,"_type","stamp"),Bm(bA,"_editorType",zv.STAMP);let yA=(fd=class{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:n,accessibilityManager:s,annotationLayer:r,drawLayer:a,textLayer:o,viewport:l,l10n:h}){$m(this,vd),$m(this,Jc),$m(this,td,!1),$m(this,ed,null),$m(this,id,null),$m(this,nd,null),$m(this,sd,new Map),$m(this,rd,!1),$m(this,ad,!1),$m(this,od,!1),$m(this,ld,null),$m(this,hd,null),$m(this,ud,null),$m(this,cd,null),$m(this,dd,null),$m(this,pd,-1),$m(this,gd);const u=[...Vm(fd,md).values()];if(!fd._initialized){fd._initialized=!0;for(const e of u)e.initialize(h,t)}t.registerEditorTypes(u),Hm(this,gd,t),this.pageIndex=e,this.div=i,Hm(this,Jc,s),Hm(this,ed,r),this.viewport=l,Hm(this,ud,o),this.drawLayer=a,this._structTree=n,Vm(this,gd).addLayer(this)}get isEmpty(){return 0===Vm(this,sd).size}get isInvisible(){return this.isEmpty&&Vm(this,gd).getMode()===zv.NONE}updateToolbar(t){Vm(this,gd).updateToolbar(t)}updateMode(t=Vm(this,gd).getMode()){switch(zm(this,vd,_d).call(this),t){case zv.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case zv.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case zv.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of Vm(fd,md).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===(null==(e=Vm(this,ud))?void 0:e.div)}setEditingState(t){Vm(this,gd).setEditingState(t)}addCommands(t){Vm(this,gd).addCommands(t)}cleanUndoStack(t){Vm(this,gd).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;null==(e=Vm(this,ed))||e.div.classList.toggle("disabled",!t)}async enable(){var t;Hm(this,od,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),null==(t=Vm(this,dd))||t.abort(),Hm(this,dd,null);const e=new Set;for(const n of Vm(this,sd).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(Vm(this,gd).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!Vm(this,ed))return void Hm(this,od,!1);const i=Vm(this,ed).getEditableAnnotations();for(const n of i){if(n.hide(),Vm(this,gd).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=await this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}Hm(this,od,!1)}disable(){var t;if(Hm(this,ad,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),Vm(this,ud)&&!Vm(this,dd)){Hm(this,dd,new AbortController);const t=Vm(this,gd).combinedSignal(Vm(this,dd));Vm(this,ud).div.addEventListener("pointerdown",t=>{const{clientX:e,clientY:i,timeStamp:n}=t;if(n-Vm(this,pd)>500)return void Hm(this,pd,n);Hm(this,pd,-1);const{classList:s}=this.div;s.toggle("getElements",!0);const r=document.elementsFromPoint(e,i);if(s.toggle("getElements",!1),!this.div.contains(r[0]))return;let a;const o=new RegExp(`^${Hv}[0-9]+$`);for(const h of r)if(o.test(h.id)){a=h.id;break}if(!a)return;const l=Vm(this,sd).get(a);null===(null==l?void 0:l.annotationElementId)&&(t.stopPropagation(),t.preventDefault(),l.dblclick())},{signal:t,capture:!0})}const e=new Map,i=new Map;for(const s of Vm(this,sd).values())s.disableEditing(),s.annotationElementId&&(null===s.serialize()?(i.set(s.annotationElementId,s),null==(t=this.getEditableAnnotation(s.annotationElementId))||t.show(),s.remove()):e.set(s.annotationElementId,s));if(Vm(this,ed)){const t=Vm(this,ed).getEditableAnnotations();for(const n of t){const{id:t}=n.data;if(Vm(this,gd).isDeletedAnnotationElement(t)){n.updateEdited({deleted:!0});continue}let s=i.get(t);s?(s.resetAnnotationElement(n),s.show(!1),n.show()):(s=e.get(t),s&&(Vm(this,gd).addChangedExistingAnnotation(s),s.renderAnnotationElement(n)&&s.show(!1)),n.show())}}zm(this,vd,_d).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of Vm(fd,md).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Hm(this,ad,!1)}getEditableAnnotation(t){var e;return(null==(e=Vm(this,ed))?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){Vm(this,gd).getActive()!==t&&Vm(this,gd).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(null==(t=Vm(this,ud))?void 0:t.div)&&!Vm(this,cd)){Hm(this,cd,new AbortController);const t=Vm(this,gd).combinedSignal(Vm(this,cd));Vm(this,ud).div.addEventListener("pointerdown",zm(this,vd,wd).bind(this),{signal:t}),Vm(this,ud).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(null==(t=Vm(this,ud))?void 0:t.div)&&Vm(this,cd)&&(Vm(this,cd).abort(),Hm(this,cd,null),Vm(this,ud).div.classList.remove("highlighting"))}enableClick(){if(Vm(this,id))return;Hm(this,id,new AbortController);const t=Vm(this,gd).combinedSignal(Vm(this,id));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;null==(t=Vm(this,id))||t.abort(),Hm(this,id,null)}attach(t){Vm(this,sd).set(t.id,t);const{annotationElementId:e}=t;e&&Vm(this,gd).isDeletedAnnotationElement(e)&&Vm(this,gd).removeDeletedAnnotationElement(t)}detach(t){var e;Vm(this,sd).delete(t.id),null==(e=Vm(this,Jc))||e.removePointerInTextLayer(t.contentDiv),!Vm(this,ad)&&t.annotationElementId&&Vm(this,gd).addDeletedAnnotationElement(t)}remove(t){this.detach(t),Vm(this,gd).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(Vm(this,gd).addDeletedAnnotationElement(t.annotationElementId),Lw.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null==(e=t.parent)||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),Vm(this,gd).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!Vm(this,od)),Vm(this,gd).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var e;if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!Vm(this,nd)&&(t._focusEventsAllowed=!1,Hm(this,nd,setTimeout(()=>{Hm(this,nd,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:Vm(this,gd)._signal}),i.focus())},0))),t._structTreeParentId=null==(e=Vm(this,Jc))?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return Vm(this,gd).getId()}combinedSignal(t){return Vm(this,gd).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return null==(t=Vm(this,vd,bd))?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await Vm(this,gd).updateMode(t.mode);const{offsetX:i,offsetY:n}=zm(this,vd,Ad).call(this),s=this.getNextId(),r=zm(this,vd,yd).call(this,{parent:this,id:s,x:i,y:n,uiManager:Vm(this,gd),isCentered:!0,...e});r&&this.add(r)}async deserialize(t){var e,i;return await(null==(i=Vm(fd,md).get(null!=(e=t.annotationType)?e:t.annotationEditorType))?void 0:i.deserialize(t,this,Vm(this,gd)))||null}createAndAddNewEditor(t,e,i={}){const n=this.getNextId(),s=zm(this,vd,yd).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:Vm(this,gd),isCentered:e,...i});return s&&this.add(s),s}addNewEditor(t={}){this.createAndAddNewEditor(zm(this,vd,Ad).call(this),!0,t)}setSelected(t){Vm(this,gd).setSelected(t)}toggleSelected(t){Vm(this,gd).toggleSelected(t)}unselect(t){Vm(this,gd).unselect(t)}pointerup(t){var e;const{isMac:i}=sw.platform;if(0!==t.button||t.ctrlKey&&i)return;if(t.target!==this.div)return;if(!Vm(this,rd))return;if(Hm(this,rd,!1),(null==(e=Vm(this,vd,bd))?void 0:e.isDrawer)&&Vm(this,vd,bd).supportMultipleDrawings)return;if(!Vm(this,td))return void Hm(this,td,!0);const n=Vm(this,gd).getMode();n!==zv.STAMP&&n!==zv.SIGNATURE?this.createAndAddNewEditor(t,!1):Vm(this,gd).unselectAll()}pointerdown(t){var e;if(Vm(this,gd).getMode()===zv.HIGHLIGHT&&this.enableTextSelection(),Vm(this,rd))return void Hm(this,rd,!1);const{isMac:i}=sw.platform;if(0!==t.button||t.ctrlKey&&i)return;if(t.target!==this.div)return;if(Hm(this,rd,!0),null==(e=Vm(this,vd,bd))?void 0:e.isDrawer)return void this.startDrawingSession(t);const n=Vm(this,gd).getActive();Hm(this,td,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),Vm(this,ld))return void Vm(this,vd,bd).startDrawing(this,Vm(this,gd),!1,t);Vm(this,gd).setCurrentDrawingSession(this),Hm(this,ld,new AbortController);const e=Vm(this,gd).combinedSignal(Vm(this,ld));this.div.addEventListener("blur",({relatedTarget:t})=>{t&&!this.div.contains(t)&&(Hm(this,hd,null),this.commitOrRemove())},{signal:e}),Vm(this,vd,bd).startDrawing(this,Vm(this,gd),!1,t)}pause(t){if(t){const{activeElement:t}=document;return void(this.div.contains(t)&&Hm(this,hd,t))}Vm(this,hd)&&setTimeout(()=>{var t;null==(t=Vm(this,hd))||t.focus(),Hm(this,hd,null)},0)}endDrawingSession(t=!1){return Vm(this,ld)?(Vm(this,gd).setCurrentDrawingSession(null),Vm(this,ld).abort(),Hm(this,ld,null),Hm(this,hd,null),Vm(this,vd,bd).endDrawing(t)):null}findNewParent(t,e,i){const n=Vm(this,gd).findParent(e,i);return null!==n&&n!==this&&(n.changeParent(t),!0)}commitOrRemove(){return!!Vm(this,ld)&&(this.endDrawingSession(),!0)}onScaleChanging(){Vm(this,ld)&&Vm(this,vd,bd).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),(null==(t=Vm(this,gd).getActive())?void 0:t.parent)===this&&(Vm(this,gd).commitOrRemove(),Vm(this,gd).setActiveEditor(null)),Vm(this,nd)&&(clearTimeout(Vm(this,nd)),Hm(this,nd,null));for(const i of Vm(this,sd).values())null==(e=Vm(this,Jc))||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,Vm(this,sd).clear(),Vm(this,gd).removeLayer(this)}render({viewport:t}){this.viewport=t,E(this.div,t);for(const e of Vm(this,gd).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){Vm(this,gd).commitOrRemove(),zm(this,vd,_d).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,E(this.div,{rotation:i}),e!==i)for(const n of Vm(this,sd).values())n.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return Vm(this,gd).viewParameters.realScale}},Jc=new WeakMap,td=new WeakMap,ed=new WeakMap,id=new WeakMap,nd=new WeakMap,sd=new WeakMap,rd=new WeakMap,ad=new WeakMap,od=new WeakMap,ld=new WeakMap,hd=new WeakMap,ud=new WeakMap,cd=new WeakMap,dd=new WeakMap,pd=new WeakMap,gd=new WeakMap,md=new WeakMap,vd=new WeakSet,wd=function(t){Vm(this,gd).unselectAll();const{target:e}=t;if(e===Vm(this,ud).div||("img"===e.getAttribute("role")||e.classList.contains("endOfContent"))&&Vm(this,ud).div.contains(e)){const{isMac:e}=sw.platform;if(0!==t.button||t.ctrlKey&&e)return;Vm(this,gd).showAllEditors("highlight",!0,!0),Vm(this,ud).div.classList.add("free"),this.toggleDrawing(),sA.startHighlighting(this,"ltr"===Vm(this,gd).direction,{target:Vm(this,ud).div,x:t.x,y:t.y}),Vm(this,ud).div.addEventListener("pointerup",()=>{Vm(this,ud).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Vm(this,gd)._signal}),t.preventDefault()}},bd=function(){return Vm(fd,md).get(Vm(this,gd).getMode())},yd=function(t){const e=Vm(this,vd,bd);return e?new e.prototype.constructor(t):null},Ad=function(){const{x:t,y:e,width:i,height:n}=this.div.getBoundingClientRect(),s=Math.max(0,t),r=Math.max(0,e),a=(s+Math.min(window.innerWidth,t+i))/2-t,o=(r+Math.min(window.innerHeight,e+n))/2-e,[l,h]=this.viewport.rotation%180==0?[a,o]:[o,a];return{offsetX:l,offsetY:h}},_d=function(){for(const t of Vm(this,sd).values())t.isEmpty()&&t.remove()},Bm(fd,"_initialized",!1),$m(fd,md,new Map([Xy,dA,bA,sA,wA].map(t=>[t._editorType,t]))),fd),AA=(Cd=class{constructor({pageIndex:t}){$m(this,Fd),$m(this,xd,null),$m(this,Ed,new Map),$m(this,Sd,new Map),this.pageIndex=t}setParent(t){if(Vm(this,xd)){if(Vm(this,xd)!==t){if(Vm(this,Ed).size>0)for(const e of Vm(this,Ed).values())e.remove(),t.append(e);Hm(this,xd,t)}}else Hm(this,xd,t)}static get _svgFactory(){return o(this,"_svgFactory",new gy)}draw(t,e=!1,i=!1){const n=Um(Cd,kd)._++,s=zm(this,Fd,Dd).call(this),r=Cd._svgFactory.createElement("defs");s.append(r);const a=Cd._svgFactory.createElement("path");r.append(a);const o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke"),e&&Vm(this,Sd).set(n,a);const l=i?zm(this,Fd,Td).call(this,r,o):null,h=Cd._svgFactory.createElement("use");return s.append(h),h.setAttribute("href",`#${o}`),this.updateProperties(s,t),Vm(this,Ed).set(n,s),{id:n,clipPathId:`url(#${l})`}}drawOutline(t,e){const i=Um(Cd,kd)._++,n=zm(this,Fd,Dd).call(this),s=Cd._svgFactory.createElement("defs");n.append(s);const r=Cd._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${i}`;let o;if(r.setAttribute("id",a),r.setAttribute("vector-effect","non-scaling-stroke"),e){const t=Cd._svgFactory.createElement("mask");s.append(t),o=`mask_p${this.pageIndex}_${i}`,t.setAttribute("id",o),t.setAttribute("maskUnits","objectBoundingBox");const e=Cd._svgFactory.createElement("rect");t.append(e),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("fill","white");const n=Cd._svgFactory.createElement("use");t.append(n),n.setAttribute("href",`#${a}`),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const l=Cd._svgFactory.createElement("use");n.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const h=l.cloneNode();return n.append(h),l.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(n,t),Vm(this,Ed).set(i,n),i}finalizeDraw(t,e){Vm(this,Sd).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var i;if(!e)return;const{root:n,bbox:s,rootClass:r,path:a}=e,o="number"==typeof t?Vm(this,Ed).get(t):t;if(o){if(n&&zm(this,Fd,Id).call(this,o,n),s&&zm(i=Cd,Md,Pd).call(i,o,s),r){const{classList:t}=o;for(const[e,i]of Object.entries(r))t.toggle(e,i)}if(a){const t=o.firstChild.firstChild;zm(this,Fd,Id).call(this,t,a)}}}updateParent(t,e){if(e===this)return;const i=Vm(this,Ed).get(t);i&&(Vm(e,xd).append(i),Vm(this,Ed).delete(t),Vm(e,Ed).set(t,i))}remove(t){Vm(this,Sd).delete(t),null!==Vm(this,xd)&&(Vm(this,Ed).get(t).remove(),Vm(this,Ed).delete(t))}destroy(){Hm(this,xd,null);for(const t of Vm(this,Ed).values())t.remove();Vm(this,Ed).clear(),Vm(this,Sd).clear()}},xd=new WeakMap,Ed=new WeakMap,Sd=new WeakMap,kd=new WeakMap,Md=new WeakSet,Pd=function(t,[e,i,n,s]){const{style:r}=t;r.top=100*i+"%",r.left=100*e+"%",r.width=100*n+"%",r.height=100*s+"%"},Fd=new WeakSet,Dd=function(){const t=Cd._svgFactory.create(1,1,!0);return Vm(this,xd).append(t),t.setAttribute("aria-hidden",!0),t},Td=function(t,e){const i=Cd._svgFactory.createElement("clipPath");t.append(i);const n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Cd._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),n},Id=function(t,e){for(const[i,n]of Object.entries(e))null===n?t.removeAttribute(i):t.setAttribute(i,n)},$m(Cd,Md),$m(Cd,kd,0),Cd);globalThis._pdfjsTestingUtils={HighlightOutliner:Jy},globalThis.pdfjsLib={AbortException:nw,AnnotationEditorLayer:yA,AnnotationEditorParamsType:Uv,AnnotationEditorType:zv,AnnotationEditorUIManager:Mw,AnnotationLayer:Uy,AnnotationMode:$v,AnnotationType:qv,build:"295fb3ec4",ColorPicker:hy,createValidAbsoluteUrl:r,DOMSVGFactory:gy,DrawLayer:AA,FeatureTest:sw,fetchData:p,getDocument:X,getFilenameFromUrl:function(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)},getPdfFilenameFromUrl:m,getRGB:A,getUuid:u,getXfaPageViewport:y,GlobalWorkerOptions:Fb,ImageKind:Gv,InvalidPDFException:tw,isDataScheme:g,isPdfFile:f,isValidExplicitDest:Gw,MathClamp:c,noContextMenu:w,normalizeUnicode:function(t){return ow||(ow=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,lw=new Map([["ﬅ","ſt"]])),t.replaceAll(ow,(t,e,i)=>e?e.normalize("NFKC"):lw.get(i))},OPS:Yv,OutputScale:mw,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:ey,PDFDateString:fw,PDFWorker:sy,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:cw,RenderingCancelledException:pw,ResponseException:ew,setLayerDimensions:E,shadow:o,SignatureExtractor:gA,stopEvent:b,SupportedImageMimeTypes:vw,TextLayer:Qb,TouchManager:Tw,updateUrlHash:a,Util:aw,VerbosityLevel:Xv,version:"5.4.54",XfaLayer:fy};var _A={34:(t,e,i)=>{var n=i(4901);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},81:(t,e,i)=>{var n=i(9565),s=i(9306),r=i(8551),a=i(6823),o=i(851),l=TypeError;t.exports=function(t,e){var i=arguments.length<2?o(t):e;if(s(i))return r(n(i,t));throw new l(a(t)+" is not iterable")}},283:(t,e,i)=>{var n=i(9504),s=i(9039),r=i(4901),a=i(9297),o=i(3724),l=i(350).CONFIGURABLE,h=i(3706),u=i(1181),c=u.enforce,d=u.get,p=String,g=Object.defineProperty,f=n("".slice),m=n("".replace),v=n([].join),w=o&&!s(function(){return 8!==g(function(){},"length",{value:8}).length}),b=String(String).split("String"),y=t.exports=function(t,e,i){"Symbol("===f(p(e),0,7)&&(e="["+m(p(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!a(t,"name")||l&&t.name!==e)&&(o?g(t,"name",{value:e,configurable:!0}):t.name=e),w&&i&&a(i,"arity")&&t.length!==i.arity&&g(t,"length",{value:i.arity});try{i&&a(i,"constructor")&&i.constructor?o&&g(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(s){}var n=c(t);return a(n,"source")||(n.source=v(b,"string"==typeof e?e:"")),t};Function.prototype.toString=y(function(){return r(this)&&d(this).source||h(this)},"toString")},350:(t,e,i)=>{var n=i(3724),s=i(9297),r=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,o=s(r,"name"),l=o&&"something"===function(){}.name,h=o&&(!n||n&&a(r,"name").configurable);t.exports={EXISTS:o,PROPER:l,CONFIGURABLE:h}},397:(t,e,i)=>{var n=i(7751);t.exports=n("document","documentElement")},421:t=>{t.exports={}},507:(t,e,i)=>{var n=i(9565);t.exports=function(t,e,i){for(var s,r,a=i?t:t.iterator,o=t.next;!(s=n(o,a)).done;)if(void 0!==(r=e(s.value)))return r}},616:(t,e,i)=>{var n=i(9039);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},655:(t,e,i)=>{var n=i(6955),s=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return s(t)}},679:(t,e,i)=>{var n=i(1625),s=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new s("Incorrect invocation")}},684:t=>{t.exports=function(t,e){var i="function"==typeof Iterator&&Iterator.prototype[t];if(i)try{i.call({next:null},e).next()}catch(n){return!0}}},741:t=>{var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?i:e)(n)}},757:(t,e,i)=>{var n=i(7751),s=i(4901),r=i(1625),a=i(7040),o=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return s(e)&&r(e.prototype,o(t))}},851:(t,e,i)=>{var n=i(6955),s=i(5966),r=i(4117),a=i(6269),o=i(8227)("iterator");t.exports=function(t){if(!r(t))return s(t,o)||s(t,"@@iterator")||a[n(t)]}},1072:(t,e,i)=>{var n=i(1828),s=i(8727);t.exports=Object.keys||function(t){return n(t,s)}},1108:(t,e,i)=>{var n=i(6955);t.exports=function(t){var e=n(t);return"BigInt64Array"===e||"BigUint64Array"===e}},1148:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(2652),a=i(9306),o=i(8551),l=i(1767),h=i(9539),u=i(4549)("every",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{every:function(t){o(this);try{a(t)}catch(n){h(this,"throw",n)}if(u)return s(u,this,t);var e=l(this),i=0;return!r(e,function(e,n){if(!t(e,i++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:(t,e,i)=>{var n,s,r,a=i(8622),o=i(4576),l=i(34),h=i(6699),u=i(9297),c=i(7629),d=i(6119),p=i(421),g="Object already initialized",f=o.TypeError,m=o.WeakMap;if(a||c.state){var v=c.state||(c.state=new m);v.get=v.get,v.has=v.has,v.set=v.set,n=function(t,e){if(v.has(t))throw new f(g);return e.facade=t,v.set(t,e),e},s=function(t){return v.get(t)||{}},r=function(t){return v.has(t)}}else{var w=d("state");p[w]=!0,n=function(t,e){if(u(t,w))throw new f(g);return e.facade=t,h(t,w,e),e},s=function(t){return u(t,w)?t[w]:{}},r=function(t){return u(t,w)}}t.exports={set:n,get:s,has:r,enforce:function(t){return r(t)?s(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!l(e)||(i=s(e)).type!==t)throw new f("Incompatible receiver, "+t+" required");return i}}}},1291:(t,e,i)=>{var n=i(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},1385:(t,e,i)=>{var n=i(9539);t.exports=function(t,e,i){for(var s=t.length-1;s>=0;s--)if(void 0!==t[s])try{i=n(t[s].iterator,e,i)}catch(r){e="throw",i=r}if("throw"===e)throw i;return i}},1548:(t,e,i)=>{var n=i(4576),s=i(9039),r=i(9519),a=i(4215),o=n.structuredClone;t.exports=!!o&&!s(function(){if("DENO"===a&&r>92||"NODE"===a&&r>94||"BROWSER"===a&&r>97)return!1;var t=new ArrayBuffer(8),e=o(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength})},1625:(t,e,i)=>{var n=i(9504);t.exports=n({}.isPrototypeOf)},1698:(t,e,i)=>{var n=i(6518),s=i(4204),r=i(9835);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("union")||!r("union")},{union:s})},1701:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(9306),a=i(8551),o=i(1767),l=i(9462),h=i(6319),u=i(9539),c=i(684),d=i(4549),p=i(6395),g=!p&&!c("map",function(){}),f=!p&&!g&&d("map",TypeError),m=p||g||f,v=l(function(){var t=this.iterator,e=a(s(this.next,t));if(!(this.done=!!e.done))return h(t,this.mapper,[e.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:m},{map:function(t){a(this);try{r(t)}catch(e){u(this,"throw",e)}return f?s(f,this,t):new v(o(this),{mapper:t})}})},1767:t=>{t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1828:(t,e,i)=>{var n=i(9504),s=i(9297),r=i(5397),a=i(9617).indexOf,o=i(421),l=n([].push);t.exports=function(t,e){var i,n=r(t),h=0,u=[];for(i in n)!s(o,i)&&s(n,i)&&l(u,i);for(;e.length>h;)s(n,i=e[h++])&&(~a(u,i)||l(u,i));return u}},2106:(t,e,i)=>{var n=i(283),s=i(4913);t.exports=function(t,e,i){return i.get&&n(i.get,e,{getter:!0}),i.set&&n(i.set,e,{setter:!0}),s.f(t,e,i)}},2140:(t,e,i)=>{var n={};n[i(8227)("toStringTag")]="z",t.exports="[object z]"===String(n)},2195:(t,e,i)=>{var n=i(9504),s=n({}.toString),r=n("".slice);t.exports=function(t){return r(s(t),8,-1)}},2211:(t,e,i)=>{var n=i(9039);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},2222:(t,e,i)=>{var n=i(6518),s=i(7751),r=i(9039),a=i(2812),o=i(655),l=i(7416),h=s("URL"),u=l&&r(function(){h.canParse()}),c=r(function(){return 1!==h.canParse.length});n({target:"URL",stat:!0,forced:!u||c},{canParse:function(t){var e=a(arguments.length,1),i=o(t),n=e<2||void 0===arguments[1]?void 0:o(arguments[1]);try{return!!new h(i,n)}catch(s){return!1}}})},2360:(t,e,i)=>{var n,s=i(8551),r=i(6801),a=i(8727),o=i(421),l=i(397),h=i(4055),u=i(6119),c="prototype",d="script",p=u("IE_PROTO"),g=function(){},f=function(t){return"<"+d+">"+t+"</"+d+">"},m=function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{n=new ActiveXObject("htmlfile")}catch(r){}var t,e,i;v="undefined"!=typeof document?document.domain&&n?m(n):(e=h("iframe"),i="java"+d+":",e.style.display="none",l.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F):m(n);for(var s=a.length;s--;)delete v[c][a[s]];return v()};o[p]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(g[c]=s(t),i=new g,g[c]=null,i[p]=t):i=v(),void 0===e?i:r.f(i,e)}},2475:(t,e,i)=>{var n=i(6518),s=i(8527);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("isSupersetOf",function(t){return!t})},{isSupersetOf:s})},2489:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(9306),a=i(8551),o=i(1767),l=i(9462),h=i(6319),u=i(6395),c=i(9539),d=i(684),p=i(4549),g=!u&&!d("filter",function(){}),f=!u&&!g&&p("filter",TypeError),m=u||g||f,v=l(function(){for(var t,e,i=this.iterator,n=this.predicate,r=this.next;;){if(t=a(s(r,i)),this.done=!!t.done)return;if(e=t.value,h(i,n,[e,this.counter++],!0))return e}});n({target:"Iterator",proto:!0,real:!0,forced:m},{filter:function(t){a(this);try{r(t)}catch(e){c(this,"throw",e)}return f?s(f,this,t):new v(o(this),{predicate:t})}})},2529:t=>{t.exports=function(t,e){return{value:t,done:e}}},2652:(t,e,i)=>{var n=i(6080),s=i(9565),r=i(8551),a=i(6823),o=i(4209),l=i(6198),h=i(1625),u=i(81),c=i(851),d=i(9539),p=TypeError,g=function(t,e){this.stopped=t,this.result=e},f=g.prototype;t.exports=function(t,e,i){var m,v,w,b,y,A,_,x=i&&i.that,E=!(!i||!i.AS_ENTRIES),S=!(!i||!i.IS_RECORD),C=!(!i||!i.IS_ITERATOR),k=!(!i||!i.INTERRUPTED),M=n(e,x),P=function(t){return m&&d(m,"normal"),new g(!0,t)},F=function(t){return E?(r(t),k?M(t[0],t[1],P):M(t[0],t[1])):k?M(t,P):M(t)};if(S)m=t.iterator;else if(C)m=t;else{if(!(v=c(t)))throw new p(a(t)+" is not iterable");if(o(v)){for(w=0,b=l(t);b>w;w++)if((y=F(t[w]))&&h(f,y))return y;return new g(!1)}m=u(t,v)}for(A=S?t.next:m.next;!(_=s(A,m)).done;){try{y=F(_.value)}catch(D){d(m,"throw",D)}if("object"==typeof y&&y&&h(f,y))return y}return new g(!1)}},2777:(t,e,i)=>{var n=i(9565),s=i(34),r=i(757),a=i(5966),o=i(4270),l=i(8227),h=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!s(t)||r(t))return t;var i,l=a(t,u);if(l){if(void 0===e&&(e="default"),i=n(l,t,e),!s(i)||r(i))return i;throw new h("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},2787:(t,e,i)=>{var n=i(9297),s=i(4901),r=i(8981),a=i(6119),o=i(2211),l=a("IE_PROTO"),h=Object,u=h.prototype;t.exports=o?h.getPrototypeOf:function(t){var e=r(t);if(n(e,l))return e[l];var i=e.constructor;return s(i)&&e instanceof i?i.prototype:e instanceof h?u:null}},2796:(t,e,i)=>{var n=i(9039),s=i(4901),r=/#|\.prototype\./,a=function(t,e){var i=l[o(t)];return i===u||i!==h&&(s(e)?n(e):!!e)},o=a.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=a.data={},h=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a},2812:t=>{var e=TypeError;t.exports=function(t,i){if(t<i)throw new e("Not enough arguments");return t}},2839:(t,e,i)=>{var n=i(4576).navigator,s=n&&n.userAgent;t.exports=s?String(s):""},2967:(t,e,i)=>{var n=i(6706),s=i(34),r=i(7750),a=i(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=n(Object.prototype,"__proto__","set"))(i,[]),e=i instanceof Array}catch(o){}return function(i,n){return r(i),a(n),s(i)?(e?t(i,n):i.__proto__=n,i):i}}():void 0)},3238:(t,e,i)=>{var n=i(4576),s=i(7811),r=i(7394),a=n.DataView;t.exports=function(t){if(!s||0!==r(t))return!1;try{return new a(t),!1}catch(e){return!0}}},3392:(t,e,i)=>{var n=i(9504),s=0,r=Math.random(),a=n(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++s+r,36)}},3440:(t,e,i)=>{var n=i(7080),s=i(4402),r=i(9286),a=i(5170),o=i(3789),l=i(8469),h=i(507),u=s.has,c=s.remove;t.exports=function(t){var e=n(this),i=o(t),s=r(e);return a(e)<=i.size?l(e,function(t){i.includes(t)&&c(s,t)}):h(i.getIterator(),function(t){u(s,t)&&c(s,t)}),s}},3506:(t,e,i)=>{var n=i(3925),s=String,r=TypeError;t.exports=function(t){if(n(t))return t;throw new r("Can't set "+s(t)+" as a prototype")}},3579:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(2652),a=i(9306),o=i(8551),l=i(1767),h=i(9539),u=i(4549)("some",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{some:function(t){o(this);try{a(t)}catch(n){h(this,"throw",n)}if(u)return s(u,this,t);var e=l(this),i=0;return r(e,function(e,n){if(t(e,i++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:(t,e,i)=>{var n=i(7080),s=i(4402),r=i(9286),a=i(3789),o=i(507),l=s.add,h=s.has,u=s.remove;t.exports=function(t){var e=n(this),i=a(t).getIterator(),s=r(e);return o(i,function(t){h(e,t)?u(s,t):l(s,t)}),s}},3706:(t,e,i)=>{var n=i(9504),s=i(4901),r=i(7629),a=n(Function.toString);s(r.inspectSource)||(r.inspectSource=function(t){return a(t)}),t.exports=r.inspectSource},3717:(t,e)=>{e.f=Object.getOwnPropertySymbols},3724:(t,e,i)=>{var n=i(9039);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3789:(t,e,i)=>{var n=i(9306),s=i(8551),r=i(9565),a=i(1291),o=i(1767),l="Invalid size",h=RangeError,u=TypeError,c=Math.max,d=function(t,e){this.set=t,this.size=c(e,0),this.has=n(t.has),this.keys=n(t.keys)};d.prototype={getIterator:function(){return o(s(r(this.keys,this.set)))},includes:function(t){return r(this.has,this.set,t)}},t.exports=function(t){s(t);var e=+t.size;if(e!=e)throw new u(l);var i=a(e);if(i<0)throw new h(l);return new d(t,i)}},3838:(t,e,i)=>{var n=i(7080),s=i(5170),r=i(8469),a=i(3789);t.exports=function(t){var e=n(this),i=a(t);return!(s(e)>i.size)&&!1!==r(e,function(t){if(!i.includes(t))return!1},!0)}},3853:(t,e,i)=>{var n=i(6518),s=i(4449);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("isDisjointFrom",function(t){return!t})},{isDisjointFrom:s})},3925:(t,e,i)=>{var n=i(34);t.exports=function(t){return n(t)||null===t}},4055:(t,e,i)=>{var n=i(4576),s=i(34),r=n.document,a=s(r)&&s(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},4114:(t,e,i)=>{var n=i(6518),s=i(8981),r=i(6198),a=i(4527),o=i(6837);n({target:"Array",proto:!0,arity:1,forced:i(9039)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=s(this),i=r(e),n=arguments.length;o(i+n);for(var l=0;l<n;l++)e[i]=arguments[l],i++;return a(e,i),i}})},4117:t=>{t.exports=function(t){return null==t}},4204:(t,e,i)=>{var n=i(7080),s=i(4402).add,r=i(9286),a=i(3789),o=i(507);t.exports=function(t){var e=n(this),i=a(t).getIterator(),l=r(e);return o(i,function(t){s(l,t)}),l}},4209:(t,e,i)=>{var n=i(8227),s=i(6269),r=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||a[r]===t)}},4215:(t,e,i)=>{var n=i(4576),s=i(2839),r=i(2195),a=function(t){return s.slice(0,t.length)===t};t.exports=a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===r(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},4270:(t,e,i)=>{var n=i(9565),s=i(4901),r=i(34),a=TypeError;t.exports=function(t,e){var i,o;if("string"===e&&s(i=t.toString)&&!r(o=n(i,t)))return o;if(s(i=t.valueOf)&&!r(o=n(i,t)))return o;if("string"!==e&&s(i=t.toString)&&!r(o=n(i,t)))return o;throw new a("Can't convert object to primitive value")}},4376:(t,e,i)=>{var n=i(2195);t.exports=Array.isArray||function(t){return"Array"===n(t)}},4402:(t,e,i)=>{var n=i(9504),s=Set.prototype;t.exports={Set:Set,add:n(s.add),has:n(s.has),remove:n(s.delete),proto:s}},4449:(t,e,i)=>{var n=i(7080),s=i(4402).has,r=i(5170),a=i(3789),o=i(8469),l=i(507),h=i(9539);t.exports=function(t){var e=n(this),i=a(t);if(r(e)<=i.size)return!1!==o(e,function(t){if(i.includes(t))return!1},!0);var u=i.getIterator();return!1!==l(u,function(t){if(s(e,t))return h(u,"normal",!1)})}},4483:(t,e,i)=>{var n,s,r,a,o=i(4576),l=i(9429),h=i(1548),u=o.structuredClone,c=o.ArrayBuffer,d=o.MessageChannel,p=!1;if(h)p=function(t){u(t,{transfer:[t]})};else if(c)try{d||(n=l("worker_threads"))&&(d=n.MessageChannel),d&&(s=new d,r=new c(2),a=function(t){s.port1.postMessage(null,[t])},2===r.byteLength&&(a(r),0===r.byteLength&&(p=a)))}catch(g){}t.exports=p},4495:(t,e,i)=>{var n=i(9519),s=i(9039),r=i(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!s(function(){var t=Symbol("symbol detection");return!r(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},4527:(t,e,i)=>{var n=i(3724),s=i(4376),r=TypeError,a=Object.getOwnPropertyDescriptor,o=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(s(t)&&!a(t,"length").writable)throw new r("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4549:(t,e,i)=>{var n=i(4576);t.exports=function(t,e){var i=n.Iterator,s=i&&i.prototype,r=s&&s[t],a=!1;if(r)try{r.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(o){o instanceof e||(a=!1)}if(!a)return r}},4576:function(t){var e=function(t){return t&&t.Math===Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||e("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4603:(t,e,i)=>{var n=i(6840),s=i(9504),r=i(655),a=i(2812),o=URLSearchParams,l=o.prototype,h=s(l.append),u=s(l.delete),c=s(l.forEach),d=s([].push),p=new o("a=1&a=2&b=3");p.delete("a",1),p.delete("b",void 0),p+""!="a=2"&&n(l,"delete",function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return u(this,t);var n=[];c(this,function(t,e){d(n,{key:e,value:t})}),a(e,1);for(var s,o=r(t),l=r(i),p=0,g=0,f=!1,m=n.length;p<m;)s=n[p++],f||s.key===o?(f=!0,u(this,s.key)):g++;for(;g<m;)(s=n[g++]).key===o&&s.value===l||h(this,s.key,s.value)},{enumerable:!0,unsafe:!0})},4628:(t,e,i)=>{var n=i(6518),s=i(6043);n({target:"Promise",stat:!0},{withResolvers:function(){var t=s.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})},4644:(t,e,i)=>{var n,s,r,a=i(7811),o=i(3724),l=i(4576),h=i(4901),u=i(34),c=i(9297),d=i(6955),p=i(6823),g=i(6699),f=i(6840),m=i(2106),v=i(1625),w=i(2787),b=i(2967),y=i(8227),A=i(3392),_=i(1181),x=_.enforce,E=_.get,S=l.Int8Array,C=S&&S.prototype,k=l.Uint8ClampedArray,M=k&&k.prototype,P=S&&w(S),F=C&&w(C),D=Object.prototype,T=l.TypeError,I=y("toStringTag"),L=A("TYPED_ARRAY_TAG"),R="TypedArrayConstructor",N=a&&!!b&&"Opera"!==d(l.opera),O=!1,W={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},j=function(t){var e=w(t);if(u(e)){var i=E(e);return i&&c(i,R)?i[R]:j(e)}},V=function(t){if(!u(t))return!1;var e=d(t);return c(W,e)||c(B,e)};for(n in W)(r=(s=l[n])&&s.prototype)?x(r)[R]=s:N=!1;for(n in B)(r=(s=l[n])&&s.prototype)&&(x(r)[R]=s);if((!N||!h(P)||P===Function.prototype)&&(P=function(){throw new T("Incorrect invocation")},N))for(n in W)l[n]&&b(l[n],P);if((!N||!F||F===D)&&(F=P.prototype,N))for(n in W)l[n]&&b(l[n].prototype,F);if(N&&w(M)!==F&&b(M,F),o&&!c(F,I))for(n in O=!0,m(F,I,{configurable:!0,get:function(){return u(this)?this[L]:void 0}}),W)l[n]&&g(l[n],L,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:O&&L,aTypedArray:function(t){if(V(t))return t;throw new T("Target is not a typed array")},aTypedArrayConstructor:function(t){if(h(t)&&(!b||v(P,t)))return t;throw new T(p(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,i,n){if(o){if(i)for(var s in W){var r=l[s];if(r&&c(r.prototype,t))try{delete r.prototype[t]}catch(a){try{r.prototype[t]=e}catch(h){}}}F[t]&&!i||f(F,t,i?e:N&&C[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,i){var n,s;if(o){if(b){if(i)for(n in W)if((s=l[n])&&c(s,t))try{delete s[t]}catch(r){}if(P[t]&&!i)return;try{return f(P,t,i?e:N&&P[t]||e)}catch(r){}}for(n in W)!(s=l[n])||s[t]&&!i||f(s,t,e)}},getTypedArrayConstructor:j,isView:function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||c(W,e)||c(B,e)},isTypedArray:V,TypedArray:P,TypedArrayPrototype:F}},4659:(t,e,i)=>{var n=i(3724),s=i(4913),r=i(6980);t.exports=function(t,e,i){n?s.f(t,e,r(0,i)):t[e]=i}},4901:t=>{var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},4913:(t,e,i)=>{var n=i(3724),s=i(5917),r=i(8686),a=i(8551),o=i(6969),l=TypeError,h=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c="enumerable",d="configurable",p="writable";e.f=n?r?function(t,e,i){if(a(t),e=o(e),a(i),"function"==typeof t&&"prototype"===e&&"value"in i&&p in i&&!i[p]){var n=u(t,e);n&&n[p]&&(t[e]=i.value,i={configurable:d in i?i[d]:n[d],enumerable:c in i?i[c]:n[c],writable:!1})}return h(t,e,i)}:h:function(t,e,i){if(a(t),e=o(e),a(i),s)try{return h(t,e,i)}catch(n){}if("get"in i||"set"in i)throw new l("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},4916:(t,e,i)=>{var n=i(7751),s=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},r=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var i=n("Set");try{(new i)[t](s(0));try{return(new i)[t](s(-1)),!1}catch(o){if(!e)return!0;try{return(new i)[t](r(-1/0)),!1}catch(l){var a=new i;return a.add(1),a.add(2),e(a[t](r(1/0)))}}}catch(l){return!1}}},5024:(t,e,i)=>{var n=i(6518),s=i(3650),r=i(9835);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("symmetricDifference")||!r("symmetricDifference")},{symmetricDifference:s})},5031:(t,e,i)=>{var n=i(7751),s=i(9504),r=i(8480),a=i(3717),o=i(8551),l=s([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=r.f(o(t)),i=a.f;return i?l(e,i(t)):e}},5169:(t,e,i)=>{var n=i(3238),s=TypeError;t.exports=function(t){if(n(t))throw new s("ArrayBuffer is detached");return t}},5170:(t,e,i)=>{var n=i(6706),s=i(4402);t.exports=n(s.proto,"size","get")||function(t){return t.size}},5397:(t,e,i)=>{var n=i(7055),s=i(7750);t.exports=function(t){return n(s(t))}},5610:(t,e,i)=>{var n=i(1291),s=Math.max,r=Math.min;t.exports=function(t,e){var i=n(t);return i<0?s(i+e,0):r(i,e)}},5636:(t,e,i)=>{var n=i(4576),s=i(9504),r=i(6706),a=i(7696),o=i(5169),l=i(7394),h=i(4483),u=i(1548),c=n.structuredClone,d=n.ArrayBuffer,p=n.DataView,g=Math.min,f=d.prototype,m=p.prototype,v=s(f.slice),w=r(f,"resizable","get"),b=r(f,"maxByteLength","get"),y=s(m.getInt8),A=s(m.setInt8);t.exports=(u||h)&&function(t,e,i){var n,s=l(t),r=void 0===e?s:a(e),f=!w||!w(t);if(o(t),u&&(t=c(t,{transfer:[t]}),s===r&&(i||f)))return t;if(s>=r&&(!i||f))n=v(t,0,r);else{var m=i&&!f&&b?{maxByteLength:b(t)}:void 0;n=new d(r,m);for(var _=new p(t),x=new p(n),E=g(r,s),S=0;S<E;S++)A(x,S,y(_,S))}return u||h(t),n}},5745:(t,e,i)=>{var n=i(7629);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},5854:(t,e,i)=>{var n=i(2777),s=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw new s("Can't convert number to bigint");return BigInt(e)}},5876:(t,e,i)=>{var n=i(6518),s=i(3838);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("isSubsetOf",function(t){return t})},{isSubsetOf:s})},5917:(t,e,i)=>{var n=i(3724),s=i(9039),r=i(4055);t.exports=!n&&!s(function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a})},5966:(t,e,i)=>{var n=i(9306),s=i(4117);t.exports=function(t,e){var i=t[e];return s(i)?void 0:n(i)}},6043:(t,e,i)=>{var n=i(9306),s=TypeError,r=function(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw new s("Bad Promise constructor");e=t,i=n}),this.resolve=n(e),this.reject=n(i)};t.exports.f=function(t){return new r(t)}},6080:(t,e,i)=>{var n=i(7476),s=i(9306),r=i(616),a=n(n.bind);t.exports=function(t,e){return s(t),void 0===e?t:r?a(t,e):function(){return t.apply(e,arguments)}}},6119:(t,e,i)=>{var n=i(5745),s=i(3392),r=n("keys");t.exports=function(t){return r[t]||(r[t]=s(t))}},6193:(t,e,i)=>{var n=i(4215);t.exports="NODE"===n},6198:(t,e,i)=>{var n=i(8014);t.exports=function(t){return n(t.length)}},6269:t=>{t.exports={}},6279:(t,e,i)=>{var n=i(6840);t.exports=function(t,e,i){for(var s in e)n(t,s,e[s],i);return t}},6319:(t,e,i)=>{var n=i(8551),s=i(9539);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(a){s(t,"throw",a)}}},6395:t=>{t.exports=!1},6518:(t,e,i)=>{var n=i(4576),s=i(7347).f,r=i(6699),a=i(6840),o=i(9433),l=i(7740),h=i(2796);t.exports=function(t,e){var i,u,c,d,p,g=t.target,f=t.global,m=t.stat;if(i=f?n:m?n[g]||o(g,{}):n[g]&&n[g].prototype)for(u in e){if(d=e[u],c=t.dontCallGetSet?(p=s(i,u))&&p.value:i[u],!h(f?u:g+(m?".":"#")+u,t.forced)&&void 0!==c){if(typeof d==typeof c)continue;l(d,c)}(t.sham||c&&c.sham)&&r(d,"sham",!0),a(i,u,d,t)}}},6573:(t,e,i)=>{var n=i(3724),s=i(2106),r=i(3238),a=ArrayBuffer.prototype;n&&!("detached"in a)&&s(a,"detached",{configurable:!0,get:function(){return r(this)}})},6699:(t,e,i)=>{var n=i(3724),s=i(4913),r=i(6980);t.exports=n?function(t,e,i){return s.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},6706:(t,e,i)=>{var n=i(9504),s=i(9306);t.exports=function(t,e,i){try{return n(s(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(r){}}},6801:(t,e,i)=>{var n=i(3724),s=i(8686),r=i(4913),a=i(8551),o=i(5397),l=i(1072);e.f=n&&!s?Object.defineProperties:function(t,e){a(t);for(var i,n=o(e),s=l(e),h=s.length,u=0;h>u;)r.f(t,i=s[u++],n[i]);return t}},6823:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(i){return"Object"}}},6837:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},6840:(t,e,i)=>{var n=i(4901),s=i(4913),r=i(283),a=i(9433);t.exports=function(t,e,i,o){o||(o={});var l=o.enumerable,h=void 0!==o.name?o.name:e;if(n(i)&&r(i,h,o),o.global)l?t[e]=i:a(e,i);else{try{o.unsafe?t[e]&&(l=!0):delete t[e]}catch(u){}l?t[e]=i:s.f(t,e,{value:i,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return t}},6955:(t,e,i)=>{var n=i(2140),s=i(4901),r=i(2195),a=i(8227)("toStringTag"),o=Object,l="Arguments"===r(function(){return arguments}());t.exports=n?r:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(i){}}(e=o(t),a))?i:l?r(e):"Object"===(n=r(e))&&s(e.callee)?"Arguments":n}},6969:(t,e,i)=>{var n=i(2777),s=i(757);t.exports=function(t){var e=n(t,"string");return s(e)?e:e+""}},6980:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7040:(t,e,i)=>{var n=i(4495);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:(t,e,i)=>{var n=i(9504),s=i(9039),r=i(2195),a=Object,o=n("".split);t.exports=s(function(){return!a("z").propertyIsEnumerable(0)})?function(t){return"String"===r(t)?o(t,""):a(t)}:a},7080:(t,e,i)=>{var n=i(4402).has;t.exports=function(t){return n(t),t}},7347:(t,e,i)=>{var n=i(3724),s=i(9565),r=i(8773),a=i(6980),o=i(5397),l=i(6969),h=i(9297),u=i(5917),c=Object.getOwnPropertyDescriptor;e.f=n?c:function(t,e){if(t=o(t),e=l(e),u)try{return c(t,e)}catch(i){}if(h(t,e))return a(!s(r.f,t,e),t[e])}},7394:(t,e,i)=>{var n=i(4576),s=i(6706),r=i(2195),a=n.ArrayBuffer,o=n.TypeError;t.exports=a&&s(a.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==r(t))throw new o("ArrayBuffer expected");return t.byteLength}},7416:(t,e,i)=>{var n=i(9039),s=i(8227),r=i(3724),a=i(6395),o=s("iterator");t.exports=!n(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,i=new URLSearchParams("a=1&a=2&b=3"),n="";return t.pathname="c%20d",e.forEach(function(t,i){e.delete("b"),n+=i+t}),i.delete("a",2),i.delete("b",void 0),a&&(!t.toJSON||!i.has("a",1)||i.has("a",2)||!i.has("a",void 0)||i.has("b"))||!e.size&&(a||!r)||!e.sort||"https://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==n||"x"!==new URL("https://x",void 0).host})},7476:(t,e,i)=>{var n=i(2195),s=i(9504);t.exports=function(t){if("Function"===n(t))return s(t)}},7566:(t,e,i)=>{var n=i(6840),s=i(9504),r=i(655),a=i(2812),o=URLSearchParams,l=o.prototype,h=s(l.getAll),u=s(l.has),c=new o("a=1");!c.has("a",2)&&c.has("a",void 0)||n(l,"has",function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return u(this,t);var n=h(this,t);a(e,1);for(var s=r(i),o=0;o<n.length;)if(n[o++]===s)return!0;return!1},{enumerable:!0,unsafe:!0})},7588:(t,e,i)=>{var n=i(6518),s=i(9565),r=i(2652),a=i(9306),o=i(8551),l=i(1767),h=i(9539),u=i(4549)("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:u},{forEach:function(t){o(this);try{a(t)}catch(n){h(this,"throw",n)}if(u)return s(u,this,t);var e=l(this),i=0;r(e,function(e){t(e,i++)},{IS_RECORD:!0})}})},7629:(t,e,i)=>{var n=i(6395),s=i(4576),r=i(9433),a="__core-js_shared__",o=t.exports=s[a]||r(a,{});(o.versions||(o.versions=[])).push({version:"3.44.0",mode:n?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:(t,e,i)=>{var n=i(6518),s=i(3440),r=i(9039);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("difference",function(t){return 0===t.size})||r(function(){var t={size:1,has:function(){return!0},keys:function(){var t=0;return{next:function(){var i=t++>1;return e.has(1)&&e.clear(),{done:i,value:2}}}}},e=new Set([1,2,3,4]);return 3!==e.difference(t).size})},{difference:s})},7657:(t,e,i)=>{var n,s,r,a=i(9039),o=i(4901),l=i(34),h=i(2360),u=i(2787),c=i(6840),d=i(8227),p=i(6395),g=d("iterator"),f=!1;[].keys&&("next"in(r=[].keys())?(s=u(u(r)))!==Object.prototype&&(n=s):f=!0),!l(n)||a(function(){var t={};return n[g].call(t)!==t})?n={}:p&&(n=h(n)),o(n[g])||c(n,g,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},7696:(t,e,i)=>{var n=i(1291),s=i(8014),r=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=s(e);if(e!==i)throw new r("Wrong length or index");return i}},7740:(t,e,i)=>{var n=i(9297),s=i(5031),r=i(7347),a=i(4913);t.exports=function(t,e,i){for(var o=s(e),l=a.f,h=r.f,u=0;u<o.length;u++){var c=o[u];n(t,c)||i&&n(i,c)||l(t,c,h(e,c))}}},7750:(t,e,i)=>{var n=i(4117),s=TypeError;t.exports=function(t){if(n(t))throw new s("Can't call method on "+t);return t}},7751:(t,e,i)=>{var n=i(4576),s=i(4901);t.exports=function(t,e){return arguments.length<2?(i=n[t],s(i)?i:void 0):n[t]&&n[t][e];var i}},7811:t=>{t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7936:(t,e,i)=>{var n=i(6518),s=i(5636);s&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return s(this,arguments.length?arguments[0]:void 0,!1)}})},8004:(t,e,i)=>{var n=i(6518),s=i(9039),r=i(8750);n({target:"Set",proto:!0,real:!0,forced:!i(4916)("intersection",function(t){return 2===t.size&&t.has(1)&&t.has(2)})||s(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))})},{intersection:r})},8014:(t,e,i)=>{var n=i(1291),s=Math.min;t.exports=function(t){var e=n(t);return e>0?s(e,9007199254740991):0}},8100:(t,e,i)=>{var n=i(6518),s=i(5636);s&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return s(this,arguments.length?arguments[0]:void 0,!0)}})},8111:(t,e,i)=>{var n=i(6518),s=i(4576),r=i(679),a=i(8551),o=i(4901),l=i(2787),h=i(2106),u=i(4659),c=i(9039),d=i(9297),p=i(8227),g=i(7657).IteratorPrototype,f=i(3724),m=i(6395),v="constructor",w="Iterator",b=p("toStringTag"),y=TypeError,A=s[w],_=m||!o(A)||A.prototype!==g||!c(function(){A({})}),x=function(){if(r(this,g),l(this)===g)throw new y("Abstract class Iterator not directly constructable")},E=function(t,e){f?h(g,t,{configurable:!0,get:function(){return e},set:function(e){if(a(this),this===g)throw new y("You can't redefine this property");d(this,t)?this[t]=e:u(this,t,e)}}):g[t]=e};d(g,b)||E(b,w),!_&&d(g,v)&&g[v]!==Object||E(v,x),x.prototype=g,n({global:!0,constructor:!0,forced:_},{Iterator:x})},8227:(t,e,i)=>{var n=i(4576),s=i(5745),r=i(9297),a=i(3392),o=i(4495),l=i(7040),h=n.Symbol,u=s("wks"),c=l?h.for||h:h&&h.withoutSetter||a;t.exports=function(t){return r(u,t)||(u[t]=o&&r(h,t)?h[t]:c("Symbol."+t)),u[t]}},8235:(t,e,i)=>{var n=i(9504),s=i(9297),r=SyntaxError,a=parseInt,o=String.fromCharCode,l=n("".charAt),h=n("".slice),u=n(/./.exec),c={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},d=/^[\da-f]{4}$/i,p=/^[\u0000-\u001F]$/;t.exports=function(t,e){for(var i=!0,n="";e<t.length;){var g=l(t,e);if("\\"===g){var f=h(t,e,e+2);if(s(c,f))n+=c[f],e+=2;else{if("\\u"!==f)throw new r('Unknown escape sequence: "'+f+'"');var m=h(t,e+=2,e+4);if(!u(d,m))throw new r("Bad Unicode escape at: "+e);n+=o(a(m,16)),e+=4}}else{if('"'===g){i=!1,e++;break}if(u(p,g))throw new r("Bad control character in string literal at: "+e);n+=g,e++}}if(i)throw new r("Unterminated string at: "+e);return{value:n,end:e}}},8335:(t,e,i)=>{var n=i(6518),s=i(3724),r=i(4576),a=i(7751),o=i(9504),l=i(9565),h=i(4901),u=i(34),c=i(4376),d=i(9297),p=i(655),g=i(6198),f=i(4659),m=i(9039),v=i(8235),w=i(4495),b=r.JSON,y=r.Number,A=r.SyntaxError,_=b&&b.parse,x=a("Object","keys"),E=Object.getOwnPropertyDescriptor,S=o("".charAt),C=o("".slice),k=o(/./.exec),M=o([].push),P=/^\d$/,F=/^[1-9]$/,D=/^[\d-]$/,T=/^[\t\n\r ]$/,I=function(t,e,i,n){var s,r,a,o,h,p=t[e],f=n&&p===n.value,m=f&&"string"==typeof n.source?{source:n.source}:{};if(u(p)){var v=c(p),w=f?n.nodes:v?[]:{};if(v)for(s=w.length,a=g(p),o=0;o<a;o++)L(p,o,I(p,""+o,i,o<s?w[o]:void 0));else for(r=x(p),a=g(r),o=0;o<a;o++)h=r[o],L(p,h,I(p,h,i,d(w,h)?w[h]:void 0))}return l(i,t,e,p,m)},L=function(t,e,i){if(s){var n=E(t,e);if(n&&!n.configurable)return}void 0===i?delete t[e]:f(t,e,i)},R=function(t,e,i,n){this.value=t,this.end=e,this.source=i,this.nodes=n},N=function(t,e){this.source=t,this.index=e};N.prototype={fork:function(t){return new N(this.source,t)},parse:function(){var t=this.source,e=this.skip(T,this.index),i=this.fork(e),n=S(t,e);if(k(D,n))return i.number();switch(n){case"{":return i.object();case"[":return i.array();case'"':return i.string();case"t":return i.keyword(!0);case"f":return i.keyword(!1);case"n":return i.keyword(null)}throw new A('Unexpected character: "'+n+'" at: '+e)},node:function(t,e,i,n,s){return new R(e,n,t?null:C(this.source,i,n),s)},object:function(){for(var t=this.source,e=this.index+1,i=!1,n={},s={};e<t.length;){if(e=this.until(['"',"}"],e),"}"===S(t,e)&&!i){e++;break}var r=this.fork(e).string(),a=r.value;e=r.end,e=this.until([":"],e)+1,e=this.skip(T,e),r=this.fork(e).parse(),f(s,a,r),f(n,a,r.value),e=this.until([",","}"],r.end);var o=S(t,e);if(","===o)i=!0,e++;else if("}"===o){e++;break}}return this.node(1,n,this.index,e,s)},array:function(){for(var t=this.source,e=this.index+1,i=!1,n=[],s=[];e<t.length;){if(e=this.skip(T,e),"]"===S(t,e)&&!i){e++;break}var r=this.fork(e).parse();if(M(s,r),M(n,r.value),e=this.until([",","]"],r.end),","===S(t,e))i=!0,e++;else if("]"===S(t,e)){e++;break}}return this.node(1,n,this.index,e,s)},string:function(){var t=this.index,e=v(this.source,this.index+1);return this.node(0,e.value,t,e.end)},number:function(){var t=this.source,e=this.index,i=e;if("-"===S(t,i)&&i++,"0"===S(t,i))i++;else{if(!k(F,S(t,i)))throw new A("Failed to parse number at: "+i);i=this.skip(P,i+1)}if("."===S(t,i)&&(i=this.skip(P,i+1)),("e"===S(t,i)||"E"===S(t,i))&&(i++,"+"!==S(t,i)&&"-"!==S(t,i)||i++,i===(i=this.skip(P,i))))throw new A("Failed to parse number's exponent value at: "+i);return this.node(0,y(C(t,e,i)),e,i)},keyword:function(t){var e=""+t,i=this.index,n=i+e.length;if(C(this.source,i,n)!==e)throw new A("Failed to parse value at: "+i);return this.node(0,t,i,n)},skip:function(t,e){for(var i=this.source;e<i.length&&k(t,S(i,e));e++);return e},until:function(t,e){e=this.skip(T,e);for(var i=S(this.source,e),n=0;n<t.length;n++)if(t[n]===i)return e;throw new A('Unexpected character: "'+i+'" at: '+e)}};var O=m(function(){var t,e="9007199254740993";return _(e,function(e,i,n){t=n.source}),t!==e}),W=w&&!m(function(){return 1/_("-0 \t")!=-1/0});n({target:"JSON",stat:!0,forced:O},{parse:function(t,e){return W&&!h(e)?_(t):function(t,e){t=p(t);var i=new N(t,0),n=i.parse(),s=n.value,r=i.skip(T,n.end);if(r<t.length)throw new A('Unexpected extra character: "'+S(t,r)+'" after the parsed data at: '+r);return h(e)?I({"":s},"",e,n):s}(t,e)}})},8469:(t,e,i)=>{var n=i(9504),s=i(507),r=i(4402),a=r.Set,o=r.proto,l=n(o.forEach),h=n(o.keys),u=h(new a).next;t.exports=function(t,e,i){return i?s({iterator:h(t),next:u},e):l(t,e)}},8480:(t,e,i)=>{var n=i(1828),s=i(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},8527:(t,e,i)=>{var n=i(7080),s=i(4402).has,r=i(5170),a=i(3789),o=i(507),l=i(9539);t.exports=function(t){var e=n(this),i=a(t);if(r(e)<i.size)return!1;var h=i.getIterator();return!1!==o(h,function(t){if(!s(e,t))return l(h,"normal",!1)})}},8551:(t,e,i)=>{var n=i(34),s=String,r=TypeError;t.exports=function(t){if(n(t))return t;throw new r(s(t)+" is not an object")}},8622:(t,e,i)=>{var n=i(4576),s=i(4901),r=n.WeakMap;t.exports=s(r)&&/native code/.test(String(r))},8686:(t,e,i)=>{var n=i(3724),s=i(9039);t.exports=n&&s(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8721:(t,e,i)=>{var n=i(3724),s=i(9504),r=i(2106),a=URLSearchParams.prototype,o=s(a.forEach);n&&!("size"in a)&&r(a,"size",{get:function(){var t=0;return o(this,function(){t++}),t},configurable:!0,enumerable:!0})},8727:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8750:(t,e,i)=>{var n=i(7080),s=i(4402),r=i(5170),a=i(3789),o=i(8469),l=i(507),h=s.Set,u=s.add,c=s.has;t.exports=function(t){var e=n(this),i=a(t),s=new h;return r(e)>i.size?l(i.getIterator(),function(t){c(e,t)&&u(s,t)}):o(e,function(t){i.includes(t)&&u(s,t)}),s}},8773:(t,e)=>{var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,s=n&&!i.call({1:2},1);e.f=s?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},8981:(t,e,i)=>{var n=i(7750),s=Object;t.exports=function(t){return s(n(t))}},9039:t=>{t.exports=function(t){try{return!!t()}catch(e){return!0}}},9286:(t,e,i)=>{var n=i(4402),s=i(8469),r=n.Set,a=n.add;t.exports=function(t){var e=new r;return s(t,function(t){a(e,t)}),e}},9297:(t,e,i)=>{var n=i(9504),s=i(8981),r=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(s(t),e)}},9306:(t,e,i)=>{var n=i(4901),s=i(6823),r=TypeError;t.exports=function(t){if(n(t))return t;throw new r(s(t)+" is not a function")}},9429:(t,e,i)=>{var n=i(4576),s=i(6193);t.exports=function(t){if(s){try{return n.process.getBuiltinModule(t)}catch(e){}try{return Function('return require("'+t+'")')()}catch(e){}}}},9433:(t,e,i)=>{var n=i(4576),s=Object.defineProperty;t.exports=function(t,e){try{s(n,t,{value:e,configurable:!0,writable:!0})}catch(i){n[t]=e}return e}},9462:(t,e,i)=>{var n=i(9565),s=i(2360),r=i(6699),a=i(6279),o=i(8227),l=i(1181),h=i(5966),u=i(7657).IteratorPrototype,c=i(2529),d=i(9539),p=i(1385),g=o("toStringTag"),f="IteratorHelper",m="WrapForValidIterator",v="normal",w="throw",b=l.set,y=function(t){var e=l.getterFor(t?m:f);return a(s(u),{next:function(){var i=e(this);if(t)return i.nextHandler();if(i.done)return c(void 0,!0);try{var n=i.nextHandler();return i.returnHandlerResult?n:c(n,i.done)}catch(s){throw i.done=!0,s}},return:function(){var i=e(this),s=i.iterator;if(i.done=!0,t){var r=h(s,"return");return r?n(r,s):c(void 0,!0)}if(i.inner)try{d(i.inner.iterator,v)}catch(a){return d(s,w,a)}if(i.openIters)try{p(i.openIters,v)}catch(a){return d(s,w,a)}return s&&d(s,v),c(void 0,!0)}})},A=y(!0),_=y(!1);r(_,g,"Iterator Helper"),t.exports=function(t,e,i){var n=function(n,s){s?(s.iterator=n.iterator,s.next=n.next):s=n,s.type=e?m:f,s.returnHandlerResult=!!i,s.nextHandler=t,s.counter=0,s.done=!1,b(this,s)};return n.prototype=e?A:_,n}},9504:(t,e,i)=>{var n=i(616),s=Function.prototype,r=s.call,a=n&&s.bind.bind(r,r);t.exports=n?a:function(t){return function(){return r.apply(t,arguments)}}},9519:(t,e,i)=>{var n,s,r=i(4576),a=i(2839),o=r.process,l=r.Deno,h=o&&o.versions||l&&l.version,u=h&&h.v8;u&&(s=(n=u.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!s&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(s=+n[1]),t.exports=s},9539:(t,e,i)=>{var n=i(9565),s=i(8551),r=i(5966);t.exports=function(t,e,i){var a,o;s(t);try{if(!(a=r(t,"return"))){if("throw"===e)throw i;return i}a=n(a,t)}catch(l){o=!0,a=l}if("throw"===e)throw i;if(o)throw a;return s(a),i}},9565:(t,e,i)=>{var n=i(616),s=Function.prototype.call;t.exports=n?s.bind(s):function(){return s.apply(s,arguments)}},9577:(t,e,i)=>{var n=i(9928),s=i(4644),r=i(1108),a=i(1291),o=i(5854),l=s.aTypedArray,h=s.getTypedArrayConstructor,u=s.exportTypedArrayMethod,c=function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}(),d=c&&function(){try{new Int8Array(1).with(-.5,1)}catch(t){return!0}}();u("with",{with:function(t,e){var i=l(this),s=a(t),u=r(i)?o(e):+e;return n(i,h(i),s,u)}}.with,!c||d)},9617:(t,e,i)=>{var n=i(5397),s=i(5610),r=i(6198),a=function(t){return function(e,i,a){var o=n(e),l=r(o);if(0===l)return!t&&-1;var h,u=s(a,l);if(t&&i!=i){for(;l>u;)if((h=o[u++])!=h)return!0}else for(;l>u;u++)if((t||u in o)&&o[u]===i)return t||u||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},9835:t=>{t.exports=function(t){try{var e=new Set,i={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](i);return 1===n.size&&4===n.values().next().value}catch(s){return!1}}},9928:(t,e,i)=>{var n=i(6198),s=i(1291),r=RangeError;t.exports=function(t,e,i,a){var o=n(t),l=s(i),h=l<0?o+l:l;if(h>=o||h<0)throw new r("Incorrect index");for(var u=new e(o),c=0;c<o;c++)u[c]=c===h?a:t[c];return u}}},xA={};Q(4114),Q(6573),Q(8100),Q(7936),Q(8111),Q(2489),Q(7588),Q(1701),Q(4628),Q(7642),Q(8004),Q(3853),Q(5876),Q(2475),Q(5024),Q(1698),Q(9577),Q(4603),Q(7566),Q(8721);const{AbortException:EA,AnnotationEditorLayer:SA,AnnotationEditorParamsType:CA,AnnotationEditorType:kA,AnnotationEditorUIManager:MA,AnnotationLayer:PA,AnnotationMode:FA,AnnotationType:DA,build:TA,ColorPicker:IA,createValidAbsoluteUrl:LA,DOMSVGFactory:RA,DrawLayer:NA,FeatureTest:OA,fetchData:WA,getDocument:BA,getFilenameFromUrl:jA,getPdfFilenameFromUrl:VA,getRGB:$A,getUuid:HA,getXfaPageViewport:zA,GlobalWorkerOptions:UA,ImageKind:GA,InvalidPDFException:qA,isDataScheme:XA,isPdfFile:YA,isValidExplicitDest:KA,MathClamp:QA,noContextMenu:ZA,normalizeUnicode:JA,OPS:t_,OutputScale:e_,PasswordResponses:i_,PDFDataRangeTransport:n_,PDFDateString:s_,PDFWorker:r_,PermissionFlag:a_,PixelsPerInch:o_,RenderingCancelledException:l_,ResponseException:h_,setLayerDimensions:u_,shadow:c_,SignatureExtractor:d_,stopEvent:p_,SupportedImageMimeTypes:g_,TextLayer:f_,TouchManager:m_,updateUrlHash:v_,Util:w_,VerbosityLevel:b_,version:y_,XfaLayer:A_}=globalThis.pdfjsLib,__={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},x_={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},E_={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2},S_=/[\x00-\x1F]/g;new Promise(function(t){window.requestAnimationFrame(t)});const C_=document.documentElement.style;Ld=new WeakMap,Rd=new WeakMap,Nd=new WeakMap,Od=new WeakMap,Wd=new WeakMap;const k_=function(){const t=document.createElement("div");return t.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)","calc(1320px)"===t.style.width?Math.fround:t=>t}(),M_=0,P_=1,F_=2,D_=3,T_=4,I_=5,L_=6,R_=7;let N_;const O_={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},W_={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},B_=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let j_;const V_=/\p{M}+/gu,$_=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,H_=/([^\p{M}])\p{M}*$/u,z_=/^\p{M}*([^\p{M}])/u,U_=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,G_=new Map,q_=new Map;let X_=null,Y_=null;class K_{constructor({linkService:t,eventBus:e,updateMatchesCountOnProgress:i=!0}){$m(this,$d),$m(this,Bd,null),$m(this,jd,!0),$m(this,Vd,0),this._linkService=t,this._eventBus=e,Hm(this,jd,i),this.onIsPageVisible=null,zm(this,$d,zd).call(this),e._on("find",zm(this,$d,Hd).bind(this)),e._on("findbarclose",zm(this,$d,sp).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return Vm(this,Bd)}setDocument(t){this._pdfDocument&&zm(this,$d,zd).call(this),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}scrollMatchIntoView({element:t=null,selectedLeft:e=0,pageIndex:i=-1,matchIndex:n=-1}){this._scrollMatches&&t&&-1!==n&&n===this._selected.matchIdx&&-1!==i&&i===this._selected.pageIdx&&(this._scrollMatches=!1,Z(t,{top:-50,left:e+-400},!0))}match(t,e,i){const n=this._hasDiacritics[i];let s=!1;if("string"==typeof t?[s,t]=zm(this,$d,Xd).call(this,t,n):t=t.sort().reverse().map(t=>{const[e,i]=zm(this,$d,Xd).call(this,t,n);return s||(s=e),`(${i})`}).join("|"),!t)return;const{caseSensitive:r,entireWord:a}=Vm(this,Bd);t=new RegExp(t,`g${s?"u":""}${r?"":"i"}`);const o=[];let l;for(;null!==(l=t.exec(e));)a&&!zm(this,$d,qd).call(this,e,l.index,l[0].length)||o.push({index:l.index,length:l[0].length});return o}}Bd=new WeakMap,jd=new WeakMap,Vd=new WeakMap,$d=new WeakSet,Hd=function(t){if(!t)return;const e=this._pdfDocument,{type:i}=t;(null===Vm(this,Bd)||zm(this,$d,Gd).call(this,t))&&(this._dirtyMatch=!0),Hm(this,Bd,t),"highlightallchange"!==i&&zm(this,$d,op).call(this,O_.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||e&&this._pdfDocument!==e)return;zm(this,$d,Kd).call(this);const t=!this._highlightMatches,n=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?zm(this,$d,Jd).call(this):"again"===i?(zm(this,$d,Jd).call(this),t&&Vm(this,Bd).highlightAll&&zm(this,$d,Zd).call(this)):"highlightallchange"===i?(n?zm(this,$d,Jd).call(this):this._highlightMatches=!0,zm(this,$d,Zd).call(this)):zm(this,$d,Jd).call(this):this._findTimeout=setTimeout(()=>{zm(this,$d,Jd).call(this),this._findTimeout=null},250)})},zd=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],Hm(this,Vd,0),Hm(this,Bd,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()},Ud=function(){const{query:t}=Vm(this,Bd);return"string"==typeof t?(t!==this._rawQuery&&(this._rawQuery=t,[this._normalizedQuery]=ot(t)),this._normalizedQuery):(t||[]).filter(t=>!!t).map(t=>ot(t)[0])},Gd=function(t){var e,i;const n=t.query,s=Vm(this,Bd).query,r=typeof n;if(r!==typeof s)return!0;if("string"===r){if(n!==s)return!0}else if(JSON.stringify(n)!==JSON.stringify(s))return!0;switch(t.type){case"again":const t=this._selected.pageIdx+1,n=this._linkService;return t>=1&&t<=n.pagesCount&&t!==n.page&&!(null==(i=null==(e=this.onIsPageVisible)?void 0:e.call(this,t))||i);case"highlightallchange":return!1}return!0},qd=function(t,e,i){let n=t.slice(0,e).match(H_);if(n){const i=t.charCodeAt(e),s=n[1].charCodeAt(0);if(at(i)===at(s))return!1}if(n=t.slice(e+i).match(z_),n){const s=t.charCodeAt(e+i-1),r=n[1].charCodeAt(0);if(at(s)===at(r))return!1}return!0},Xd=function(t,e){const{matchDiacritics:i}=Vm(this,Bd);let n=!1;return(t=t.replaceAll($_,(t,s,r,a,o,l)=>s?`[ ]*\\${s}[ ]*`:r?`[ ]*${r}[ ]*`:a?"[ ]+":i?o||l:o?B_.has(o.charCodeAt(0))?o:"":e?(n=!0,`${l}\\p{M}*`):l)).endsWith("[ ]*")&&(t=t.slice(0,t.length-4)),i&&e&&(j_||(j_=String.fromCharCode(...B_)),n=!0,t=`${t}(?=[${j_}]|[^\\p{M}]|$)`),[n,t]},Yd=function(t){if(!Vm(this,Bd))return;const e=Vm(this,$d,Ud);if(0===e.length)return;const i=this._pageContents[t],n=this.match(e,i,t),s=this._pageMatches[t]=[],r=this._pageMatchesLength[t]=[],a=this._pageDiffs[t];null==n||n.forEach(({index:t,length:e})=>{const[i,n]=lt(a,t,e);n&&(s.push(i),r.push(n))}),Vm(this,Bd).highlightAll&&zm(this,$d,Qd).call(this,t),this._resumePageIdx===t&&(this._resumePageIdx=null,zm(this,$d,ep).call(this));const o=s.length;this._matchesCountTotal+=o,Vm(this,jd)?o>0&&zm(this,$d,ap).call(this):++Um(this,Vd)._===this._linkService.pagesCount&&zm(this,$d,ap).call(this)},Kd=function(){if(this._extractTextPromises.length>0)return;let t=Promise.resolve();const e={disableNormalization:!0},i=this._pdfDocument;for(let n=0,s=this._linkService.pagesCount;n<s;n++){const{promise:s,resolve:r}=Promise.withResolvers();this._extractTextPromises[n]=s,t=t.then(async()=>{i===this._pdfDocument?await i.getPage(n+1).then(t=>t.getTextContent(e)).then(t=>{const e=[];for(const i of t.items)e.push(i.str),i.hasEOL&&e.push("\n");[this._pageContents[n],this._pageDiffs[n],this._hasDiacritics[n]]=ot(e.join("")),r()},t=>{console.error(`Unable to get text content for page ${n+1}`,t),this._pageContents[n]="",this._pageDiffs[n]=null,this._hasDiacritics[n]=!1,r()}):r()})}},Qd=function(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})},Zd=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},Jd=function(){const t=Vm(this,Bd).findPrevious,e=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=e,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,Hm(this,Vd,0),this._matchesCountTotal=0,zm(this,$d,Zd).call(this);for(let t=0;t<i;t++)this._pendingFindMatches.has(t)||(this._pendingFindMatches.add(t),this._extractTextPromises[t].then(()=>{this._pendingFindMatches.delete(t),zm(this,$d,Yd).call(this,t)}))}if(0===Vm(this,$d,Ud).length)return void zm(this,$d,op).call(this,O_.FOUND);if(this._resumePageIdx)return;const n=this._offset;if(this._pagesToSearch=i,null!==n.matchIdx){const e=this._pageMatches[n.pageIdx].length;if(!t&&n.matchIdx+1<e||t&&n.matchIdx>0)return n.matchIdx=t?n.matchIdx-1:n.matchIdx+1,void zm(this,$d,np).call(this,!0);zm(this,$d,ip).call(this,t)}zm(this,$d,ep).call(this)},tp=function(t){const e=this._offset,i=t.length,n=Vm(this,Bd).findPrevious;return i?(e.matchIdx=n?i-1:0,zm(this,$d,np).call(this,!0),!0):(zm(this,$d,ip).call(this,n),!!(e.wrapped&&(e.matchIdx=null,this._pagesToSearch<0))&&(zm(this,$d,np).call(this,!1),!0))},ep=function(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let t=null;do{const e=this._offset.pageIdx;if(t=this._pageMatches[e],!t){this._resumePageIdx=e;break}}while(!zm(this,$d,tp).call(this,t))},ip=function(t){const e=this._offset,i=this._linkService.pagesCount;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this._pagesToSearch--,(e.pageIdx>=i||e.pageIdx<0)&&(e.pageIdx=t?i-1:0,e.wrapped=!0)},np=function(t=!1){let e=O_.NOT_FOUND;const i=this._offset.wrapped;if(this._offset.wrapped=!1,t){const t=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,e=i?O_.WRAPPED:O_.FOUND,-1!==t&&t!==this._selected.pageIdx&&zm(this,$d,Qd).call(this,t)}zm(this,$d,op).call(this,e,Vm(this,Bd).findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,zm(this,$d,Qd).call(this,this._selected.pageIdx))},sp=function(t){const e=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||e&&this._pdfDocument!==e||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),zm(this,$d,op).call(this,O_.FOUND),this._highlightMatches=!1,zm(this,$d,Zd).call(this))})},rp=function(){var t;const{pageIdx:e,matchIdx:i}=this._selected;let n=0,s=this._matchesCountTotal;if(-1!==i){for(let i=0;i<e;i++)n+=(null==(t=this._pageMatches[i])?void 0:t.length)||0;n+=i+1}return(n<1||n>s)&&(n=s=0),{current:n,total:s}},ap=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:zm(this,$d,rp).call(this)})},op=function(t,e=!1){var i,n,s,r;(Vm(this,jd)||Vm(this,Vd)===this._linkService.pagesCount&&t!==O_.PENDING)&&this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:e,entireWord:null!=(n=null==(i=Vm(this,Bd))?void 0:i.entireWord)?n:null,matchesCount:zm(this,$d,rp).call(this),rawQuery:null!=(r=null==(s=Vm(this,Bd))?void 0:s.query)?r:null})},Q(8335);const Q_={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class Z_{constructor({eventBus:t,externalLinkTarget:e=null,externalLinkRel:i=null,ignoreDestinationZoom:n=!1}={}){Bm(this,"externalLinkEnabled",!0),this.eventBus=t,this.externalLinkTarget=e,this.externalLinkRel=i,this._ignoreDestinationZoom=n,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(t,e=null){this.baseUrl=e,this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setHistory(t){this.pdfHistory=t}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(t){this.pdfDocument&&(this.pdfViewer.currentPageNumber=t)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(t){this.pdfDocument&&(this.pdfViewer.pagesRotation=t)}get isInPresentationMode(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}async goToDestination(t){if(!this.pdfDocument)return;let e,i,n;if("string"==typeof t?(e=t,i=await this.pdfDocument.getDestination(t)):(e=null,i=await t),!Array.isArray(i))return void console.error(`goToDestination: "${i}" is not a valid destination array, for dest="${t}".`);const[s]=i;if(s&&"object"==typeof s){if(n=this.pdfDocument.cachedPageNumber(s),!n)try{n=await this.pdfDocument.getPageIndex(s)+1}catch{return void console.error(`goToDestination: "${s}" is not a valid page reference, for dest="${t}".`)}}else Number.isInteger(s)&&(n=s+1);if(!n||n<1||n>this.pagesCount)return void console.error(`goToDestination: "${n}" is not a valid page number, for dest="${t}".`);this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:e,explicitDest:i,pageNumber:n})),this.pdfViewer.scrollPageIntoView({pageNumber:n,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom});const r=new AbortController;this.eventBus._on("textlayerrendered",t=>{t.pageNumber===n&&(t.source.textLayer.div.focus(),r.abort())},{signal:r.signal})}goToPage(t){if(!this.pdfDocument)return;const e="string"==typeof t&&this.pdfViewer.pageLabelToPageNumber(t)||0|t;Number.isInteger(e)&&e>0&&e<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(e)),this.pdfViewer.scrollPageIntoView({pageNumber:e})):console.error(`PDFLinkService.goToPage: "${t}" is not a valid page.`)}addLinkAttributes(t,e,i=!1){if(!e||"string"!=typeof e)throw new Error('A valid "url" parameter must provided.');const n=i?Q_.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?t.href=t.title=e:(t.href="",t.title=`Disabled: ${e}`,t.onclick=()=>!1);let r="";switch(n){case Q_.NONE:break;case Q_.SELF:r="_self";break;case Q_.BLANK:r="_blank";break;case Q_.PARENT:r="_parent";break;case Q_.TOP:r="_top"}t.target=r,t.rel="string"==typeof s?s:"noopener noreferrer nofollow"}getDestinationHash(t){if("string"==typeof t){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){const e=JSON.stringify(t);if(e.length>0)return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}getAnchorUrl(t){return this.baseUrl?this.baseUrl+t:t}setHash(t){if(!this.pdfDocument)return;let e,i;if(t.includes("=")){const n=J(t);if(n.has("search")){const t=n.get("search").replaceAll('"',""),e="true"===n.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:e?t:t.match(/\S+/g)})}if(n.has("page")&&(e=0|n.get("page")||1),n.has("zoom")){const t=n.get("zoom").split(","),e=t[0],s=parseFloat(e);e.includes("Fit")?"Fit"===e||"FitB"===e?i=[null,{name:e}]:"FitH"===e||"FitBH"===e||"FitV"===e||"FitBV"===e?i=[null,{name:e},t.length>1?0|t[1]:null]:"FitR"===e?5!==t.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:e},0|t[1],0|t[2],0|t[3],0|t[4]]:console.error(`PDFLinkService.setHash: "${e}" is not a valid zoom value.`):i=[null,{name:"XYZ"},t.length>1?0|t[1]:null,t.length>2?0|t[2]:null,s?s/100:e]}return i?this.pdfViewer.scrollPageIntoView({pageNumber:e||this.page,destArray:i,allowNegativeOffset:!0}):e&&(this.page=e),n.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:n.get("pagemode")}),void(n.has("nameddest")&&this.goToDestination(n.get("nameddest")))}i=unescape(t);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}"string"==typeof i||KA(i)?this.goToDestination(i):console.error(`PDFLinkService.setHash: "${unescape(t)}" is not a valid destination.`)}executeNamedAction(t){var e,i;if(this.pdfDocument){switch(t){case"GoBack":null==(e=this.pdfHistory)||e.back();break;case"GoForward":null==(i=this.pdfHistory)||i.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}}async executeSetOCGState(t){if(!this.pdfDocument)return;const e=this.pdfDocument,i=await this.pdfViewer.optionalContentConfigPromise;e===this.pdfDocument&&(i.setOCGState(t),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i))}}class J_ extends Z_{setDocument(t,e=null){}}class tx{constructor({pdfPage:t,linkService:e,downloadManager:i,annotationStorage:n=null,imageResourcesPath:s="",renderForms:r=!0,enableScripting:a=!1,hasJSActionsPromise:o=null,fieldObjectsPromise:l=null,annotationCanvasMap:h=null,accessibilityManager:u=null,annotationEditorUIManager:c=null,onAppend:d=null}){$m(this,pp),$m(this,lp,null),$m(this,hp,!1),$m(this,up,null),$m(this,cp,null),$m(this,dp,!1),this.pdfPage=t,this.linkService=e,this.downloadManager=i,this.imageResourcesPath=s,this.renderForms=r,this.annotationStorage=n,this.enableScripting=a,this._hasJSActionsPromise=o||Promise.resolve(!1),this._fieldObjectsPromise=l||Promise.resolve(null),this._annotationCanvasMap=h,this._accessibilityManager=u,this._annotationEditorUIManager=c,Hm(this,up,d),this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=e.eventBus}async render({viewport:t,intent:e="display",structTreeLayer:i=null}){var n,s;if(this.div){if(this._cancelled||!this.annotationLayer)return;return void this.annotationLayer.update({viewport:t.clone({dontFlip:!0})})}const[r,a,o]=await Promise.all([this.pdfPage.getAnnotations({intent:e}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const l=this.div=document.createElement("div");if(l.className="annotationLayer",null==(n=Vm(this,up))||n.call(this,l),0===r.length)return Hm(this,lp,r),void this.hide(!0);zm(this,pp,gp).call(this,t,i),await this.annotationLayer.render({annotations:r,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:a,fieldObjects:o}),Hm(this,lp,r),this.linkService.isInPresentationMode&&zm(this,pp,fp).call(this,3),Vm(this,cp)||(Hm(this,cp,new AbortController),null==(s=this._eventBus)||s._on("presentationmodechanged",t=>{zm(this,pp,fp).call(this,t.state)},{signal:Vm(this,cp).signal}))}cancel(){var t;this._cancelled=!0,null==(t=Vm(this,cp))||t.abort(),Hm(this,cp,null)}hide(t=!1){Hm(this,hp,!t),this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){var t;return!!(null==(t=this.annotationLayer)?void 0:t.hasEditableAnnotations())}async injectLinkAnnotations({inferredLinks:t,viewport:e,structTreeLayer:i=null}){if(null===Vm(this,lp))throw new Error("`render` method must be called before `injectLinkAnnotations`.");if(this._cancelled||Vm(this,dp))return;Hm(this,dp,!0);const n=Vm(this,lp).length?zm(this,pp,mp).call(this,t):t;n.length&&(this.annotationLayer||(zm(this,pp,gp).call(this,e,i),u_(this.div,e)),await this.annotationLayer.addLinkAnnotations(n,this.linkService),Vm(this,hp)||(this.div.hidden=!1))}}lp=new WeakMap,hp=new WeakMap,up=new WeakMap,cp=new WeakMap,dp=new WeakMap,pp=new WeakSet,gp=function(t,e){this.annotationLayer=new PA({div:this.div,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:t.clone({dontFlip:!0}),structTreeLayer:e})},fp=function(t){if(!this.div)return;let e=!1;switch(t){case 3:e=!0;break;case 1:break;default:return}for(const i of this.div.childNodes)i.hasAttribute("data-internal-link")||(i.inert=e)},mp=function(t){function e(t){if(!t.quadPoints)return[t.rect];const e=[];for(let i=2,n=t.quadPoints.length;i<n;i+=8){const n=t.quadPoints[i],s=t.quadPoints[i+1],r=t.quadPoints[i+2],a=t.quadPoints[i+3];e.push([r,a,n,s])}return e}function i(t,i){const n=[],s=e(t),r=e(i);for(const e of s)for(const t of r){const i=w_.intersect(e,t);i&&n.push(i)}return n}function n(t){let e=0;for(const i of t)e+=Math.abs((i[2]-i[0])*(i[3]-i[1]));return e}return t.filter(t=>{let s;for(const r of Vm(this,lp)){if(r.annotationType!==DA.LINK||!r.url)continue;const a=i(r,t);if(0!==a.length&&(null!=s||(s=n(e(t))),n(a)/s>.5))return!1}return!0})};class ex{constructor(){$m(this,vp,new WeakMap)}downloadData(t,e,i){ht(URL.createObjectURL(new Blob([t],{type:i})),e)}openOrDownloadData(t,e,i=null){const n=YA(e)?"application/pdf":"";return this.downloadData(t,e,n),!1}download(t,e,i){let n;if(t)n=URL.createObjectURL(new Blob([t],{type:"application/pdf"}));else{if(!LA(e,"http://example.com"))return void console.error(`download - not a valid URL: ${e}`);n=e+"#pdfjs.action=download"}ht(n,i)}}vp=new WeakMap;class ix{constructor(){$m(this,wp,Object.create(null))}on(t,e,i=null){this._on(t,e,{external:!0,once:null==i?void 0:i.once,signal:null==i?void 0:i.signal})}off(t,e,i=null){this._off(t,e)}dispatch(t,e){const i=Vm(this,wp)[t];if(!i||0===i.length)return;let n;for(const{listener:s,external:r,once:a}of i.slice(0))a&&this._off(t,s),r?(n||(n=[])).push(s):s(e);if(n){for(const t of n)t(e);n=null}}_on(t,e,i=null){var n;let s=null;if((null==i?void 0:i.signal)instanceof AbortSignal){const{signal:n}=i;if(n.aborted)return void console.error("Cannot use an `aborted` signal.");const r=()=>this._off(t,e);s=()=>n.removeEventListener("abort",r),n.addEventListener("abort",r)}((n=Vm(this,wp))[t]||(n[t]=[])).push({listener:e,external:!0===(null==i?void 0:i.external),once:!0===(null==i?void 0:i.once),rmAbort:s})}_off(t,e,i=null){var n;const s=Vm(this,wp)[t];if(s)for(let r=0,a=s.length;r<a;r++){const t=s[r];if(t.listener===e)return null==(n=t.rmAbort)||n.call(t),void s.splice(r,1)}}}wp=new WeakMap;class nx{constructor(t){this.value=t}valueOf(){return this.value}}class sx extends nx{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}}class rx extends nx{constructor(t,e={}){super(t),this.opts=e}toString(t){if(t)try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){t.reportError(e)}return this.value.toString(10)}}class ax extends nx{static supportsValue(t){if("number"==typeof t)return!0;if(t instanceof Date)return!0;if(t instanceof nx)return ax.supportsValue(t.valueOf());if("Temporal"in globalThis){const e=globalThis.Temporal;if(t instanceof e.Instant||t instanceof e.PlainDateTime||t instanceof e.PlainDate||t instanceof e.PlainMonthDay||t instanceof e.PlainTime||t instanceof e.PlainYearMonth)return!0}return!1}constructor(t,e={}){t instanceof ax?(e={...t.opts,...e},t=t.value):t instanceof nx&&(t=t.valueOf()),"object"==typeof t&&"calendarId"in t&&void 0===e.calendar&&(e={...e,calendar:t.calendarId}),super(t),this.opts=e}[Symbol.toPrimitive](t){return"string"===t?this.toString():this.toNumber()}toNumber(){const t=this.value;if("number"==typeof t)return t;if(t instanceof Date)return t.getTime();if("epochMilliseconds"in t)return t.epochMilliseconds;if("toZonedDateTime"in t)return t.toZonedDateTime("UTC").epochMilliseconds;throw new TypeError("Unwrapping a non-number value as a number")}toString(t){if(t)try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){t.reportError(e)}return"number"==typeof this.value||this.value instanceof Date?new Date(this.value).toISOString():this.value.toString()}}class ox{constructor(t,e,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=e,this.args=i}reportError(t){if(!(this.errors&&t instanceof Error))throw t;this.errors.push(t)}memoizeIntlObject(t,e){let i=this.bundle._intls.get(t);i||(i={},this.bundle._intls.set(t,i));let n=JSON.stringify(e);return i[n]||(i[n]=new t(this.bundle.locales,e)),i[n]}}const lx=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],hx=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"],ux=new Map;class cx{constructor(t,{functions:e,useIsolating:i=!0,transform:n=t=>t}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(t)?t:[t],this._functions={NUMBER:vt,DATETIME:wt,...e},this._useIsolating=i,this._transform=n,this._intls=function(t){const e=Array.isArray(t)?t.join(" "):t;let i=ux.get(e);return void 0===i&&(i=new Map,ux.set(e,i)),i}(t)}hasMessage(t){return this._messages.has(t)}getMessage(t){return this._messages.get(t)}addResource(t,{allowOverrides:e=!1}={}){const i=[];for(let n=0;n<t.body.length;n++){let s=t.body[n];if(s.id.startsWith("-")){if(!1===e&&this._terms.has(s.id)){i.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(!1===e&&this._messages.has(s.id)){i.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return i}formatPattern(t,e=null,i=null){if("string"==typeof t)return this._transform(t);let n=new ox(this,i,e);try{return gt(n,t).toString(n)}catch(s){if(n.errors&&s instanceof Error)return n.errors.push(s),(new sx).toString(n);throw s}}}const dx=/^(-?[a-zA-Z][\w-]*) *= */gm,px=/\.([a-zA-Z][\w-]*) *= */y,gx=/\*?\[/y,fx=/(-?[0-9]+(?:\.([0-9]+))?)/y,mx=/([a-zA-Z][\w-]*)/y,vx=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,wx=/^[A-Z][A-Z0-9_-]*$/,bx=/([^{}\n\r]+)/y,yx=/([^\\"\n\r]*)/y,Ax=/\\([\\"])/y,_x=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,xx=/^\n+/,Ex=/ +$/,Sx=/ *\r?\n/g,Cx=/( *)$/,kx=/{\s*/y,Mx=/\s*}/y,Px=/\[\s*/y,Fx=/\s*] */y,Dx=/\s*\(\s*/y,Tx=/\s*->\s*/y,Ix=/\s*:\s*/y,Lx=/\s*,?\s*/y,Rx=/\s+/y;class Nx{constructor(t){function e(e){return e.lastIndex=b,e.test(t)}function i(e,i){if(t[b]===e)return b++,!0;if(i)throw new i(`Expected ${e}`);return!1}function n(t,i){if(e(t))return b=t.lastIndex,!0;if(i)throw new i(`Expected ${t.toString()}`);return!1}function s(e){e.lastIndex=b;let i=e.exec(t);if(null===i)throw new SyntaxError(`Expected ${e.toString()}`);return b=e.lastIndex,i}function r(t){return s(t)[1]}function a(t){let i=o(),n=function(){let t=Object.create(null);for(;e(px);){let e=r(px),i=o();if(null===i)throw new SyntaxError("Expected attribute value");t[e]=i}return t}();if(null===i&&0===Object.keys(n).length)throw new SyntaxError("Expected message value or attributes");return{id:t,value:i,attributes:n}}function o(){let i;if(e(bx)&&(i=r(bx)),"{"===t[b]||"}"===t[b])return l(i?[i]:[],1/0);let n=m();return n?i?l([i,n],n.length):(n.value=v(n.value,xx),l([n],n.length)):i?v(i,Ex):null}function l(i=[],n){for(;;){if(e(bx)){i.push(r(bx));continue}if("{"===t[b]){i.push(h());continue}if("}"===t[b])throw new SyntaxError("Unbalanced closing brace");let s=m();if(!s)break;i.push(s),n=Math.min(n,s.length)}let s=i.length-1,a=i[s];"string"==typeof a&&(i[s]=v(a,Ex));let o=[];for(let t of i)t instanceof Ox&&(t=t.value.slice(0,t.value.length-n)),t&&o.push(t);return o}function h(){n(kx,SyntaxError);let t=u();if(n(Mx))return t;if(n(Tx)){let s=function(){let t,n=[],s=0;for(;e(gx);){i("*")&&(t=s);let e=d(),r=o();if(null===r)throw new SyntaxError("Expected variant value");n[s++]={key:e,value:r}}if(0===s)return null;if(void 0===t)throw new SyntaxError("Expected default variant");return{variants:n,star:t}}();return n(Mx,SyntaxError),{type:"select",selector:t,...s}}throw new SyntaxError("Unclosed placeable")}function u(){if("{"===t[b])return h();if(e(vx)){let[,e,i,r=null]=s(vx);if("$"===e)return{type:"var",name:i};if(n(Dx)){let s=function(){let e=[];for(;;){switch(t[b]){case")":return b++,e;case void 0:throw new SyntaxError("Unclosed argument list")}e.push(c()),n(Lx)}}();if("-"===e)return{type:"term",name:i,attr:r,args:s};if(wx.test(i))return{type:"func",name:i,args:s};throw new SyntaxError("Function names must be all upper-case")}return"-"===e?{type:"term",name:i,attr:r,args:[]}:{type:"mesg",name:i,attr:r}}return p()}function c(){let t=u();return"mesg"!==t.type?t:n(Ix)?{type:"narg",name:t.name,value:p()}:t}function d(){let t;return n(Px,SyntaxError),t=e(fx)?g():{type:"str",value:r(mx)},n(Fx,SyntaxError),t}function p(){if(e(fx))return g();if('"'===t[b])return function(){i('"',SyntaxError);let e="";for(;;){if(e+=r(yx),"\\"!==t[b]){if(i('"'))return{type:"str",value:e};throw new SyntaxError("Unclosed string literal")}e+=f()}}();throw new SyntaxError("Invalid expression")}function g(){let[,t,e=""]=s(fx),i=e.length;return{type:"num",value:parseFloat(t),precision:i}}function f(){if(e(Ax))return r(Ax);if(e(_x)){let[,t,e]=s(_x),i=parseInt(t||e,16);return i<=55295||57344<=i?String.fromCodePoint(i):"�"}throw new SyntaxError("Unknown escape sequence")}function m(){let e=b;switch(n(Rx),t[b]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return w(t.slice(e,b))}return" "===t[b-1]&&w(t.slice(e,b))}function v(t,e){return t.replace(e,"")}function w(t){let e=t.replace(Sx,"\n"),i=Cx.exec(t)[1].length;return new Ox(e,i)}this.body=[],dx.lastIndex=0;let b=0;for(;;){let e=dx.exec(t);if(null===e)break;b=dx.lastIndex;try{this.body.push(a(e[1]))}catch(y){if(y instanceof SyntaxError)continue;throw y}}}}class Ox{constructor(t,e){this.value=t,this.length=e}}const Wx=/<|&#?\w+;/,Bx={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},jx={"http://www.w3.org/1999/xhtml":{global:["title","aria-description","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};class Vx extends Array{static from(t){return t instanceof this?t:new this(t)}}class $x extends Vx{constructor(t){if(super(),Symbol.asyncIterator in Object(t))this.iterator=t[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(t)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=t[Symbol.iterator]()}}[Symbol.asyncIterator](){const t=this;let e=0;return{next:async()=>(t.length<=e&&t.push(t.iterator.next()),t[e++])}}async touchNext(t=1){let e=0;for(;e++<t;){const t=this[this.length-1];if(t&&(await t).done)break;this.push(this.iterator.next())}return this[this.length-1]}}class Hx{constructor(t=[],e){this.resourceIds=t,this.generateBundles=e,this.onChange(!0)}addResourceIds(t,e=!1){return this.resourceIds.push(...t),this.onChange(e),this.resourceIds.length}removeResourceIds(t){return this.resourceIds=this.resourceIds.filter(e=>!t.includes(e)),this.onChange(),this.resourceIds.length}async formatWithFallback(t,e){const i=[];let n=!1;for await(const s of this.bundles){n=!0;const r=Ft(e,s,t,i);if(0===r.size)break;if("undefined"!=typeof console){const t=s.locales[0],e=Array.from(r).join(", ");console.warn(`[fluent] Missing translations in ${t}: ${e}`)}}return n||"undefined"==typeof console||console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(t)}.\n  resourceIds: ${JSON.stringify(this.resourceIds)}.`),i}formatMessages(t){return this.formatWithFallback(t,Pt)}formatValues(t){return this.formatWithFallback(t,Mt)}async formatValue(t,e){const[i]=await this.formatValues([{id:t,args:e}]);return i}handleEvent(){this.onChange()}onChange(t=!1){this.bundles=$x.from(this.generateBundles(this.resourceIds)),t&&this.bundles.touchNext(2)}}const zx="data-l10n-id",Ux="data-l10n-args",Gx=`[${zx}]`;class qx extends Hx{constructor(t,e){super(t,e),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[zx,Ux]}}onChange(t=!1){super.onChange(t),this.roots&&this.translateRoots()}setAttributes(t,e,i){return t.setAttribute(zx,e),i?t.setAttribute(Ux,JSON.stringify(i)):t.removeAttribute(Ux),t}getAttributes(t){return{id:t.getAttribute(zx),args:JSON.parse(t.getAttribute(Ux)||null)}}connectRoot(t){for(const e of this.roots)if(e===t||e.contains(t)||t.contains(e))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==t.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=t.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(t),this.mutationObserver.observe(t,this.observerConfig)}disconnectRoot(t){return this.roots.delete(t),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const t=Array.from(this.roots);return Promise.all(t.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const t of this.roots)this.mutationObserver.observe(t,this.observerConfig)}translateMutations(t){for(const e of t)switch(e.type){case"attributes":e.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(e.target);break;case"childList":for(const t of e.addedNodes)if(t.nodeType===t.ELEMENT_NODE)if(t.childElementCount)for(const e of this.getTranslatables(t))this.pendingElements.add(e);else t.hasAttribute(zx)&&this.pendingElements.add(t)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(t){return this.translateElements(this.getTranslatables(t))}async translateElements(t){if(!t.length)return;const e=t.map(this.getKeysForElement),i=await this.formatMessages(e);return this.applyTranslations(t,i)}applyTranslations(t,e){this.pauseObserving();for(let i=0;i<t.length;i++)void 0!==e[i]&&bt(t[i],e[i]);this.resumeObserving()}getTranslatables(t){const e=Array.from(t.querySelectorAll(Gx));return"function"==typeof t.hasAttribute&&t.hasAttribute(zx)&&e.push(t),e}getKeysForElement(t){return{id:t.getAttribute(zx),args:JSON.parse(t.getAttribute(Ux)||null)}}}const Xx=class t{constructor({lang:e,isRTL:i},n=null){var s,r;$m(this,bp),$m(this,yp),$m(this,Ap),$m(this,_p),Hm(this,Ap,zm(s=t,xp,Ep).call(s,e)),Hm(this,_p,n),Hm(this,bp,(null!=i?i:zm(r=t,xp,Sp).call(r,Vm(this,Ap)))?"rtl":"ltr")}_setL10n(t){Hm(this,_p,t)}getLanguage(){return Vm(this,Ap)}getDirection(){return Vm(this,bp)}async get(t,e=null,i){var n;return Array.isArray(t)?(t=t.map(t=>({id:t})),(await Vm(this,_p).formatMessages(t)).map(t=>t.value)):(null==(n=(await Vm(this,_p).formatMessages([{id:t,args:e}]))[0])?void 0:n.value)||i}async translate(t){(Vm(this,yp)||Hm(this,yp,new Set)).add(t);try{Vm(this,_p).connectRoot(t),await Vm(this,_p).translateRoots()}catch{}}async translateOnce(t){try{await Vm(this,_p).translateElements([t])}catch(e){console.error("translateOnce:",e)}}async destroy(){if(Vm(this,yp)){for(const t of Vm(this,yp))Vm(this,_p).disconnectRoot(t);Vm(this,yp).clear(),Hm(this,yp,null)}Vm(this,_p).pauseObserving()}pause(){Vm(this,_p).pauseObserving()}resume(){Vm(this,_p).resumeObserving()}};bp=new WeakMap,yp=new WeakMap,Ap=new WeakMap,_p=new WeakMap,xp=new WeakSet,Ep=function(t){return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[t=(null==t?void 0:t.toLowerCase())||"en-us"]||t},Sp=function(t){const e=t.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(e)},$m(Xx,xp);let Yx=Xx;const Kx=class t extends Yx{constructor(e){super({lang:e});const i=e?zm(t,Cp,kp).bind(t,"en-us",this.getLanguage()):zm(t,Cp,Fp).bind(t,this.getLanguage());this._setL10n(new qx([],i))}};Cp=new WeakSet,kp=async function*(t,e){const{baseURL:i,paths:n}=await zm(this,Cp,Pp).call(this),s=[e];if(t!==e){const i=e.split("-",1)[0];i!==e&&s.push(i),s.push(t)}const r=s.map(t=>[t,zm(this,Cp,Mp).call(this,t,i,n)]);for(const[a,o]of r){const t=await o;t?yield t:"en-us"===a&&(yield zm(this,Cp,Dp).call(this,a))}},Mp=async function(t,e,i){const n=i[t];if(!n)return null;const s=new URL(n,e);return Tt(t,await WA(s,"text"))},Pp=async function(){try{const{href:t}=document.querySelector('link[type="application/l10n"]'),e=await WA(t,"json");return{baseURL:t.substring(0,t.lastIndexOf("/")+1)||"./",paths:e}}catch{}return{baseURL:"./",paths:Object.create(null)}},Fp=async function*(t){yield zm(this,Cp,Dp).call(this,t)},Dp=async function(t){return Tt(t,'pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties…\npdfjs-document-properties-button-label = Document Properties…\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)\npdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } × { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } × { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing…\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document…\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-color-picker-free-text-input =\n    .title = Change text color\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-color-picker-ink-input =\n    .title = Change drawing color\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-signature-button =\n    .title = Add signature\npdfjs-editor-signature-button-label = Add signature\npdfjs-editor-highlight-editor =\n    .aria-label = Highlight editor\npdfjs-editor-ink-editor =\n    .aria-label = Drawing editor\npdfjs-editor-signature-editor1 =\n    .aria-description = Signature editor: { $description }\npdfjs-editor-stamp-editor =\n    .aria-label = Image editor\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-remove-signature-button =\n    .title = Remove signature\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-editor-add-signature-container =\n    .aria-label = Signature controls and saved signatures\npdfjs-editor-signature-add-signature-button =\n    .title = Add new signature\npdfjs-editor-signature-add-signature-button-label = Add new signature\npdfjs-editor-add-saved-signature-button =\n    .title = Saved signature: { $description }\npdfjs-free-text2 =\n    .aria-label = Text Editor\n    .default-content = Start typing…\npdfjs-editor-alt-text-button =\n    .aria-label = Alt text\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button =\n    .aria-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can’t see the image or when it doesn’t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, “A young man sits down at a table to eat a meal”\npdfjs-editor-resizer-top-left =\n    .aria-label = Top left corner — resize\npdfjs-editor-resizer-top-middle =\n    .aria-label = Top middle — resize\npdfjs-editor-resizer-top-right =\n    .aria-label = Top right corner — resize\npdfjs-editor-resizer-middle-right =\n    .aria-label = Middle right — resize\npdfjs-editor-resizer-bottom-right =\n    .aria-label = Bottom right corner — resize\npdfjs-editor-resizer-bottom-middle =\n    .aria-label = Bottom middle — resize\npdfjs-editor-resizer-bottom-left =\n    .aria-label = Bottom left corner — resize\npdfjs-editor-resizer-middle-left =\n    .aria-label = Middle left — resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all\npdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)\npdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)\npdfjs-editor-new-alt-text-textarea =\n    .placeholder = Write your description here…\npdfjs-editor-new-alt-text-description = Short description for people who can’t see the image or when the image doesn’t load.\npdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.\npdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more\npdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically\npdfjs-editor-new-alt-text-not-now-button = Not now\npdfjs-editor-new-alt-text-error-title = Couldn’t create alt text automatically\npdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.\npdfjs-editor-new-alt-text-error-close-button = Close\npdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\n    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\npdfjs-editor-new-alt-text-added-button =\n    .aria-label = Alt text added\npdfjs-editor-new-alt-text-added-button-label = Alt text added\npdfjs-editor-new-alt-text-missing-button =\n    .aria-label = Missing alt text\npdfjs-editor-new-alt-text-missing-button-label = Missing alt text\npdfjs-editor-new-alt-text-to-review-button =\n    .aria-label = Review alt text\npdfjs-editor-new-alt-text-to-review-button-label = Review alt text\npdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }\npdfjs-image-alt-text-settings-button =\n    .title = Image alt text settings\npdfjs-image-alt-text-settings-button-label = Image alt text settings\npdfjs-editor-alt-text-settings-dialog-label = Image alt text settings\npdfjs-editor-alt-text-settings-automatic-title = Automatic alt text\npdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically\npdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can’t see the image or when the image doesn’t load.\npdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)\npdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.\npdfjs-editor-alt-text-settings-delete-model-button = Delete\npdfjs-editor-alt-text-settings-download-model-button = Download\npdfjs-editor-alt-text-settings-downloading-model-button = Downloading…\npdfjs-editor-alt-text-settings-editor-title = Alt text editor\npdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image\npdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.\npdfjs-editor-alt-text-settings-close-button = Close\npdfjs-editor-highlight-added-alert = Highlight added\npdfjs-editor-freetext-added-alert = Text added\npdfjs-editor-ink-added-alert = Drawing added\npdfjs-editor-stamp-added-alert = Image added\npdfjs-editor-signature-added-alert = Signature added\npdfjs-editor-undo-bar-message-highlight = Highlight removed\npdfjs-editor-undo-bar-message-freetext = Text removed\npdfjs-editor-undo-bar-message-ink = Drawing removed\npdfjs-editor-undo-bar-message-stamp = Image removed\npdfjs-editor-undo-bar-message-signature = Signature removed\npdfjs-editor-undo-bar-message-multiple =\n    { $count ->\n        [one] { $count } annotation removed\n       *[other] { $count } annotations removed\n    }\npdfjs-editor-undo-bar-undo-button =\n    .title = Undo\npdfjs-editor-undo-bar-undo-button-label = Undo\npdfjs-editor-undo-bar-close-button =\n    .title = Close\npdfjs-editor-undo-bar-close-button-label = Close\npdfjs-editor-add-signature-dialog-label = This modal allows the user to create a signature to add to a PDF document. The user can edit the name (which also serves as the alt text), and optionally save the signature for repeated use.\npdfjs-editor-add-signature-dialog-title = Add a signature\npdfjs-editor-add-signature-type-button = Type\n    .title = Type\npdfjs-editor-add-signature-draw-button = Draw\n    .title = Draw\npdfjs-editor-add-signature-image-button = Image\n    .title = Image\npdfjs-editor-add-signature-type-input =\n    .aria-label = Type your signature\n    .placeholder = Type your signature\npdfjs-editor-add-signature-draw-placeholder = Draw your signature\npdfjs-editor-add-signature-draw-thickness-range-label = Thickness\npdfjs-editor-add-signature-draw-thickness-range =\n    .title = Drawing thickness: { $thickness }\npdfjs-editor-add-signature-image-placeholder = Drag a file here to upload\npdfjs-editor-add-signature-image-browse-link =\n    { PLATFORM() ->\n        [macos] Or choose image files\n       *[other] Or browse image files\n    }\npdfjs-editor-add-signature-description-label = Description (alt text)\npdfjs-editor-add-signature-description-input =\n    .title = Description (alt text)\npdfjs-editor-add-signature-description-default-when-drawing = Signature\npdfjs-editor-add-signature-clear-button-label = Clear signature\npdfjs-editor-add-signature-clear-button =\n    .title = Clear signature\npdfjs-editor-add-signature-save-checkbox = Save signature\npdfjs-editor-add-signature-save-warning-message = You’ve reached the limit of 5 saved signatures. Remove one to save more.\npdfjs-editor-add-signature-image-upload-error-title = Couldn’t upload image\npdfjs-editor-add-signature-image-upload-error-description = Check your network connection or try another image.\npdfjs-editor-add-signature-image-no-data-error-title = Can’t convert this image into a signature\npdfjs-editor-add-signature-image-no-data-error-description = Please try uploading a different image.\npdfjs-editor-add-signature-error-close-button = Close\npdfjs-editor-add-signature-cancel-button = Cancel\npdfjs-editor-add-signature-add-button = Add\npdfjs-editor-delete-signature-button1 =\n    .title = Remove saved signature\npdfjs-editor-delete-signature-button-label1 = Remove saved signature\npdfjs-editor-add-signature-edit-button-label = Edit description\npdfjs-editor-edit-signature-dialog-title = Edit description\npdfjs-editor-edit-signature-update-button = Update\npdfjs-editor-edit-comment-actions-button-label = Actions\npdfjs-editor-edit-comment-actions-button =\n    .title = Actions\npdfjs-editor-edit-comment-close-button-label = Close\npdfjs-editor-edit-comment-close-button =\n    .title = Close\npdfjs-editor-edit-comment-actions-edit-button-label = Edit\npdfjs-editor-edit-comment-actions-delete-button-label = Delete\npdfjs-editor-edit-comment-manager-text-input =\n    .placeholder = Enter your comment\npdfjs-editor-edit-comment-manager-cancel-button = Cancel\npdfjs-editor-edit-comment-manager-save-button = Save\npdfjs-editor-edit-comment-button =\n    .title = Edit comment')},$m(Kx,Cp);let Qx=Kx;Tp=new WeakMap,Ip=new WeakSet,Lp=function(t,e=!1){const i=e||!this._destination,n={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:t};let s;if(zm(this,Ip,Wp).call(this,t,n.uid),this._updateUrl&&(null==t?void 0:t.hash)){const{href:e,protocol:i}=document.location;"file:"!==i&&(s=v_(e,t.hash))}i?window.history.replaceState(n,"",s):window.history.pushState(n,"",s)},Rp=function(t=!1){if(!this._position)return;let e=this._position;if(t&&(e=Object.assign(Object.create(null),this._position),e.temporary=!0),!this._destination)return void zm(this,Ip,Lp).call(this,e);if(this._destination.temporary)return void zm(this,Ip,Lp).call(this,e,!0);if(this._destination.hash===e.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let i=!1;if(this._destination.page>=e.first&&this._destination.page<=e.page){if(void 0!==this._destination.dest||!this._destination.first)return;i=!0}zm(this,Ip,Lp).call(this,e,i)},Np=function(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount},Op=function(t,e=!1){if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!e)return!1;{if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;const[e]=performance.getEntriesByType("navigation");if("reload"!==(null==e?void 0:e.type))return!1}}return!(!Number.isInteger(t.uid)||t.uid<0)&&null!==t.destination&&"object"==typeof t.destination},Wp=function(t,e,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&(null==t?void 0:t.temporary)&&delete t.temporary,this._destination=t,this._uid=e,this._maxUid=Math.max(this._maxUid,e),this._numPositionUpdates=0},Bp=function(t=!1){const e=unescape(It()).substring(1),i=J(e),n=i.get("nameddest")||"";let s=0|i.get("page");return(!zm(this,Ip,Np).call(this,s)||t&&n.length>0)&&(s=null),{hash:e,page:s,rotation:this.linkService.rotation}},jp=function({location:t}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||zm(this,Ip,Rp).call(this,!0),this._updateViewareaTimeout=null},1e3))},Vp=function({state:t}){const e=It(),i=this._currentHash!==e;if(this._currentHash=e,!t){this._uid++;const{hash:t,page:e,rotation:i}=zm(this,Ip,Bp).call(this);return void zm(this,Ip,Lp).call(this,{hash:t,page:e,rotation:i},!0)}if(!zm(this,Ip,Op).call(this,t))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,async function({target:t,name:e,delay:i=0}){function n(t){a.abort(),clearTimeout(o),r(t)}if("object"!=typeof t||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:s,resolve:r}=Promise.withResolvers(),a=new AbortController;t[t instanceof ix?"_on":"addEventListener"](e,n.bind(null,"event"),{signal:a.signal});const o=setTimeout(n.bind(null,"timeout"),i);return s}({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const n=t.destination;zm(this,Ip,Wp).call(this,n,t.uid,!0),st(n.rotation)&&(this.linkService.rotation=n.rotation),n.dest?this.linkService.goToDestination(n.dest):n.hash?this.linkService.setHash(n.hash):n.page&&(this.linkService.page=n.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})},$p=function(){this._destination&&!this._destination.temporary||zm(this,Ip,Rp).call(this)},Hp=function(){if(Vm(this,Tp))return;Hm(this,Tp,new AbortController);const{signal:t}=Vm(this,Tp);this.eventBus._on("updateviewarea",zm(this,Ip,jp).bind(this),{signal:t}),window.addEventListener("popstate",zm(this,Ip,Vp).bind(this),{signal:t}),window.addEventListener("pagehide",zm(this,Ip,$p).bind(this),{signal:t})},zp=function(){var t;null==(t=Vm(this,Tp))||t.abort(),Hm(this,Tp,null)};class Zx{constructor(t){$m(this,Up,null),$m(this,Gp,null),$m(this,qp,null),$m(this,Xp,null),$m(this,Yp,null),$m(this,Kp),this.pdfPage=t.pdfPage,this.accessibilityManager=t.accessibilityManager,this.l10n=t.l10n,this.l10n||(this.l10n=new Qx),this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,Hm(this,Kp,t.uiManager),Hm(this,Up,t.annotationLayer||null),Hm(this,Yp,t.textLayer||null),Hm(this,Gp,t.drawLayer||null),Hm(this,qp,t.onAppend||null),Hm(this,Xp,t.structTreeLayer||null)}async render({viewport:t,intent:e="display"}){var i;if("display"!==e)return;if(this._cancelled)return;const n=t.clone({dontFlip:!0});if(this.div)return this.annotationEditorLayer.update({viewport:n}),void this.show();const s=this.div=document.createElement("div");s.className="annotationEditorLayer",s.hidden=!0,s.dir=Vm(this,Kp).direction,null==(i=Vm(this,qp))||i.call(this,s),this.annotationEditorLayer=new SA({uiManager:Vm(this,Kp),div:s,structTreeLayer:Vm(this,Xp),accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:n,annotationLayer:Vm(this,Up),textLayer:Vm(this,Yp),drawLayer:Vm(this,Gp)});const r={viewport:n,div:s,annotations:null,intent:e};this.annotationEditorLayer.render(r),this.show()}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.annotationEditorLayer.pause(!0),this.div.hidden=!0)}show(){this.div&&!this.annotationEditorLayer.isInvisible&&(this.div.hidden=!1,this.annotationEditorLayer.pause(!1))}}Up=new WeakMap,Gp=new WeakMap,qp=new WeakMap,Xp=new WeakMap,Yp=new WeakMap,Kp=new WeakMap;{var Jx=new Map;const{maxTouchPoints:t,platform:e,userAgent:i}=navigator,n=/Android/.test(i);(/\b(iPad|iPhone|iPod)(?=;)/.test(i)||"MacIntel"===e&&t>1||n)&&Jx.set("maxCanvasPixels",5242880),n&&Jx.set("useSystemFonts",!1)}const tE={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},eE={allowedGlobalEvents:{value:null,kind:1},canvasMaxAreaInBytes:{value:-1,kind:5},isInAutomation:{value:!1,kind:1},localeProperties:{value:{lang:navigator.language||"en-US"},kind:1},maxCanvasDim:{value:32767,kind:3},nimbusDataStr:{value:"",kind:1},supportsCaretBrowsingMode:{value:!1,kind:1},supportsDocumentFonts:{value:!0,kind:1},supportsIntegratedFind:{value:!1,kind:1},supportsMouseWheelZoomCtrlKey:{value:!0,kind:1},supportsMouseWheelZoomMetaKey:{value:!0,kind:1},supportsPinchToZoom:{value:!0,kind:1},supportsPrinting:{value:!0,kind:1},toolbarDensity:{value:0,kind:17},altTextLearnMoreUrl:{value:"",kind:130},annotationEditorMode:{value:0,kind:130},annotationMode:{value:2,kind:130},capCanvasAreaFactor:{value:200,kind:130},cursorToolOnLoad:{value:0,kind:130},debuggerSrc:{value:"./debugger.js",kind:2},defaultZoomDelay:{value:400,kind:130},defaultZoomValue:{value:"",kind:130},disableHistory:{value:!1,kind:2},disablePageLabels:{value:!1,kind:130},enableAltText:{value:!1,kind:130},enableAltTextModelDownload:{value:!0,kind:146},enableAutoLinking:{value:!0,kind:130},enableComment:{value:!1,kind:130},enableDetailCanvas:{value:!0,kind:2},enableGuessAltText:{value:!0,kind:146},enableHighlightFloatingButton:{value:!1,kind:130},enableNewAltTextWhenAddingImage:{value:!0,kind:130},enablePermissions:{value:!1,kind:130},enablePrintAutoRotate:{value:!0,kind:130},enableScripting:{value:!0,kind:130},enableSignatureEditor:{value:!1,kind:130},enableUpdatedAddImage:{value:!1,kind:130},externalLinkRel:{value:"noopener noreferrer nofollow",kind:2},externalLinkTarget:{value:0,kind:130},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F,yellow_HCM=#FFFFCC,green_HCM=#53FFBC,blue_HCM=#80EBFF,pink_HCM=#F6B8FF,red_HCM=#C50043",kind:130},historyUpdateUrl:{value:!1,kind:130},ignoreDestinationZoom:{value:!1,kind:130},imageResourcesPath:{value:"./images/",kind:2},maxCanvasPixels:{value:2**25,kind:2},minDurationToUpdateCanvas:{value:500,kind:2},forcePageColors:{value:!1,kind:130},pageColorsBackground:{value:"Canvas",kind:130},pageColorsForeground:{value:"CanvasText",kind:130},pdfBugEnabled:{value:!1,kind:130},printResolution:{value:150,kind:2},sidebarViewOnLoad:{value:-1,kind:130},scrollModeOnLoad:{value:-1,kind:130},spreadModeOnLoad:{value:-1,kind:130},textLayerMode:{value:1,kind:130},viewerCssTheme:{value:0,kind:130},viewOnLoad:{value:0,kind:130},cMapPacked:{value:!0,kind:4},cMapUrl:{value:"../web/cmaps/",kind:4},disableAutoFetch:{value:!1,kind:132},disableFontFace:{value:!1,kind:132},disableRange:{value:!1,kind:132},disableStream:{value:!1,kind:132},docBaseUrl:{value:"",kind:4},enableHWA:{value:!0,kind:134},enableXfa:{value:!0,kind:132},fontExtraProperties:{value:!1,kind:4},iccUrl:{value:"../web/iccs/",kind:4},isEvalSupported:{value:!0,kind:4},isOffscreenCanvasSupported:{value:!0,kind:4},maxImageSize:{value:-1,kind:4},pdfBug:{value:!1,kind:4},standardFontDataUrl:{value:"../web/standard_fonts/",kind:4},useSystemFonts:{value:void 0,kind:4,type:tE.BOOLEAN+tE.UNDEFINED},verbosity:{value:1,kind:4},wasmUrl:{value:"../web/wasm/",kind:4},workerPort:{value:null,kind:8},workerSrc:{value:"../build/pdf.worker.js",kind:8},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:2},sandboxBundleSrc:{value:"../build/pdf.sandbox.js",kind:2},enableFakeMLManager:{value:!0,kind:2},disablePreferences:{value:!1,kind:2}},iE=class{static get(t){return Vm(this,Qp).get(t)}static getAll(t=null,e=!1){const i=Object.create(null);for(const n in eE){const s=eE[n];(!t||t&s.kind)&&(i[n]=e?s.value:Vm(this,Qp).get(n))}return i}static set(t,e){this.setAll({[t]:e})}static setAll(t,e=!1){let i;this._hasInvokedSet||(this._hasInvokedSet=!0);for(const n in t){const s=eE[n],r=t[n];if(!s||!(typeof r==typeof s.value||tE[(typeof r).toUpperCase()]&s.type))continue;const{kind:a}=s;(!e||1&a||128&a)&&(this.eventBus&&16&a&&(i||(i=new Map)).set(n,r),Vm(this,Qp).set(n,r))}if(i)for(const[n,s]of i)this.eventBus.dispatch(n.toLowerCase(),{source:this,value:s})}};Qp=new WeakMap,Bm(iE,"eventBus"),$m(iE,Qp,new Map),(()=>{for(const t in eE)Vm(iE,Qp).set(t,eE[t].value);for(const[t,e]of Jx)Vm(iE,Qp).set(t,e);iE._hasInvokedSet=!1,iE._checkDisablePreferences=()=>!!iE.get("disablePreferences")||(iE._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)})();let nE=iE;Q(2222);class sE{static findLinks(t){null!=Vm(this,Jp)||Hm(this,Jp,/\b(?:https?:\/\/|mailto:|www\.)(?:[\0-\x08\x0E-\x1F\$\+0-9=A-Z\^`-z\|~-\x9F\xA2-\xA6\xA8-\xAA\xAC-\xB5\xB8-\xBA\xBC-\xBE\xC0-\u037D\u037F-\u0386\u0388-\u0559\u0560-\u0588\u058B-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05F2\u05F5-\u0608\u060B\u060E-\u061A\u061C\u0620-\u0669\u066E-\u06D3\u06D5-\u06FF\u070E-\u07F6\u07FA-\u082F\u083F-\u085D\u085F-\u0963\u0966-\u096F\u0971-\u09FC\u09FE-\u0A75\u0A77-\u0AEF\u0AF1-\u0C76\u0C78-\u0C83\u0C85-\u0DF3\u0DF5-\u0E4E\u0E50-\u0E59\u0E5C-\u0F03\u0F13\u0F15-\u0F39\u0F3E-\u0F84\u0F86-\u0FCF\u0FD5-\u0FD8\u0FDB-\u1049\u1050-\u10FA\u10FC-\u135F\u1369-\u13FF\u1401-\u166D\u166F-\u167F\u1681-\u169A\u169D-\u16EA\u16EE-\u1734\u1737-\u17D3\u17D7\u17DB-\u17FF\u180B-\u1943\u1946-\u1A1D\u1A20-\u1A9F\u1AA7\u1AAE-\u1B4D\u1B50-\u1B59\u1B61-\u1B7C\u1B80-\u1BFB\u1C00-\u1C3A\u1C40-\u1C7D\u1C80-\u1CBF\u1CC8-\u1CD2\u1CD4-\u1FFF\u200B-\u200F\u202A-\u202E\u2044\u2052\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2CF8\u2CFD\u2D00-\u2D6F\u2D71-\u2DFF\u2E2F\u2E50\u2E51\u2E5E-\u2FFF\u3004-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303C\u303E-\u309F\u30A1-\u30FA\u30FC-\uA4FD\uA500-\uA60C\uA610-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA6F8-\uA873\uA878-\uA8CD\uA8D0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA95E\uA960-\uA9C0\uA9CE-\uA9DD\uA9E0-\uAA5B\uAA60-\uAADD\uAAE0-\uAAEF\uAAF2-\uABEA\uABEC-\uFD3D\uFD40-\uFE0F\uFE1A-\uFE2F\uFE53\uFE62\uFE64-\uFE67\uFE69\uFE6C-\uFEFE\uFF00\uFF04\uFF0B\uFF10-\uFF19\uFF1C-\uFF1E\uFF21-\uFF3A\uFF3E\uFF40-\uFF5A\uFF5C\uFF5E\uFF66-\u{100FF}\u{10103}-\u{1039E}\u{103A0}-\u{103CF}\u{103D1}-\u{1056E}\u{10570}-\u{10856}\u{10858}-\u{1091E}\u{10920}-\u{1093E}\u{10940}-\u{10A4F}\u{10A59}-\u{10A7E}\u{10A80}-\u{10AEF}\u{10AF7}-\u{10B38}\u{10B40}-\u{10B98}\u{10B9D}-\u{10D6D}\u{10D6F}-\u{10EAC}\u{10EAE}-\u{10F54}\u{10F5A}-\u{10F85}\u{10F8A}-\u{11046}\u{1104E}-\u{110BA}\u{110BD}\u{110C2}-\u{1113F}\u{11144}-\u{11173}\u{11176}-\u{111C4}\u{111C9}-\u{111CC}\u{111CE}-\u{111DA}\u{111DC}\u{111E0}-\u{11237}\u{1123E}-\u{112A8}\u{112AA}-\u{113D3}\u{113D6}\u{113D9}-\u{1144A}\u{11450}-\u{11459}\u{1145C}\u{1145E}-\u{114C5}\u{114C7}-\u{115C0}\u{115D8}-\u{11640}\u{11644}-\u{1165F}\u{1166D}-\u{116B8}\u{116BA}-\u{1173B}\u{1173F}-\u{1183A}\u{1183C}-\u{11943}\u{11947}-\u{119E1}\u{119E3}-\u{11A3E}\u{11A47}-\u{11A99}\u{11A9D}\u{11AA3}-\u{11AFF}\u{11B0A}-\u{11BE0}\u{11BE2}-\u{11C40}\u{11C46}-\u{11C6F}\u{11C72}-\u{11EF6}\u{11EF9}-\u{11F42}\u{11F50}-\u{11FFE}\u{12000}-\u{1246F}\u{12475}-\u{12FF0}\u{12FF3}-\u{16A6D}\u{16A70}-\u{16AF4}\u{16AF6}-\u{16B36}\u{16B3C}-\u{16B43}\u{16B45}-\u{16D6C}\u{16D70}-\u{16E96}\u{16E9B}-\u{16FE1}\u{16FE3}-\u{1BC9E}\u{1BCA0}-\u{1DA86}\u{1DA8C}-\u{1E5FE}\u{1E600}-\u{1E95D}\u{1E960}-\u{10FFFF}]|\/|[\0-\x08\x0E-\x1F!-Z\\\^-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uFEFE\uFF00-\u{10FFFF}]+[\0-\x08\x0E-\x1F\$\+0-9=A-Z\^`-z\|~-\x9F\xA2-\xA6\xA8-\xAA\xAC-\xB5\xB8-\xBA\xBC-\xBE\xC0-\u037D\u037F-\u0386\u0388-\u0559\u0560-\u0588\u058B-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05F2\u05F5-\u0608\u060B\u060E-\u061A\u061C\u0620-\u0669\u066E-\u06D3\u06D5-\u06FF\u070E-\u07F6\u07FA-\u082F\u083F-\u085D\u085F-\u0963\u0966-\u096F\u0971-\u09FC\u09FE-\u0A75\u0A77-\u0AEF\u0AF1-\u0C76\u0C78-\u0C83\u0C85-\u0DF3\u0DF5-\u0E4E\u0E50-\u0E59\u0E5C-\u0F03\u0F13\u0F15-\u0F39\u0F3E-\u0F84\u0F86-\u0FCF\u0FD5-\u0FD8\u0FDB-\u1049\u1050-\u10FA\u10FC-\u135F\u1369-\u13FF\u1401-\u166D\u166F-\u167F\u1681-\u169A\u169D-\u16EA\u16EE-\u1734\u1737-\u17D3\u17D7\u17DB-\u17FF\u180B-\u1943\u1946-\u1A1D\u1A20-\u1A9F\u1AA7\u1AAE-\u1B4D\u1B50-\u1B59\u1B61-\u1B7C\u1B80-\u1BFB\u1C00-\u1C3A\u1C40-\u1C7D\u1C80-\u1CBF\u1CC8-\u1CD2\u1CD4-\u1FFF\u200B-\u200F\u202A-\u202E\u2044\u2052\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2CF8\u2CFD\u2D00-\u2D6F\u2D71-\u2DFF\u2E2F\u2E50\u2E51\u2E5E-\u2FFF\u3004-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303C\u303E-\u309F\u30A1-\u30FA\u30FC-\uA4FD\uA500-\uA60C\uA610-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA6F8-\uA873\uA878-\uA8CD\uA8D0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA95E\uA960-\uA9C0\uA9CE-\uA9DD\uA9E0-\uAA5B\uAA60-\uAADD\uAAE0-\uAAEF\uAAF2-\uABEA\uABEC-\uFD3D\uFD40-\uFE0F\uFE1A-\uFE2F\uFE53\uFE62\uFE64-\uFE67\uFE69\uFE6C-\uFEFE\uFF00\uFF04\uFF0B\uFF10-\uFF19\uFF1C-\uFF1E\uFF21-\uFF3A\uFF3E\uFF40-\uFF5A\uFF5C\uFF5E\uFF66-\u{100FF}\u{10103}-\u{1039E}\u{103A0}-\u{103CF}\u{103D1}-\u{1056E}\u{10570}-\u{10856}\u{10858}-\u{1091E}\u{10920}-\u{1093E}\u{10940}-\u{10A4F}\u{10A59}-\u{10A7E}\u{10A80}-\u{10AEF}\u{10AF7}-\u{10B38}\u{10B40}-\u{10B98}\u{10B9D}-\u{10D6D}\u{10D6F}-\u{10EAC}\u{10EAE}-\u{10F54}\u{10F5A}-\u{10F85}\u{10F8A}-\u{11046}\u{1104E}-\u{110BA}\u{110BD}\u{110C2}-\u{1113F}\u{11144}-\u{11173}\u{11176}-\u{111C4}\u{111C9}-\u{111CC}\u{111CE}-\u{111DA}\u{111DC}\u{111E0}-\u{11237}\u{1123E}-\u{112A8}\u{112AA}-\u{113D3}\u{113D6}\u{113D9}-\u{1144A}\u{11450}-\u{11459}\u{1145C}\u{1145E}-\u{114C5}\u{114C7}-\u{115C0}\u{115D8}-\u{11640}\u{11644}-\u{1165F}\u{1166D}-\u{116B8}\u{116BA}-\u{1173B}\u{1173F}-\u{1183A}\u{1183C}-\u{11943}\u{11947}-\u{119E1}\u{119E3}-\u{11A3E}\u{11A47}-\u{11A99}\u{11A9D}\u{11AA3}-\u{11AFF}\u{11B0A}-\u{11BE0}\u{11BE2}-\u{11C40}\u{11C46}-\u{11C6F}\u{11C72}-\u{11EF6}\u{11EF9}-\u{11F42}\u{11F50}-\u{11FFE}\u{12000}-\u{1246F}\u{12475}-\u{12FF0}\u{12FF3}-\u{16A6D}\u{16A70}-\u{16AF4}\u{16AF6}-\u{16B36}\u{16B3C}-\u{16B43}\u{16B45}-\u{16D6C}\u{16D70}-\u{16E96}\u{16E9B}-\u{16FE1}\u{16FE3}-\u{1BC9E}\u{1BCA0}-\u{1DA86}\u{1DA8C}-\u{1E5FE}\u{1E600}-\u{1E95D}\u{1E960}-\u{10FFFF}])+|\b[\0-\x08\x0E-\x1F!-'\*-;=\?A-Z\\\^-z\|~-\x9F\xA1-\u0F39\u0F3E-\u167F\u1681-\u169A\u169D-\u1FFF\u200B-\u2019\u201B-\u201D\u201F-\u2027\u202A-\u202E\u2030-\u2044\u2047-\u205E\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2E21\u2E2A-\u2E41\u2E43-\u2E54\u2E5D-\u2FFF\u3001-\u3007\u3012\u3013\u301C\u3020-\uFD3D\uFD40-\uFE16\uFE19-\uFE34\uFE45\uFE46\uFE49-\uFE58\uFE5F-\uFEFE\uFF00-\uFF07\uFF0A-\uFF3A\uFF3C\uFF3E-\uFF5A\uFF5C\uFF5E\uFF61\uFF64-\u{10FFFF}]+@([\0-\x08\x0E-\x1F\$\+0-9=A-Z\^`-z\|~-\x9F\xA2-\xA6\xA8-\xAA\xAC-\xB5\xB8-\xBA\xBC-\xBE\xC0-\u037D\u037F-\u0386\u0388-\u0559\u0560-\u0588\u058B-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05F2\u05F5-\u0608\u060B\u060E-\u061A\u061C\u0620-\u0669\u066E-\u06D3\u06D5-\u06FF\u070E-\u07F6\u07FA-\u082F\u083F-\u085D\u085F-\u0963\u0966-\u096F\u0971-\u09FC\u09FE-\u0A75\u0A77-\u0AEF\u0AF1-\u0C76\u0C78-\u0C83\u0C85-\u0DF3\u0DF5-\u0E4E\u0E50-\u0E59\u0E5C-\u0F03\u0F13\u0F15-\u0F39\u0F3E-\u0F84\u0F86-\u0FCF\u0FD5-\u0FD8\u0FDB-\u1049\u1050-\u10FA\u10FC-\u135F\u1369-\u13FF\u1401-\u166D\u166F-\u167F\u1681-\u169A\u169D-\u16EA\u16EE-\u1734\u1737-\u17D3\u17D7\u17DB-\u17FF\u180B-\u1943\u1946-\u1A1D\u1A20-\u1A9F\u1AA7\u1AAE-\u1B4D\u1B50-\u1B59\u1B61-\u1B7C\u1B80-\u1BFB\u1C00-\u1C3A\u1C40-\u1C7D\u1C80-\u1CBF\u1CC8-\u1CD2\u1CD4-\u1FFF\u200B-\u200F\u202A-\u202E\u2044\u2052\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2CF8\u2CFD\u2D00-\u2D6F\u2D71-\u2DFF\u2E2F\u2E50\u2E51\u2E5E-\u2FFF\u3004-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303C\u303E-\u309F\u30A1-\u30FA\u30FC-\uA4FD\uA500-\uA60C\uA610-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA6F8-\uA873\uA878-\uA8CD\uA8D0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA95E\uA960-\uA9C0\uA9CE-\uA9DD\uA9E0-\uAA5B\uAA60-\uAADD\uAAE0-\uAAEF\uAAF2-\uABEA\uABEC-\uFD3D\uFD40-\uFE0F\uFE1A-\uFE2F\uFE53\uFE62\uFE64-\uFE67\uFE69\uFE6C-\uFEFE\uFF00\uFF04\uFF0B\uFF10-\uFF19\uFF1C-\uFF1E\uFF21-\uFF3A\uFF3E\uFF40-\uFF5A\uFF5C\uFF5E\uFF66-\u{100FF}\u{10103}-\u{1039E}\u{103A0}-\u{103CF}\u{103D1}-\u{1056E}\u{10570}-\u{10856}\u{10858}-\u{1091E}\u{10920}-\u{1093E}\u{10940}-\u{10A4F}\u{10A59}-\u{10A7E}\u{10A80}-\u{10AEF}\u{10AF7}-\u{10B38}\u{10B40}-\u{10B98}\u{10B9D}-\u{10D6D}\u{10D6F}-\u{10EAC}\u{10EAE}-\u{10F54}\u{10F5A}-\u{10F85}\u{10F8A}-\u{11046}\u{1104E}-\u{110BA}\u{110BD}\u{110C2}-\u{1113F}\u{11144}-\u{11173}\u{11176}-\u{111C4}\u{111C9}-\u{111CC}\u{111CE}-\u{111DA}\u{111DC}\u{111E0}-\u{11237}\u{1123E}-\u{112A8}\u{112AA}-\u{113D3}\u{113D6}\u{113D9}-\u{1144A}\u{11450}-\u{11459}\u{1145C}\u{1145E}-\u{114C5}\u{114C7}-\u{115C0}\u{115D8}-\u{11640}\u{11644}-\u{1165F}\u{1166D}-\u{116B8}\u{116BA}-\u{1173B}\u{1173F}-\u{1183A}\u{1183C}-\u{11943}\u{11947}-\u{119E1}\u{119E3}-\u{11A3E}\u{11A47}-\u{11A99}\u{11A9D}\u{11AA3}-\u{11AFF}\u{11B0A}-\u{11BE0}\u{11BE2}-\u{11C40}\u{11C46}-\u{11C6F}\u{11C72}-\u{11EF6}\u{11EF9}-\u{11F42}\u{11F50}-\u{11FFE}\u{12000}-\u{1246F}\u{12475}-\u{12FF0}\u{12FF3}-\u{16A6D}\u{16A70}-\u{16AF4}\u{16AF6}-\u{16B36}\u{16B3C}-\u{16B43}\u{16B45}-\u{16D6C}\u{16D70}-\u{16E96}\u{16E9B}-\u{16FE1}\u{16FE3}-\u{1BC9E}\u{1BCA0}-\u{1DA86}\u{1DA8C}-\u{1E5FE}\u{1E600}-\u{1E95D}\u{1E960}-\u{10FFFF}]+(?:\.[\0-\x08\x0E-\x1F\$\+0-9=A-Z\^`-z\|~-\x9F\xA2-\xA6\xA8-\xAA\xAC-\xB5\xB8-\xBA\xBC-\xBE\xC0-\u037D\u037F-\u0386\u0388-\u0559\u0560-\u0588\u058B-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05F2\u05F5-\u0608\u060B\u060E-\u061A\u061C\u0620-\u0669\u066E-\u06D3\u06D5-\u06FF\u070E-\u07F6\u07FA-\u082F\u083F-\u085D\u085F-\u0963\u0966-\u096F\u0971-\u09FC\u09FE-\u0A75\u0A77-\u0AEF\u0AF1-\u0C76\u0C78-\u0C83\u0C85-\u0DF3\u0DF5-\u0E4E\u0E50-\u0E59\u0E5C-\u0F03\u0F13\u0F15-\u0F39\u0F3E-\u0F84\u0F86-\u0FCF\u0FD5-\u0FD8\u0FDB-\u1049\u1050-\u10FA\u10FC-\u135F\u1369-\u13FF\u1401-\u166D\u166F-\u167F\u1681-\u169A\u169D-\u16EA\u16EE-\u1734\u1737-\u17D3\u17D7\u17DB-\u17FF\u180B-\u1943\u1946-\u1A1D\u1A20-\u1A9F\u1AA7\u1AAE-\u1B4D\u1B50-\u1B59\u1B61-\u1B7C\u1B80-\u1BFB\u1C00-\u1C3A\u1C40-\u1C7D\u1C80-\u1CBF\u1CC8-\u1CD2\u1CD4-\u1FFF\u200B-\u200F\u202A-\u202E\u2044\u2052\u2060-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2CF8\u2CFD\u2D00-\u2D6F\u2D71-\u2DFF\u2E2F\u2E50\u2E51\u2E5E-\u2FFF\u3004-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303C\u303E-\u309F\u30A1-\u30FA\u30FC-\uA4FD\uA500-\uA60C\uA610-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA6F8-\uA873\uA878-\uA8CD\uA8D0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA95E\uA960-\uA9C0\uA9CE-\uA9DD\uA9E0-\uAA5B\uAA60-\uAADD\uAAE0-\uAAEF\uAAF2-\uABEA\uABEC-\uFD3D\uFD40-\uFE0F\uFE1A-\uFE2F\uFE53\uFE62\uFE64-\uFE67\uFE69\uFE6C-\uFEFE\uFF00\uFF04\uFF0B\uFF10-\uFF19\uFF1C-\uFF1E\uFF21-\uFF3A\uFF3E\uFF40-\uFF5A\uFF5C\uFF5E\uFF66-\u{100FF}\u{10103}-\u{1039E}\u{103A0}-\u{103CF}\u{103D1}-\u{1056E}\u{10570}-\u{10856}\u{10858}-\u{1091E}\u{10920}-\u{1093E}\u{10940}-\u{10A4F}\u{10A59}-\u{10A7E}\u{10A80}-\u{10AEF}\u{10AF7}-\u{10B38}\u{10B40}-\u{10B98}\u{10B9D}-\u{10D6D}\u{10D6F}-\u{10EAC}\u{10EAE}-\u{10F54}\u{10F5A}-\u{10F85}\u{10F8A}-\u{11046}\u{1104E}-\u{110BA}\u{110BD}\u{110C2}-\u{1113F}\u{11144}-\u{11173}\u{11176}-\u{111C4}\u{111C9}-\u{111CC}\u{111CE}-\u{111DA}\u{111DC}\u{111E0}-\u{11237}\u{1123E}-\u{112A8}\u{112AA}-\u{113D3}\u{113D6}\u{113D9}-\u{1144A}\u{11450}-\u{11459}\u{1145C}\u{1145E}-\u{114C5}\u{114C7}-\u{115C0}\u{115D8}-\u{11640}\u{11644}-\u{1165F}\u{1166D}-\u{116B8}\u{116BA}-\u{1173B}\u{1173F}-\u{1183A}\u{1183C}-\u{11943}\u{11947}-\u{119E1}\u{119E3}-\u{11A3E}\u{11A47}-\u{11A99}\u{11A9D}\u{11AA3}-\u{11AFF}\u{11B0A}-\u{11BE0}\u{11BE2}-\u{11C40}\u{11C46}-\u{11C6F}\u{11C72}-\u{11EF6}\u{11EF9}-\u{11F42}\u{11F50}-\u{11FFE}\u{12000}-\u{1246F}\u{12475}-\u{12FF0}\u{12FF3}-\u{16A6D}\u{16A70}-\u{16AF4}\u{16AF6}-\u{16B36}\u{16B3C}-\u{16B43}\u{16B45}-\u{16D6C}\u{16D70}-\u{16E96}\u{16E9B}-\u{16FE1}\u{16FE3}-\u{1BC9E}\u{1BCA0}-\u{1DA86}\u{1DA8C}-\u{1E5FE}\u{1E600}-\u{1E95D}\u{1E960}-\u{10FFFF}]+)+)/gmu);const[e,i]=ot(t,{ignoreDashEOL:!0}),n=e.matchAll(Vm(this,Jp)),s=[];for(const r of n){const[t,e]=r;let n;if(t.startsWith("www.")||t.startsWith("http://")||t.startsWith("https://"))n=t;else{if(!URL.canParse(`http://${e}`))continue;n=t.startsWith("mailto:")?t:`mailto:${t}`}const a=LA(n,null,{addDefaultProtocol:!0});if(a){const[e,n]=lt(i,r.index,t.length);s.push({url:a.href,index:e,length:n})}}return s}static processLinks(t){return this.findLinks(t._textHighlighter.textContentItemsStr.join("\n")).map(e=>function({url:t,index:e,length:i},n,s){const r=n._textHighlighter,[{begin:a,end:o}]=r._convertMatches([e],[i]),l=new Range;return l.setStart(...Nt(r.textDivs[a.divIdx],a.offset)),l.setEnd(...Nt(r.textDivs[o.divIdx],o.offset)),{id:`inferred_link_${s}`,unsafeUrl:t,url:t,annotationType:DA.LINK,rotation:0,...Rt(l,n),borderStyle:null}}(e,t,Um(this,Zp)._++))}}Zp=new WeakMap,Jp=new WeakMap,$m(sE,Zp,0),$m(sE,Jp);class rE{constructor(t){var e;$m(this,lg),$m(this,tg,null),$m(this,eg,0),$m(this,ig,null),$m(this,ng,__.INITIAL),$m(this,sg,null),$m(this,rg,0),$m(this,ag,null),Bm(this,"canvas",null),Bm(this,"div",null),Bm(this,"eventBus",null),Bm(this,"id",null),Bm(this,"pageColors",null),Bm(this,"renderingQueue",null),Bm(this,"renderTask",null),Bm(this,"resume",null),$m(this,og,t=>{var e;if(null==(e=Vm(this,sg))||e.call(this,!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this))return this.renderingState=__.PAUSED,void(this.resume=()=>{this.renderingState=__.RUNNING,t()});t()}),this.eventBus=t.eventBus,this.id=t.id,this.pageColors=t.pageColors||null,this.renderingQueue=t.renderingQueue,Hm(this,eg,null!=(e=t.minDurationToUpdateCanvas)?e:500)}get renderingState(){return Vm(this,ng)}set renderingState(t){var e;if(t!==Vm(this,ng))switch(Hm(this,ng,t),Vm(this,tg)&&(clearTimeout(Vm(this,tg)),Hm(this,tg,null)),t){case __.PAUSED:this.div.classList.remove("loading"),Hm(this,rg,0),null==(e=Vm(this,sg))||e.call(this,!1);break;case __.RUNNING:this.div.classList.add("loadingIcon"),Hm(this,tg,setTimeout(()=>{this.div.classList.add("loading"),Hm(this,tg,null)},0)),Hm(this,rg,Date.now());break;case __.INITIAL:case __.FINISHED:this.div.classList.remove("loadingIcon","loading"),Hm(this,rg,0)}}_createCanvas(t,e=!1){const{pageColors:i}=this,n=!(!(null==i?void 0:i.background)||!(null==i?void 0:i.foreground)),s=this.canvas,r=!s&&!n&&!e;let a=this.canvas=document.createElement("canvas");return Hm(this,sg,e=>{if(r){let i=Vm(this,ag);if(!e&&Vm(this,eg)>0){if(Date.now()-Vm(this,rg)<Vm(this,eg))return;i||(i=Hm(this,ag,a),a=this.canvas=a.cloneNode(!1),t(a))}return i?(a.getContext("2d",{alpha:!1}).drawImage(i,0,0),void(e?zm(this,lg,hg).call(this):Hm(this,rg,Date.now()))):(t(a),void Hm(this,sg,null))}e&&(s?(s.replaceWith(a),s.width=s.height=0):t(a))}),{canvas:a,prevCanvas:s}}_resetCanvas(){const{canvas:t}=this;t&&(t.remove(),t.width=t.height=0,this.canvas=null,zm(this,lg,hg).call(this))}async _drawCanvas(t,e,i){var n,s;const r=this.renderTask=this.pdfPage.render(t);r.onContinue=Vm(this,og),r.onError=t=>{t instanceof l_&&(e(),Hm(this,ig,null))};let a=null;try{await r.promise,null==(n=Vm(this,sg))||n.call(this,!0)}catch(o){if(o instanceof l_)return;a=o,null==(s=Vm(this,sg))||s.call(this,!0)}finally{Hm(this,ig,a),r===this.renderTask&&(this.renderTask=null)}if(this.renderingState=__.FINISHED,i(r),a)throw a}cancelRendering({cancelExtraDelay:t=0}={}){this.renderTask&&(this.renderTask.cancel(t),this.renderTask=null),this.resume=null}dispatchPageRender(){this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id})}dispatchPageRendered(t,e){this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:t,isDetailView:e,timestamp:performance.now(),error:Vm(this,ig)})}}tg=new WeakMap,eg=new WeakMap,ig=new WeakMap,ng=new WeakMap,sg=new WeakMap,rg=new WeakMap,ag=new WeakMap,og=new WeakMap,lg=new WeakSet,hg=function(){Vm(this,ag)&&(Vm(this,ag).width=Vm(this,ag).height=0,Hm(this,ag,null))};class aE{constructor(t){$m(this,ug,null),this.pageIndex=t.pageIndex}async render({intent:t="display"}){"display"!==t||Vm(this,ug)||this._cancelled||Hm(this,ug,new NA({pageIndex:this.pageIndex}))}cancel(){this._cancelled=!0,Vm(this,ug)&&(Vm(this,ug).destroy(),Hm(this,ug,null))}setParent(t){var e;null==(e=Vm(this,ug))||e.setParent(t)}getDrawLayer(){return Vm(this,ug)}}ug=new WeakMap;class oE extends rE{constructor({pageView:t}){super(t),$m(this,dg),$m(this,cg,null),Bm(this,"renderingCancelled",!1),this.pageView=t,this.renderingId="detail"+this.id,this.div=t.div}setPdfPage(t){this.pageView.setPdfPage(t)}get pdfPage(){return this.pageView.pdfPage}get renderingState(){return super.renderingState}set renderingState(t){this.renderingCancelled=!1,super.renderingState=t}reset({keepCanvas:t=!1}={}){const e=this.renderingCancelled||this.renderingState===__.RUNNING||this.renderingState===__.PAUSED;this.cancelRendering(),this.renderingState=__.INITIAL,this.renderingCancelled=e,t||this._resetCanvas()}update({visibleArea:t=null,underlyingViewUpdated:e=!1}={}){if(e)return this.cancelRendering(),void(this.renderingState=__.INITIAL);if(!zm(this,dg,pg).call(this,t))return;const{viewport:i,maxCanvasPixels:n,capCanvasAreaFactor:s}=this.pageView,r=t.maxX-t.minX,a=t.maxY-t.minY,o=r*a*e_.pixelRatio**2,l=(Math.sqrt(e_.capPixels(n,s)/o)-1)/2;let h=Math.min(1,l);h<0&&(h=0);const u=r*h,c=a*h,d=Math.max(0,t.minX-u),p=Math.min(i.width,t.maxX+u),g=Math.max(0,t.minY-c),f=Math.min(i.height,t.maxY+c);Hm(this,cg,{minX:d,minY:g,width:p-d,height:f-g,scale:i.scale}),this.reset({keepCanvas:!0})}async draw(){if(this.pageView.detailView!==this)return;const t=this.pageView.renderingState===__.FINISHED||this.renderingState===__.FINISHED;this.renderingState!==__.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:e,pdfPage:i,viewport:n}=this.pageView;if(!i)throw this.renderingState=__.FINISHED,new Error("pdfPage is not loaded");this.renderingState=__.RUNNING;const s=this.pageView._ensureCanvasWrapper(),{canvas:r,prevCanvas:a}=this._createCanvas(t=>{var e;"CANVAS"===(null==(e=s.firstElementChild)?void 0:e.tagName)?s.firstElementChild.after(t):s.prepend(t)},t);r.setAttribute("aria-hidden","true");const{width:o,height:l}=n,h=Vm(this,cg),{pixelRatio:u}=e_,c=[u,0,0,u,-h.minX*u,-h.minY*u];r.width=h.width*u,r.height=h.height*u;const{style:d}=r;d.width=100*h.width/o+"%",d.height=100*h.height/l+"%",d.top=100*h.minY/l+"%",d.left=100*h.minX/o+"%";const p=this._drawCanvas(this.pageView._getRenderingContext(r,c),()=>{var t;null==(t=this.canvas)||t.remove(),this.canvas=a},()=>{this.dispatchPageRendered(!1,!0)});return e.setAttribute("data-loaded",!0),this.dispatchPageRender(),p}}cg=new WeakMap,dg=new WeakSet,pg=function(t){if(!Vm(this,cg))return!0;const e=Vm(this,cg).minX,i=Vm(this,cg).minY,n=Vm(this,cg).width+e,s=Vm(this,cg).height+i;if(t.minX<e||t.minY<i||t.maxX>n||t.maxY>s)return!0;const{width:r,height:a,scale:o}=this.pageView.viewport;if(Vm(this,cg).scale!==o)return!0;const l=t.minX-e,h=n-t.maxX,u=t.minY-i,c=s-t.maxY;return e>0&&h/l>3||n<r&&l/h>3||i>0&&c/u>3||s<a&&u/c>3};const lE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},hE=/^H(\d+)$/;class uE{constructor(t,e){$m(this,yg),$m(this,gg),$m(this,fg,null),$m(this,mg),$m(this,vg,new Map),$m(this,wg),$m(this,bg,null),Hm(this,gg,t.getStructTree()),Hm(this,wg,e)}async render(){var t;if(Vm(this,mg))return Vm(this,mg);const{promise:e,resolve:i,reject:n}=Promise.withResolvers();Hm(this,mg,e);try{Hm(this,fg,zm(this,yg,xg).call(this,await Vm(this,gg)))}catch(s){n(s)}return Hm(this,gg,null),null==(t=Vm(this,fg))||t.classList.add("structTree"),i(Vm(this,fg)),e}async getAriaAttributes(t){try{return await this.render(),Vm(this,vg).get(t)}catch{}return null}hide(){Vm(this,fg)&&!Vm(this,fg).hidden&&(Vm(this,fg).hidden=!0)}show(){var t;(null==(t=Vm(this,fg))?void 0:t.hidden)&&(Vm(this,fg).hidden=!1)}addElementsToTextLayer(){var t;if(Vm(this,bg)){for(const[e,i]of Vm(this,bg))null==(t=document.getElementById(e))||t.append(i);Vm(this,bg).clear(),Hm(this,bg,null)}}}gg=new WeakMap,fg=new WeakMap,mg=new WeakMap,vg=new WeakMap,wg=new WeakMap,bg=new WeakMap,yg=new WeakSet,Ag=function(t,e){const{alt:i,id:n,lang:s}=t;if(void 0!==i){let n=!1;const s=tt(i);for(const e of t.children)if("annotation"===e.type){let t=Vm(this,vg).get(e.id);t||(t=new Map,Vm(this,vg).set(e.id,t)),t.set("aria-label",s),n=!0}n||e.setAttribute("aria-label",s)}void 0!==n&&e.setAttribute("aria-owns",n),void 0!==s&&e.setAttribute("lang",tt(s,!0))},_g=function(t,e){const{alt:i,bbox:n,children:s}=t,r=null==s?void 0:s[0];if(!Vm(this,wg)||!i||!n||"content"!==(null==r?void 0:r.type))return!1;const{id:a}=r;if(!a)return!1;e.setAttribute("aria-owns",a);const o=document.createElement("span");(Vm(this,bg)||Hm(this,bg,new Map)).set(a,o),o.setAttribute("role","img"),o.setAttribute("aria-label",tt(i));const{pageHeight:l,pageX:h,pageY:u}=Vm(this,wg),c="calc(var(--total-scale-factor) *",{style:d}=o;return d.width=`${c}${n[2]-n[0]}px)`,d.height=`${c}${n[3]-n[1]}px)`,d.left=`${c}${n[0]-h}px)`,d.top=`${c}${l-n[3]+u}px)`,!0},xg=function(t){if(!t)return null;const e=document.createElement("span");if("role"in t){const{role:i}=t,n=i.match(hE);if(n?(e.setAttribute("role","heading"),e.setAttribute("aria-level",n[1])):lE[i]&&e.setAttribute("role",lE[i]),"Figure"===i&&zm(this,yg,_g).call(this,t,e))return e}if(zm(this,yg,Ag).call(this,t,e),t.children)if(1===t.children.length&&"id"in t.children[0])zm(this,yg,Ag).call(this,t.children[0],e);else for(const i of t.children)e.append(zm(this,yg,xg).call(this,i));return e};const cE=class t{constructor(){$m(this,Fg),$m(this,Eg,!1),$m(this,Sg,null),$m(this,Cg,new Map),$m(this,kg,new Map)}setTextMapping(t){Hm(this,Sg,t)}enable(){if(Vm(this,Eg))throw new Error("TextAccessibilityManager is already enabled.");if(!Vm(this,Sg))throw new Error("Text divs and strings have not been set.");if(Hm(this,Eg,!0),Hm(this,Sg,Vm(this,Sg).slice()),Vm(this,Sg).sort(zm(t,Mg,Pg)),Vm(this,Cg).size>0){const t=Vm(this,Sg);for(const[e,i]of Vm(this,Cg))document.getElementById(e)?zm(this,Fg,Dg).call(this,e,t[i]):Vm(this,Cg).delete(e)}for(const[t,e]of Vm(this,kg))this.addPointerInTextLayer(t,e);Vm(this,kg).clear()}disable(){Vm(this,Eg)&&(Vm(this,kg).clear(),Hm(this,Sg,null),Hm(this,Eg,!1))}removePointerInTextLayer(t){if(!Vm(this,Eg))return void Vm(this,kg).delete(t);const e=Vm(this,Sg);if(!e||0===e.length)return;const{id:i}=t,n=Vm(this,Cg).get(i);if(void 0===n)return;const s=e[n];Vm(this,Cg).delete(i);let r=s.getAttribute("aria-owns");(null==r?void 0:r.includes(i))&&(r=r.split(" ").filter(t=>t!==i).join(" "),r?s.setAttribute("aria-owns",r):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}addPointerInTextLayer(e,i){const{id:n}=e;if(!n)return null;if(!Vm(this,Eg))return Vm(this,kg).set(e,i),null;i&&this.removePointerInTextLayer(e);const s=Vm(this,Sg);if(!s||0===s.length)return null;const r=et(s,i=>{var n;return zm(n=t,Mg,Pg).call(n,e,i)<0}),a=Math.max(0,r-1),o=s[a];zm(this,Fg,Dg).call(this,n,o),Vm(this,Cg).set(n,a);const l=o.parentNode;return(null==l?void 0:l.classList.contains("markedContent"))?l.id:null}moveElementInDOM(e,i,n,s){const r=this.addPointerInTextLayer(n,s);if(!e.hasChildNodes())return e.append(i),r;const a=Array.from(e.childNodes).filter(t=>t!==i);if(0===a.length)return r;const o=n||i,l=et(a,e=>{var i;return zm(i=t,Mg,Pg).call(i,o,e)<0});return 0===l?a[0].before(i):a[l-1].after(i),r}};Eg=new WeakMap,Sg=new WeakMap,Cg=new WeakMap,kg=new WeakMap,Mg=new WeakSet,Pg=function(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();if(0===i.width&&0===i.height)return 1;if(0===n.width&&0===n.height)return-1;const s=i.y,r=i.y+i.height,a=i.y+i.height/2,o=n.y,l=n.y+n.height,h=n.y+n.height/2;return a<=o&&h>=r?-1:h<=s&&a>=l?1:i.x+i.width/2-(n.x+n.width/2)},Fg=new WeakSet,Dg=function(t,e){const i=e.getAttribute("aria-owns");(null==i?void 0:i.includes(t))||e.setAttribute("aria-owns",i?`${i} ${t}`:t),e.removeAttribute("role")},$m(cE,Mg);let dE=cE;class pE{constructor({findController:t,eventBus:e,pageIndex:i}){$m(this,Tg,null),this.findController=t,this.matches=[],this.eventBus=e,this.pageIdx=i,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(t,e){this.textDivs=t,this.textContentItemsStr=e}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,Vm(this,Tg)||(Hm(this,Tg,new AbortController),this.eventBus._on("updatetextlayermatches",t=>{t.pageIndex!==this.pageIdx&&-1!==t.pageIndex||this._updateMatches()},{signal:Vm(this,Tg).signal})),this._updateMatches()}disable(){var t;this.enabled&&(this.enabled=!1,null==(t=Vm(this,Tg))||t.abort(),Hm(this,Tg,null),this._updateMatches(!0))}_convertMatches(t,e){if(!t)return[];const{textContentItemsStr:i}=this;let n=0,s=0;const r=i.length-1,a=[];for(let o=0,l=t.length;o<l;o++){let l=t[o];for(;n!==r&&l>=s+i[n].length;)s+=i[n].length,n++;n===i.length&&console.error("Could not find a matching mapping");const h={begin:{divIdx:n,offset:l-s}};for(l+=e[o];n!==r&&l>s+i[n].length;)s+=i[n].length,n++;h.end={divIdx:n,offset:l-s},a.push(h)}return a}_renderMatches(t){function e(t,e){const n=t.divIdx;return a[n].textContent="",i(n,0,t.offset,e)}function i(t,e,i,n){let s=a[t];if(s.nodeType===Node.TEXT_NODE){const e=document.createElement("span");s.before(e),e.append(s),a[t]=e,s=e}const o=r[t].substring(e,i),l=document.createTextNode(o);if(n){const t=document.createElement("span");if(t.className=`${n} appended`,t.append(l),s.append(t),n.includes("selected")){const{left:e}=t.getClientRects()[0];return e-s.getBoundingClientRect().left}return 0}return s.append(l),0}if(0===t.length)return;const{findController:n,pageIdx:s}=this,{textContentItemsStr:r,textDivs:a}=this,o=s===n.selected.pageIdx,l=n.selected.matchIdx;let h=null;const u=void 0;let c=l,d=c+1;if(n.state.highlightAll)c=0,d=t.length;else if(!o)return;let p=-1,g=-1;for(let f=c;f<d;f++){const r=t[f],c=r.begin;if(c.divIdx===p&&c.offset===g)continue;p=c.divIdx,g=c.offset;const d=r.end,m=o&&f===l,v=m?" selected":"";let w=0;if(h&&c.divIdx===h.divIdx?i(h.divIdx,h.offset,c.offset):(null!==h&&i(h.divIdx,h.offset,u),e(c)),c.divIdx===d.divIdx)w=i(c.divIdx,c.offset,d.offset,"highlight"+v);else{w=i(c.divIdx,c.offset,u,"highlight begin"+v);for(let t=c.divIdx+1,e=d.divIdx;t<e;t++)a[t].className="highlight middle"+v;e(d,"highlight end"+v)}h=d,m&&n.scrollMatchIntoView({element:a[c.divIdx],selectedLeft:w,pageIndex:s,matchIndex:l})}h&&i(h.divIdx,h.offset,u)}_updateMatches(t=!1){if(!this.enabled&&!t)return;const{findController:e,matches:i,pageIdx:n}=this,{textContentItemsStr:s,textDivs:r}=this;let a=-1;for(const h of i){for(let t=Math.max(a,h.begin.divIdx),e=h.end.divIdx;t<=e;t++){const e=r[t];e.textContent=s[t],e.className=""}a=h.end.divIdx+1}if(!(null==e?void 0:e.highlightMatches)||t)return;const o=e.pageMatches[n]||null,l=e.pageMatchesLength[n]||null;this.matches=this._convertMatches(o,l),this._renderMatches(this.matches)}}Tg=new WeakMap;const gE=class t{constructor({pdfPage:t,highlighter:e=null,accessibilityManager:i=null,enablePermissions:n=!1,onAppend:s=null}){$m(this,Bg),$m(this,Ig,!1),$m(this,Lg,null),$m(this,Rg,!1),$m(this,Ng,null),this.pdfPage=t,this.highlighter=e,this.accessibilityManager=i,Hm(this,Ig,!0===n),Hm(this,Lg,s),this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}async render({viewport:t,textContentParams:e=null}){var i,n,s,r,a;if(Vm(this,Rg)&&Vm(this,Ng))return Vm(this,Ng).update({viewport:t,onBefore:this.hide.bind(this)}),void this.show();this.cancel(),Hm(this,Ng,new f_({textContentSource:this.pdfPage.streamTextContent(e||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:t}));const{textDivs:o,textContentItemsStr:l}=Vm(this,Ng);null==(i=this.highlighter)||i.setTextMapping(o,l),null==(n=this.accessibilityManager)||n.setTextMapping(o),await Vm(this,Ng).render(),Hm(this,Rg,!0);const h=document.createElement("div");h.className="endOfContent",this.div.append(h),zm(this,Bg,jg).call(this,h),null==(s=Vm(this,Lg))||s.call(this,this.div),null==(r=this.highlighter)||r.enable(),null==(a=this.accessibilityManager)||a.enable()}hide(){var t;!this.div.hidden&&Vm(this,Rg)&&(null==(t=this.highlighter)||t.disable(),this.div.hidden=!0)}show(){var t;this.div.hidden&&Vm(this,Rg)&&(this.div.hidden=!1,null==(t=this.highlighter)||t.enable())}cancel(){var e,i,n,s;null==(e=Vm(this,Ng))||e.cancel(),Hm(this,Ng,null),null==(i=this.highlighter)||i.disable(),null==(n=this.accessibilityManager)||n.disable(),zm(s=t,Vg,$g).call(s,this.div)}};Ig=new WeakMap,Lg=new WeakMap,Rg=new WeakMap,Ng=new WeakMap,Og=new WeakMap,Wg=new WeakMap,Bg=new WeakSet,jg=function(t){var e;const{div:i}=this;i.addEventListener("mousedown",()=>{i.classList.add("selecting")}),i.addEventListener("copy",t=>{if(!Vm(this,Ig)){const e=document.getSelection();t.clipboardData.setData("text/plain",tt(JA(e.toString())))}p_(t)}),Vm(gE,Og).set(i,t),zm(e=gE,Vg,Hg).call(e)},Vg=new WeakSet,$g=function(t){var e;Vm(this,Og).delete(t),0===Vm(this,Og).size&&(null==(e=Vm(this,Wg))||e.abort(),Hm(this,Wg,null))},Hg=function(){if(Vm(this,Wg))return;Hm(this,Wg,new AbortController);const{signal:t}=Vm(this,Wg),e=(t,e)=>{e.append(t),t.style.width="",t.style.height="",e.classList.remove("selecting")};let i=!1;var n,s;document.addEventListener("pointerdown",()=>{i=!0},{signal:t}),document.addEventListener("pointerup",()=>{i=!1,Vm(this,Og).forEach(e)},{signal:t}),window.addEventListener("blur",()=>{i=!1,Vm(this,Og).forEach(e)},{signal:t}),document.addEventListener("keyup",()=>{i||Vm(this,Og).forEach(e)},{signal:t}),document.addEventListener("selectionchange",()=>{var t;const i=document.getSelection();if(0===i.rangeCount)return void Vm(this,Og).forEach(e);const r=new Set;for(let e=0;e<i.rangeCount;e++){const t=i.getRangeAt(e);for(const e of Vm(this,Og).keys())!r.has(e)&&t.intersectsNode(e)&&r.add(e)}for(const[n,s]of Vm(this,Og))r.has(n)?n.classList.add("selecting"):e(s,n);if(null!=n||(n="none"===getComputedStyle(Vm(this,Og).values().next().value).getPropertyValue("-moz-user-select")),n)return;const a=i.getRangeAt(0),o=s&&(0===a.compareBoundaryPoints(Range.END_TO_END,s)||0===a.compareBoundaryPoints(Range.START_TO_END,s));let l=o?a.startContainer:a.endContainer;if(l.nodeType===Node.TEXT_NODE&&(l=l.parentNode),!o&&0===a.endOffset)do{for(;!l.previousSibling;)l=l.parentNode;l=l.previousSibling}while(!l.childNodes.length);const h=null==(t=l.parentElement)?void 0:t.closest(".textLayer"),u=Vm(this,Og).get(h);u&&(u.style.width=h.style.width,u.style.height=h.style.height,l.parentElement.insertBefore(u,o?l:l.nextSibling)),s=a.cloneRange()},{signal:t})},$m(gE,Vg),$m(gE,Og,new Map),$m(gE,Wg,null);let fE=gE;class mE{constructor({pdfPage:t,annotationStorage:e=null,linkService:i,xfaHtml:n=null}){this.pdfPage=t,this.annotationStorage=e,this.linkService=i,this.xfaHtml=n,this.div=null,this._cancelled=!1}async render({viewport:t,intent:e="display"}){if("print"===e){const i={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e};return this.div=document.createElement("div"),i.div=this.div,A_.render(i)}const i=await this.pdfPage.getXfa();if(this._cancelled||!i)return{textDivs:[]};const n={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e};return this.div?A_.update(n):(this.div=document.createElement("div"),n.div=this.div,A_.render(n))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}const vE={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new J_}},wE=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class bE extends rE{constructor(t){var e,i,n,s,r,a,o;super(t),$m(this,af),$m(this,zg,FA.ENABLE_FORMS),$m(this,Ug,null),$m(this,Gg,!0),$m(this,qg,!1),$m(this,Xg,!1),$m(this,Yg,null),$m(this,Kg,!1),$m(this,Qg,null),$m(this,Zg,null),$m(this,Jg,1),$m(this,tf,1),$m(this,ef,1),$m(this,nf,1),$m(this,sf,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0}),$m(this,rf,[null,null,null,null]);const l=t.container,h=t.defaultViewport;this.renderingId="page"+this.id,Hm(this,Yg,t.layerProperties||vE),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||1,this.viewport=h,this.pdfPageRotate=h.rotation,this._optionalContentConfigPromise=t.optionalContentConfigPromise||null,Hm(this,ef,null!=(e=t.textLayerMode)?e:1),Hm(this,zg,null!=(i=t.annotationMode)?i:FA.ENABLE_FORMS),this.imageResourcesPath=t.imageResourcesPath||"",this.enableDetailCanvas=null==(n=t.enableDetailCanvas)||n,this.maxCanvasPixels=null!=(s=t.maxCanvasPixels)?s:nE.get("maxCanvasPixels"),this.maxCanvasDim=t.maxCanvasDim||nE.get("maxCanvasDim"),this.capCanvasAreaFactor=null!=(r=t.capCanvasAreaFactor)?r:nE.get("capCanvasAreaFactor"),Hm(this,Gg,!1!==t.enableAutoLinking),this.l10n=t.l10n,this.l10n||(this.l10n=new Qx),this._isStandalone=!(null==(a=this.renderingQueue)?void 0:a.hasViewer()),this._container=l,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null,this.detailView=null;const u=document.createElement("div");if(u.className="page",u.setAttribute("data-page-number",this.id),u.setAttribute("role","region"),u.setAttribute("data-l10n-id","pdfjs-page-landmark"),u.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=u,zm(this,af,lf).call(this),null==l||l.append(u),this._isStandalone){null==l||l.style.setProperty("--scale-factor",this.scale*o_.PDF_TO_CSS_UNITS),(null==(o=this.pageColors)?void 0:o.background)&&(null==l||l.style.setProperty("--page-bg-color",this.pageColors.background));const{optionalContentConfigPromise:e}=t;e&&e.then(t=>{e===this._optionalContentConfigPromise&&(Vm(this,sf).initialOptionalContent=t.hasInitialVisibility)}),t.l10n||this.l10n.translate(this.div)}}setPdfPage(t){var e,i,n,s;!this._isStandalone||"CanvasText"!==(null==(e=this.pageColors)?void 0:e.foreground)&&"Canvas"!==(null==(i=this.pageColors)?void 0:i.background)||(null==(n=this._container)||n.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),null==(s=this._container)||s.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=t,this.pdfPageRotate=t.rotate;const r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*o_.PDF_TO_CSS_UNITS,rotation:r}),zm(this,af,lf).call(this),this.reset()}destroy(){var t;this.reset(),null==(t=this.pdfPage)||t.cleanup()}hasEditableAnnotations(){var t;return!!(null==(t=this.annotationLayer)?void 0:t.hasEditableAnnotations())}get _textHighlighter(){return c_(this,"_textHighlighter",new pE({pageIndex:this.id-1,eventBus:this.eventBus,findController:Vm(this,Yg).findController}))}_resetCanvas(){super._resetCanvas(),Hm(this,Qg,null)}reset({keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:e=!1,keepXfaLayer:i=!1,keepTextLayer:n=!1,keepCanvasWrapper:s=!1,preserveDetailViewState:r=!1}={}){var a,o,l,h,u,c;this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:e,keepXfaLayer:i,keepTextLayer:n}),this.renderingState=__.INITIAL;const d=this.div,p=d.childNodes,g=t&&(null==(a=this.annotationLayer)?void 0:a.div)||null,f=e&&(null==(o=this.annotationEditorLayer)?void 0:o.div)||null,m=i&&(null==(l=this.xfaLayer)?void 0:l.div)||null,v=n&&(null==(h=this.textLayer)?void 0:h.div)||null,w=s&&Vm(this,Ug)||null;for(let b=p.length-1;b>=0;b--){const t=p[b];switch(t){case g:case f:case m:case v:case w:continue}t.remove();const e=Vm(this,rf).indexOf(t);e>=0&&(Vm(this,rf)[e]=null)}d.removeAttribute("data-loaded"),g&&this.annotationLayer.hide(),f&&this.annotationEditorLayer.hide(),m&&this.xfaLayer.hide(),v&&this.textLayer.hide(),null==(u=this.structTreeLayer)||u.hide(),!s&&Vm(this,Ug)&&(Hm(this,Ug,null),this._resetCanvas()),r||(null==(c=this.detailView)||c.reset({keepCanvas:s}),s||(this.detailView=null))}toggleEditingMode(t){Hm(this,Xg,t),this.hasEditableAnnotations()&&this.reset({keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,keepCanvasWrapper:!0})}updateVisibleArea(t){this.enableDetailCanvas&&(Vm(this,Kg)&&this.maxCanvasPixels>0&&t?(null!=this.detailView||(this.detailView=new oE({pageView:this})),this.detailView.update({visibleArea:t})):this.detailView&&(this.detailView.reset(),this.detailView=null))}update({scale:t=0,rotation:e=null,optionalContentConfigPromise:i=null,drawingDelay:n=-1}){var s,r,a;this.scale=t||this.scale,"number"==typeof e&&(this.rotation=e),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then(t=>{i===this._optionalContentConfigPromise&&(Vm(this,sf).initialOptionalContent=t.hasInitialVisibility)})),Vm(this,sf).directDrawing=!0;const o=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*o_.PDF_TO_CSS_UNITS,rotation:o}),zm(this,af,lf).call(this),this._isStandalone&&(null==(s=this._container)||s.style.setProperty("--scale-factor",this.viewport.scale)),zm(this,af,wf).call(this),this.canvas){const t=Vm(this,qg)&&Vm(this,Kg),e=n>=0&&n<1e3;if(e||t)return e&&!t&&this.renderingState!==__.FINISHED&&(this.cancelRendering({keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:n}),this.renderingState=__.FINISHED,Vm(this,sf).directDrawing=!1),this.cssTransform({redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!e,hideTextLayer:e}),void(e||(null==(r=this.detailView)||r.update({underlyingViewUpdated:!0}),this.dispatchPageRendered(!0,!1)))}this.cssTransform({}),this.reset({keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,keepCanvasWrapper:!0,preserveDetailViewState:!0}),null==(a=this.detailView)||a.update({underlyingViewUpdated:!0})}cancelRendering({keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:e=!1,keepXfaLayer:i=!1,keepTextLayer:n=!1,cancelExtraDelay:s=0}={}){var r;super.cancelRendering({cancelExtraDelay:s}),!this.textLayer||n&&this.textLayer.div||(this.textLayer.cancel(),this.textLayer=null),!this.annotationLayer||t&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),!this.annotationEditorLayer||e&&this.annotationEditorLayer.div||(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),!this.xfaLayer||i&&this.xfaLayer.div||(this.xfaLayer.cancel(),this.xfaLayer=null,null==(r=this._textHighlighter)||r.disable())}cssTransform({redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:e=!1,redrawXfaLayer:i=!1,redrawTextLayer:n=!1,hideTextLayer:s=!1}){var r;const{canvas:a}=this;if(!a)return;const o=Vm(this,Qg);if(this.viewport!==o){const t=(360+this.viewport.rotation-o.rotation)%360;if(90===t||270===t){const{width:e,height:i}=this.viewport,n=i/e,s=e/i;a.style.transform=`rotate(${t}deg) scale(${n},${s})`}else a.style.transform=0===t?"":`rotate(${t}deg)`}t&&this.annotationLayer&&zm(this,af,uf).call(this),e&&this.annotationEditorLayer&&(this.drawLayer&&zm(this,af,df).call(this),zm(this,af,cf).call(this)),i&&this.xfaLayer&&zm(this,af,pf).call(this),this.textLayer&&(s?(this.textLayer.hide(),null==(r=this.structTreeLayer)||r.hide()):n&&zm(this,af,gf).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(t,e){return this.viewport.convertToPdfPoint(t,e)}_ensureCanvasWrapper(){let t=Vm(this,Ug);return t||(t=Hm(this,Ug,document.createElement("div")),t.classList.add("canvasWrapper"),zm(this,af,of).call(this,t,"canvasWrapper")),t}_getRenderingContext(t,e){return{canvas:t,transform:e,viewport:this.viewport,annotationMode:Vm(this,zg),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors,isEditing:Vm(this,Xg)}}async draw(){this.renderingState!==__.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:t,l10n:e,pdfPage:i,viewport:n}=this;if(!i)throw this.renderingState=__.FINISHED,new Error("pdfPage is not loaded");this.renderingState=__.RUNNING;const s=this._ensureCanvasWrapper();if(this.textLayer||0===Vm(this,ef)||i.isPureXfa||(this._accessibilityManager||(this._accessibilityManager=new dE),this.textLayer=new fE({pdfPage:i,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:2===Vm(this,ef),onAppend:t=>{this.l10n.pause(),zm(this,af,of).call(this,t,"textLayer"),this.l10n.resume()}})),!this.annotationLayer&&Vm(this,zg)!==FA.DISABLE){const{annotationStorage:t,annotationEditorUIManager:e,downloadManager:n,enableScripting:s,fieldObjectsPromise:r,hasJSActionsPromise:a,linkService:o}=Vm(this,Yg);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new tx({pdfPage:i,annotationStorage:t,imageResourcesPath:this.imageResourcesPath,renderForms:Vm(this,zg)===FA.ENABLE_FORMS,linkService:o,downloadManager:n,enableScripting:s,hasJSActionsPromise:a,fieldObjectsPromise:r,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:e,onAppend:t=>{zm(this,af,of).call(this,t,"annotationLayer")}})}const{width:r,height:a}=n;Hm(this,Qg,n);const{canvas:o,prevCanvas:l}=this._createCanvas(t=>{s.prepend(t)});o.setAttribute("role","presentation"),this.outputScale||zm(this,af,wf).call(this);const{outputScale:h}=this;Hm(this,qg,Vm(this,Kg));const u=it(h.sx),c=it(h.sy),d=o.width=nt(k_(r*h.sx),u[0]),p=o.height=nt(k_(a*h.sy),c[0]),g=nt(k_(r),u[1]),f=nt(k_(a),c[1]);h.sx=d/g,h.sy=p/f,Vm(this,Jg)!==u[1]&&(t.style.setProperty("--scale-round-x",`${u[1]}px`),Hm(this,Jg,u[1])),Vm(this,tf)!==c[1]&&(t.style.setProperty("--scale-round-y",`${c[1]}px`),Hm(this,tf,c[1]));const m=h.scaled?[h.sx,0,0,h.sy,0,0]:null,v=this._drawCanvas(this._getRenderingContext(o,m),()=>{null==l||l.remove(),this._resetCanvas()},t=>{Vm(this,sf).regularAnnotations=!t.separateAnnots,this.dispatchPageRendered(!1,!1)}).then(async()=>{var t;this.structTreeLayer||(this.structTreeLayer=new uE(i,n.rawDims));const r=zm(this,af,gf).call(this);this.annotationLayer&&(await zm(this,af,uf).call(this),Vm(this,Gg)&&this.annotationLayer&&this.textLayer&&await zm(this,af,vf).call(this,r));const{annotationEditorUIManager:a}=Vm(this,Yg);a&&(this.drawLayer||(this.drawLayer=new aE({pageIndex:this.id})),await zm(this,af,df).call(this),this.drawLayer.setParent(s),this.annotationEditorLayer||(this.annotationEditorLayer=new Zx({uiManager:a,pdfPage:i,l10n:e,structTreeLayer:this.structTreeLayer,accessibilityManager:this._accessibilityManager,annotationLayer:null==(t=this.annotationLayer)?void 0:t.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer(),onAppend:t=>{zm(this,af,of).call(this,t,"annotationEditorLayer")}})),zm(this,af,cf).call(this))});if(i.isPureXfa){if(!this.xfaLayer){const{annotationStorage:t,linkService:e}=Vm(this,Yg);this.xfaLayer=new mE({pdfPage:i,annotationStorage:t,linkService:e})}zm(this,af,pf).call(this)}return t.setAttribute("data-loaded",!0),this.dispatchPageRender(),v}setPageLabel(t){var e;this.pageLabel="string"==typeof t?t:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:null!=(e=this.pageLabel)?e:this.id})),null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:t,initialOptionalContent:e,regularAnnotations:i}=Vm(this,sf);return t&&e&&i?this.canvas:null}}zg=new WeakMap,Ug=new WeakMap,Gg=new WeakMap,qg=new WeakMap,Xg=new WeakMap,Yg=new WeakMap,Kg=new WeakMap,Qg=new WeakMap,Zg=new WeakMap,Jg=new WeakMap,tf=new WeakMap,ef=new WeakMap,nf=new WeakMap,sf=new WeakMap,rf=new WeakMap,af=new WeakSet,of=function(t,e){const i=wE.get(e),n=Vm(this,rf)[i];if(Vm(this,rf)[i]=t,n)n.replaceWith(t);else{for(let e=i-1;e>=0;e--){const i=Vm(this,rf)[e];if(i)return void i.after(t)}this.div.prepend(t)}},lf=function(){const{div:t,viewport:e}=this;if(e.userUnit!==Vm(this,nf)&&(1!==e.userUnit?t.style.setProperty("--user-unit",e.userUnit):t.style.removeProperty("--user-unit"),Hm(this,nf,e.userUnit)),this.pdfPage){if(Vm(this,Zg)===e.rotation)return;Hm(this,Zg,e.rotation)}u_(t,e,!0,!1)},hf=function(t,e){this.eventBus.dispatch(t,{source:this,pageNumber:this.id,error:e})},uf=async function(){let t=null;try{await this.annotationLayer.render({viewport:this.viewport,intent:"display",structTreeLayer:this.structTreeLayer})}catch(e){console.error("#renderAnnotationLayer:",e),t=e}finally{zm(this,af,hf).call(this,"annotationlayerrendered",t)}},cf=async function(){let t=null;try{await this.annotationEditorLayer.render({viewport:this.viewport,intent:"display"})}catch(e){console.error("#renderAnnotationEditorLayer:",e),t=e}finally{zm(this,af,hf).call(this,"annotationeditorlayerrendered",t)}},df=async function(){try{await this.drawLayer.render({intent:"display"})}catch(t){console.error("#renderDrawLayer:",t)}},pf=async function(){var t;let e=null;try{const t=await this.xfaLayer.render({viewport:this.viewport,intent:"display"});(null==t?void 0:t.textDivs)&&this._textHighlighter&&zm(this,af,mf).call(this,t.textDivs)}catch(i){console.error("#renderXfaLayer:",i),e=i}finally{(null==(t=this.xfaLayer)?void 0:t.div)&&(this.l10n.pause(),zm(this,af,of).call(this,this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),zm(this,af,hf).call(this,"xfalayerrendered",e)}},gf=async function(){if(!this.textLayer)return;let t=null;try{await this.textLayer.render({viewport:this.viewport})}catch(e){if(e instanceof EA)return;console.error("#renderTextLayer:",e),t=e}zm(this,af,hf).call(this,"textlayerrendered",t),zm(this,af,ff).call(this)},ff=async function(){var t,e,i;if(!this.textLayer)return;const n=await(null==(t=this.structTreeLayer)?void 0:t.render());n&&(this.l10n.pause(),null==(e=this.structTreeLayer)||e.addElementsToTextLayer(),this.canvas&&n.parentNode!==this.canvas&&this.canvas.append(n),this.l10n.resume()),null==(i=this.structTreeLayer)||i.show()},mf=async function(t){const e=await this.pdfPage.getTextContent(),i=[];for(const n of e.items)i.push(n.str);this._textHighlighter.setTextMapping(t,i),this._textHighlighter.enable()},vf=async function(t){try{if(await t,!this.annotationLayer)return;await this.annotationLayer.injectLinkAnnotations({inferredLinks:sE.processLinks(this),viewport:this.viewport,structTreeLayer:this.structTreeLayer})}catch(e){console.error("#injectLinkAnnotations:",e)}},wf=function(){const{width:t,height:e}=this.viewport,i=this.outputScale=new e_;if(0===this.maxCanvasPixels){const t=1/this.scale;i.sx*=t,i.sy*=t,Hm(this,Kg,!0)}else Hm(this,Kg,i.limitCanvas(t,e,this.maxCanvasPixels,this.maxCanvasDim,this.capCanvasAreaFactor))};class yE{constructor(t){this._ready=new Promise((e,i)=>{import(t).then(t=>{e(t.QuickJSSandbox())}).catch(i)})}async createSandbox(t){(await this._ready).create(t)}async dispatchEventInSandbox(t){const e=await this._ready;setTimeout(()=>e.dispatchEvent(t),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}class AE{constructor({eventBus:t,externalServices:e=null,docProperties:i=null}){$m(this,Ff),$m(this,bf,null),$m(this,yf,null),$m(this,Af,null),$m(this,_f,null),$m(this,xf,null),$m(this,Ef,null),$m(this,Sf,null),$m(this,Cf,null),$m(this,kf,!1),$m(this,Mf,null),$m(this,Pf,null),Hm(this,xf,t),Hm(this,Ef,e),Hm(this,Af,i)}setViewer(t){Hm(this,Cf,t)}async setDocument(t){var e;if(Vm(this,Sf)&&await zm(this,Ff,Rf).call(this),Hm(this,Sf,t),!t)return;const[i,n,s]=await Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);if(!i&&!s)return void(await zm(this,Ff,Rf).call(this));if(t!==Vm(this,Sf))return;try{Hm(this,Mf,zm(this,Ff,Lf).call(this))}catch(o){return console.error("setDocument:",o),void(await zm(this,Ff,Rf).call(this))}const r=Vm(this,xf);Hm(this,_f,new AbortController);const{signal:a}=Vm(this,_f);r._on("updatefromsandbox",t=>{(null==t?void 0:t.source)===window&&zm(this,Ff,Df).call(this,t.detail)},{signal:a}),r._on("dispatcheventinsandbox",t=>{var e;null==(e=Vm(this,Mf))||e.dispatchEventInSandbox(t.detail)},{signal:a}),r._on("pagechanging",({pageNumber:t,previous:e})=>{t!==e&&(zm(this,Ff,If).call(this,e),zm(this,Ff,Tf).call(this,t))},{signal:a}),r._on("pagerendered",({pageNumber:t})=>{this._pageOpenPending.has(t)&&t===Vm(this,Cf).currentPageNumber&&zm(this,Ff,Tf).call(this,t)},{signal:a}),r._on("pagesdestroy",async()=>{var t,e;await zm(this,Ff,If).call(this,Vm(this,Cf).currentPageNumber),await(null==(t=Vm(this,Mf))?void 0:t.dispatchEventInSandbox({id:"doc",name:"WillClose"})),null==(e=Vm(this,bf))||e.resolve()},{signal:a});try{const e=await Vm(this,Af).call(this,t);if(t!==Vm(this,Sf))return;await Vm(this,Mf).createSandbox({objects:i,calculationOrder:n,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...e,actions:s}}),r.dispatch("sandboxcreated",{source:this})}catch(o){return console.error("setDocument:",o),void(await zm(this,Ff,Rf).call(this))}await(null==(e=Vm(this,Mf))?void 0:e.dispatchEventInSandbox({id:"doc",name:"Open"})),await zm(this,Ff,Tf).call(this,Vm(this,Cf).currentPageNumber,!0),Promise.resolve().then(()=>{t===Vm(this,Sf)&&Hm(this,kf,!0)})}async dispatchWillSave(){var t;return null==(t=Vm(this,Mf))?void 0:t.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var t;return null==(t=Vm(this,Mf))?void 0:t.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var t;if(Vm(this,Mf)){await(null==(t=Vm(this,Pf))?void 0:t.promise),Hm(this,Pf,Promise.withResolvers());try{await Vm(this,Mf).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(e){throw Vm(this,Pf).resolve(),Hm(this,Pf,null),e}await Vm(this,Pf).promise}}async dispatchDidPrint(){var t;return null==(t=Vm(this,Mf))?void 0:t.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var t;return(null==(t=Vm(this,yf))?void 0:t.promise)||null}get ready(){return Vm(this,kf)}get _pageOpenPending(){return c_(this,"_pageOpenPending",new Set)}get _visitedPages(){return c_(this,"_visitedPages",new Map)}}bf=new WeakMap,yf=new WeakMap,Af=new WeakMap,_f=new WeakMap,xf=new WeakMap,Ef=new WeakMap,Sf=new WeakMap,Cf=new WeakMap,kf=new WeakMap,Mf=new WeakMap,Pf=new WeakMap,Ff=new WeakSet,Df=async function(t){var e,i;const n=Vm(this,Cf),s=n.isInPresentationMode||n.isChangingPresentationMode,{id:r,siblings:a,command:o,value:l}=t;if(!r){switch(o){case"clear":console.clear();break;case"error":console.error(l);break;case"layout":if(!s){const t=function(t){let e=x_.VERTICAL,i=E_.NONE;switch(t){case"SinglePage":e=x_.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=x_.PAGE;case"TwoColumnLeft":i=E_.ODD;break;case"TwoPageRight":e=x_.PAGE;case"TwoColumnRight":i=E_.EVEN}return{scrollMode:e,spreadMode:i}}(l);n.spreadMode=t.spreadMode}break;case"page-num":n.currentPageNumber=l+1;break;case"print":await n.pagesPromise,Vm(this,xf).dispatch("print",{source:this});break;case"println":console.log(l);break;case"zoom":s||(n.currentScaleValue=l);break;case"SaveAs":Vm(this,xf).dispatch("download",{source:this});break;case"FirstPage":n.currentPageNumber=1;break;case"LastPage":n.currentPageNumber=n.pagesCount;break;case"NextPage":n.nextPage();break;case"PrevPage":n.previousPage();break;case"ZoomViewIn":s||n.increaseScale();break;case"ZoomViewOut":s||n.decreaseScale();break;case"WillPrintFinished":null==(e=Vm(this,Pf))||e.resolve(),Hm(this,Pf,null)}return}if(s&&t.focus)return;delete t.id,delete t.siblings;const h=a?[r,...a]:[r];for(const u of h){const e=document.querySelector(`[data-element-id="${u}"]`);e?e.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):null==(i=Vm(this,Sf))||i.annotationStorage.setValue(u,t)}},Tf=async function(t,e=!1){const i=Vm(this,Sf),n=this._visitedPages;if(e&&Hm(this,bf,Promise.withResolvers()),!Vm(this,bf))return;const s=Vm(this,Cf).getPageView(t-1);if((null==s?void 0:s.renderingState)!==__.FINISHED)return void this._pageOpenPending.add(t);this._pageOpenPending.delete(t);const r=(async()=>{var e,r;const a=await(n.has(t)?null:null==(e=s.pdfPage)?void 0:e.getJSActions());i===Vm(this,Sf)&&await(null==(r=Vm(this,Mf))?void 0:r.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:a}))})();n.set(t,r)},If=async function(t){var e;const i=Vm(this,Sf),n=this._visitedPages;if(!Vm(this,bf))return;if(this._pageOpenPending.has(t))return;const s=n.get(t);s&&(n.set(t,null),await s,i===Vm(this,Sf)&&await(null==(e=Vm(this,Mf))?void 0:e.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t})))},Lf=function(){if(Hm(this,yf,Promise.withResolvers()),Vm(this,Mf))throw new Error("#initScripting: Scripting already exists.");return Vm(this,Ef).createScripting()},Rf=async function(){var t,e,i,n;if(!Vm(this,Mf))return Hm(this,Sf,null),void(null==(t=Vm(this,yf))||t.resolve());Vm(this,bf)&&(await Promise.race([Vm(this,bf).promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(()=>{}),Hm(this,bf,null)),Hm(this,Sf,null);try{await Vm(this,Mf).destroySandbox()}catch{}null==(e=Vm(this,Pf))||e.reject(new Error("Scripting destroyed.")),Hm(this,Pf,null),null==(i=Vm(this,_f))||i.abort(),Hm(this,_f,null),this._pageOpenPending.clear(),this._visitedPages.clear(),Hm(this,Mf,null),Hm(this,kf,!1),null==(n=Vm(this,yf))||n.resolve()},Q(1148),Q(3579);let _E=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}renderHighestPriority(t){var e;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.isThumbnailViewEnabled&&(null==(e=this.pdfThumbnailViewer)?void 0:e.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(t,e,i,n=!1,s=!1){const r=t.views,a=r.length;if(0===a)return null;for(let c=0;c<a;c++){const t=r[c].view;if(!this.isViewFinished(t))return t}if(!s)for(let c=0;c<a;c++){const{detailView:t}=r[c].view;if(t&&!this.isViewFinished(t))return t}const o=t.first.id,l=t.last.id;if(l-o+1>a){const n=t.ids;for(let t=1,s=l-o;t<s;t++){const s=i?o+t:l-t;if(n.has(s))continue;const r=e[s-1];if(!this.isViewFinished(r))return r}}let h=i?l:o-2,u=e[h];return u&&!this.isViewFinished(u)||n&&(h+=i?1:-1,u=e[h],u&&!this.isViewFinished(u))?u:null}isViewFinished(t){return t.renderingState===__.FINISHED}renderView(t){switch(t.renderingState){case __.FINISHED:return!1;case __.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case __.RUNNING:this.highestPriorityPage=t.renderingId;break;case __.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof l_||console.error("renderView:",t)})}return!0}};class xE{constructor(t){$m(this,Wf),$m(this,Nf,new Set),$m(this,Of,0),Hm(this,Of,t)}push(t){const e=Vm(this,Nf);e.has(t)&&e.delete(t),e.add(t),e.size>Vm(this,Of)&&zm(this,Wf,Bf).call(this)}resize(t,e=null){Hm(this,Of,t);const i=Vm(this,Nf);if(e){const t=i.size;let n=1;for(const s of i)if(e.has(s.id)&&(i.delete(s),i.add(s)),++n>t)break}for(;i.size>Vm(this,Of);)zm(this,Wf,Bf).call(this)}has(t){return Vm(this,Nf).has(t)}[Symbol.iterator](){return Vm(this,Nf).keys()}}Nf=new WeakMap,Of=new WeakMap,Wf=new WeakSet,Bf=function(){const t=Vm(this,Nf).keys().next().value;null==t||t.destroy(),Vm(this,Nf).delete(t)};class EE{constructor(t){var e,i,n,s,r,a,o;$m(this,wm),$m(this,jf,null),$m(this,Vf,null),$m(this,$f,null),$m(this,Hf,kA.NONE),$m(this,zf,null),$m(this,Uf,FA.ENABLE_FORMS),$m(this,Gf,null),$m(this,qf,null),$m(this,Xf,null),$m(this,Yf,!1),$m(this,Kf,!1),$m(this,Qf,!1),$m(this,Zf,!1),$m(this,Jf,!1),$m(this,tm,!0),$m(this,em,null),$m(this,im,0),$m(this,nm,null),$m(this,sm,null),$m(this,rm,null),$m(this,am,null),$m(this,om,!1),$m(this,lm,null),$m(this,hm,!1),$m(this,um,0),$m(this,cm,new ResizeObserver(zm(this,wm,Im).bind(this))),$m(this,dm,null),$m(this,pm,null),$m(this,gm,null),$m(this,fm,!0),$m(this,mm,1),$m(this,vm,null);const l="5.4.54";if(y_!==l)throw new Error(`The API version "${y_}" does not match the Viewer version "${l}".`);if(this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,Hm(this,vm,t.viewerAlert||null),"DIV"!==(null==(e=this.container)?void 0:e.tagName)||"DIV"!==(null==(i=this.viewer)?void 0:i.tagName))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");Vm(this,cm).observe(this.container),this.eventBus=t.eventBus,this.linkService=t.linkService||new J_,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,Hm(this,Vf,t.altTextManager||null),Hm(this,Gf,t.commentManager||null),Hm(this,gm,t.signatureManager||null),Hm(this,Xf,t.editorUndoBar||null),this.findController&&(this.findController.onIsPageVisible=t=>this._getVisiblePages().ids.has(t)),this._scriptingManager=t.scriptingManager||null,Hm(this,mm,null!=(n=t.textLayerMode)?n:1),Hm(this,Uf,null!=(s=t.annotationMode)?s:FA.ENABLE_FORMS),Hm(this,Hf,null!=(r=t.annotationEditorMode)?r:kA.NONE),Hm(this,$f,t.annotationEditorHighlightColors||null),Hm(this,Kf,!0===t.enableHighlightFloatingButton),Hm(this,Zf,!0===t.enableUpdatedAddImage),Hm(this,Jf,!0===t.enableNewAltTextWhenAddingImage),this.imageResourcesPath=t.imageResourcesPath||"",this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.removePageBorders=t.removePageBorders||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.maxCanvasDim=t.maxCanvasDim,this.capCanvasAreaFactor=t.capCanvasAreaFactor,this.enableDetailCanvas=null==(a=t.enableDetailCanvas)||a,this.l10n=t.l10n,this.l10n||(this.l10n=new Qx),Hm(this,Qf,t.enablePermissions||!1),this.pageColors=t.pageColors||null,Hm(this,nm,t.mlManager||null),Hm(this,Yf,t.enableHWA||!1),Hm(this,fm,!1!==t.supportsPinchToZoom),Hm(this,tm,!1!==t.enableAutoLinking),Hm(this,im,null!=(o=t.minDurationToUpdateCanvas)?o:500),this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new _E,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue;const{abortSignal:h}=t;null==h||h.addEventListener("abort",()=>{Vm(this,cm).disconnect(),Hm(this,cm,null)},{once:!0}),this.scroll=function(t,e,i){const n=function(i){r||(r=window.requestAnimationFrame(function(){r=null;const i=t.scrollLeft,n=s.lastX;i!==n&&(s.right=i>n),s.lastX=i;const a=t.scrollTop,o=s.lastY;a!==o&&(s.down=a>o),s.lastY=a,e(s)}))},s={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:n};let r=null;return t.addEventListener("scroll",n,{useCapture:!0,signal:i}),null==i||i.addEventListener("abort",()=>window.cancelAnimationFrame(r),{once:!0}),s}(this.container,this._scrollUpdate.bind(this),h),this.presentationModeState=0,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),zm(this,wm,Tm).call(this),this.eventBus._on("thumbnailrendered",({pageNumber:t,pdfPage:e})=>{const i=this._pages[t-1];Vm(this,jf).has(i)||null==e||e.cleanup()}),t.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(t){return this._pages[t]}getCachedPageViews(){return new Set(Vm(this,jf))}get pageViewsReady(){return this._pages.every(t=>null==t?void 0:t.pdfPage)}get renderForms(){return Vm(this,Uf)===FA.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error(`currentPageNumber: "${t}" is not a valid page.`))}_setCurrentPageNumber(t,e=!1){var i,n;if(this._currentPageNumber===t)return e&&zm(this,wm,Mm).call(this),!0;if(!(0<t&&t<=this.pagesCount))return!1;const s=this._currentPageNumber;return this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:null!=(n=null==(i=this._pageLabels)?void 0:i[t-1])?n:null,previous:s}),e&&zm(this,wm,Mm).call(this),!0}get currentPageLabel(){var t,e;return null!=(e=null==(t=this._pageLabels)?void 0:t[this._currentPageNumber-1])?e:null}set currentPageLabel(t){if(!this.pdfDocument)return;let e=0|t;if(this._pageLabels){const i=this._pageLabels.indexOf(t);i>=0&&(e=i+1)}this._setCurrentPageNumber(e,!0)||console.error(`currentPageLabel: "${t}" is not a valid page.`)}get currentScale(){return 0!==this._currentScale?this._currentScale:1}set currentScale(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&zm(this,wm,km).call(this,t,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(t){this.pdfDocument&&zm(this,wm,km).call(this,t,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!st(t))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;if((t%=360)<0&&(t+=360),this._pagesRotation===t)return;this._pagesRotation=t;const e=this._currentPageNumber;this.refresh(!0,{rotation:t}),this._currentScaleValue&&zm(this,wm,km).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:e}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const t=this;return c_(this,"_layerProperties",{get annotationEditorUIManager(){return Vm(t,zf)},get annotationStorage(){var e;return null==(e=t.pdfDocument)?void 0:e.annotationStorage},get downloadManager(){return t.downloadManager},get enableScripting(){return!!t._scriptingManager},get fieldObjectsPromise(){var e;return null==(e=t.pdfDocument)?void 0:e.getFieldObjects()},get findController(){return t.findController},get hasJSActionsPromise(){var e;return null==(e=t.pdfDocument)?void 0:e.hasJSActions()},get linkService(){return t.linkService}})}async getAllText(){const t=[],e=[];for(let i=1,n=this.pdfDocument.numPages;i<=n;++i){if(Vm(this,hm))return null;e.length=0;const n=await this.pdfDocument.getPage(i),{items:s}=await n.getTextContent();for(const t of s)t.str&&e.push(t.str),t.hasEOL&&e.push("\n");t.push(tt(e.join("")))}return t.join("\n")}setDocument(t){var e,i,n;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),null==(e=this.findController)||e.setDocument(null),null==(i=this._scriptingManager)||i.setDocument(null),null==(n=Vm(this,zf))||n.destroy(),Hm(this,zf,null)),this.pdfDocument=t,!t)return;const s=t.numPages,r=t.getPage(1),a=t.getOptionalContentConfig({intent:"display"}),o=Vm(this,Qf)?t.getPermissions():Promise.resolve(),{eventBus:l,pageColors:h,viewer:u}=this;Hm(this,em,new AbortController);const{signal:c}=Vm(this,em);if(s>1e4){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const t=this._scrollMode=x_.PAGE;l.dispatch("scrollmodechanged",{source:this,mode:t})}this._pagesCapability.promise.then(()=>{l.dispatch("pagesloaded",{source:this,pagesCount:s})},()=>{}),l._on("pagerender",t=>{const e=this._pages[t.pageNumber-1];e&&Vm(this,jf).push(e)},{signal:c});const d=t=>{t.cssTransform||t.isDetailView||(this._onePageRenderedCapability.resolve({timestamp:t.timestamp}),l._off("pagerendered",d))};l._on("pagerendered",d,{signal:c}),Promise.all([r,o]).then(([e,i])=>{var n;if(t!==this.pdfDocument)return;this._firstPageCapability.resolve(e),this._optionalContentConfigPromise=a;const{annotationEditorMode:r,annotationMode:o,textLayerMode:d}=zm(this,wm,bm).call(this,i);if(0!==d){const t=Hm(this,lm,document.createElement("div"));t.id="hiddenCopyElement",u.before(t)}if(r!==kA.DISABLE){const e=r;t.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):Ot(e)?(Hm(this,zf,new MA(this.container,u,Vm(this,vm),Vm(this,Vf),Vm(this,Gf),Vm(this,gm),l,t,h,Vm(this,$f),Vm(this,Kf),Vm(this,Zf),Vm(this,Jf),Vm(this,nm),Vm(this,Xf),Vm(this,fm))),l.dispatch("annotationeditoruimanager",{source:this,uiManager:Vm(this,zf)}),e!==kA.NONE&&(zm(this,wm,Nm).call(this,e),Vm(this,zf).updateMode(e))):console.error(`Invalid AnnotationEditor mode: ${e}`)}const p=this._scrollMode===x_.PAGE?null:u,g=this.currentScale,f=e.getViewport({scale:g*o_.PDF_TO_CSS_UNITS});u.style.setProperty("--scale-factor",f.scale),(null==h?void 0:h.background)&&u.style.setProperty("--page-bg-color",h.background),"CanvasText"!==(null==h?void 0:h.foreground)&&"Canvas"!==(null==h?void 0:h.background)||(u.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),u.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let t=1;t<=s;++t){const e=new bE({container:p,eventBus:l,id:t,scale:g,defaultViewport:f.clone(),optionalContentConfigPromise:a,renderingQueue:this.renderingQueue,textLayerMode:d,annotationMode:o,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,maxCanvasDim:this.maxCanvasDim,capCanvasAreaFactor:this.capCanvasAreaFactor,enableDetailCanvas:this.enableDetailCanvas,pageColors:h,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:Vm(this,Yf),enableAutoLinking:Vm(this,tm),minDurationToUpdateCanvas:Vm(this,im)});this._pages.push(e)}null==(n=this._pages[0])||n.setPdfPage(e),this._scrollMode===x_.PAGE?zm(this,wm,_m).call(this):this._spreadMode!==E_.NONE&&this._updateSpreadMode(),zm(this,wm,ym).call(this,c).then(async()=>{var e,i;if(t!==this.pdfDocument)return;if(null==(e=this.findController)||e.setDocument(t),null==(i=this._scriptingManager)||i.setDocument(t),Vm(this,lm)&&document.addEventListener("copy",zm(this,wm,Am).bind(this,d),{signal:c}),Vm(this,zf)&&l.dispatch("annotationeditormodechanged",{source:this,mode:Vm(this,Hf)}),t.loadingParams.disableAutoFetch||s>5e3)return void this._pagesCapability.resolve();let n=s-1;if(n<=0)this._pagesCapability.resolve();else for(let r=2;r<=s;++r){const e=t.getPage(r).then(t=>{const e=this._pages[r-1];e.pdfPage||e.setPdfPage(t),0===--n&&this._pagesCapability.resolve()},t=>{console.error(`Unable to get page ${r} to initialize viewer`,t),0===--n&&this._pagesCapability.resolve()});r%250==0&&await e}}),l.dispatch("pagesinit",{source:this}),t.getMetadata().then(({info:e})=>{t===this.pdfDocument&&e.Language&&(u.lang=e.Language)}),this.defaultRenderingQueue&&this.update()}).catch(t=>{console.error("Unable to initialize viewer",t),this._pagesCapability.reject(t)})}setPageLabels(t){var e,i;if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,n=this._pages.length;t<n;t++)this._pages[t].setPageLabel(null!=(i=null==(e=this._pageLabels)?void 0:e[t])?i:null)}}_resetView(){var t,e;this._pages=[],this._currentPageNumber=1,this._currentScale=0,this._currentScaleValue=null,this._pageLabels=null,Hm(this,jf,new xE(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=x_.VERTICAL,this._previousScrollMode=x_.UNKNOWN,this._spreadMode=E_.NONE,Hm(this,dm,{previousPageNumber:1,scrollDown:!0,pages:[]}),null==(t=Vm(this,em))||t.abort(),Hm(this,em,null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),null==(e=Vm(this,lm))||e.remove(),Hm(this,lm,null),zm(this,wm,Lm).call(this),zm(this,wm,Rm).call(this)}_scrollUpdate(){0!==this.pagesCount&&(Vm(this,sm)&&clearTimeout(Vm(this,sm)),Hm(this,sm,setTimeout(()=>{Hm(this,sm,null),this.update()},100)),this.update())}pageLabelToPageNumber(t){if(!this._pageLabels)return null;const e=this._pageLabels.indexOf(t);return e<0?null:e+1}scrollPageIntoView({pageNumber:t,destArray:e=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:n=!1}){if(!this.pdfDocument)return;const s=Number.isInteger(t)&&this._pages[t-1];if(!s)return void console.error(`scrollPageIntoView: "${t}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!e)return void this._setCurrentPageNumber(t,!0);let r,a,o=0,l=0,h=0,u=0;const c=s.rotation%180!=0,d=(c?s.height:s.width)/s.scale/o_.PDF_TO_CSS_UNITS,p=(c?s.width:s.height)/s.scale/o_.PDF_TO_CSS_UNITS;let g=0;switch(e[1].name){case"XYZ":o=e[2],l=e[3],g=e[4],o=null!==o?o:0,l=null!==l?l:p;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":l=e[2],g="page-width",null===l&&this._location?(o=this._location.left,l=this._location.top):("number"!=typeof l||l<0)&&(l=p);break;case"FitV":case"FitBV":o=e[2],h=d,u=p,g="page-height";break;case"FitR":o=e[2],l=e[3],h=e[4]-o,u=e[5]-l;let t=40,i=5;this.removePageBorders&&(t=i=0),r=(this.container.clientWidth-t)/h/o_.PDF_TO_CSS_UNITS,a=(this.container.clientHeight-i)/u/o_.PDF_TO_CSS_UNITS,g=Math.min(Math.abs(r),Math.abs(a));break;default:return void console.error(`scrollPageIntoView: "${e[1].name}" is not a valid destination type.`)}if(n||(g&&g!==this._currentScale?this.currentScaleValue=g:0===this._currentScale&&(this.currentScaleValue="auto")),"page-fit"===g&&!e[4])return void zm(this,wm,xm).call(this,s);const f=[s.viewport.convertToViewportPoint(o,l),s.viewport.convertToViewportPoint(o+h,l+u)];let m=Math.min(f[0][0],f[1][0]),v=Math.min(f[0][1],f[1][1]);i||(m=Math.max(m,0),v=Math.max(v,0)),zm(this,wm,xm).call(this,s,{left:m,top:v})}_updateLocation(t){const e=this._currentScale,i=this._currentScaleValue,n=parseFloat(i)===e?Math.round(1e4*e)/100:i,s=t.id,r=this._pages[s-1],a=this.container,o=r.getPagePoint(a.scrollLeft-t.x,a.scrollTop-t.y),l=Math.round(o[0]),h=Math.round(o[1]);let u=`#page=${s}`;this.isInPresentationMode||(u+=`&zoom=${n},${l},${h}`),this._location={pageNumber:s,scale:n,top:h,left:l,rotation:this._pagesRotation,pdfOpenParams:u}}update(){const t=this._getVisiblePages(),e=t.views,i=e.length;if(0===i)return;const n=Math.max(10,2*i+1);Vm(this,jf).resize(n,t.ids);for(const{view:o,visibleArea:l}of e)o.updateVisibleArea(l);for(const o of Vm(this,jf))t.ids.has(o.id)||o.updateVisibleArea(null);this.renderingQueue.renderHighestPriority(t);const s=this._spreadMode===E_.NONE&&(this._scrollMode===x_.PAGE||this._scrollMode===x_.VERTICAL),r=this._currentPageNumber;let a=!1;for(const o of e){if(o.percent<100)break;if(o.id===r&&s){a=!0;break}}this._setCurrentPageNumber(a?r:e[0].id),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(t){return this.container.contains(t)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return 3===this.presentationModeState}get isChangingPresentationMode(){return 2===this.presentationModeState}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const t=this._scrollMode===x_.PAGE?Vm(this,dm).pages:this._pages,e=this._scrollMode===x_.HORIZONTAL,i=e&&this._isContainerRtl;return function({scrollEl:t,views:e,sortByVisibility:i=!1,horizontal:n=!1,rtl:s=!1}){const r=t.scrollTop,a=r+t.clientHeight,o=t.scrollLeft,l=o+t.clientWidth,h=[],u=new Set,c=e.length;let d=et(e,n?function(t){const e=t.div,i=e.offsetLeft+e.clientLeft,n=i+e.clientWidth;return s?i<l:n>o}:function(t){const e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>r});d>0&&d<c&&!n&&(d=function(t,e,i){if(t<2)return t;let n=e[t].div,s=n.offsetTop+n.clientTop;s>=i&&(n=e[t-1].div,s=n.offsetTop+n.clientTop);for(let r=t-2;r>=0&&(n=e[r].div,!(n.offsetTop+n.clientTop+n.clientHeight<=s));--r)t=r;return t}(d,e,r));let p=n?l:-1;for(let m=d;m<c;m++){const t=e[m],i=t.div,s=i.offsetLeft+i.clientLeft,c=i.offsetTop+i.clientTop,d=i.clientWidth,g=i.clientHeight,f=s+d,v=c+g;if(-1===p)v>=a&&(p=v);else if((n?s:c)>p)break;if(v<=r||c>=a||f<=o||s>=l)continue;const w=Math.max(0,r-c),b=Math.max(0,o-s),y=w+Math.max(0,v-a),A=(d-(b+Math.max(0,f-l)))/d,_=(g-y)/g*A*100|0;h.push({id:t.id,x:s,y:c,visibleArea:100===_?null:{minX:b,minY:w,maxX:Math.min(f,l)-s,maxY:Math.min(v,a)-c},view:t,percent:_,widthPercent:100*A|0}),u.add(t.id)}const g=h[0],f=h.at(-1);return i&&h.sort(function(t,e){const i=t.percent-e.percent;return Math.abs(i)>.001?-i:t.id-e.id}),{first:g,last:f,views:h,ids:u}}({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:e,rtl:i})}cleanup(){for(const t of this._pages)t.renderingState!==__.FINISHED&&t.reset()}_cancelRendering(){for(const t of this._pages)t.cancelRendering()}forceRendering(t){const e=t||this._getVisiblePages(),i=zm(this,wm,Dm).call(this,e),n=this._spreadMode!==E_.NONE&&this._scrollMode!==x_.HORIZONTAL,s=null!==Vm(this,pm)||null!==Vm(this,sm)&&e.views.some(t=>{var e;return null==(e=t.detailView)?void 0:e.renderingCancelled}),r=this.renderingQueue.getHighestPriority(e,this._pages,i,n,s);return!!r&&(zm(this,wm,Fm).call(this,r).then(()=>{this.renderingQueue.renderView(r)}),!0)}get hasEqualPageSizes(){const t=this._pages[0];for(let e=1,i=this._pages.length;e<i;++e){const i=this._pages[e];if(i.width!==t.width||i.height!==t.height)return!1}return!0}getPagesOverview(){let t;return this._pages.map(e=>{const i=e.pdfPage.getViewport({scale:1}),n=rt(i);if(void 0===t)t=n;else if(this.enablePrintAutoRotate&&n!==t)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(t){if(!(t instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${t}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=t,this.refresh(!1,{optionalContentConfigPromise:t}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t}))}get scrollMode(){return this._scrollMode}set scrollMode(t){if(this._scrollMode!==t){if(!function(t){return Number.isInteger(t)&&Object.values(x_).includes(t)&&t!==x_.UNKNOWN}(t))throw new Error(`Invalid scroll mode: ${t}`);this.pagesCount>1e4||(this._previousScrollMode=this._scrollMode,this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(t=null){const e=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",e===x_.HORIZONTAL),i.classList.toggle("scrollWrapped",e===x_.WRAPPED),this.pdfDocument&&t&&(e===x_.PAGE?zm(this,wm,_m).call(this):this._previousScrollMode===x_.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&zm(this,wm,km).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(t){if(this._spreadMode!==t){if(!function(t){return Number.isInteger(t)&&Object.values(E_).includes(t)&&t!==E_.UNKNOWN}(t))throw new Error(`Invalid spread mode: ${t}`);this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(t=null){if(!this.pdfDocument)return;const e=this.viewer,i=this._pages;if(this._scrollMode===x_.PAGE)zm(this,wm,_m).call(this);else if(e.textContent="",this._spreadMode===E_.NONE)for(const n of this._pages)e.append(n.div);else{const t=this._spreadMode-1;let n=null;for(let s=0,r=i.length;s<r;++s)null===n?(n=document.createElement("div"),n.className="spread",e.append(n)):s%2===t&&(n=n.cloneNode(!1),e.append(n)),n.append(i[s].div)}t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&zm(this,wm,km).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}_getPageAdvance(t,e=!1){switch(this._scrollMode){case x_.WRAPPED:{const{views:i}=this._getVisiblePages(),n=new Map;for(const{id:t,y:e,percent:s,widthPercent:r}of i){if(0===s||r<100)continue;let i=n.get(e);i||n.set(e,i||(i=[])),i.push(t)}for(const s of n.values()){const i=s.indexOf(t);if(-1===i)continue;const n=s.length;if(1===n)break;if(e)for(let e=i-1,r=0;e>=r;e--){const i=s[e],n=s[e+1]-1;if(i<n)return t-n}else for(let e=i+1,r=n;e<r;e++){const i=s[e],n=s[e-1]+1;if(i>n)return n-t}if(e){const e=s[0];if(e<t)return t-e+1}else{const e=s[n-1];if(e>t)return e-t+1}break}break}case x_.HORIZONTAL:break;case x_.PAGE:case x_.VERTICAL:{if(this._spreadMode===E_.NONE)break;const i=this._spreadMode-1;if(e&&t%2!==i)break;if(!e&&t%2===i)break;const{views:n}=this._getVisiblePages(),s=e?t-1:t+1;for(const{id:t,percent:e,widthPercent:r}of n)if(t===s){if(e>0&&100===r)return 2;break}break}}return 1}nextPage(){const t=this._currentPageNumber,e=this.pagesCount;if(t>=e)return!1;const i=this._getPageAdvance(t,!1)||1;return this.currentPageNumber=Math.min(t+i,e),!0}previousPage(){const t=this._currentPageNumber;if(t<=1)return!1;const e=this._getPageAdvance(t,!0)||1;return this.currentPageNumber=Math.max(t-e,1),!0}updateScale({drawingDelay:t,scaleFactor:e=null,steps:i=null,origin:n}){if(null===i&&null===e)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(e>0&&1!==e)s=Math.round(s*e*100)/100;else if(i){const t=i>0?1.1:1/1.1,e=i>0?Math.ceil:Math.floor;i=Math.abs(i);do{s=e(10*(s*t).toFixed(2))/10}while(--i>0)}s=QA(s,.1,10),zm(this,wm,km).call(this,s,{noScroll:!1,drawingDelay:t,origin:n})}increaseScale(t={}){var e;this.updateScale({...t,steps:null!=(e=t.steps)?e:1})}decreaseScale(t={}){var e;this.updateScale({...t,steps:-(null!=(e=t.steps)?e:1)})}get containerTopLeft(){return Vm(this,qf)||Hm(this,qf,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return Vm(this,zf)?Vm(this,Hf):kA.DISABLE}set annotationEditorMode({mode:t,editId:e=null,isFromKeyboard:i=!1,mustEnterInEditMode:n=!1,editComment:s=!1}){if(!Vm(this,zf))throw new Error("The AnnotationEditor is not enabled.");if(Vm(this,Hf)===t)return;if(!Ot(t))throw new Error(`Invalid AnnotationEditor mode: ${t}`);if(!this.pdfDocument)return;zm(this,wm,Nm).call(this,t);const{eventBus:r,pdfDocument:a}=this,o=async()=>{zm(this,wm,Rm).call(this),Hm(this,Hf,t),await Vm(this,zf).updateMode(t,e,i,n,s),t===Vm(this,Hf)&&a===this.pdfDocument&&r.dispatch("annotationeditormodechanged",{source:this,mode:t})};if(t===kA.NONE||Vm(this,Hf)===kA.NONE){const e=t!==kA.NONE;e||this.pdfDocument.annotationStorage.resetModifiedIds();for(const t of this._pages)t.toggleEditingMode(e);const i=zm(this,wm,Pm).call(this);if(e&&i){zm(this,wm,Rm).call(this),Hm(this,rm,new AbortController);const t=AbortSignal.any([Vm(this,em).signal,Vm(this,rm).signal]);return void r._on("pagerendered",({pageNumber:t})=>{i.delete(t),0===i.size&&Hm(this,am,setTimeout(o,0))},{signal:t})}}o()}refresh(t=!1,e=Object.create(null)){if(this.pdfDocument){for(const t of this._pages)t.update(e);zm(this,wm,Lm).call(this),t||this.update()}}}jf=new WeakMap,Vf=new WeakMap,$f=new WeakMap,Hf=new WeakMap,zf=new WeakMap,Uf=new WeakMap,Gf=new WeakMap,qf=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,tm=new WeakMap,em=new WeakMap,im=new WeakMap,nm=new WeakMap,sm=new WeakMap,rm=new WeakMap,am=new WeakMap,om=new WeakMap,lm=new WeakMap,hm=new WeakMap,um=new WeakMap,cm=new WeakMap,dm=new WeakMap,pm=new WeakMap,gm=new WeakMap,fm=new WeakMap,mm=new WeakMap,vm=new WeakMap,wm=new WeakSet,bm=function(t){const e={annotationEditorMode:Vm(this,Hf),annotationMode:Vm(this,Uf),textLayerMode:Vm(this,mm)};return t?(t.includes(a_.COPY)||1!==Vm(this,mm)||(e.textLayerMode=2),t.includes(a_.MODIFY_CONTENTS)||(e.annotationEditorMode=kA.DISABLE),t.includes(a_.MODIFY_ANNOTATIONS)||t.includes(a_.FILL_INTERACTIVE_FORMS)||Vm(this,Uf)!==FA.ENABLE_FORMS||(e.annotationMode=FA.ENABLE),e):e},ym=async function(t){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return;const e=Promise.withResolvers(),i=new AbortController;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&e.resolve()},{signal:AbortSignal.any([t,i.signal])}),await Promise.race([this._onePageRenderedCapability.promise,e.promise]),i.abort()},Am=function(t,e){const i=document.getSelection(),{focusNode:n,anchorNode:s}=i;if(s&&n&&i.containsNode(Vm(this,lm))){if(Vm(this,om)||2===t)return void p_(e);Hm(this,om,!0);const{classList:i}=this.viewer;i.add("copyAll");const n=new AbortController;window.addEventListener("keydown",t=>Hm(this,hm,"Escape"===t.key),{signal:n.signal}),this.getAllText().then(async t=>{null!==t&&await navigator.clipboard.writeText(t)}).catch(t=>{console.warn(`Something goes wrong when extracting the text: ${t.message}`)}).finally(()=>{Hm(this,om,!1),Hm(this,hm,!1),n.abort(),i.remove("copyAll")}),p_(e)}},_m=function(){if(this._scrollMode!==x_.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const t=this._currentPageNumber,e=Vm(this,dm),i=this.viewer;if(i.textContent="",e.pages.length=0,this._spreadMode!==E_.NONE||this.isInPresentationMode){const n=new Set,s=this._spreadMode-1;-1===s?n.add(t-1):t%2!==s?(n.add(t-1),n.add(t)):(n.add(t-2),n.add(t-1));const r=document.createElement("div");if(r.className="spread",this.isInPresentationMode){const t=document.createElement("div");t.className="dummyPage",r.append(t)}for(const t of n){const i=this._pages[t];i&&(r.append(i.div),e.pages.push(i))}i.append(r)}else{const n=this._pages[t-1];i.append(n.div),e.pages.push(n)}e.scrollDown=t>=e.previousPageNumber,e.previousPageNumber=t},xm=function(t,e=null){const{div:i,id:n}=t;if(this._currentPageNumber!==n&&this._setCurrentPageNumber(n),this._scrollMode===x_.PAGE&&(zm(this,wm,_m).call(this),this.update()),!e&&!this.isInPresentationMode){const t=i.offsetLeft+i.clientLeft,n=t+i.clientWidth,{scrollLeft:s,clientWidth:r}=this.container;(this._scrollMode===x_.HORIZONTAL||t<s||n>s+r)&&(e={left:0,top:0})}Z(i,e),!this._currentScaleValue&&this._location&&(this._location=null)},Em=function(t){return t===this._currentScale||Math.abs(t-this._currentScale)<1e-15},Sm=function(t,e,{noScroll:i=!1,preset:n=!1,drawingDelay:s=-1,origin:r=null}){if(this._currentScaleValue=e.toString(),zm(this,wm,Em).call(this,t))return void(n&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:e}));this.viewer.style.setProperty("--scale-factor",t*o_.PDF_TO_CSS_UNITS);const a=s>=0&&s<1e3;this.refresh(!0,{scale:t,drawingDelay:a?s:-1}),a&&Hm(this,pm,setTimeout(()=>{Hm(this,pm,null),this.refresh()},s));const o=this._currentScale;if(this._currentScale=t,!i){let e,i=this._currentPageNumber;if(!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(i=this._location.pageNumber,e=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:i,destArray:e,allowNegativeOffset:!0}),Array.isArray(r)){const e=t/o-1,[i,n]=this.containerTopLeft;this.container.scrollLeft+=(r[0]-n)*e,this.container.scrollTop+=(r[1]-i)*e}}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:n?e:void 0}),this.defaultRenderingQueue&&this.update()},Cm=function(){return this._spreadMode!==E_.NONE&&this._scrollMode!==x_.HORIZONTAL?2:1},km=function(t,e){let i=parseFloat(t);if(i>0)e.preset=!1,zm(this,wm,Sm).call(this,i,t,e);else{const n=this._pages[this._currentPageNumber-1];if(!n)return;let s=40,r=5;this.isInPresentationMode?(s=r=4,this._spreadMode!==E_.NONE&&(s*=2)):this.removePageBorders?s=r=0:this._scrollMode===x_.HORIZONTAL&&([s,r]=[r,s]);const a=(this.container.clientWidth-s)/n.width*n.scale/Vm(this,wm,Cm),o=(this.container.clientHeight-r)/n.height*n.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=a;break;case"page-height":i=o;break;case"page-fit":i=Math.min(a,o);break;case"auto":const e=rt(n)?a:Math.min(o,a);i=Math.min(1.25,e);break;default:return void console.error(`#setScale: "${t}" is an unknown zoom value.`)}e.preset=!0,zm(this,wm,Sm).call(this,i,t,e)}},Mm=function(){const t=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&zm(this,wm,km).call(this,this._currentScaleValue,{noScroll:!0}),zm(this,wm,xm).call(this,t)},Pm=function(){const t=this._getVisiblePages(),e=[],{ids:i,views:n}=t;for(const s of n){const{view:t}=s;t.hasEditableAnnotations()?e.push(s):i.delete(t.id)}return 0===e.length?null:(this.renderingQueue.renderHighestPriority({first:e[0],last:e.at(-1),views:e,ids:i}),i)},Fm=async function(t){if(t.pdfPage)return t.pdfPage;try{const e=await this.pdfDocument.getPage(t.id);return t.pdfPage||t.setPdfPage(e),e}catch(e){return console.error("Unable to get page for page view",e),null}},Dm=function(t){var e,i;if(1===(null==(e=t.first)?void 0:e.id))return!0;if((null==(i=t.last)?void 0:i.id)===this.pagesCount)return!1;switch(this._scrollMode){case x_.PAGE:return Vm(this,dm).scrollDown;case x_.HORIZONTAL:return this.scroll.right}return this.scroll.down},Tm=function(t=this.container.clientHeight){t!==Vm(this,um)&&(Hm(this,um,t),C_.setProperty("--viewer-container-height",`${t}px`))},Im=function(t){for(const e of t)if(e.target===this.container){zm(this,wm,Tm).call(this,Math.floor(e.borderBoxSize[0].blockSize)),Hm(this,qf,null);break}},Lm=function(){null!==Vm(this,pm)&&(clearTimeout(Vm(this,pm)),Hm(this,pm,null)),null!==Vm(this,sm)&&(clearTimeout(Vm(this,sm)),Hm(this,sm,null))},Rm=function(){var t;null==(t=Vm(this,rm))||t.abort(),Hm(this,rm,null),null!==Vm(this,am)&&(clearTimeout(Vm(this,am)),Hm(this,am,null))},Nm=function(t){var e,i;switch(t){case kA.STAMP:null==(e=Vm(this,nm))||e.loadModel("altText");break;case kA.SIGNATURE:null==(i=Vm(this,gm))||i.loadSignatures()}};class SE extends EE{_resetView(){super._resetView(),this._scrollMode=x_.PAGE,this._spreadMode=E_.NONE}set scrollMode(t){}_updateScrollMode(){}set spreadMode(t){}_updateSpreadMode(){}}globalThis.pdfjsViewer={AnnotationLayerBuilder:tx,DownloadManager:ex,EventBus:ix,FindState:O_,GenericL10n:Qx,LinkTarget:Q_,parseQueryString:J,PDFFindController:K_,PDFHistory:class{constructor({linkService:t,eventBus:e}){$m(this,Ip),$m(this,Tp,null),this.linkService=t,this.eventBus=e,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",t=>{this._isPagesLoaded=!!t.pagesCount},{once:!0})})}initialize({fingerprint:t,resetHistory:e=!1,updateUrl:i=!1}){if(!t||"string"!=typeof t)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const n=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=!0===i,this._initialized=!0,zm(this,Ip,Hp).call(this);const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=It(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!zm(this,Ip,Op).call(this,s,!0)||e){const{hash:t,page:i,rotation:s}=zm(this,Ip,Bp).call(this,!0);return!t||n||e?void zm(this,Ip,Lp).call(this,null,!0):void zm(this,Ip,Lp).call(this,{hash:t,page:i,rotation:s},!0)}const r=s.destination;zm(this,Ip,Wp).call(this,r,s.uid,!0),void 0!==r.rotation&&(this._initialRotation=r.rotation),r.dest?(this._initialBookmark=JSON.stringify(r.dest),this._destination.page=null):r.hash?this._initialBookmark=r.hash:r.page&&(this._initialBookmark=`page=${r.page}`)}reset(){this._initialized&&(zm(this,Ip,$p).call(this),this._initialized=!1,zm(this,Ip,zp).call(this)),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:t=null,explicitDest:e,pageNumber:i}){if(!this._initialized)return;if(t&&"string"!=typeof t)return void console.error(`PDFHistory.push: "${t}" is not a valid namedDest parameter.`);if(!Array.isArray(e))return void console.error(`PDFHistory.push: "${e}" is not a valid explicitDest parameter.`);if(!zm(this,Ip,Np).call(this,i)&&(null!==i||this._destination))return void console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);const n=t||JSON.stringify(e);if(!n)return;let s=!1;if(this._destination&&(a=n,"string"==typeof(r=this._destination.hash)&&"string"==typeof a&&(r===a||J(r).get("nameddest")===a)||function(t,e){function i(t,e){if(typeof t!=typeof e)return!1;if(Array.isArray(t)||Array.isArray(e))return!1;if(null!==t&&"object"==typeof t&&null!==e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!i(t[n],e[n]))return!1;return!0}return t===e||Number.isNaN(t)&&Number.isNaN(e)}if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(let n=0,s=t.length;n<s;n++)if(!i(t[n],e[n]))return!1;return!0}(this._destination.dest,e))){if(this._destination.page)return;s=!0}var r,a;this._popStateInProgress&&!s||(zm(this,Ip,Lp).call(this,{dest:e,hash:n,page:i,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(t){var e;this._initialized&&(zm(this,Ip,Np).call(this,t)?(null==(e=this._destination)?void 0:e.page)!==t&&(this._popStateInProgress||(zm(this,Ip,Lp).call(this,{dest:null,hash:`page=${t}`,page:t,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))):console.error(`PDFHistory.pushPage: "${t}" is not a valid page number.`))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&zm(this,Ip,Rp).call(this)}back(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;zm(this,Ip,Op).call(this,t)&&t.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;zm(this,Ip,Op).call(this,t)&&t.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}},PDFLinkService:Z_,PDFPageView:bE,PDFScriptingManager:class extends AE{constructor(t){t.externalServices||window.addEventListener("updatefromsandbox",e=>{t.eventBus.dispatch("updatefromsandbox",{source:window,detail:e.detail})}),t.externalServices||(t.externalServices={createScripting:()=>new yE(t.sandboxBundleSrc)}),t.docProperties||(t.docProperties=t=>async function(t){const{info:e,metadata:i,contentDispositionFilename:n,contentLength:s}=await t.getMetadata();return{...e,baseURL:"",filesize:s||(await t.getDownloadInfo()).length,filename:n||VA(""),metadata:null==i?void 0:i.getRaw(),authors:null==i?void 0:i.get("dc:creator"),numPages:t.numPages,URL:""}}(t)),super(t)}},PDFSinglePageViewer:SE,PDFViewer:EE,ProgressBar:class{constructor(t){$m(this,Ld,null),$m(this,Rd,null),$m(this,Nd,0),$m(this,Od,null),$m(this,Wd,!0),Hm(this,Ld,t.classList),Hm(this,Od,t.style)}get percent(){return Vm(this,Nd)}set percent(t){Hm(this,Nd,QA(t,0,100)),isNaN(t)?Vm(this,Ld).add("indeterminate"):(Vm(this,Ld).remove("indeterminate"),Vm(this,Od).setProperty("--progressBar-percent",`${Vm(this,Nd)}%`))}setWidth(t){if(!t)return;const e=t.parentNode.offsetWidth-t.offsetWidth;e>0&&Vm(this,Od).setProperty("--progressBar-end-offset",`${e}px`)}setDisableAutoFetch(t=5e3){100===Vm(this,Nd)||isNaN(Vm(this,Nd))||(Vm(this,Rd)&&clearTimeout(Vm(this,Rd)),this.show(),Hm(this,Rd,setTimeout(()=>{Hm(this,Rd,null),this.hide()},t)))}hide(){Vm(this,Wd)&&(Hm(this,Wd,!1),Vm(this,Ld).add("hidden"))}show(){Vm(this,Wd)||(Hm(this,Wd,!0),Vm(this,Ld).remove("hidden"))}},RenderingStates:__,ScrollMode:x_,SimpleLinkService:J_,SpreadMode:E_,StructTreeLayerBuilder:uE,TextLayerBuilder:fE,XfaLayerBuilder:mE};const CE=t=>{let e;const i=new Set,n=(t,n)=>{const s="function"==typeof t?t(e):t;if(!Object.is(s,e)){const t=e;e=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},e,s),i.forEach(i=>i(e,t))}},s=()=>e,r={setState:n,getState:s,getInitialState:()=>a,subscribe:t=>(i.add(t),()=>i.delete(t))},a=e=t(n,s,r);return r};"function"==typeof SuppressedError&&SuppressedError;const kE={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},ME={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};class PE{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return 1!==this.sx||1!==this.sy}}new Promise(function(t){window.requestAnimationFrame(t)}),document.documentElement.style,function(){const t=document.createElement("div");t.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)","calc(1320px)"===t.style.width&&Math.fround}();class FE{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}renderHighestPriority(t){var e;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.isThumbnailViewEnabled&&(null===(e=this.pdfThumbnailViewer)||void 0===e?void 0:e.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(t,e,i,n=!1){const s=t.views,r=s.length;if(0===r)return null;for(let u=0;u<r;u++){const t=s[u].view;if(!this.isViewFinished(t))return t}const a=t.first.id,o=t.last.id;if(o-a+1>r){const n=t.ids;for(let t=1,s=o-a;t<s;t++){const s=i?a+t:o-t;if(n.has(s))continue;const r=e[s-1];if(!this.isViewFinished(r))return r}}let l=i?o:a-2,h=e[l];return h&&!this.isViewFinished(h)||n&&(l+=i?1:-1,h=e[l],h&&!this.isViewFinished(h))?h:null}isViewFinished(t){return 3===t.renderingState}renderView(t){switch(t.renderingState){case 3:return!1;case 2:this.highestPriorityPage=t.renderingId,t.resume();break;case 1:this.highestPriorityPage=t.renderingId;break;case 0:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof pw||console.error("renderView:",t)})}return!0}}var DE,TE,IE,LE,RE,NE,OE,WE,BE,jE,VE,$E,HE,zE,UE;class GE{static getCanvas(t,e){const i=jt(this,DE,Bt(this,DE,"f",TE)||document.createElement("canvas"),0,TE);i.width=t,i.height=e;const n=i.getContext("2d",{alpha:!1});return n.save(),n.fillStyle="rgb(255, 255, 255)",n.fillRect(0,0,t,e),n.restore(),[i,i.getContext("2d")]}static destroyCanvas(){const t=Bt(this,DE,"f",TE);t&&(t.width=0,t.height=0),jt(this,DE,null,0,TE)}}DE=GE,TE={value:null};class qE{constructor({container:t,eventBus:e,id:i,defaultViewport:n,optionalContentConfigPromise:s,linkService:r,renderingQueue:a,pageColors:o,enableHWA:l,store:h,thumbnailWidth:u}){IE.add(this),this.id=i,this.renderingId="thumbnail"+i,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=n,this.pdfPageRotate=n.rotation,this._optionalContentConfigPromise=s||null,this.pageColors=o||null,this.enableHWA=l||!1,this.eventBus=e,this.linkService=r,this.renderingQueue=a,this.renderTask=null,this.renderingState=0,this.resume=null,this.store=h,this.thumbnailWidth=u,this.loaded=!1;const c=document.createElement("div");c.className="thumbnail pdfSlickThumbHolder",c.setAttribute("data-page-number",this.id.toString()),this.div=c,Bt(this,IE,"m",LE).call(this),t.append(c)}setPdfPage(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;const e=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:1,rotation:e}),this.reset()}reset(){this.cancelRendering(),this.renderingState=0,this.div.removeAttribute("data-loaded"),this.loaded=!1,Bt(this,IE,"m",LE).call(this)}update({rotation:t=null}){"number"==typeof t&&(this.rotation=t);const e=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:e}),this.reset()}cancelRendering(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}draw(){return Wt(this,void 0,void 0,function*(){if(0!==this.renderingState)return void console.error("Must be in new state before drawing");const{pdfPage:t}=this;if(!t)throw this.renderingState=3,new Error("pdfPage is not loaded");this.renderingState=1;const{ctx:e,canvas:i,transform:n}=Bt(this,IE,"m",RE).call(this,2),s={canvasContext:e,transform:n,viewport:this.viewport.clone({scale:2*this.scale}),optionalContentConfigPromise:this._optionalContentConfigPromise,pageColors:this.pageColors},r=this.renderTask=t.render(s);r.onContinue=t=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=2,void(this.resume=()=>{this.renderingState=1,t()});t()};const a=r.promise.then(()=>Bt(this,IE,"m",OE).call(this,r,i),t=>Bt(this,IE,"m",OE).call(this,r,i,t));return a.finally(()=>{i.width=0,i.height=0,this.eventBus.dispatch("thumbnailrendered",{source:this,pageNumber:this.id,pdfPage:this.pdfPage})}),a})}setImage(t){if(0!==this.renderingState)return;const{thumbnailCanvas:e,pdfPage:i,scale:n}=t;e&&(this.pdfPage||this.setPdfPage(i),n<this.scale||(this.renderingState=3,Bt(this,IE,"m",NE).call(this,e)))}setPageLabel(t){this.pageLabel="string"==typeof t?t:null}}IE=new WeakSet,LE=function(){const{width:t,height:e}=this.viewport,i=t/e;this.canvasWidth=this.thumbnailWidth,this.canvasHeight=this.canvasWidth/i|0,this.scale=this.canvasWidth/t;const{style:n}=this.div;n.setProperty("--thumbnail-width",`${this.canvasWidth}px`),n.setProperty("--thumbnail-height",`${this.canvasHeight}px`)},RE=function(t=1,e=this.enableHWA){const i=document.createElement("canvas"),n=i.getContext("2d",{alpha:!1,willReadFrequently:!e}),s=new PE;return i.width=t*this.canvasWidth*s.sx|0,i.height=t*this.canvasHeight*s.sy|0,{ctx:n,canvas:i,transform:s.scaled?[s.sx,0,0,s.sy,0,0]:null}},NE=function(t){if(3!==this.renderingState)throw new Error("#convertCanvasToImage: Rendering has not finished.");const e=Bt(this,IE,"m",WE).call(this,t);this.src=e.toDataURL(),this.div.setAttribute("data-loaded","true"),this.loaded=!0,this.store.getState()._setThumbnailView(this.id,this),e.width=0,e.height=0},OE=function(t,e){return Wt(this,arguments,void 0,function*(t,e,i=null){if(t===this.renderTask&&(this.renderTask=null),!(i instanceof pw)&&(this.renderingState=3,Bt(this,IE,"m",NE).call(this,e),i))throw i})},WE=function(t){const{ctx:e,canvas:i}=Bt(this,IE,"m",RE).call(this,1,!0);if(t.width<=2*i.width)return e.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),i;let n=i.width<<3,s=i.height<<3;const[r,a]=GE.getCanvas(n,s);for(;n>t.width||s>t.height;)n>>=1,s>>=1;for(a.drawImage(t,0,0,t.width,t.height,0,0,n,s);n>2*i.width;)a.drawImage(r,0,0,n,s,0,0,n>>1,s>>1),n>>=1,s>>=1;return e.drawImage(r,0,0,n,s,0,0,i.width,i.height),i};const XE="selected";class YE{constructor({container:t,eventBus:e,linkService:i,renderingQueue:n,pageColors:s,abortSignal:r,enableHWA:a,store:o,thumbnailWidth:l}){BE.add(this),this.container=t,this.eventBus=e,this.linkService=i,this.renderingQueue=n,this.pageColors=s||null,this.enableHWA=a||!1,this.store=o,this.thumbnailWidth=l,this.scroll=function(t,e,i){const n=function(i){r||(r=window.requestAnimationFrame(function(){r=null;const i=t.scrollLeft,n=s.lastX;i!==n&&(s.right=i>n),s.lastX=i;const a=t.scrollTop,o=s.lastY;a!==o&&(s.down=a>o),s.lastY=a,e(s)}))},s={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:n};let r=null;return t.addEventListener("scroll",n,{useCapture:!0,signal:i}),null==i||i.addEventListener("abort",()=>window.cancelAnimationFrame(r),{once:!0}),s}(this.container,Bt(this,BE,"m",jE).bind(this),r),Bt(this,BE,"m",$E).call(this)}getThumbnail(t){return this._thumbnails[t]}scrollThumbnailIntoView(t){if(!this.pdfDocument)return;const e=this._thumbnails[t-1];if(!e)return void console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');t!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(XE),e.div.classList.add(XE));const{first:i,last:n,views:s}=Bt(this,BE,"m",VE).call(this);if(s.length>0){let r=!1;if(t<=i.id||t>=n.id)r=!0;else for(const{id:e,percent:i}of s)if(e===t){r=i<100;break}r&&function(t,e,i=!1){let n=t.offsetParent;if(!n)return void console.error("offsetParent is not set -- cannot scroll");let s=t.offsetTop+t.clientTop,r=t.offsetLeft+t.clientLeft;for(;n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||i&&(n.classList.contains("markedContent")||"hidden"===getComputedStyle(n).overflow);)if(s+=n.offsetTop,r+=n.offsetLeft,n=n.offsetParent,!n)return;e&&(void 0!==e.top&&(s+=e.top),void 0!==e.left&&(r+=e.left,n.scrollLeft=r)),n.scrollTop=s}(e.div,{top:-19})}this._currentPageNumber=t}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!Vt(t))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument)return;if(this._pagesRotation===t)return;this._pagesRotation=t;const e={rotation:t};for(const i of this._thumbnails)i.update(e)}cleanup(){for(const t of this._thumbnails)3!==t.renderingState&&t.reset();GE.destroyCanvas()}setDocument(t){if(this.pdfDocument&&(Bt(this,BE,"m",HE).call(this),Bt(this,BE,"m",$E).call(this)),this.pdfDocument=t,!t)return;const e=t.getPage(1),i=t.getOptionalContentConfig({intent:"display"});e.then(e=>{var n;const s=t.numPages,r=e.getViewport({scale:1});for(let t=1;t<=s;++t){const e=new qE({container:this.container,eventBus:this.eventBus,id:t,defaultViewport:r.clone(),optionalContentConfigPromise:i,linkService:this.linkService,renderingQueue:this.renderingQueue,pageColors:this.pageColors,enableHWA:this.enableHWA,store:this.store,thumbnailWidth:this.thumbnailWidth});this._thumbnails.push(e)}null===(n=this._thumbnails[0])||void 0===n||n.setPdfPage(e),this._thumbnails[this._currentPageNumber-1].div.classList.add(XE),this.store.getState()._setThumbnailsViews(this._thumbnails)}).catch(t=>{console.error("Unable to initialize thumbnail viewer",t)})}setPageLabels(t){var e,i;if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,n=this._thumbnails.length;t<n;t++)this._thumbnails[t].setPageLabel(null!==(i=null===(e=this._pageLabels)||void 0===e?void 0:e[t])&&void 0!==i?i:null)}}forceRendering(){const t=Bt(this,BE,"m",VE).call(this),e=Bt(this,BE,"m",UE).call(this,t),i=this.renderingQueue.getHighestPriority(t,this._thumbnails,e);return!!i&&(Bt(this,BE,"m",zE).call(this,i).then(()=>{this.renderingQueue.renderView(i)}),!0)}}BE=new WeakSet,jE=function(){this.renderingQueue.renderHighestPriority()},VE=function(){return function({scrollEl:t,views:e,sortByVisibility:i=!1,horizontal:n=!1,rtl:s=!1}){const r=t.scrollTop,a=r+t.clientHeight,o=t.scrollLeft,l=o+t.clientWidth,h=[],u=new Set,c=e.length;let d=function(t,e,i=0){let n=i,s=t.length-1;if(s<0||!e(t[s]))return t.length;if(e(t[n]))return n;for(;n<s;){const i=n+s>>1;e(t[i])?s=i:n=i+1}return n}(e,n?function(t){const e=t.div,i=e.offsetLeft+e.clientLeft,n=i+e.clientWidth;return s?i<l:n>o}:function(t){const e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>r});d>0&&d<c&&!n&&(d=function(t,e,i){if(t<2)return t;let n=e[t].div,s=n.offsetTop+n.clientTop;s>=i&&(n=e[t-1].div,s=n.offsetTop+n.clientTop);for(let r=t-2;r>=0&&(n=e[r].div,!(n.offsetTop+n.clientTop+n.clientHeight<=s));--r)t=r;return t}(d,e,r));let p=n?l:-1;for(let m=d;m<c;m++){const t=e[m],i=t.div,s=i.offsetLeft+i.clientLeft,c=i.offsetTop+i.clientTop,d=i.clientWidth,g=i.clientHeight,f=s+d,v=c+g;if(-1===p)v>=a&&(p=v);else if((n?s:c)>p)break;if(v<=r||c>=a||f<=o||s>=l)continue;const w=Math.max(0,r-c)+Math.max(0,v-a),b=(d-(Math.max(0,o-s)+Math.max(0,f-l)))/d,y=(g-w)/g*b*100|0;h.push({id:t.id,x:s,y:c,view:t,percent:y,widthPercent:100*b|0}),u.add(t.id)}const g=h[0],f=h.at(-1);return i&&h.sort(function(t,e){const i=t.percent-e.percent;return Math.abs(i)>.001?-i:t.id-e.id}),{first:g,last:f,views:h,ids:u}}({scrollEl:this.container,views:this._thumbnails})},$E=function(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""},HE=function(){for(const t of this._thumbnails)t.cancelRendering()},zE=function(t){return Wt(this,void 0,void 0,function*(){if(t.pdfPage)return t.pdfPage;try{const e=yield this.pdfDocument.getPage(t.id);return t.pdfPage||t.setPdfPage(e),e}catch(e){return console.error("Unable to get page for thumb view",e),null}})},UE=function(t){var e,i;return 1===(null===(e=t.first)||void 0===e?void 0:e.id)||(null===(i=t.last)||void 0===i?void 0:i.id)!==this._thumbnails.length&&this.scroll.down};let KE=null;class QE{constructor({pdfDocument:t,pagesOverview:e,printContainer:i,printResolution:n,printAnnotationStoragePromise:s=null}){this.pdfDocument=t,this.pagesOverview=e,this.printContainer=i,this._printResolution=n||150,this._optionalContentConfigPromise=t.getOptionalContentConfig({intent:"print"}),this._printAnnotationStoragePromise=s||Promise.resolve(),this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}layout(){this.throwIfInactive();const t=document.querySelector("body");t.setAttribute("data-pdfjsprinting","true");const{width:e,height:i}=this.pagesOverview[0];this.pagesOverview.every(t=>t.width===e&&t.height===i)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style"),this.pageStyleSheet.textContent=`@page { size: ${e}pt ${i}pt;}`,t.append(this.pageStyleSheet)}destroy(){KE===this&&(this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,KE=null)}renderPages(t){if(this.pdfDocument.isPureXfa)return function(t,e){const i=e.allXfaHtml,n=new J_,s=Math.round(100*cw.PDF_TO_CSS_UNITS)/100;for(const r of null==i?void 0:i.children){const i=document.createElement("div");i.className="xfaPrintedPage",t.append(i);const a=new mE({pdfPage:null,annotationStorage:e.annotationStorage,linkService:n,xfaHtml:r}),o=y(r,{scale:s});a.render({viewport:o,intent:"print"}),i.append(a.div)}}(this.printContainer,this.pdfDocument),Promise.resolve();const e=this.pagesOverview.length,i=(n,s)=>{if(this.throwIfInactive(),++this.currentPage>=e)return t({index:e,total:e}),void n();const r=this.currentPage;t({index:r,total:e}),function(t,e,i,n,s,r,a){const o=t.scratchCanvas,l=s/cw.PDF;o.width=Math.floor(n.width*l),o.height=Math.floor(n.height*l);const h=o.getContext("2d");return h.save(),h.fillStyle="rgb(255, 255, 255)",h.fillRect(0,0,o.width,o.height),h.restore(),Promise.all([e.getPage(i),a]).then(function([t,e]){const i={canvasContext:h,transform:[l,0,0,l,0,0],viewport:t.getViewport({scale:1,rotation:n.rotation}),intent:"print",annotationMode:$v.ENABLE_STORAGE,optionalContentConfigPromise:r,printAnnotationStorage:e};return t.render(i).promise.catch(t=>{throw t instanceof pw||console.error(t),t})})}(this,this.pdfDocument,r+1,this.pagesOverview[r],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then(function(){i(n,s)},s)};return new Promise(i)}useRenderedPage(){this.throwIfInactive();const t=document.createElement("img");this.scratchCanvas.toBlob(e=>{t.src=URL.createObjectURL(e)});const e=document.createElement("div");e.className="printedPage",e.append(t),this.printContainer.append(e);const{promise:i,resolve:n,reject:s}=Promise.withResolvers();return t.onload=n,t.onerror=s,i.catch(()=>{}).then(()=>{URL.revokeObjectURL(t.src)}),i}performPrint(){return this.throwIfInactive(),new Promise(t=>{setTimeout(()=>{this.active?(window.print(),setTimeout(t,20)):t()},0)})}get active(){return this===KE}throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}}const ZE={instance:{supportsPrinting:!0,createPrintService(t){if(KE)throw new Error("The print service is created and active.");return KE=new QE(t)}}};var JE,tS,eS,iS,nS,sS,rS,aS,oS,lS,hS,uS,cS,dS,pS,gS,fS,mS,vS;const wS="pdfPresentationMode",bS="pdfPresentationModeControls",yS=Math.PI/6;class AS{constructor({container:t,pdfViewer:e,eventBus:i}){JE.add(this),tS.set(this,0),eS.set(this,null),iS.set(this,null),nS.set(this,null),this.container=t,this.pdfViewer=e,this.eventBus=i,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null}request(){return Wt(this,void 0,void 0,function*(){const{container:t,pdfViewer:e}=this;if(this.active||!e.pagesCount||!t.requestFullscreen)return!1;Bt(this,JE,"m",mS).call(this),Bt(this,JE,"m",rS).call(this,2);const i=t.requestFullscreen();jt(this,eS,{pageNumber:e.currentPageNumber,scaleValue:e.currentScaleValue,scrollMode:e.scrollMode,spreadMode:null,annotationEditorMode:null}),e.spreadMode===ME.NONE||e.pageViewsReady&&e.hasEqualPageSizes||(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),Bt(this,eS,"f").spreadMode=e.spreadMode),e.annotationEditorMode!==zv.DISABLE&&(Bt(this,eS,"f").annotationEditorMode=e.annotationEditorMode);try{return yield i,e.focus(),!0}catch(n){Bt(this,JE,"m",vS).call(this),Bt(this,JE,"m",rS).call(this,1)}return!1})}get active(){return 2===Bt(this,tS,"f")||3===Bt(this,tS,"f")}}tS=new WeakMap,eS=new WeakMap,iS=new WeakMap,nS=new WeakMap,JE=new WeakSet,sS=function(t){if(!this.active)return;t.preventDefault();const e=function(t){const e=t.deltaMode;let i=function(t){let e=Math.hypot(t.deltaX,t.deltaY);const i=Math.atan2(t.deltaY,t.deltaX);return-.25*Math.PI<i&&i<.75*Math.PI&&(e=-e),e}(t);return e===WheelEvent.DOM_DELTA_PIXEL?i/=900:e===WheelEvent.DOM_DELTA_LINE&&(i/=30),i}(t),i=Date.now(),n=this.mouseScrollTimeStamp;if(!(i>n&&i-n<50)&&((this.mouseScrollDelta>0&&e<0||this.mouseScrollDelta<0&&e>0)&&Bt(this,JE,"m",dS).call(this),this.mouseScrollDelta+=e,Math.abs(this.mouseScrollDelta)>=.1)){const t=this.mouseScrollDelta;Bt(this,JE,"m",dS).call(this),(t>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=i)}},rS=function(t){jt(this,tS,t),this.eventBus.dispatch("presentationmodechanged",{source:this,state:t})},aS=function(){var t;Bt(this,JE,"m",rS).call(this,3),this.container.classList.add(wS),setTimeout(()=>{this.pdfViewer.scrollMode=kE.PAGE,null!==Bt(this,eS,"f").spreadMode&&(this.pdfViewer.spreadMode=ME.NONE),this.pdfViewer.currentPageNumber=Bt(this,eS,"f").pageNumber,this.pdfViewer.currentScaleValue="page-fit",null!==Bt(this,eS,"f").annotationEditorMode&&(this.pdfViewer.annotationEditorMode={mode:zv.NONE})},0),Bt(this,JE,"m",gS).call(this),Bt(this,JE,"m",uS).call(this),this.contextMenuOpen=!1,null===(t=document.getSelection())||void 0===t||t.empty()},oS=function(){const t=this.pdfViewer.currentPageNumber;this.container.classList.remove(wS),setTimeout(()=>{Bt(this,JE,"m",vS).call(this),Bt(this,JE,"m",rS).call(this,1),this.pdfViewer.scrollMode=Bt(this,eS,"f").scrollMode,null!==Bt(this,eS,"f").spreadMode&&(this.pdfViewer.spreadMode=Bt(this,eS,"f").spreadMode),this.pdfViewer.currentScaleValue=Bt(this,eS,"f").scaleValue,this.pdfViewer.currentPageNumber=t,null!==Bt(this,eS,"f").annotationEditorMode&&(this.pdfViewer.annotationEditorMode={mode:Bt(this,eS,"f").annotationEditorMode}),jt(this,eS,null)},0),Bt(this,JE,"m",fS).call(this),Bt(this,JE,"m",cS).call(this),Bt(this,JE,"m",dS).call(this),this.contextMenuOpen=!1},lS=function(t){var e;if(this.contextMenuOpen)return this.contextMenuOpen=!1,void t.preventDefault();0===t.button&&(t.target.href&&(null===(e=t.target.parentNode)||void 0===e?void 0:e.hasAttribute("data-internal-link"))||(t.preventDefault(),t.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))},hS=function(){this.contextMenuOpen=!0},uS=function(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(bS),this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(bS),delete this.controlsTimeout},3e3)},cS=function(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(bS),delete this.controlsTimeout)},dS=function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0},pS=function(t){if(this.active)if(t.touches.length>1)this.touchSwipeState=null;else switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=t.touches[0].pageX,this.touchSwipeState.endY=t.touches[0].pageY,t.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;let e=0;const i=this.touchSwipeState.endX-this.touchSwipeState.startX,n=this.touchSwipeState.endY-this.touchSwipeState.startY,s=Math.abs(Math.atan2(n,i));Math.abs(i)>50&&(s<=yS||s>=Math.PI-yS)?e=i:Math.abs(n)>50&&Math.abs(s-Math.PI/2)<=yS&&(e=n),e>0?this.pdfViewer.previousPage():e<0&&this.pdfViewer.nextPage()}},gS=function(){if(Bt(this,nS,"f"))return;jt(this,nS,new AbortController);const{signal:t}=Bt(this,nS,"f"),e=Bt(this,JE,"m",pS).bind(this);window.addEventListener("mousemove",Bt(this,JE,"m",uS).bind(this),{signal:t}),window.addEventListener("mousedown",Bt(this,JE,"m",lS).bind(this),{signal:t}),window.addEventListener("wheel",Bt(this,JE,"m",sS).bind(this),{passive:!1,signal:t}),window.addEventListener("keydown",Bt(this,JE,"m",dS).bind(this),{signal:t}),window.addEventListener("contextmenu",Bt(this,JE,"m",hS).bind(this),{signal:t}),window.addEventListener("touchstart",e,{signal:t}),window.addEventListener("touchmove",e,{signal:t}),window.addEventListener("touchend",e,{signal:t})},fS=function(){var t;null===(t=Bt(this,nS,"f"))||void 0===t||t.abort(),jt(this,nS,null)},mS=function(){Bt(this,iS,"f")||(jt(this,iS,new AbortController),window.addEventListener("fullscreenchange",()=>{document.fullscreenElement?Bt(this,JE,"m",aS).call(this):Bt(this,JE,"m",oS).call(this)},{signal:Bt(this,iS,"f").signal}))},vS=function(){var t;null===(t=Bt(this,iS,"f"))||void 0===t||t.abort(),jt(this,iS,null)};const _S={isDocumentLoaded:!1,pagesReady:!1,url:null,numPages:0,pageNumber:0,scale:0,scaleValue:"auto",pagesRotation:0,spreadMode:ME.UNKNOWN,scrollMode:kE.UNKNOWN,documentOutline:null,attachments:new Map,thumbnails:new Map,thumbnailViews:new Map,annotationEditorMode:zv.NONE,pdfSlick:null},xS=()=>{return(t=(t,e)=>Object.assign(Object.assign({},_S),{_setThumbnailView:(i,n)=>{const s=new Map(e().thumbnails),r=new Map(e().thumbnailViews),{canvasWidth:a,canvasHeight:o,scale:l,rotation:h,loaded:u,pageLabel:c,src:d=null}=n;r.set(i,n),s.set(i,{pageNumber:i,width:a,height:o,scale:l,rotation:h,loaded:u,pageLabel:c,src:d}),t({thumbnailViews:r,thumbnails:s})},_setThumbnailsViews:e=>{const i=new Map(e.map(t=>[t.id,t])),n=new Map(e.map(t=>{const{canvasWidth:e,canvasHeight:i,scale:n,rotation:s,loaded:r,pageLabel:a,src:o=null}=t;return[t.id,{pageNumber:t.id,width:e,height:i,scale:n,rotation:s,loaded:r,pageLabel:a,src:o}]}));t({thumbnailViews:i,thumbnails:n})}}))?CE(t):CE;var t};var ES,SS,CS,kS,MS,PS,FS,DS,TS,IS,LS,RS,NS,OS,WS,BS,jS,VS,$S,HS,zS,US,GS,qS,XS,YS,KS;class QS{constructor({eventBus:t,slick:e,printDialog:i}){ES.add(this),SS.set(this,null),CS.set(this,null),kS.set(this,null),this.eventBus=t,this.slick=e,this.printDialog=null!=i?i:null,this.bindEvents()}get supportsPrinting(){return ZE.instance.supportsPrinting}get printing(){return!!Bt(this,SS,"f")}print(){return Wt(this,void 0,void 0,function*(){var t,e;if(this.supportsPrinting)if(this.printing)console.warn("Ignored pdf print because of a pending print job.");else{yield null===(t=this.printDialog)||void 0===t?void 0:t.open({close:()=>this.abort()});try{this.eventBus.dispatch("beforeprint",{source:this})}finally{if(this.printing){const t=Bt(this,SS,"f");yield t.renderPages(t=>{var e;return null===(e=this.printDialog)||void 0===e?void 0:e.progress(t)}).then(()=>t.performPrint()).catch(()=>{}).then(()=>{t===Bt(this,SS,"f")&&this.abort()})}else console.error("Expected print service to be initialized."),null===(e=this.printDialog)||void 0===e||e.close()}}})}abort(){var t;Bt(this,SS,"f")&&(Bt(this,SS,"f").destroy(),null===(t=this.printDialog)||void 0===t||t.close(),this.eventBus.dispatch("afterprint",{source:this}))}bindEvents(){jt(this,CS,new AbortController);const{signal:t}=Bt(this,CS,"f"),e={signal:t};this.eventBus._on("beforeprint",Bt(this,ES,"m",MS).bind(this),e),this.eventBus._on("afterprint",Bt(this,ES,"m",PS).bind(this),e),window.addEventListener("beforeprint",()=>this.eventBus.dispatch("beforeprint",{source:window}),e),window.addEventListener("afterprint",()=>this.eventBus.dispatch("afterprint",{source:window}),e),window.addEventListener("keydown",t=>{80!==t.keyCode||!t.ctrlKey&&!t.metaKey||t.altKey||t.shiftKey&&!window.chrome&&!window.opera||(this.print(),t.preventDefault(),t.stopImmediatePropagation())},{signal:t,capture:!0})}unbindEvents(){var t;null===(t=Bt(this,CS,"f"))||void 0===t||t.abort(),jt(this,CS,null)}}SS=new WeakMap,CS=new WeakMap,kS=new WeakMap,ES=new WeakSet,MS=function(){Bt(this,SS,"f")||this.supportsPrinting&&(this.slick.viewer.pageViewsReady?(jt(this,kS,function(){const t=document.createElement("div");t.classList.add("pdfSlickPrintContainer"),document.body.append(t);const e=document.createElement("style");return e.textContent="\n@page {\n  margin: 0;\n}\n\n.pdfSlickPrintContainer {\n  display: none;\n}\n\n@media print {\n  body {\n    background: rgb(0 0 0 / 0) none;\n  }\n\n  body[data-pdfjsprinting] > *:not(.pdfSlickPrintContainer) {\n    display: none;\n  }\n\n  body[data-pdfjsprinting] .pdfSlickPrintContainer {\n    display: block;\n  }\n\n  .pdfSlickPrintContainer {\n    height: 100%;\n  }\n\n  /* wrapper around (scaled) print canvas elements */\n  .pdfSlickPrintContainer > .printedPage {\n    page-break-after: always;\n    page-break-inside: avoid;\n\n    /* The wrapper always cover the whole page. */\n    height: 100%;\n    width: 100%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .pdfSlickPrintContainer > .xfaPrintedPage .xfaPage {\n    position: absolute;\n  }\n\n  .pdfSlickPrintContainer > .xfaPrintedPage {\n    page-break-after: always;\n    page-break-inside: avoid;\n    width: 100%;\n    height: 100%;\n    position: relative;\n  }\n\n  .pdfSlickPrintContainer > .printedPage :is(canvas, img) {\n    /* The intrinsic canvas / image size will make sure that we fit the page. */\n    max-width: 100%;\n    max-height: 100%;\n\n    direction: ltr;\n    display: block;\n  }\n}",document.body.append(e),{get element(){return t},remove:()=>{t.remove(),e.remove()}}}()),jt(this,SS,ZE.instance.createPrintService({pdfDocument:this.slick.document,pagesOverview:this.slick.viewer.getPagesOverview(),printContainer:Bt(this,kS,"f").element,printResolution:this.slick.printResolution,optionalContentConfigPromise:null,printAnnotationStoragePromise:null})),this.slick.forceRendering(),Bt(this,SS,"f").layout()):this.slick.l10n.get("printing_not_ready",null).then(t=>{window.alert(t)}))},PS=function(){var t,e,i;Bt(this,SS,"f")&&(Bt(this,SS,"f").destroy(),jt(this,SS,null),null===(t=this.printDialog)||void 0===t||t.close(),null===(e=Bt(this,kS,"f"))||void 0===e||e.remove(),jt(this,kS,null),null===(i=this.slick.document)||void 0===i||i.annotationStorage.resetModified()),this.slick.forceRendering()};class ZS{static create(){let t=document.querySelector("#printServiceDialog");if(!t){const e=(t,e,i)=>{const n=document.createElement(t);return Object.entries(e).forEach(([t,e])=>n.setAttribute(t,e)),n.append(...i),n};t=e("dialog",{id:"printServiceDialog",class:"pdfSlick-dialog",style:"min-width: 200px;"},[e("div",{class:"row"},[e("span",{"data-l10n-id":"pdfjs-print-progress-message"},["Preparing document for printing…"])]),e("div",{class:"row"},[e("progress",{value:"0",max:"100"},[]),e("span",{"data-l10n-id":"pdfjs-print-progress-percent","data-l10n-args":'{ "progress": 0 }',class:"relative-progress"},["0%"])]),e("div",{class:"buttonRow"},[e("button",{id:"printCancel",class:"dialogButton",type:"button"},[e("span",{"data-l10n-id":"pdfjs-print-progress-close-button"},["Cancel"])])])]),document.body.append(t)}return new ZS(t)}constructor(t){this.dialog=t}open(t){return Wt(this,void 0,void 0,function*(){const e=this.dialog.querySelector("#printCancel"),i=()=>{var n;this.dialog.removeEventListener("close",i),this.dialog.removeEventListener("cancel",i),null==e||e.removeEventListener("click",i),null===(n=null==t?void 0:t.close)||void 0===n||n.call(t),this.close()};this.dialog.addEventListener("close",i),this.dialog.addEventListener("cancel",i),null==e||e.addEventListener("click",i),this.dialog.showModal()})}close(){this.dialog.close()}progress({index:t,total:e}){const i=Math.round(100*t/e),n=this.dialog.querySelector("progress"),s=this.dialog.querySelector(".relative-progress");n.value=i,s.setAttribute("data-l10n-args",JSON.stringify({progress:i}))}}Fb.workerSrc="assets/pdf.worker.min-DD3ZEtk4.js";const JS={"8.5x11":"Letter","8.5x14":"Legal"},tC={"297x420":"A3","210x297":"A4"};class eC{constructor({container:t,viewer:e,thumbs:i,store:n=xS(),options:s,onError:r,printDialog:a}){var o,l,h,u,c,d,p,g,f,m,v,w,b,y,A;FS.add(this),DS.set(this,void 0),TS.set(this,void 0),IS.set(this,void 0),LS.set(this,void 0),RS.set(this,void 0),this.downloadManager=null,this.findController=null,this.pdfPresentationMode=null,this.document=null,NS.set(this,void 0),OS.set(this,void 0),WS.set(this,void 0),BS.set(this,void 0),jt(this,TS,t),jt(this,IS,e),jt(this,LS,i),jt(this,WS,r),this.l10n=null!==(o=null==s?void 0:s.l10n)&&void 0!==o?o:new Qx(navigator.language),this.downloadManager=new ex,this.textLayerMode=null!==(l=null==s?void 0:s.textLayerMode)&&void 0!==l?l:1,jt(this,NS,null!==(h=null==s?void 0:s.annotationMode)&&void 0!==h?h:$v.ENABLE_FORMS),jt(this,OS,null!==(u=null==s?void 0:s.annotationEditorMode)&&void 0!==u?u:zv.NONE),this.annotationEditorHighlightColors=null!==(c=null==s?void 0:s.annotationEditorHighlightColors)&&void 0!==c?c:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",this.removePageBorders=null!==(d=null==s?void 0:s.removePageBorders)&&void 0!==d&&d,this.singlePageViewer=null!==(p=null==s?void 0:s.singlePageViewer)&&void 0!==p&&p,this.enablePrintAutoRotate=null!==(g=null==s?void 0:s.enablePrintAutoRotate)&&void 0!==g&&g,this.useOnlyCssZoom=null!==(f=null==s?void 0:s.useOnlyCssZoom)&&void 0!==f&&f,this.pageColors=null!==(m=null==s?void 0:s.pageColors)&&void 0!==m?m:null,this.maxCanvasPixels=null!==(v=null==s?void 0:s.maxCanvasPixels)&&void 0!==v?v:16777216,this.printResolution=null!==(w=null==s?void 0:s.printResolution)&&void 0!==w?w:96,this.thumbnailWidth=null!==(b=null==s?void 0:s.thumbnailWidth)&&void 0!==b?b:125,this.getDocumentParams=null!==(y=null==s?void 0:s.getDocumentParams)&&void 0!==y?y:{},!this.pageColors||CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground)||((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.store=n;const _=new FE;_.onIdle=this._cleanup.bind(this),_.isThumbnailViewEnabled=!0,jt(this,DS,_);const x=new ix,E=new Z_({eventBus:x,externalLinkTarget:2,externalLinkRel:"noopener noreferrer nofollow",ignoreDestinationZoom:!1}),S=new K_({eventBus:x,linkService:E}),C=Object.assign(Object.assign({container:t},e&&{viewer:e}),{eventBus:x,linkService:E,findController:S,renderingQueue:_,textLayerMode:this.textLayerMode,annotationEditorHighlightColors:this.annotationEditorHighlightColors,l10n:this.l10n,annotationMode:Bt(this,NS,"f"),annotationEditorMode:Bt(this,OS,"f"),removePageBorders:this.removePageBorders,imageResourcesPath:"/images/"}),k=this.singlePageViewer?new SE(C):new EE(C);_.setViewer(k),i&&(this.thumbnailViewer=new YE({container:i,eventBus:x,linkService:E,renderingQueue:_,pageColors:this.pageColors,enableHWA:void 0,store:n,thumbnailWidth:this.thumbnailWidth}),_.setThumbnailViewer(this.thumbnailViewer)),document.fullscreenEnabled&&(this.pdfPresentationMode=new AS({container:t,pdfViewer:k,eventBus:x})),this.eventBus=x,this.linkService=E,this.findController=S,this.viewer=k,this.linkService.setViewer(k),jt(this,RS,new QS({eventBus:x,slick:this,printDialog:null!=a?a:ZS.create()}));const M=null!==(A=null==s?void 0:s.scaleValue)&&void 0!==A?A:"auto";this.store.setState({scaleValue:M})}loadDocument(t,e){return Wt(this,void 0,void 0,function*(){var i,n,s,r,a;if(this.url&&"string"==typeof this.url)try{URL.revokeObjectURL(this.url)}catch(o){}try{null===(i=this.document)||void 0===i||i.destroy(),null===(n=this.viewer)||void 0===n||n.cleanup(),t instanceof URL?this.url=t.toString():t instanceof ArrayBuffer?this.url=URL.createObjectURL(new Blob([t],{type:"application/pdf"})):this.url=t;const o=null!==(s=null==e?void 0:e.filename)&&void 0!==s?s:m(null===(r=this.url)||void 0===r?void 0:r.toString());this.filename=o;const l=X(Object.assign(Object.assign({},this.getDocumentParams),{url:this.url,isEvalSupported:!1}));(null==e?void 0:e.onProgress)&&(l.onProgress=e.onProgress);const h=yield l.promise;this.document=h,this.viewer.setDocument(this.document),this.linkService.setDocument(this.document),this.thumbnailViewer&&(null===(a=this.thumbnailViewer)||void 0===a||a.setDocument(h)),Bt(this,FS,"m",HS).call(this),yield Bt(this,FS,"m",jS).call(this),this.store.setState({filename:o,numPages:h.numPages,pageNumber:1,isDocumentLoaded:!0,url:t.toString()});const u=yield h.getAttachments(),c=new Map(Object.keys(null!=u?u:{}).sort((t,e)=>t.toLowerCase().localeCompare(e.toLowerCase())).map(t=>[t,u[t]]));this.store.setState({attachments:c}),yield Bt(this,FS,"m",VS).call(this),this.forceRendering()}catch(o){Bt(this,WS,"f")&&Bt(this,WS,"f").call(this,o)}})}forceRendering(t=!0){Bt(this,DS,"f").printing=!!Bt(this,RS,"f").printing,Bt(this,DS,"f").isThumbnailViewEnabled=t,Bt(this,DS,"f").renderHighestPriority()}gotoPage(t){this.linkService.goToPage(t)}openOrDownloadData(t,e){var i;null===(i=this.downloadManager)||void 0===i||i.openOrDownloadData(t,e)}download(){return Wt(this,void 0,void 0,function*(){var t,e;const i=this.url,{filename:n}=this;try{const e=yield this.document.getData(),s=new Blob([e],{type:"application/pdf"});yield null===(t=this.downloadManager)||void 0===t?void 0:t.download(s,i,n)}catch(s){yield null===(e=this.downloadManager)||void 0===e?void 0:e.download(null,i,n)}})}save(){return Wt(this,void 0,void 0,function*(){var t;const e=this.url,{filename:i}=this;try{const n=yield this.document.saveDocument(),s=new Blob([n],{type:"application/pdf"});yield null===(t=this.downloadManager)||void 0===t?void 0:t.download(s,e,i)}catch(n){console.error(`Error when saving the document: ${n.message}`),yield this.download()}})}downloadOrSave(){var t;const{annotationStorage:e}=null!==(t=this.document)&&void 0!==t?t:{};e&&e.size>0?this.save():this.download()}get supportsPrinting(){return Bt(this,RS,"f").supportsPrinting}requestPresentationMode(){var t;null===(t=this.pdfPresentationMode)||void 0===t||t.request()}triggerPrinting(){Bt(this,RS,"f").print()}unbindEvents(){var t;null===(t=Bt(this,BS,"f"))||void 0===t||t.abort(),jt(this,BS,null),Bt(this,RS,"f").unbindEvents()}_cleanup(){var t;if(this.document)try{this.viewer.cleanup(),null===(t=this.thumbnailViewer)||void 0===t||t.cleanup(),this.document.cleanup()}catch(e){console.error("Unable to perform cleanup",e)}}setAnnotationEditorMode(t){this.viewer.annotationEditorMode={mode:t},this.dispatch("switchannotationeditormode",{source:this,mode:t}),this.store.setState({annotationEditorMode:t})}setAnnotationEditorParams(t){const e=Array.isArray(t)?t:[t];for(const i of e)this.dispatch("switchannotationeditorparams",{source:this,type:i.type,value:i.value})}setHighlightDefaultColor(t){this.setAnnotationEditorMode(zv.HIGHLIGHT),this.setAnnotationEditorParams([{type:Uv.HIGHLIGHT_DEFAULT_COLOR,value:t}]),this.store.setState({highlightDefaultColor:t})}setSpreadMode(t){var e;e=t,Number.isInteger(e)&&Object.values(ME).includes(e)&&e!==ME.UNKNOWN&&(this.viewer.spreadMode=t,this.dispatch("switchspreadmode",{mode:t}))}setScrollMode(t){var e;e=t,Number.isInteger(e)&&Object.values(kE).includes(e)&&e!==kE.UNKNOWN&&(this.viewer.scrollMode=t,this.dispatch("switchscrollmode",{mode:t}))}setRotation(t){Vt(t)&&(this.viewer.pagesRotation=t)}getPagesOverview(){var t,e;try{return null!==(e=null===(t=this.viewer)||void 0===t?void 0:t.getPagesOverview())&&void 0!==e?e:[]}catch(i){return[]}}increaseScale(){this.viewer.increaseScale()}decreaseScale(){this.viewer.decreaseScale()}set currentScaleValue(t){this.viewer.currentScaleValue=t}set currentScale(t){this.viewer.currentScale=t}getPageView(t){return this.viewer.getPageView(t)}on(t,e,i){this.eventBus.on(t,e,i)}off(t,e,i){this.eventBus.off(t,e,i)}dispatch(t,e){this.eventBus.dispatch(t,e)}}DS=new WeakMap,TS=new WeakMap,IS=new WeakMap,LS=new WeakMap,RS=new WeakMap,NS=new WeakMap,OS=new WeakMap,WS=new WeakMap,BS=new WeakMap,FS=new WeakSet,jS=function(){return Wt(this,void 0,void 0,function*(){var t;const e=this.document,i=null!==(t=yield e.getPageLabels())&&void 0!==t?t:[],n=i.length;let s=0,r=0;for(let l=0;l<n;l++){const t=i[l];if(t===(l+1).toString())s++;else{if(""!==t)break;r++}}if(s>=n||r>=n)return;const{viewer:a,thumbnailViewer:o}=this;a.setPageLabels(i),null==o||o.setPageLabels(i)})},VS=function(){return Wt(this,void 0,void 0,function*(){const{info:t,contentLength:e}=yield this.document.getMetadata(),i=yield this.document.getPage(this.store.getState().pageNumber).then(t=>Bt(this,FS,"m",$S).call(this,function({view:t,userUnit:e,rotate:i}){const[n,s,r,a]=t,o=i%180!=0,l=(r-n)/72*e,h=(a-s)/72*e;return{width:o?h:l,height:o?l:h}}(t),0));this.store.setState({filesize:e,title:t.Title,author:t.Author,subject:t.Subject,keywords:t.Keywords,creator:t.Creator,producer:t.Producer,version:t.PDFFormatVersion,creationDate:fw.toDateObject(t.CreationDate),modificationDate:fw.toDateObject(t.ModDate),isLinearized:t.IsLinearized,pageSize:i})})},$S=function(t,e){return Wt(this,void 0,void 0,function*(){if(!t)return;e%180!=0&&(t={width:t.height,height:t.width});const i=(n=t).width<=n.height;var n;let s={width:Math.round(100*t.width)/100,height:Math.round(100*t.height)/100},r={width:Math.round(25.4*t.width*10)/10,height:Math.round(25.4*t.height*10)/10},a=$t(s,i,JS)||$t(r,i,tC);if(!(a||Number.isInteger(r.width)&&Number.isInteger(r.height))){const e={width:25.4*t.width,height:25.4*t.height},n={width:Math.round(r.width),height:Math.round(r.height)};Math.abs(e.width-n.width)<.1&&Math.abs(e.height-n.height)<.1&&(a=$t(n,i,tC),a&&(s={width:Math.round(n.width/25.4*100)/100,height:Math.round(n.height/25.4*100)/100},r=n))}const[{width:o,height:l},h,u,c]=yield Promise.all([s,this.l10n.get("document_properties_page_size_unit_inches",null),a&&this.l10n.get(`document_properties_page_size_name_${a.toLowerCase()}`,null),this.l10n.get("document_properties_page_size_orientation_"+(i?"portrait":"landscape"),null)]);return{width:o.toLocaleString(),height:l.toLocaleString(),unit:h,name:u,orientation:c}})},HS=function(){jt(this,BS,new AbortController);const{signal:t}=Bt(this,BS,"f"),e={signal:t};this.eventBus._on("pagesinit",Bt(this,FS,"m",zS).bind(this),e),this.eventBus._on("scalechanging",Bt(this,FS,"m",XS).bind(this),e),this.eventBus._on("pagechanging",Bt(this,FS,"m",YS).bind(this),e),this.eventBus._on("pagerendered",Bt(this,FS,"m",KS).bind(this),e),this.eventBus._on("rotationchanging",Bt(this,FS,"m",US).bind(this),e),this.eventBus._on("switchspreadmode",Bt(this,FS,"m",GS).bind(this),e),this.eventBus._on("switchscrollmode",Bt(this,FS,"m",qS).bind(this),e)},zS=function(t){return Wt(this,arguments,void 0,function*({source:t}){var e;const i=yield null===(e=this.document)||void 0===e?void 0:e.getOutline(),n=this.store.getState().scaleValue;t.currentScale=1,t.currentScaleValue="auto",this.store.setState({documentOutline:i,pageNumber:1,scaleValue:n,pagesReady:!0})})},US=function({pagesRotation:t,pageNumber:e}){this.store.setState({pagesRotation:t}),this.thumbnailViewer&&(this.thumbnailViewer.pagesRotation=t),this.forceRendering(),this.viewer.currentPageNumber=e},GS=function({mode:t}){this.store.setState({spreadMode:t})},qS=function({mode:t}){this.store.setState({scrollMode:t})},XS=function({scale:t,presetValue:e}){this.store.setState({scale:t,scaleValue:e}),this.viewer.update()},YS=function({pageNumber:t}){var e;null===(e=this.thumbnailViewer)||void 0===e||e.scrollThumbnailIntoView(t),this.store.setState({pageNumber:t})},KS=function({pageNumber:t,error:e}){var i;if(Bt(this,LS,"f")){const e=this.viewer.getPageView(t-1),n=null===(i=this.thumbnailViewer)||void 0===i?void 0:i.getThumbnail(t-1);e&&n&&n.setImage(e)}};const iC={width:null,height:null};var nC=iv('<div id=viewerContainer><div id=viewer class="pdfSlickViewer pdfViewer">'),sC=iv("<div>"),rC=iv("<form>");const aC=()=>{const{viewerRef:t,pdfSlickStore:e,PDFSlickViewer:i}=((t,e)=>{const[i,n]=Qm(!1),[s,r]=Qm(!1),[a,o]=Qm(null),[l,h]=Qm(null),[u,c]=Qm(null),[d,p]=Qm(null),g=xS(),f=function(t,e=t.getState){const i=e(t.getState()),[n,s]=ev(i),r=t.subscribe((t,i)=>{e(i);const n=e(t);s(cv(n))});return Jm(()=>r()),n}(g);return tv(()=>{if(t&&s()){const i=new eC({container:a(),thumbs:l(),store:g,options:e,onError:t=>c(t)});p(i),g.setState({pdfSlick:i}),i.loadDocument(t,e).then(()=>{n(!0)})}}),{isDocumentLoaded:i,viewerRef:t=>{o(t),r(!0)},thumbsRef:t=>{h(t)},pdfSlick:d,pdfSlickStore:f,PDFSlickViewer:Ut,PDFSlickThumbnails:Gt,error:u}})(pv.raw_url),[n,s]=Qm(1),{isOpen:r,onToggle:a,onClose:o}=gv(),l=t=>{var i;t.preventDefault();const r=parseInt(n()+"");Number.isInteger(r)&&r>0&&r<=e.numPages?null==(i=e.pdfSlick)||i.linkService.goToPage(r):s(e.pageNumber)},h=({pageNumber:t})=>s(t);return tv(()=>{e.pdfSlick&&e.pdfSlick.on("pagechanging",h)}),Jm(()=>{e.pdfSlick&&e.pdfSlick.off("pagechanging",h)}),rv(mv,{w:"$full",h:"70vh",pos:"relative",display:"flex",get children(){return[rv(hC,{store:e,get isOpen(){return r()},onClose:o}),rv(fv,{w:"$full",h:"$full",pos:"relative",flex:1,get children(){return[rv(uC,{store:e,get isOpen(){return r()},onToggle:a,wantedPageNumber:n,onPageNumberChange:s,onPageNumberSubmit:l}),rv(i,{store:e,viewerRef:t})]}})]}})},oC=t=>{const[e,i]=Qm(!0),n=()=>t.item.items&&t.item.items.length>0,s=()=>{var e;t.item.dest&&(null==(e=t.store.pdfSlick)?void 0:e.linkService)&&t.store.pdfSlick.linkService.goToDestination(t.item.dest)};return rv(mv,{mb:"$1",get children(){return[rv(vv,{spacing:"$1",alignItems:"center",get children(){return[rv(xv,{get when(){return n()},get fallback(){return rv(mv,{w:"16px"})},get children(){return rv(Av,{size:"xs",variant:"ghost","aria-label":"Toggle",get icon(){return Sv(()=>!!e())()?rv(Zt,{}):rv(Jt,{})},minW:"16px",h:"16px",onClick:()=>i(!e())})}}),rv(Tv,{variant:"ghost",size:"sm",justifyContent:"flex-start",flex:1,fontSize:"$sm",fontWeight:"$normal",py:"$1",px:"$2",h:"auto",minH:"$6",textAlign:"left",overflow:"hidden",onClick:s,_hover:{backgroundColor:"$neutral3"},get title(){return t.item.title},color:"$neutral12",get children(){return t.item.title}})]}}),rv(xv,{get when(){return Sv(()=>!!n())()&&e()},get children(){return rv(mv,{get pl(){return 16*(t.level+1)+"px"},get children(){return rv(lC,{get items(){return t.item.items},get level(){return t.level+1},get store(){return t.store}})}})}})]}})},lC=t=>t.items&&0!==t.items.length?rv(ov,{get each(){return t.items},children:e=>rv(oC,{item:e,get level(){return t.level||0},get store(){return t.store}})}):null,hC=t=>{const e=bv();return rv(xv,{get when(){return t.isOpen},get children(){return rv(mv,{w:"280px",h:"$full",bgColor:"$neutral1",borderRight:"1px solid $neutral6",display:"flex",flexDirection:"column",transition:"all 0.3s ease",zIndex:"10",get children(){return[rv(vv,{spacing:"$2",p:"$3",borderBottom:"1px solid $neutral6",bgColor:"$neutral2",get children(){return[rv(wv,{fontWeight:"$semibold",color:"$neutral12",get children(){return e("home.preview.pdf.document_outline")}}),rv(mv,{flex:1}),rv(yv,{withArrow:!0,get label(){return e("home.preview.pdf.close_sidebar")},get children(){return rv(Av,{size:"sm",get"aria-label"(){return e("home.preview.pdf.close_sidebar")},get icon(){return rv(Yt,{})},get onClick(){return t.onClose}})}})]}}),rv(mv,{flex:1,overflow:"auto",p:"$3",get children(){return rv(_v,{spacing:"$2",alignItems:"stretch",get children(){return rv(xv,{get when(){return t.store.documentOutline&&t.store.documentOutline.length>0},get fallback(){return rv(wv,{size:"sm",color:"$neutral11",textAlign:"center",mt:"$4",get children(){return e("home.preview.pdf.no_outline")}})},get children(){return rv(lC,{get items(){return t.store.documentOutline},get store(){return t.store}})}})}})}})]}})}})},uC=t=>{const e=bv();let i;const n=[["auto",e("home.preview.pdf.zoom_auto")],["page-actual",e("home.preview.pdf.zoom_actual")],["page-fit",e("home.preview.pdf.zoom_fit")],["page-width",e("home.preview.pdf.zoom_width")]],s=[[.5,e("home.preview.pdf.zoom_50")],[.75,e("home.preview.pdf.zoom_75")],[1,e("home.preview.pdf.zoom_100")],[1.25,e("home.preview.pdf.zoom_125")],[1.5,e("home.preview.pdf.zoom_150")],[2,e("home.preview.pdf.zoom_200")]],r=Ev(()=>{if(t.store.scaleValue){const e=n.find(([e])=>e===t.store.scaleValue);if(e)return e[1]}return`${Math.floor(100*t.store.scale)}%`}),a=()=>t.store.annotationEditorMode===zv.INK;return rv(mv,{pos:"absolute",left:"50%",transform:"translateX(-50%)",display:"flex",zIndex:"1",css:{top:"$2",bottom:"auto","@sm":{top:"auto",bottom:"$2"}},get children(){return rv(vv,{spacing:"$4",w:"auto",p:"$2",rounded:"$lg",shadow:"$lg",bgColor:"$neutral1",opacity:"0.7",transition:"all 0.2s ease-in-out",_hover:{opacity:"1"},css:{scale:"0.7","@sm":{scale:"1"}},get children(){return[rv(xv,{get when(){return t.store.documentOutline&&t.store.documentOutline.length>0},get children(){return rv(yv,{withArrow:!0,get label(){return e("home.preview.pdf.toggle_sidebar")},get children(){return rv(Av,{size:"sm",colorScheme:"neutral",get"aria-label"(){return e("home.preview.pdf.toggle_sidebar")},get icon(){return Sv(()=>!!t.isOpen)()?rv(Kt,{}):rv(Qt,{})},get onClick(){return t.onToggle}})}})}}),rv(yv,{withArrow:!0,get label(){return e("home.preview.pdf.toggle_pen")},get children(){return rv(Av,{size:"sm",get"aria-label"(){return e("home.preview.pdf.toggle_pen")},get colorScheme(){return a()?"primary":"neutral"},onClick:()=>{var e,i;const n=a()?zv.NONE:zv.INK;null==(e=t.store.pdfSlick)||e.setAnnotationEditorMode(n),null==(i=t.store.pdfSlick)||i.setAnnotationEditorParams({type:Uv.INK_COLOR,value:"#ff0000"})},get icon(){return Sv(()=>!!a())()&&rv(Cv,{})||rv(kv,{})}})}}),rv(Mv,{orientation:"vertical",h:"24px"}),rv(Pv,{colorScheme:"neutral",attached:!0,get children(){return[rv(yv,{withArrow:!0,get label(){return e("home.preview.pdf.zoom_out")},get children(){return rv(Av,{size:"sm",get"aria-label"(){return e("home.preview.pdf.zoom_out")},get disabled(){return!t.store.pdfSlick||t.store.scale<=.25},onClick:()=>{var e,i;return null==(i=null==(e=t.store.pdfSlick)?void 0:e.viewer)?void 0:i.decreaseScale()},get icon(){return rv(ee,{})}})}}),rv(Fv,{motionPreset:"scale-bottom-left",get children(){return[rv(Dv,{as:Tv,size:"sm",minW:"60px",get children(){return rv(wv,{size:"sm",get children(){return Sv(()=>!!t.store.pdfSlick)()?r():e("home.preview.pdf.loading")}})}}),rv(Iv,{get children(){return[rv(Lv,{get children(){return[rv(Rv,{get children(){return e("home.preview.pdf.zoom_presets")}}),rv(ov,{each:n,children:e=>rv(Nv,{onSelect:()=>{return i=e[0],void(t.store.pdfSlick&&(t.store.pdfSlick.currentScaleValue=i));var i},get children(){return e[1]}})})]}}),rv(Mv,{role:"presentation",my:"$1"}),rv(Lv,{get children(){return[rv(Rv,{get children(){return e("home.preview.pdf.zoom_levels")}}),rv(ov,{each:s,children:e=>rv(Nv,{onSelect:()=>{return i=e[0],void(t.store.pdfSlick&&(t.store.pdfSlick.currentScale=i));var i},get children(){return e[1]}})})]}})]}})]}}),rv(yv,{withArrow:!0,get label(){return e("home.preview.pdf.zoom_in")},get children(){return rv(Av,{size:"sm",get"aria-label"(){return e("home.preview.pdf.zoom_in")},get disabled(){return!t.store.pdfSlick||t.store.scale>=5},onClick:()=>{var e,i;return null==(i=null==(e=t.store.pdfSlick)?void 0:e.viewer)?void 0:i.increaseScale()},get icon(){return rv(te,{})}})}})]}}),rv(Mv,{orientation:"vertical",h:"24px"}),rv(vv,{spacing:"$2",alignItems:"center",get children(){return[(e=rC(),Ov(e,"submit",t.onPageNumberSubmit),sv(e,rv(Wv,{size:"sm",ref(t){"function"==typeof i?i(t):i=t},type:"text",get value(){return t.wantedPageNumber()},w:"50px",textAlign:"center",onFocus:()=>i.select(),onChange:e=>t.onPageNumberChange(e.currentTarget.value)})),e),rv(wv,{size:"sm",minW:"$full",get children(){return["/ ",Sv(()=>t.store.numPages)]}})];var e}}),rv(yv,{withArrow:!0,get label(){return e("home.preview.pdf.prev_page")},get children(){return rv(Av,{size:"sm",get"aria-label"(){return e("home.preview.pdf.prev_page")},colorScheme:"neutral",get disabled(){return t.store.pageNumber<=1},onClick:()=>{var e,i;return null==(i=null==(e=t.store.pdfSlick)?void 0:e.viewer)?void 0:i.previousPage()},get icon(){return rv(Xt,{})}})}}),rv(yv,{withArrow:!0,get label(){return e("home.preview.pdf.next_page")},get children(){return rv(Av,{size:"sm",get"aria-label"(){return e("home.preview.pdf.next_page")},colorScheme:"neutral",get disabled(){return!t.store.pdfSlick||t.store.pageNumber>=t.store.numPages},onClick:()=>{var e,i;return null==(i=null==(e=t.store.pdfSlick)?void 0:e.viewer)?void 0:i.nextPage()},get icon(){return rv(qt,{})}})}})]}})}})};export{aC as default};
