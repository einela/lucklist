import{bU as e,P as t,D as r,q as a,aE as o,aM as n,j as s,ah as i,aR as l,S as c,dQ as u,a_ as d,aL as g,aQ as m,ag as p,bT as b,$ as h,ab as f,av as j}from"./index-C_g2pi0Z.js";import{b as x}from"./style-CDMzdolg.js";import{J as $}from"./index-DJbwiRYC.js";import{I as y}from"./ImageWithError-_fgwjkrv.js";import{g as w,O as k}from"./icon-Bsr_iDeP.js";import{I as v,u as C}from"./helper-sowZH77k.js";const I=I=>{const{isHide:_}=e();if(_(I.obj))return null;const{setPathAs:z}=t(),E=r(n,{get color(){return o()},get boxSize(){return parseInt(a.grid_item_size)-30+"px"},get as(){return w(I.obj)}}),{show:K}=x({id:1}),{pushHref:M,to:P}=s(),{openWithDoubleClick:S,toggleWithClick:A,restoreSelectionCache:D}=C();return r(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return r(i,{get classList(){return{selected:!!I.obj.selected}},class:"grid-item viselect-item",get"data-index"(){return I.index},w:"$full",p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.06)",bgColor:h()}},as:$,get href(){return I.obj.name},get cursor(){return S()||A()?"default":"pointer"},get bgColor(){return f(()=>!!I.obj.selected)()?h():void 0},"on:dblclick":()=>{S()&&(u(I.index,!0,!0),P(M(I.obj.name)))},"on:click":e=>{if(e.preventDefault(),!S()&&!(e.ctrlKey||e.metaKey||e.shiftKey)&&D())return A()?u(I.index,!I.obj.selected):void P(M(I.obj.name))},onMouseEnter:()=>{z(I.obj.name,I.obj.is_dir,!0)},onContextMenu:e=>{b(()=>{u(I.index,!0,!0)}),K(e,{props:I.obj})},get children(){return[r(l,{class:"item-thumbnail",get h(){return`${parseInt(a.grid_item_size)}px`},w:"$full",get cursor(){return I.obj.type!==k.IMAGE?"inherit":"pointer"},"on:click":e=>{I.obj.type===k.IMAGE&&(e.ctrlKey||e.metaKey||e.shiftKey||D()&&(m.emit("gallery",I.obj.name),e.preventDefault(),e.stopPropagation()))},pos:"relative",get children(){return[r(c,{get when(){return d()},get children(){return r(v,{pos:"absolute",left:"$1",top:"$1","on:mousedown":e=>{e.stopPropagation()},"on:click":e=>{e.stopPropagation()},get checked(){return I.obj.selected},onChange:e=>{u(I.index,e.target.checked)}})}}),r(c,{get when(){return I.obj.thumb},fallback:E,get children(){return r(y,{maxH:"$full",maxW:"$full",rounded:"$lg",shadow:"$md",get fallback(){return r(g,{size:"lg"})},fallbackErr:E,get src(){return I.obj.thumb},loading:"lazy"})}})]}}),r(p,{css:{whiteSpace:"nowrap",textOverflow:"ellipsis"},w:"$full",overflow:"hidden",textAlign:"center",fontSize:"$sm",get title(){return I.obj.name},get children(){return I.obj.name}})]}})}})};export{I as G};
