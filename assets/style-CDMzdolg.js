function e(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}function t(e){var n,i,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(i=t(e[n]))&&(o&&(o+=" "),o+=i);else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function n(){for(var e,n,i=0,o="";i<arguments.length;)(e=arguments[i++])&&(n=t(e))&&(o&&(o+=" "),o+=n);return o}function i(e,t){return function(e){return"function"==typeof e}(e)?e(t):e}import{dJ as o,Q as s,dF as r,O as d,D as l,ax as a,dy as c,aZ as v,co as u,dK as m,S as h,B as p,N as f,bZ as _,dE as x,dL as g,dM as $,dN as w,dp as b,bT as y}from"./index-C_g2pi0Z.js";var L=(e=>(e.menu="solid-contextmenu",e.submenu="solid-contextmenu solid-contextmenu__submenu",e.submenuArrow="solid-contextmenu__submenu-arrow",e.submenuOpen="solid-contextmenu__submenu--is-open",e.separator="solid-contextmenu__separator",e.item="solid-contextmenu__item",e.itemDisabled="solid-contextmenu__item--disabled",e.itemContent="solid-contextmenu__item__content",e.theme="solid-contextmenu__theme--",e.animationWillEnter="solid-contextmenu__will-enter--",e.animationWillLeave="solid-contextmenu__will-leave--",e))(L||{});const C=t=>{function n(n,o){if(!r||t.appear){let s=function(e){n&&(!e||e.target===n)&&(n.removeEventListener("transitionend",s),n.removeEventListener("animationend",s),n.classList.remove(...v),n.classList.remove(...u),y(()=>{d()!==n&&l(n),a()===n&&c(void 0)}),f&&f(n),"inout"===t.mode&&i(n,o))};const r=t.enterClass.split(" "),v=t.enterActiveClass.split(" "),u=t.enterToClass.split(" ");m&&m(n),n.classList.add(...r),n.classList.add(...v),e(()=>{n.classList.remove(...r),n.classList.add(...u),h&&h(n,()=>s()),(!h||h.length<2)&&(n.addEventListener("transitionend",s),n.addEventListener("animationend",s))})}o&&!t.mode?c(n):l(n)}function i(i,o){function s(e){(!e||e.target===o)&&(o.removeEventListener("transitionend",s),o.removeEventListener("animationend",s),o.classList.remove(...a),o.classList.remove(...c),d()===o&&l(void 0),b&&b(o),"outin"===t.mode&&n(i,o))}const r=t.exitClass.split(" "),a=t.exitActiveClass.split(" "),c=t.exitToClass.split(" ");if(!o.parentNode)return s();_&&_(o),o.classList.add(...r),o.classList.add(...a),e(()=>{o.classList.remove(...r),o.classList.add(...c)}),x&&x(o,()=>s()),(!x||x.length<2)&&(o.addEventListener("transitionend",s),o.addEventListener("animationend",s))}let o,r=!0;const[d,l]=p(),[a,c]=p(),v=g(()=>t.children),u=t.name||"s";t=s({name:u,enterActiveClass:u+"-enter-active",enterClass:u+"-enter",enterToClass:u+"-enter-to",exitActiveClass:u+"-exit-active",exitClass:u+"-exit",exitToClass:u+"-exit-to"},t);const{onBeforeEnter:m,onEnter:h,onAfterEnter:f,onBeforeExit:_,onExit:x,onAfterExit:b}=t;return $(e=>{for(o=v();"function"==typeof o;)o=o();return w(()=>(o&&o!==e&&("outin"!==t.mode?n(o,e):r&&l(o)),e&&e!==o&&"inout"!==t.mode&&i(o,e),r=!1,o))}),[d,a]},E=(D=D||new Map,function(e,t){var n=D.get(e);n?n.push(t):D.set(e,[t])}),A=function(e,t){var n=D.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):D.set(e,[]))},k=function(e,t){var n=D.get(e);n&&n.slice().map(function(e){e(t)}),(n=D.get("*"))&&n.slice().map(function(n){n(e,t)})},N=x(),B=()=>r(N);var D;const P=a("<div></div>",2),T=(e,t,n)=>e+t<=n?e:e<t?n-t:e-t,W=e=>{const[t,i]=o(e,["id","theme","animation","onShown","onHidden"]),[r,a]=p(!1),[v,x]=p({x:0,y:0});let g;const[$,w]=p();E("show",e=>{var n;e.id===t.id&&(e.event.preventDefault(),w(e.props),a(!0),x(null!=(n=e.position)?n:((e,t)=>{const n={width:window.innerWidth,height:window.innerHeight};return{x:T(e.x,t.width,n.width),y:T(e.y,t.height,n.height)}})({x:e.event.clientX,y:e.event.clientY},{width:g.offsetWidth,height:g.offsetHeight})))});const b=()=>{k("hide",t.id),a(!1)},y=s({shown:r,animation:"scale",hide:b,props:$},t);E("hideAll",()=>{b()}),f(()=>{A("show"),A("hideAll")});const B=d(()=>{let e="";return t.animation&&(e=`solid-contextmenu-${t.animation}`),console.log(e),e}),D=d(()=>({enterActiveClass:B()+"-enter-active",exitActiveClass:B()+"-exit-active"}));return l(N.Provider,{value:y,get children(){return l(_,{get children(){return l(C,s(D,{get children(){return l(h,{get when(){return r()},get children(){const e=P.cloneNode(!0);return"function"==typeof g?g(e):g=e,function(e){const t=t=>{var n;return!e.contains(t.target)&&(null==(n=b())?void 0:n())};document.body.addEventListener("click",t),f(()=>document.body.removeEventListener("click",t))}(e),c(e,i,!1,!1),u(o=>{const s=n(L.menu,i.class,{[`${L.theme}${t.theme}`]:t.theme}),r=v().x+"px",d=v().y+"px";return s!==o._v$&&m(e,o._v$=s),r!==o._v$2&&e.style.setProperty("left",o._v$2=r),d!==o._v$3&&e.style.setProperty("top",o._v$3=d),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),e}})}}))}})}})},H=a("<div><div></div></div>",4),F=e=>{const[t,r]=o(e,["hidden","disabled","onClick","data","children"]),a=s({hidden:!1,disabled:!1},t),{props:p,hide:f}=B(),_=d(()=>({props:p(),data:e.data})),x=d(()=>i(a.disabled,_())),g=d(()=>i(a.hidden,_())),$=t=>{var n;x()||(null==(n=e.onClick)||n.call(e,{event:t,..._()}),f())};return l(h,{get when(){return!g()},get children(){const e=H.cloneNode(!0),i=e.firstChild;return e.$$click=$,c(e,r,!1,!0),v(i,()=>t.children),u(t=>{const o=n(L.item,{[L.itemDisabled]:x()}),s=L.itemContent;return o!==t._v$&&m(e,t._v$=o),s!==t._v$2&&m(i,t._v$2=s),t},{_v$:void 0,_v$2:void 0}),e}})};b(["click"]);const O=a("<div></div>",2),j=a("<div><div><span></span></div></div>",6),q=e=>{const[t,r]=o(e,["arrow","children","disabled","hidden","label","class"]),a=s({arrow:"▶️",disabled:!1,hidden:!1},t),{props:_,id:x}=B(),g=d(()=>({props:_()})),$=d(()=>i(a.disabled,g())),w=d(()=>i(a.hidden,g()));let b,y;const[C,k]=p({x:0,y:0}),[N,D]=p(!1),P=()=>{D(!0),(()=>{const e=b.getBoundingClientRect(),t=y.getBoundingClientRect(),n=window.innerWidth,i=window.innerHeight;let o=e.right;o+t.width>n&&(o=e.left-t.width>0?e.left-t.width:n-t.width);let s=e.top;s+t.height>i&&(s=e.bottom-t.height>0?e.bottom-t.height:i-t.height),k({x:o,y:s}),console.log(C())})()};return E("hide",e=>{e===x&&D(!1)}),f(()=>{A("hide")}),l(h,{get when(){return!w()},get children(){const e=j.cloneNode(!0),i=e.firstChild,o=i.firstChild;return e.$$click=()=>N()?D(!1):P(),e.addEventListener("mouseleave",()=>D(!1)),e.addEventListener("mouseenter",()=>P()),c(e,r,!1,!0),"function"==typeof b?b(i):b=i,v(i,()=>a.label,o),v(o,()=>a.arrow),v(e,l(h,{get when(){return N()},get children(){const e=O.cloneNode(!0);return"function"==typeof y?y(e):y=e,v(e,()=>a.children),u(t=>{const n=L.submenu,i=C().x+"px",o=C().y+"px";return n!==t._v$&&m(e,t._v$=n),i!==t._v$2&&e.style.setProperty("left",t._v$2=i),o!==t._v$3&&e.style.setProperty("top",t._v$3=o),t},{_v$:void 0,_v$2:void 0,_v$3:void 0}),e}}),null),u(s=>{const r=n(L.item,t.class,{[L.itemDisabled]:$()}),d=L.itemContent,l=L.submenuArrow;return r!==s._v$4&&m(e,s._v$4=r),d!==s._v$5&&m(i,s._v$5=d),l!==s._v$6&&m(o,s._v$6=l),s},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),e}})};b(["click"]);const M=e=>({show:(t,n)=>{k("show",{id:(null==n?void 0:n.id)||(null==e?void 0:e.id),props:(null==n?void 0:n.props)||(null==e?void 0:e.props),event:t,position:null==n?void 0:n.position})},hideAll:()=>{k("hideAll")}});export{q as C,M as b,W as w,F as x};
