function e(e){const r=i(),{to:t}=m(),[n,s]=p(()=>$.post(`/admin/storage/delete?id=${e.storage.id}`)),[l,g]=p(()=>$.post(`/admin/storage/${e.storage.disabled?"enable":"disable"}?id=${e.storage.id}`));return[a(f,{onClick:()=>{t(`/@manage/storages/edit/${e.storage.id}`)},get children(){return r("global.edit")}}),a(f,{get loading(){return l()},get colorScheme(){return e.storage.disabled?"success":"warning"},onClick:async()=>{const r=await g();w(r,()=>{e.refresh()})},get children(){return r("global."+(e.storage.disabled?"enable":"disable"))}}),a(R,{get name(){return e.storage.mount_path},get loading(){return n()},onClick:async()=>{const t=await s();v(t,()=>{k.success(r("global.delete_success")),e.refresh()})}})]}function r(r){const t=i();return a(u,{w:"$full",spacing:"$2",rounded:"$lg",border:"1px solid $neutral7",get background(){return c("$neutral2","$neutral3")()},p:"$3",get _hover(){return{border:`1px solid ${d()}`}},get children(){return[a(n,{spacing:"$2",get children(){return[a(s,{fontWeight:"$medium",css:{wordBreak:"break-all"},get children(){return r.storage.mount_path}}),a(l,{colorScheme:"info",get children(){return t(`drivers.drivers.${r.storage.driver}`)}})]}}),a(n,{get children(){return[a(s,{get children(){return[g(()=>t("storages.common.status")),":Â "]}}),a(o,{css:{wordBreak:"break-all"},overflowX:"auto",get innerHTML(){return t(`storages.table_fields.status.${r.storage.status}`,void 0,r.storage.status)}})]}}),a(s,{css:{wordBreak:"break-all"},get children(){return r.storage.remark}}),a(n,{spacing:"$2",get children(){return a(e,r)}})]}})}function t(r){const t=i();return a(b,{get children(){return[a(h,{get children(){return r.storage.mount_path}}),a(h,{get children(){return t(`drivers.drivers.${r.storage.driver}`)}}),a(h,{get children(){return r.storage.order}}),a(h,{get children(){return t(`storages.table_fields.status.${r.storage.status}`,void 0,r.storage.status)}}),a(h,{get children(){return r.storage.remark}}),a(h,{get children(){return a(n,{spacing:"$2",get children(){return a(e,r)}})}})]}})}import{D as a,aw as n,ag as s,cz as l,o as i,ab as g,an as o,aE as d,a2 as c,ah as u,dw as h,dt as b,j as m,b9 as p,bq as $,K as f,bb as w,bt as v,r as k,B as _,O as C,cv as y,S as x,bF as S,bH as j,bI as B,bJ as D,bK as H,bL as O,bM as T,R as I,bN as K,bO as L,bP as M,bQ as P,a8 as X,a9 as q,dk as z,dr as E,ds as F,du as J,dv as N}from"./index-C_g2pi0Z.js";import{b as Q}from"./useTitle-a7nPsmVE.js";import{D as R}from"./DeletePopover-C_LIxHes.js";const W=()=>{const e=i();Q("manage.sidemenu.storages");const{to:s}=m(),[l,g]=p(()=>$.get("/admin/storage/list")),[d,c]=_([]),h=async()=>{const e=await g();v(e,e=>c(e.content))},[w,R]=_([]),[W,A]=_([]);(async()=>{const e=await $.get("/admin/driver/names");v(e,e=>R(e))})(),h();const G=async()=>{const r=await $.post("/admin/storage/load_all");v(r,()=>{k.success(e("storages.other.start_load_success"))})},U=C(()=>d().filter(e=>0===W().length||W().includes(e.driver))),[V,Y]=y("storages-layout","grid");return a(u,{spacing:"$3",alignItems:"start",w:"$full",get children(){return[a(n,{spacing:"$2",gap:"$2",w:"$full",wrap:{"@initial":"wrap","@md":"unset"},get children(){return[a(f,{colorScheme:"accent",get loading(){return l()},onClick:h,get children(){return e("global.refresh")}}),a(f,{onClick:()=>{s("/@manage/storages/add")},get children(){return e("global.add")}}),a(f,{colorScheme:"warning",get loading(){return l()},onClick:G,get children(){return e("storages.other.load_all")}}),a(x,{get when(){return w().length>0},get children(){return a(S,{multiple:!0,get value(){return W()},onChange:A,get children(){return[a(j,{get children(){return[a(B,{get children(){return e("storages.other.filter_by_driver")}}),a(D,{}),a(H,{})]}}),a(O,{get children(){return a(T,{get children(){return a(I,{get each(){return w()},children:r=>a(K,{value:r,get children(){return[a(L,{get children(){return e(`drivers.drivers.${r}`)}}),a(M,{})]}})})}})}})]}})}}),a(P,{get checked(){return"table"===V()},onChange:e=>{Y(e.currentTarget.checked?"table":"grid")},get children(){return e("storages.other.table_layout")}})]}}),a(X,{get children(){return[a(q,{get when(){return"grid"===V()},get children(){return a(z,{w:"$full",gap:"$2_5",templateColumns:{"@initial":"1fr","@lg":"repeat(auto-fill, minmax(324px, 1fr))"},get children(){return a(I,{get each(){return U()},children:e=>a(r,{storage:e,refresh:h})})}})}}),a(q,{get when(){return"table"===V()},get children(){return a(o,{w:"$full",overflowX:"auto",get children(){return a(E,{highlightOnHover:!0,dense:!0,get children(){return[a(F,{get children(){return a(b,{get children(){return[a(I,{each:["mount_path","driver","order","status","remark"],children:r=>a(J,{get children(){return e(`storages.common.${r}`)}})}),a(J,{get children(){return e("global.operations")}})]}})}}),a(N,{get children(){return a(I,{get each(){return U()},children:e=>a(t,{storage:e,refresh:h})})}})]}})}})}})]}})]}})};export{W as default};
