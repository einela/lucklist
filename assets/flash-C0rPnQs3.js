import{j as e,B as t,e2 as r,a4 as n,au as o,N as s,ax as l,aZ as a,D as d,ac as i,S as c,aa as f,o as u}from"./index-C_g2pi0Z.js";var y=l("<div id=swf-container>");const m=()=>{const l=u(),{replace:m}=e(),[w,h]=t(!0),[p,g]=t(!1),{ruffleJSPath:v}=r();let P=n.objs.filter(e=>e.name.toLowerCase().endsWith(".swf"));0===P.length&&(P=[n.obj]);const E=e=>{const t=P.findIndex(e=>e.name===n.obj.name);"ArrowLeft"===e.key&&t>0?m(P[t-1].name):"ArrowRight"===e.key&&t<P.length-1&&m(P[t+1].name)};o(()=>{window.addEventListener("keydown",E),L()}),s(()=>{window.removeEventListener("keydown",E);const e=document.getElementById("ruffle-player");null==e||e.remove();const t=document.getElementById("ruffle-script");null==t||t.remove()});const L=()=>{h(!0),g(!1);const e=document.getElementById("ruffle-player");if(null==e||e.remove(),window.RufflePlayer)return void j();const t=document.createElement("script");t.src=v(),t.async=!0,t.id="ruffle-script",t.onload=()=>{j()},t.onerror=()=>{g(!0),h(!1),console.error("无法加载Ruffle播放器")},document.head.appendChild(t)},j=()=>{try{const e=window.RufflePlayer.newest().createPlayer();e.id="ruffle-player",e.style.width="100%",e.style.height="100%";const t=document.getElementById("swf-container");t&&(t.innerHTML="",t.appendChild(e),e.addEventListener("loaded",()=>{h(!1)}),e.addEventListener("error",()=>{g(!0),h(!1)}),e.load(n.raw_url))}catch(e){console.error("Ruffle初始化失败:",e),g(!0),h(!1)}};return(x=y()).style.setProperty("position","relative"),x.style.setProperty("width","100%"),x.style.setProperty("height","75vh"),x.style.setProperty("display","flex"),x.style.setProperty("justify-content","center"),x.style.setProperty("align-items","center"),a(x,d(c,{get when(){return w()},get children(){return d(i,{})}}),null),a(x,d(c,{get when(){return p()},get children(){return d(f,{get msg(){return l("preview.failed_load_swf")},h:"75vh"})}}),null),x;var x};export{m as default};
