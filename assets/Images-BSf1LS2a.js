import{bU as e,P as t,D as r,aE as n,aM as a,al as i,ah as s,aR as o,S as l,dQ as c,a_ as d,aQ as g,aL as u,bT as m,av as p,O as h,R as b,a4 as j,dk as f,an as x,ag as w,dX as $,q as _,b$ as k,c0 as y,o as v}from"./index-C_g2pi0Z.js";import{b as C}from"./style-CDMzdolg.js";import{I as M}from"./ImageWithError-_fgwjkrv.js";import{O as E,g as I}from"./icon-Bsr_iDeP.js";import{I as z,u as A}from"./helper-sowZH77k.js";import{G}from"./GridItem-DNZtw62N.js";import"./index-DJbwiRYC.js";import"./Layout-Bzme3dyC.js";import"./useTitle-a7nPsmVE.js";import"./FolderTree-BBXJf3vD.js";import"./index-DCAvcVIo.js";import"./index-B5f7FnMG.js";import"./share-CvvitCHF.js";import"./index-CRWiqiAK.js";const L=h=>{const{isHide:b}=e();if(b(h.obj)||h.obj.type!==E.IMAGE)return null;const{setPathAs:j}=t(),f=r(a,{get color(){return n()},boxSize:"$12",get as(){return I(h.obj)}}),{show:x}=C({id:1}),{rawLink:w}=i(),{openWithDoubleClick:$,toggleWithClick:_,restoreSelectionCache:k}=A();return r(p.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return r(s,{w:"$full",get classList(){return{selected:!!h.obj.selected}},class:"image-item viselect-item",get"data-index"(){return h.index},p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:`2px solid ${n()}`}},get cursor(){return $()||_()?"default":"pointer"},onMouseEnter:()=>{j(h.obj.name,h.obj.is_dir,!0)},onContextMenu:e=>{m(()=>{c(h.index,!0,!0)}),x(e,{props:h.obj})},get children(){return r(o,{w:"$full",pos:"relative",get children(){return[r(l,{get when(){return d()},get children(){return r(z,{pos:"absolute",left:"$1",top:"$1","on:mousedown":e=>{e.stopPropagation()},"on:click":e=>{e.stopPropagation()},get checked(){return h.obj.selected},onChange:e=>{c(h.index,e.target.checked)}})}}),r(M,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return r(u,{size:"lg"})},fallbackErr:f,get src(){return w(h.obj)},loading:"lazy","on:dblclick":()=>{$()&&(g.emit("gallery",h.obj.name),c(h.index,!0,!0))},"on:click":e=>{if(!$()&&!(e.ctrlKey||e.metaKey||e.shiftKey)&&k())return _()?c(h.index,!h.obj.selected):void g.emit("gallery",h.obj.name)}})]}})}})}})},P=e=>{const t=v(),n=h(()=>r(f,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return r(b,{get each(){return j.objs.filter(e=>e.is_dir)},children:(e,t)=>r(G,{obj:e,get index(){return t()}})})}})),{registerSelectContainer:a,captureContentMenu:i}=A();return a(),r(s,{"oncapture:contextmenu":i,class:"viselect-container",spacing:"$2",w:"$full",get children(){return[r(l,{get when(){return"visible"===_.show_count_msg},get children(){return r(x,{w:"100%",textAlign:"left",pl:"$2",get children(){return r(w,{size:"sm",color:"$neutral11",get children(){return $(E.IMAGE)}})}})}}),r(l,{get when(){return"top"===_.show_folder_in_image_view},get children(){return n()}}),r(l,{get when(){return e.images.length>0},get fallback(){return r(y,{m:"$2",get children(){return t("home.no_images")}})},get children(){return r(k,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return r(b,{get each(){return j.objs},children:(e,t)=>r(L,{obj:e,get index(){return t()}})})}})}}),r(l,{get when(){return"bottom"===_.show_folder_in_image_view},get children(){return n()}})]}})};export{P as default};
